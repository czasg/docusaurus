"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[4922],{9041:function(n){n.exports=JSON.parse('{"blogPosts":[{"id":"Go\u5b9e\u73b0\u975e\u8df3\u8f6c\u7684http\u8bf7\u6c42","metadata":{"permalink":"/docusaurus/blog/2022/11/17/Go\u5b9e\u73b0\u975e\u8df3\u8f6chttp\u8bf7\u6c42","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/11-17-Go\u5b9e\u73b0\u975e\u8df3\u8f6chttp\u8bf7\u6c42/index.md","source":"@site/blog/2022/11-17-Go\u5b9e\u73b0\u975e\u8df3\u8f6chttp\u8bf7\u6c42/index.md","title":"Go\u5b9e\u73b0\u975e\u8df3\u8f6c\u7684http\u8bf7\u6c42","description":"Go http \u53d1\u8d77\u8bf7\u6c42\u65f6\uff0c\u4e00\u65e6\u5b58\u5728302\u7b49\u8df3\u8f6c\u8bf7\u6c42\u7684\u573a\u666f\uff0c\u4f1a\u9ed8\u8ba4\u5e2e\u4f60\u8df3\u8f6c\u8fc7\u53bb\u3002","date":"2022-11-17T00:00:00.000Z","formattedDate":"November 17, 2022","tags":[{"label":"goalng","permalink":"/docusaurus/blog/tags/goalng"}],"readingTime":0.625,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"nextItem":{"title":"\u8bb0\u4e00\u6b21\u5173\u4e8e\u6587\u4ef6IO\u7684\u4e89\u6267","permalink":"/docusaurus/blog/2022/11/11/\u8bb0\u4e00\u6b21\u6587\u4ef6IO\u5f02\u5e38"}},"content":"\x3c!--truncate--\x3e\\n\\nGo http \u53d1\u8d77\u8bf7\u6c42\u65f6\uff0c\u4e00\u65e6\u5b58\u5728302\u7b49\u8df3\u8f6c\u8bf7\u6c42\u7684\u573a\u666f\uff0c\u4f1a\u9ed8\u8ba4\u5e2e\u4f60\u8df3\u8f6c\u8fc7\u53bb\u3002\\n\\n\u6bd4\u5982\u4f60\u53ea\u662f\u60f3\u7b80\u5355\u7684 Head \u8bf7\u6c42\uff0c\u4f46\u5f53\u5bf9\u65b9\u54cd\u5e94 302 \u65f6\uff0c\u5b9e\u9645\u6700\u540e\u83b7\u53d6\u5230\u7684\u5c31\u662f Location \u7684\u7ed3\u679c\u3002\\n\\n\u5b9e\u9645\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49 http client \u5b9e\u73b0\u975e\u8df3\u8f6c\u8bf7\u6c42\uff1a\\n```go\\nvar client = http.Client{\\n\\tCheckRedirect: func(req *http.Request, via []*http.Request) error {\\n\\t\\treturn http.ErrUseLastResponse\\n\\t},\\n}\\n```\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u8bb0\u4e00\u6b21\u5173\u4e8e\u6587\u4ef6IO\u7684\u4e89\u6267","metadata":{"permalink":"/docusaurus/blog/2022/11/11/\u8bb0\u4e00\u6b21\u6587\u4ef6IO\u5f02\u5e38","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/11-11-\u8bb0\u4e00\u6b21\u6587\u4ef6IO\u5f02\u5e38/index.md","source":"@site/blog/2022/11-11-\u8bb0\u4e00\u6b21\u6587\u4ef6IO\u5f02\u5e38/index.md","title":"\u8bb0\u4e00\u6b21\u5173\u4e8e\u6587\u4ef6IO\u7684\u4e89\u6267","description":"\u80cc\u666f\u662f\u6709\u4e2a\u9700\u6c42\u9700\u8981\u4e0b\u8f7d\u6587\u4ef6\u5e76\u8ba1\u7b97\u6b64\u6587\u4ef6\u7684MD5\u3002","date":"2022-11-11T00:00:00.000Z","formattedDate":"November 11, 2022","tags":[{"label":"\u672a\u5b9a\u4e49","permalink":"/docusaurus/blog/tags/\u672a\u5b9a\u4e49"}],"readingTime":1.58,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"Go\u5b9e\u73b0\u975e\u8df3\u8f6c\u7684http\u8bf7\u6c42","permalink":"/docusaurus/blog/2022/11/17/Go\u5b9e\u73b0\u975e\u8df3\u8f6chttp\u8bf7\u6c42"},"nextItem":{"title":"Iaas & Paas & Saas","permalink":"/docusaurus/blog/2022/11/08/IaasPaasSaas"}},"content":"\u80cc\u666f\u662f\u6709\u4e2a\u9700\u6c42\u9700\u8981\u4e0b\u8f7d\u6587\u4ef6\u5e76\u8ba1\u7b97\u6b64\u6587\u4ef6\u7684MD5\u3002\\n\\n\u7136\u540e\u540c\u4e8b\u5f00\u53d1\u7684\uff08Go\uff09\u7a0b\u5e8f\u662f\u5148\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u7136\u540e\u5199\u5165\u4e0b\u8f7d\u6570\u636e\u3002\u518d\u6ca1\u6709\u5173\u95ed\u6587\u4ef6\u7684\u524d\u63d0\u4e0b\uff0c\u91cd\u65b0\u53c8\u5f00\u542f\u4e86\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6\u6d41\u6765\u8ba1\u7b97MD5\u3002\\n\\n\u7531\u6b64\u5f15\u53d1\u4e86\u4e00\u4e9b\u4e89\u6267...\\n\\n\x3c!--truncate--\x3e\\n\\n\u4e3a\u6b64\u6211\u636e\u7406\u529b\u4e89\uff1a\\n\\n\u6587\u4ef6IO\u5728`write`\u7684\u8fc7\u7a0b\uff0c\u662f\u4e0d\u4fdd\u8bc1\u843d\u76d8\u7684\uff0c\u5373\u6709\u4e00\u90e8\u5206\u6570\u636e\u4f1a\u6682\u5b58\u5728\u5185\u5b58\u4e2d\u3002   \\n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u91cd\u65b0\u521b\u5efa\u4e00\u4e2a\u53ea\u8bfb\u7684\u6587\u4ef6\u6d41\uff0c\u53ef\u80fd\u8bfb\u4e0d\u5230\u5728\u5185\u5b58\u4e2d\u7684\u6570\u636e...\\n\\n\u4f46\u662f\u540c\u4e8b\u7528\u5b9e\u9645\u8bc1\u660e\u4e86\uff0c\u8fd9\u6bb5\u4ee3\u7801\u518d\u5b9e\u9645\u8ba1\u7b97\u8fc7\u7a0b\uff0c\u5e76\u6ca1\u6709\u4efb\u4f55\u95ee\u9898...\\n\\n\u6211\u81ea\u5df1\u4e5f\u65e0\u6cd5\u590d\u73b0...\\n\\n\u4e4b\u540e\u7528`Python`\u6d4b\u8bd5\u4e86\u4e0b\uff0c\u53d1\u73b0\u786e\u5b9e\u8bfb\u4e0d\u5230\uff0c\u4f46`Go`\u5c31\u662f\u53ef\u4ee5\u8bfb\u53d6\u5230...\\n\\n```python\\nwith open(\\"tmpfile\\", \\"w\\", encoding=\\"utf-8) as w:\\n    w.write(\\"hello world\\")\\n    \\n    with open(\\"tmpfile\\", \\"r\\", encoding=\\"utf-8\\") as r:\\n        assert r.read() == \\"hello world\\"\\n```\\n\\n\u6700\u540e\u603b\u7ed3\uff1a   \\n\\nGo \u6587\u4ef6\u53e5\u67c4\u8c03\u7528 Write \u65f6\u662f\u76f4\u63a5\u8c03\u7528\u7684\u7cfb\u7edf\u63a5\u53e3\uff0c\u6545\u53ef\u4ee5\u8bfb\u53d6\u5230\u672a\u843d\u76d8\u3002\\n\\nPython \u5219\u662f\u81ea\u5df1\u5b9e\u73b0\u4e86\u7f13\u5b58\u673a\u5236\u3002\u5728 Go \u4e2d\u4e5f\u6709 bufio \u5e93\u53ef\u4ee5\u5b9e\u73b0\u7c7b\u4f3c\u7684\u673a\u5236\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"Iaas & Paas & Saas","metadata":{"permalink":"/docusaurus/blog/2022/11/08/IaasPaasSaas","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/11-08-IaasPaasSaas/index.md","source":"@site/blog/2022/11-08-IaasPaasSaas/index.md","title":"Iaas & Paas & Saas","description":"Iaas: Infrastructure as a Service \u57fa\u7840\u8bbe\u65bd\u5373\u670d\u52a1","date":"2022-11-08T00:00:00.000Z","formattedDate":"November 8, 2022","tags":[{"label":"\u672a\u5b9a\u4e49","permalink":"/docusaurus/blog/tags/\u672a\u5b9a\u4e49"}],"readingTime":1.83,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u8bb0\u4e00\u6b21\u5173\u4e8e\u6587\u4ef6IO\u7684\u4e89\u6267","permalink":"/docusaurus/blog/2022/11/11/\u8bb0\u4e00\u6b21\u6587\u4ef6IO\u5f02\u5e38"},"nextItem":{"title":"SQL\u968f\u5f55","permalink":"/docusaurus/blog/2022/10/17/SQL\u968f\u5f55"}},"content":"**Iaas**: Infrastructure as a Service \u57fa\u7840\u8bbe\u65bd\u5373\u670d\u52a1\\n\\n**Paas**: Platform as a service \u5e73\u53f0\u5373\u670d\u52a1\\n\\n**Saas**: Software as a service \u8f6f\u4ef6\u5373\u670d\u52a1\\n\\n\x3c!--truncate--\x3e\\n\\n\u4ee5\u4e2a\u4eba\u642d\u5efa\u670d\u52a1\u4e3a\u4f8b\uff1a\\n\\n\u5f53\u6211\u4eec\u5f00\u53d1\u597d\u4e00\u4e2a\u670d\u52a1\uff0c\u9700\u8981\u8fdb\u884c\u90e8\u7f72\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8d2d\u4e70\u7269\u7406\u673a\u8fdb\u884c\u90e8\u7f72\uff0c\u4f46\u8fd9\u6837\u6211\u4eec\u5c31\u9700\u8981\u76f4\u63a5\u9762\u5bf9\u7269\u7406\u673a\u7684\u7ef4\u62a4\uff0c\u8fd8\u6709\u7f51\u7edc\u7ef4\u62a4\u7b49\u95ee\u9898\u3002    \\n\u4e3a\u4e86\u907f\u514d\u8fd9\u4e9b\u7e41\u7410\u7684\u95ee\u9898\uff0c\u6211\u4eec\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u76f4\u63a5\u53bb\u4e91\u670d\u52a1\u5382\u5546\u79df\u4e00\u53f0\u4e91\u670d\u52a1\u5668\uff0c\u7136\u540e\u5c06\u6211\u4eec\u7684\u7a0b\u5e8f\u90e8\u7f72\u5728\u6b64\u670d\u52a1\u5668\u4e0a\u3002   \\n\u8be5\u4e91\u670d\u52a1\u5668\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u8ba1\u7b97\u3001\u5b58\u50a8\u3001\u7f51\u7edc\u7b49\u786c\u4ef6\u57fa\u7840\u80fd\u529b\uff0c\u8fd9\u79cd\u79df\u786c\u4ef6\u8bbe\u5907\u7684\u670d\u52a1\u5c31\u662fIaas\u3002\\n\\n\u6240\u4ee5\u5982\u679c\u4f60\u6709\u8fc7\u8d2d\u4e70\u8fc7\u670d\u52a1\u5668\u7684\u7cbe\u529b\u7ecf\u5386\uff0c\u90a3\u5176\u5b9e\u4f60\u5c31\u5df2\u7ecf\u8d2d\u4e70\u8fc7Iaas\u670d\u52a1\u4e86~\\n\\n\u5982\u679c\u6211\u4eec\u5f00\u53d1\u7684\u670d\u52a1\uff0c\u6d89\u53ca\u7c7b\u4f3c\u652f\u4ed8\u7b49\u4e09\u65b9\u80fd\u529b\u65f6\uff0c\u6211\u4eec\u51e0\u4e4e\u4e0d\u53ef\u80fd\u81ea\u5df1\u5199\u4e00\u5957\u652f\u4ed8\u4ea4\u6613\u7cfb\u7edf\uff0c\u66f4\u591a\u7684\u662f\u5bf9\u63a5\u5fae\u4fe1\u3001\u652f\u4ed8\u5b9d\u7b49\u4e09\u65b9\u652f\u4ed8\u63a5\u53e3\u3002    \\n\u8fd9\u7c7b\u670d\u52a1\u5c31\u662fPaas\uff0c\u5e73\u53f0\u5373\u670d\u52a1\u3002\\n\\n\\n\u4ee5\u4e0a\u670d\u52a1\u90fd\u662f\u81ea\u5df1\u5f00\u53d1\u7684\uff0c\u5e02\u9762\u4e0a\u8fd8\u6709\u5f88\u591a\u670d\u52a1\u662f\u901a\u8fc7\u63d0\u4f9b\u8f6f\u4ef6\u670d\u52a1\uff0c\u5982\u679c\u8d2d\u7269\u7cfb\u7edf\u3001\u7269\u6d41\u7cfb\u7edf\u3001\u91c7\u8d2d\u7cfb\u7edf\u7b49\uff0c\u8fd9\u4e9b\u5c31\u662fSaas\u670d\u52a1\u4e86\u3002\\n\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"SQL\u968f\u5f55","metadata":{"permalink":"/docusaurus/blog/2022/10/17/SQL\u968f\u5f55","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/10-17-SQL\u968f\u5f55/index.md","source":"@site/blog/2022/10-17-SQL\u968f\u5f55/index.md","title":"SQL\u968f\u5f55","description":"\u9700\u6c42\u8bf4\u660e\uff1a\u5728\u4f17\u591a\u51fd\u6570\u4e2d\uff0c\u627e\u5230\u4e0e\u76ee\u6807\u8868\u76f8\u5173\u7684\u51fd\u6570\u3002","date":"2022-10-17T00:00:00.000Z","formattedDate":"October 17, 2022","tags":[{"label":"sql","permalink":"/docusaurus/blog/tags/sql"}],"readingTime":0.49,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"Iaas & Paas & Saas","permalink":"/docusaurus/blog/2022/11/08/IaasPaasSaas"},"nextItem":{"title":"SQL\u968f\u5f55","permalink":"/docusaurus/blog/2022/10/14/SQL\u968f\u5f55"}},"content":"```sql\\nSELECT\\n\\tproname \\nFROM\\n\\tpg_proc \\nWHERE\\n\\tprosrc LIKE\'%table_name%\';\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u9700\u6c42\u8bf4\u660e\uff1a\u5728\u4f17\u591a\u51fd\u6570\u4e2d\uff0c\u627e\u5230\u4e0e\u76ee\u6807\u8868\u76f8\u5173\u7684\u51fd\u6570\u3002\\n\\n\u5b9e\u73b0\u8bf4\u660e\uff1a\\n- pg_proc\uff1apg\u5b58\u50a8\u51fd\u6570\u7684\u8868\\n- prosrc\uff1a\u662f\u51fd\u6570\u6e90\u7801\uff0c\u901a\u8fc7\u6a21\u7cca\u5339\u914d\u67e5\u8be2\u6240\u6709\u6e90\u7801\u4e2d\uff0c\u4e0e\u76ee\u6807\u8868\u6709\u5173\u7684\u51fd\u6570\\n- proname\uff1a\u51fd\u6570\u540d\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"SQL\u968f\u5f55","metadata":{"permalink":"/docusaurus/blog/2022/10/14/SQL\u968f\u5f55","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/10-14-SQL\u968f\u5f55/index.md","source":"@site/blog/2022/10-14-SQL\u968f\u5f55/index.md","title":"SQL\u968f\u5f55","description":"\u9700\u6c42\u8bf4\u660e\uff1atable.key\u662f\u4e00\u4e2aJSONB\u5b57\u6bb5\uff0c\u5b58\u50a8\u6570\u636e\u4e3a\uff1a[{\\"rule\\": [\\"hash=hashstring;\\"]}]\uff0c\u73b0\u9700\u8981\u89e3\u6790\u6b64\u6570\u636e\uff0c","date":"2022-10-14T00:00:00.000Z","formattedDate":"October 14, 2022","tags":[{"label":"sql","permalink":"/docusaurus/blog/tags/sql"}],"readingTime":0.555,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"SQL\u968f\u5f55","permalink":"/docusaurus/blog/2022/10/17/SQL\u968f\u5f55"},"nextItem":{"title":"\u5982\u4f55\u7406\u89e3\u5f15\u64ce","permalink":"/docusaurus/blog/2022/10/07/\u5982\u4f55\u7406\u89e3\u5f15\u64ce"}},"content":"```sql\\nSELECT \\n    SUBSTRING( ( table.key -> 0- > \'rule\' -> 0 ) :: TEXT, \'=*([0-9a-zA-Z]*);\' ) AS hash \\nFROM\\n    table;\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u9700\u6c42\u8bf4\u660e\uff1a`table.key`\u662f\u4e00\u4e2a`JSONB`\u5b57\u6bb5\uff0c\u5b58\u50a8\u6570\u636e\u4e3a\uff1a`[{\\"rule\\": [\\"hash=hashstring;\\"]}]`\uff0c\u73b0\u9700\u8981\u89e3\u6790\u6b64\u6570\u636e\uff0c\\n\u5e76\u622a\u53d6\u51fa\u6b64\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u54c8\u5e0c\u6570\u636e\u3002\\n\\n\\n\u53c2\u8003\uff1a[9.15. JSON \u51fd\u6570\u548c\u64cd\u4f5c\u7b26](http://postgres.cn/docs/12/functions-json.html)      \\n\u53c2\u8003\uff1a[9.4. \u5b57\u7b26\u4e32\u51fd\u6570\u548c\u64cd\u4f5c\u7b26](http://postgres.cn/docs/12/functions-string.html)     \\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u5982\u4f55\u7406\u89e3\u5f15\u64ce","metadata":{"permalink":"/docusaurus/blog/2022/10/07/\u5982\u4f55\u7406\u89e3\u5f15\u64ce","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/10-07-\u5982\u4f55\u7406\u89e3\u5f15\u64ce/index.md","source":"@site/blog/2022/10-07-\u5982\u4f55\u7406\u89e3\u5f15\u64ce/index.md","title":"\u5982\u4f55\u7406\u89e3\u5f15\u64ce","description":"\u5728\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u7ecf\u5e38\u9047\u5230\u5404\u79cd\u9ad8\u7ea7\u8bcd\u6c47\uff0c\u6bd4\u5982\u75c5\u6bd2\u67e5\u6740\u5f15\u64ce\u3001\u4e91\u5f15\u64ce\u7b49\u7b49\u3002","date":"2022-10-07T00:00:00.000Z","formattedDate":"October 7, 2022","tags":[{"label":"\u672a\u5b9a\u4e49","permalink":"/docusaurus/blog/tags/\u672a\u5b9a\u4e49"}],"readingTime":0.42,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"SQL\u968f\u5f55","permalink":"/docusaurus/blog/2022/10/14/SQL\u968f\u5f55"},"nextItem":{"title":"\u5982\u4f55\u4ece\u96f6\u5f00\u59cb\u8bbe\u8ba1\u4e00\u4e2a\u540e\u7aef\u6846\u67b6","permalink":"/docusaurus/blog/2022/07/18/\u5982\u4f55\u4ece\u96f6\u5f00\u59cb\u8bbe\u8ba1\u4e00\u4e2a\u540e\u7aef\u6846\u67b6"}},"content":"\u5728\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u7ecf\u5e38\u9047\u5230\u5404\u79cd\u9ad8\u7ea7\u8bcd\u6c47\uff0c\u6bd4\u5982\u75c5\u6bd2\u67e5\u6740\u5f15\u64ce\u3001\u4e91\u5f15\u64ce\u7b49\u7b49\u3002   \\n\\n\u6211\u4e2a\u4eba\u7406\u89e3\uff0c\u5f15\u64ce\u66f4\u591a\u7528\u4e8e\u5b9a\u4e49\u4e00\u79cd\u7ecf\u8fc7\u9ad8\u5ea6\u62bd\u8c61\u7684\u4e1a\u52a1\u6267\u884c\u903b\u8f91\u3002   \\n\\n\\n\x3c!--truncate--\x3e\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u5982\u4f55\u4ece\u96f6\u5f00\u59cb\u8bbe\u8ba1\u4e00\u4e2a\u540e\u7aef\u6846\u67b6","metadata":{"permalink":"/docusaurus/blog/2022/07/18/\u5982\u4f55\u4ece\u96f6\u5f00\u59cb\u8bbe\u8ba1\u4e00\u4e2a\u540e\u7aef\u6846\u67b6","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/07-18-\u5982\u4f55\u4ece\u96f6\u5f00\u59cb\u8bbe\u8ba1\u4e00\u4e2a\u540e\u7aef\u6846\u67b6/index.md","source":"@site/blog/2022/07-18-\u5982\u4f55\u4ece\u96f6\u5f00\u59cb\u8bbe\u8ba1\u4e00\u4e2a\u540e\u7aef\u6846\u67b6/index.md","title":"\u5982\u4f55\u4ece\u96f6\u5f00\u59cb\u8bbe\u8ba1\u4e00\u4e2a\u540e\u7aef\u6846\u67b6","description":"web\u63a2\u79d8","date":"2022-07-18T00:00:00.000Z","formattedDate":"July 18, 2022","tags":[{"label":"python","permalink":"/docusaurus/blog/tags/python"}],"readingTime":3.23,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u5982\u4f55\u7406\u89e3\u5f15\u64ce","permalink":"/docusaurus/blog/2022/10/07/\u5982\u4f55\u7406\u89e3\u5f15\u64ce"},"nextItem":{"title":"\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u7ed3\u6784\u5316\u65e5\u5fd7","permalink":"/docusaurus/blog/2022/07/17/\u7ed3\u6784\u5316\u65e5\u5fd7"}},"content":"\x3c!--truncate--\x3e\\n\\n## web\u63a2\u79d8\\n\u6211\u4eec\u5e38\u8bf4\u7684web\u670d\u52a1\uff0c\u901a\u5e38\u662f\u6307\u7684HTTP WEB\u670d\u52a1\u3002\\n\\n\u5728\u4e0d\u4e86\u89e3web\u670d\u52a1\u4e4b\u524d\uff0c\u6211\u4e00\u76f4\u5f88\u597d\u5947\u4e00\u4ef6\u4e8b\u60c5\u3002     \\n\u6211\u5728\u6d4f\u89c8\u5668\u91cc\u8f93\u5165\u4e00\u4e2a\u5730\u5740\uff0c\u4ed6\u4f1a\u8fd4\u56de\u4e00\u4e9b\u5185\u5bb9\u7ed9\u6211\u3002\\n\u6211\u4e00\u76f4\u56f0\u60d1\u4e8e\u4ed6\u5b9e\u73b0\u7684\u539f\u7406\u662f\u4ec0\u4e48\uff1f\u6211\u662f\u4e0d\u662f\u4e5f\u53ef\u4ee5\u81ea\u5df1\u642d\u5efa\u4e00\u4e2a\u8fd9\u6837\u7684\u670d\u52a1\uff1f\u4ee5\u524d\u68a6\u60f3\u5c31\u662f\u60f3\u81ea\u5df1\u642d\u5efa\u4e00\u4e2aweb\u670d\u52a1\u3002\\n\\n\u5982\u679c\u4f60\u5b66\u8fc7python\uff0c\u90a3\u4f60\u4e00\u5b9a\u7528\u8fc7requests\u5e93\uff0c\u6211\u4eec\u7528\u5b83\u6765\u53d1\u8d77\u4e00\u6b21HTTP\u8bf7\u6c42\\n```python\\nimport requests  # pip install requests\\n\\nresp = requests.get(\\"http://www.baidu.com\\")\\nprint(resp.text)\\n```\\n\\n\u8fd9\u662f\u4e00\u6bb5\u975e\u5e38\u7b80\u5355\u7684\u4ee3\u7801\uff0c\u4f46\u4e0d\u77e5\u9053\u4f60\u4eec\u6709\u6ca1\u6709\u60f3\u8fc7\uff0c\u5b83\u6700\u5e95\u5c42\u662f\u600e\u4e48\u5b9e\u73b0\u7684\uff0c\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u7b80\u5355\u7684\u51e0\u884c\u4ee3\u7801\uff0c\u5c31\u53ef\u4ee5\u53d1\u8d77\u4e00\u6b21HTTP\u8bf7\u6c42\u3002\\n```python\\nimport socket\\n\\nsock = socket.socket()\\nsock.connect((\\"www.baidu.com\\", 80))  # \u5efa\u7acbTCP\u8fde\u63a5\\n\\nsock.sendall(\\"GET / HTTP/1.1\\\\r\\\\n\\\\r\\\\n\\".encode())  # \u81ea\u5df1\u6784\u9020\u8bf7\u6c42\uff0c\u53d1\u9001\u7ed9\u670d\u52a1\u7aef\\nprint(sock.recv(1024*1024).decode())\\n```\\n\\nHTTP\u8bf7\u6c42\u62a5\u6587\\n* \u8bf7\u6c42\u884c\\n* \u8bf7\u6c42\u5934\\n* \u8bf7\u6c42\u4f53\\n\\nHTTP\u54cd\u5e94\u62a5\u6587\\n* \u54cd\u5e94\u884c\\n* \u54cd\u5e94\u5934\\n* \u54cd\u5e94\u4f53\\n\\n\u629b\u5f00\u6240\u6709\u7684\u4e1a\u52a1\uff0c\u6240\u6709\u7684\u5b9e\u73b0\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0bHTTP\u7684\u8bf7\u6c42\uff0c\u6216\u8005\u8bf4web\u670d\u52a1\u7684\u672c\u8d28\uff0c\u5176\u5b9e\u5c31\u662f\u6211\u7ed9\u4f60\u4e00\u6bb5\u6587\u672c\uff0c\u4f60\u7ed9\u6211\u4e00\u6bb5\u6587\u672c\u3002\\n\\n\u6846\u67b6\u4f7f\u7528\u591a\u4e86\uff0c\u7279\u522b\u662f\u4e00\u4e9b\u96c6\u6210\u5ea6\u5f88\u9ad8\u7684\u6846\u67b6\uff0c\u53ef\u80fd\u4f1a\u4f7f\u6211\u4eec\u5931\u53bb\u4e00\u4e9b\u57fa\u7840\u7684\u80fd\u529b\u3001\u5224\u65ad\u529b\u3002\\n\\n## \u5982\u4f55\u5b9e\u73b0\u4e00\u4e2aweb\u670d\u52a1\\n\u6211\u4eec\u5148\u6765\u770b\u770bflask\u6846\u67b6\u5982\u4f55\u5b9e\u73b0\u4e00\u4e2aweb\u670d\u52a1\\n```python\\nimport flask\\n\\napp = flask.Flask(__name__)\\napp.route(\\"/hello\\", methods=[\\"GET\\"])(lambda: \\"hello world\\")\\napp.run()\\n```\\n\u901a\u8fc7route\u6ce8\u518c\u4e00\u4e2a\u8def\u7531\uff0c\u7136\u540e\u7ed1\u5b9a\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0c\u6700\u540e\u542f\u52a8\u670d\u52a1\u3002\\n\\n\u8fd9\u662f\u6211\u4eec\u80fd\u770b\u5230\u7684\u6846\u67b6\uff0c\u90a3\u4e48\u6846\u67b6\u5e2e\u6211\u4eec\u505a\u4e86\u4ec0\u4e48\u4e8b\u60c5\u5462\uff1f   \\n\u9996\u5148\uff0c\u7b2c\u4e00\u4ef6\u4e8b\u80af\u5b9a\u662f\u5e2e\u6211\u4eec\u89e3\u6790HTTP\u8bf7\u6c42\u62a5\u6587\uff0c\u7136\u540e\u4f60\u89c9\u5f97\u4ed6\u4eec\u4f1a\u505a\u4ec0\u4e48\u4e8b\u60c5\u3002   \\n\u4ed6\u4f1a\u53bb\u5339\u914d\u8def\u7531\uff0c\u7136\u540e\u6267\u884c\u5bf9\u5e94\u7684\u5904\u7406\u51fd\u6570\u3002  \\n\\n\u63a5\u7740\uff0c\u6211\u4eec\u6765\u770b\u4e0b\u5982\u4f55\u57fa\u4e8esocket\u5b9e\u73b0\u65b9\u5f0f\u3002   \\n\u57fa\u4e8esocket\uff0c\u6211\u4eec\u53ef\u4ee5\u975e\u5e38\u8f7b\u677e\u7684\u5b9e\u73b0\u4e00\u4e2a\u7b80\u964b\u7684web\u670d\u52a1\uff0c\u8fd9\u4e2a\u670d\u52a1\u63a5\u6536\u4efb\u4f55\u8bf7\u6c42\uff0c\u7136\u540e\u54cd\u5e94`hello world`\\n```python\\nimport socket\\n\\nsock = socket.socket()\\nsock.bind((\\"localhost\\", 8080))\\nsock.listen()\\n\\nwhile True:\\n    s, addr = sock.accept()\\n    print(s.recv(1024*1024).decode())\\n    s.sendall(\\"HTTP/1.1 200 ok\\\\r\\\\nContent-Length: 11\\\\r\\\\n\\\\r\\\\nhello world\\".encode())\\n    s.close()\\n```\\n\\n## \u5982\u4f55\u5b9e\u73b0\u4e00\u4e2aweb\u6846\u67b6\\n\u6846\u67b6\u7684\u76ee\u7684\uff0c\u662f\u4e3a\u4e86\u51cf\u5c11\u91cd\u590d\u6027\u5de5\u4f5c\u3002\u90a3\u4e48\u6211\u4eec\u5b9e\u73b0\u8fd9\u4e2a\u6846\u67b6\u7684\u76ee\u7684\uff0c\u5c31\u662f\u4e3a\u4e86\u4e0d\u5728\u81ea\u5df1\u89e3\u6790HTTP\u8bf7\u6c42\u548c\u6784\u9020HTTP\u54cd\u5e94\u3002\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u7ed3\u6784\u5316\u65e5\u5fd7","metadata":{"permalink":"/docusaurus/blog/2022/07/17/\u7ed3\u6784\u5316\u65e5\u5fd7","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/07-17-\u7ed3\u6784\u5316\u65e5\u5fd7/index.md","source":"@site/blog/2022/07-17-\u7ed3\u6784\u5316\u65e5\u5fd7/index.md","title":"\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u7ed3\u6784\u5316\u65e5\u5fd7","description":"\u7ed3\u6784\u5316\u65e5\u5fd7\uff0c\u5373\u65e5\u5fd7\u9075\u5faa\u4e00\u5b9a\u7684\u7ed3\u6784\u3002\u7a0b\u5e8f\u8f93\u51fa\u5185\u5bb9\u4e0d\u518d\u662f\u81ea\u7531\u683c\u5f0f\uff0c\u800c\u662f\u7c7b\u4f3cJSON\u683c\u5f0f\u7684\u6587\u672c\u3002","date":"2022-07-17T00:00:00.000Z","formattedDate":"July 17, 2022","tags":[{"label":"python","permalink":"/docusaurus/blog/tags/python"}],"readingTime":1.12,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u5982\u4f55\u4ece\u96f6\u5f00\u59cb\u8bbe\u8ba1\u4e00\u4e2a\u540e\u7aef\u6846\u67b6","permalink":"/docusaurus/blog/2022/07/18/\u5982\u4f55\u4ece\u96f6\u5f00\u59cb\u8bbe\u8ba1\u4e00\u4e2a\u540e\u7aef\u6846\u67b6"},"nextItem":{"title":"\u4e91\u670d\u52a1\u521d\u8bc6","permalink":"/docusaurus/blog/2022/07/12/\u4e91\u670d\u52a1\u521d\u8bc6"}},"content":"\u7ed3\u6784\u5316\u65e5\u5fd7\uff0c\u5373\u65e5\u5fd7\u9075\u5faa\u4e00\u5b9a\u7684\u7ed3\u6784\u3002\u7a0b\u5e8f\u8f93\u51fa\u5185\u5bb9\u4e0d\u518d\u662f\u81ea\u7531\u683c\u5f0f\uff0c\u800c\u662f\u7c7b\u4f3cJSON\u683c\u5f0f\u7684\u6587\u672c\u3002\\n\\n\u7ed3\u6784\u5316\u65e5\u5fd7\u7684\u6700\u5927\u597d\u5904\u5c31\u662f\u7b80\u5316\u65e5\u5fd7\u89e3\u6790\uff0c\u4fbf\u4e8e\u65e5\u5fd7\u5206\u7c7b\u3001\u805a\u5408\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u5b9a\u4e49\u6807\u51c6\\n\u5728\u5f00\u59cb\u7f16\u7a0b\u524d\uff0c\u9700\u8981\u5148\u8bbe\u8ba1\u597d\u9879\u76ee\u7684\u6574\u4f53\u67b6\u6784\u3002\\n\\n### \u65e5\u5fd7\u57fa\u7840\u4fe1\u606f\\n\u9996\u5148\uff0c\u65e5\u5fd7\u683c\u5f0f\u6211\u4eec\u9009\u62e9JSON\u683c\u5f0f\u3002   \\n\u6b64\u5916\uff0c\u8fd8\u9700\u8981\u9644\u5e26\u57fa\u7840\u65e5\u5fd7\u4fe1\u606f\uff0c\u8fd9\u91cc\u6211\u4eec\u9009\u62e9\u65f6\u95f4\u548c\u65e5\u5fd7\u7ea7\u522b\u3002  \\n```python\\nimport json, datetime\\n\\ndef log(msg):\\n    print(json.dumps(dict(\\n        time=f\\"{datetime.datetime.now()}\\",\\n        level=\\"info\\",\\n        msg=msg,\\n    )))\\nlog(\\"hello world\\")\\n```\\n\u8fd9\u6837\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u7ed3\u6784\u5316\u65e5\u5fd7\u96cf\u5f62\u5c31\u5df2\u7ecf\u51fa\u73b0\u4e86\u3002\\n\\n### \u9879\u76ee\u7ed3\u6784\\n* Logger: \u65e5\u5fd7\u5b9e\u4f53\\n    * Level: \u65e5\u5fd7\u7ea7\u522b\\n    * Format: \u65e5\u5fd7\u683c\u5f0f\\n    * Hook: \u65e5\u5fd7\u94a9\u5b50\\n* Entry: \u6570\u636e\u5b9e\u4f53\\n    * Data: \u6570\u636e\\n\\n\\n\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u4e91\u670d\u52a1\u521d\u8bc6","metadata":{"permalink":"/docusaurus/blog/2022/07/12/\u4e91\u670d\u52a1\u521d\u8bc6","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/07-12-\u4e91\u670d\u52a1\u521d\u8bc6/index.md","source":"@site/blog/2022/07-12-\u4e91\u670d\u52a1\u521d\u8bc6/index.md","title":"\u4e91\u670d\u52a1\u521d\u8bc6","description":"Serverless\uff1a\u4ece\u4f7f\u7528\u89d2\u5ea6\u770b\u4e0d\u89c1\u670d\u52a1\u5668\uff0c\u65e0\u9700\u521b\u5efa\u3001\u7ba1\u7406\u5bf9\u5e94\u7684\u670d\u52a1\u3002","date":"2022-07-12T00:00:00.000Z","formattedDate":"July 12, 2022","tags":[{"label":"\u672a\u5b9a\u4e49","permalink":"/docusaurus/blog/tags/\u672a\u5b9a\u4e49"}],"readingTime":2.155,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u7ed3\u6784\u5316\u65e5\u5fd7","permalink":"/docusaurus/blog/2022/07/17/\u7ed3\u6784\u5316\u65e5\u5fd7"},"nextItem":{"title":"casbin\u5b66\u4e60","permalink":"/docusaurus/blog/2022/07/10/casbin\u5b66\u4e60"}},"content":"\x3c!--truncate--\x3e\\n\\nServerless\uff1a\u4ece\u4f7f\u7528\u89d2\u5ea6\u770b\u4e0d\u89c1\u670d\u52a1\u5668\uff0c\u65e0\u9700\u521b\u5efa\u3001\u7ba1\u7406\u5bf9\u5e94\u7684\u670d\u52a1\u3002\\n\\nServiceMesh\uff1a\u670d\u52a1\u7f51\u683c\\n\u662f\u81f4\u529b\u4e8e\u89e3\u51b3\u670d\u52a1\u95f4\u901a\u8baf\u7684\u57fa\u7840\u8bbe\u65bd\u5c42\u3002\u8d1f\u8d23\u73b0\u4ee3\u4e91\u539f\u751f\u5e94\u7528\u7a0b\u5e8f\u7684\u590d\u6742\u670d\u52a1\u62d3\u6251\u6765\u53ef\u9760\u7684\u4f20\u9012\u8bf7\u6c42\u3002\\n\u672c\u8d28\u662f\u4e00\u7ec4\u8f7b\u91cf\u7ea7\u7684\u7f51\u7edc\u4ee3\u7406\u3002\u548c\u670d\u52a1\u5e94\u7528\u90e8\u7f72\u5728\u4e00\u8d77\u4f46\u662f\u5bf9\u7a0b\u5e8f\u900f\u660e\u3002\\n\u7279\u70b9\uff1a\\n1\u3001\u5e94\u7528\u7a0b\u5e8f\u95f4\u901a\u8baf\u7684\u4e2d\u95f4\u5c42\\n2\u3001\u8f7b\u91cf\u7ea7\u7684\u7f51\u7edc\u4ee3\u7406\\n3\u3001\u5e94\u7528\u7a0b\u5e8f\u65e0\u611f\u77e5\\n4\u3001\u89e3\u8026\u5e94\u7528\u7a0b\u5e8f\u7684\u76d1\u63a7\u3001\u8ffd\u8e2a\u4e0e\u670d\u52a1\u53d1\u73b0\\n\\n\u5fae\u670d\u52a1\u6846\u67b6-\u670d\u52a1\u6cbb\u7406\u6280\u672f\u6f14\u8fdb\uff1a   \\n\u7b2c\u4e00\u9636\u6bb5\uff1a\u670d\u52a1\u6cbb\u7406\u80fd\u529b\u62bd\u8c61\u5230\u7edf\u4e00\u7684SDK\u5b9e\u73b0  \\n\u4f18\u70b9\uff1a\\n* \u4ee3\u7801\u91cd\u590d\u5c11\\n* \u6cbb\u7406\u903b\u8f91\u4ee3\u7801\u4e0e\u4e1a\u52a1\u4ee3\u7801\u9694\u79bb\\n\u7f3a\u70b9\uff1a\\n* SDK\u8bed\u8a00\u7ed1\u5b9a\\n* \u4ee3\u7801\u4fb5\u5165  \\n* \u57fa\u4e8eSDK\u6709\u5b66\u4e60\u6210\u672c \\n\\n\u7b2c\u4e8c\u9636\u6bb5\uff1a\u670d\u52a1\u6cbb\u7406\u80fd\u529b\u5f52\u4e00\u5230\u670d\u52a1\u7f51\u683c   \\n\u4f18\u70b9\uff1a\\n* \u72ec\u7acb\u8fdb\u7a0b\uff0c\u7528\u6237\u4e1a\u52a1\u975e\u4fb5\u5165\\n* \u8bed\u8a00\u65e0\u5173\\n* \u65e2\u6709\u670d\u52a1\u65e0\u9700\u6539\u9020\u76f4\u63a5\u4f7f\u7528\\n\u7f3a\u70b9\uff1a\\n* \u670d\u52a1\u6cbb\u7406\u4ee3\u7406\u7684\u6027\u80fd\u548c\u8d44\u6e90\u5f00\u9500\\n\\n\u5fae\u670d\u52a1\uff1a\\n1\u3001\u5b9e\u73b0\u4e0a\uff0c\u628a\u4e00\u4e2a\u5927\u7cfb\u7edf\uff0c\u6309\u7167\u4e1a\u52a1\u529f\u80fd\u5206\u89e3\u4e3a\u591a\u4e2a\u804c\u8d23\u76f8\u5bf9\u5355\u4e00\u7684\u5c0f\u7cfb\u7edf\u3002\u5e76\u5229\u7528\u7b80\u5355\u7684\u65b9\u6cd5\u4f7f\u591a\u4e2a\u7cfb\u7edf\u4e4b\u95f4\u76f8\u4e92\u534f\u4f5c\uff0c\u7ec4\u6210\u4e00\u4e2a\u5927\u7cfb\u7edf\u3002   \\n2\u3001\u672c\u8d28\u4e0a\uff0c\u628a\u76f8\u540c\u9886\u57df\u6216\u8005\u56e0\u76f8\u540c\u539f\u56e0\u800c\u53d8\u5316\u7684\u529f\u80fd\u805a\u5408\u5230\u4e00\u8d77\uff0c\u628a\u4e0d\u540c\u4e1a\u52a1\u9886\u57df\u6216\u56e0\u4e0d\u540c\u539f\u56e0\u800c\u53d8\u5316\u7684\u529f\u80fd\u62c6\u79bb\u5f00\uff0c\u5e76\u4f7f\u7528\u8f7b\u91cf\u5316\u673a\u5236\uff08HTTP RESTful API\uff09\u5b9e\u73b0\u901a\u4fe1\u3002\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"casbin\u5b66\u4e60","metadata":{"permalink":"/docusaurus/blog/2022/07/10/casbin\u5b66\u4e60","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/07-10-casbin\u5b66\u4e60/index.md","source":"@site/blog/2022/07-10-casbin\u5b66\u4e60/index.md","title":"casbin\u5b66\u4e60","description":"\u6458\u8981\u5728\u6b64\u5904","date":"2022-07-10T00:00:00.000Z","formattedDate":"July 10, 2022","tags":[{"label":"\u672a\u5b9a\u4e49","permalink":"/docusaurus/blog/tags/\u672a\u5b9a\u4e49"}],"readingTime":0.175,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u4e91\u670d\u52a1\u521d\u8bc6","permalink":"/docusaurus/blog/2022/07/12/\u4e91\u670d\u52a1\u521d\u8bc6"},"nextItem":{"title":"\u6743\u9650\u8bbe\u8ba1\u6574\u7406","permalink":"/docusaurus/blog/2022/07/09/\u6743\u9650\u8bbe\u8ba1\u6574\u7406"}},"content":"\u6458\u8981\u5728\u6b64\u5904\\n\\n\x3c!--truncate--\x3e\\n\\n\u6b63\u6587\u5728\u6b64\u5904\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u6743\u9650\u8bbe\u8ba1\u6574\u7406","metadata":{"permalink":"/docusaurus/blog/2022/07/09/\u6743\u9650\u8bbe\u8ba1\u6574\u7406","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/07-09-\u6743\u9650\u8bbe\u8ba1\u6574\u7406/index.md","source":"@site/blog/2022/07-09-\u6743\u9650\u8bbe\u8ba1\u6574\u7406/index.md","title":"\u6743\u9650\u8bbe\u8ba1\u6574\u7406","description":"\x3c!--","date":"2022-07-09T00:00:00.000Z","formattedDate":"July 9, 2022","tags":[{"label":"\u672a\u5b9a\u4e49","permalink":"/docusaurus/blog/tags/\u672a\u5b9a\u4e49"}],"readingTime":2.69,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"casbin\u5b66\u4e60","permalink":"/docusaurus/blog/2022/07/10/casbin\u5b66\u4e60"},"nextItem":{"title":"redis \u5206\u5e03\u5f0f\u9501","permalink":"/docusaurus/blog/2022/06/21/redis\u5206\u5e03\u5f0f\u9501"}},"content":"\x3c!--truncate--\x3e\\n\\n\x3c!--\\nACL:\u8bbf\u95ee\u63a7\u5236\u5217\u8868 - Access Control List\\nRBAC:\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236 - Role Base Access Control\\nABAC:\u57fa\u4e8e\u5c5e\u6027\u7684\u8bbf\u95ee\u63a7\u5236 - Attribute Base Access Control\\n--\x3e\\n\\n## ACL\\nACL \u662f Access Control List \u7684\u7f29\u5199\uff0c\u8868\u793a**\u8bbf\u95ee\u63a7\u5236\u5217\u8868**\u3002\\n```yaml title=\\"ACL\u914d\u7f6e\u8868\\"\\n\u8d44\u6e90\u5217\u8868:\\n- \u6838\u5fc3\u8d44\u4ea7\u9875\u9762:\\n  - \u7528\u6237: \u5458\u5de5A\\n    \u6743\u9650: \u65e0\u6743\u9650\\n  - \u7528\u6237: \u5458\u5de5B\\n    \u6743\u9650: \u67e5\u8be2\u6743\u9650\\n  - \u7528\u6237: \u5458\u5de5C\\n    \u6743\u9650: \u589e\u8bdd\u3001\u5220\u9664\u3001\u4fee\u6539\u3001\u67e5\u8be2\u6743\u9650\\n```\\nACL \u7684\u8bbe\u8ba1\u601d\u60f3\u4e3b\u8981\u662f\u56f4\u7ed5**\u8d44\u6e90**\u6765\u8bbe\u8ba1\u7684\u6743\u9650\u7ba1\u7406\\n\\n\u4ece\u7ef4\u62a4\u89d2\u5ea6\u6765\u770b\uff0c\u6bcf\u65b0\u589e\u4e00\u540d\u7528\u6237\u65f6\uff0c\u9700\u8981\u8d4b\u4e88\u521d\u59cb\u5316\u6743\u9650\uff0c\u4f1a\u6bd4\u8f83\u7e41\u7410\u3002\u4f46\u9488\u5bf9\u5458\u5de5\u7684\u6743\u9650\u4fee\u6539\uff0c\u4f1a\u663e\u5f97\u6bd4\u8f83\u5bb9\u6613\u3002\\n\\n## RBAC\\nRBAC \u662f Role Base Access Control \u7684\u7f29\u5199\uff0c\u8868\u793a**\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236**\uff0c\\n```yaml title=\\"RBAC\\"\\n\u7528\u6237\u8868:\\n- \u7528\u6237: A\\n  \u89d2\u8272: [\u7814\u53d1]\\n- \u7528\u6237: B\\n  \u89d2\u8272: [\u6d4b\u8bd5]\\n---\\n\u89d2\u8272\u8868:\\n- \u89d2\u8272: \u7814\u53d1\\n  \u6743\u9650: [\u4fee\u590dBGU]\\n- \u89d2\u8272: \u6d4b\u8bd5\\n  \u6743\u9650: [\u521b\u5efaBUG]\\n---\\n\u6743\u9650\u8868:\\n- \u6743\u9650: \u521b\u5efaBUG\\n  \u8d44\u6e90\u8868:\\n  - \u8d44\u6e90: BUG\u5355\\n    \u6743\u9650: [\u521b\u5efa\u3001\u4fee\u6539]\\n- \u6743\u9650: \u4fee\u590dBGU\\n  \u8d44\u6e90\u8868:\\n  - \u8d44\u6e90:: BUG\u5355\\n    \u6743\u9650: [\u4fee\u6539\u3001\u5b8c\u6210]\\n```\\nRBAC \u7684\u601d\u60f3\uff0c\u6765\u6e90\u4e8e\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u4f01\u4e1a\u7ed3\u6784\uff0c\u4e0d\u540c\u7684\u89d2\u8272\u8bbe\u8ba1\u6709\u4e0d\u540c\u7684\u6743\u9650\uff0c\u800c\u4e0d\u7528\u7684\u4e3b\u4f53\u5c06\u62e5\u6709\u4e00\u4e2a\u81f3\u591a\u4e2a\u89d2\u8272\u3002\\n\\n\u4ece\u7ef4\u62a4\u89d2\u5ea6\u6765\u770b\uff0c\u5728\u76f8\u5bf9\u9759\u6001\u7684\u60c5\u51b5\u4e0b\uff0c\u662f\u6bd4\u8f83\u5bb9\u6613\u7ef4\u62a4\u7684\u3002\u76f8\u5bf9\u9759\u6001\u7684\u610f\u601d\u5c31\u662f\u8bf4\uff0c\u6bcf\u4e2a\u89d2\u8272\u62e5\u6709\u7684\u6743\u9650\u662f\u76f8\u5bf9\u56fa\u5b9a\u7684\u3002       \\n\u6bd4\u5982\u4e00\u540d\u521a\u5165\u804c\u7684\u5458\u5de5\uff0c\u4ed6\u7684\u89d2\u8272\u53ef\u80fd\u5c31\u662f\u672a\u8f6c\u6b63\u5458\u5de5\uff0c\u6b64\u65f6\u8be5\u540d\u5458\u5de5\u6240\u62e5\u6709\u7684\u6743\u9650\u5c06\u662f\u975e\u5e38\u5c0f\u7684\u4e00\u90e8\u5206\u3002\\n\u4f46\u662f\u7531\u4e8e\u67d0\u4e9b\u7279\u6b8a\u60c5\u51b5\uff0c\u8fd9\u540d\u5458\u5de5\u53c8\u9700\u8981\u7533\u8bf7\u66f4\u9ad8\u6743\u9650\u65f6\uff0c\u5c31\u4f1a\u6bd4\u8f83\u96be\u5904\u7406\u3002\u56e0\u4e3a\u4e0d\u80fd\u76f4\u63a5\u4fee\u6539\u89d2\u8272\u7684\u6743\u9650\uff0c\u8fd9\u6837\u4f1a\u7834\u574f\u8fd9\u540d\u89d2\u8272\u7684\u539f\u751f\u5c5e\u6027\u3002    \\n\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u4e00\u822c\u53ea\u80fd\u521b\u5efa\u65b0\u7684\u89d2\u8272\u5e76\u8d4b\u4e88\u6b64\u540d\u5458\u5de5\uff0c\u8fd9\u6837\u5c31\u4f1a\u964d\u4f4e\u7cfb\u7edf\u7684\u53ef\u7ef4\u62a4\u6027\u3002\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"redis \u5206\u5e03\u5f0f\u9501","metadata":{"permalink":"/docusaurus/blog/2022/06/21/redis\u5206\u5e03\u5f0f\u9501","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/06-21-redis\u5206\u5e03\u5f0f\u9501/index.md","source":"@site/blog/2022/06-21-redis\u5206\u5e03\u5f0f\u9501/index.md","title":"redis \u5206\u5e03\u5f0f\u9501","description":"\x3c!--","date":"2022-06-21T00:00:00.000Z","formattedDate":"June 21, 2022","tags":[{"label":"redis","permalink":"/docusaurus/blog/tags/redis"}],"readingTime":2.925,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u6743\u9650\u8bbe\u8ba1\u6574\u7406","permalink":"/docusaurus/blog/2022/07/09/\u6743\u9650\u8bbe\u8ba1\u6574\u7406"},"nextItem":{"title":"PEP8 \u89c4\u8303","permalink":"/docusaurus/blog/2022/06/20/pep8\u89c4\u8303"}},"content":"\x3c!--\\nhttps://juejin.cn/post/6936956908007850014\\n--\x3e\\n\\n\u5e76\u53d1\u573a\u666f\u4e0b\u7684**\u9501\u673a\u5236**\uff0c\u5176\u5b9e\u5c31\u662f\u7528\u6765\u4fdd\u62a4\u4e0d\u540c\u7ebf\u7a0b\u5bf9**\u5171\u4eab\u8d44\u6e90**\u7684\u8bbf\u95ee\uff0c\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u7a0b\u5e8f\u6309\u9884\u8bbe\u7684\u903b\u8f91\u6267\u884c\u3002\\n**\u5206\u5e03\u5f0f\u9501**\u4e5f\u662f\u4e00\u6837\u7684\u539f\u7406\uff0c\u5b83\u662f\u7528\u4e8e\u5206\u5e03\u5f0f\u7cfb\u7edf\u5e76\u53d1\u573a\u666f\u4e0b\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u7684\u4e00\u79cd\u9501\u673a\u5236\u3002   \\n\\n\u4e00\u628a\u5408\u683c\u7684\u5206\u5e03\u5f0f\u9501\uff0c\u5e94\u8be5\u81f3\u5c11\u5177\u5907\u4ee5\u4e0b\u7279\u5f81\uff1a\\n* \u4e92\u65a5\u6027\uff1a\u4efb\u610f\u65f6\u523b\uff0c\u53ea\u6709\u4e00\u4e2a\u5ba2\u6237\u7aef\u6301\u6709\u3002\\n* \u8d85\u65f6\u673a\u5236\uff1a\u6301\u6709\u9501\u5e76\u8d85\u65f6\u65f6\uff0c\u53ef\u4ee5\u81ea\u52a8\u91ca\u653e\uff0c\u907f\u514d\u6b7b\u9501\u3002\\n* \u5b89\u5168\u6027\uff1a\u5728\u672a\u8d85\u65f6\u573a\u666f\u4e0b\uff0c\u9501\u53ea\u80fd\u88ab\u6301\u6709\u8005\u91ca\u653e\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u5355\u8282\u70b9\u5206\u5206\u5e03\u5f0f\u9501\\nSET \u662f redis \u5173\u952e\u5b57\u6307\u4ee4\uff0c\u5c5e\u4e8e\u539f\u5b50\u64cd\u4f5c\uff0c\u5176\u4f5c\u7528\u662f\u7ed9\u6307\u5b9a key \u8d4b\u503c value\u3002\u5e76\u4e14\u652f\u6301 NX \u548c PX \u53c2\u6570\uff1a\\n* NX\uff1a`if not exists` \u7f29\u5199\uff0c\u5f53 key \u4e0d\u5b58\u5728\u65f6\u624d\u5141\u8bb8\u8d4b\u503c\u6210\u529f\u3002\\n* PX\uff1a\u8868\u793a\u8fc7\u671f\u65f6\u95f4\u3002\\n\\n```shell script title=\\"\u6838\u5fc3\u8bed\u53e5\\"\\nSET key uniqueValue NX PX 1000\\n```\\n\u5177\u4f53\u7684\u573a\u666f\u5982\u4e0b\uff1a     \\n1\u3001\u7528\u6237\u4e00\uff1a\u521b\u5efa\u968f\u673a\u503c\uff0c\u4f7f\u7528 set \u8d4b\u503c\uff0c\u8d4b\u503c\u6210\u529f\uff0c\u6301\u6709\u5206\u5e03\u5f0f\u9501\u3002  \\n2\u3001\u7528\u6237\u4e8c\uff1a\u521b\u5efa\u968f\u673a\u503c\uff0c\u4f7f\u7528 set \u8d4b\u503c\uff0c\u8d4b\u503c\u5931\u8d25\u3002     \\n3\u3001\u7528\u6237\u4e00\uff1a\u6267\u884c\u4efb\u52a1\u8d85\u8fc71\u79d2\uff0c\u81ea\u52a8\u91ca\u653e\u9501\u3002    \\n4\u3001\u7528\u6237\u4e8c\uff1a\u521b\u5efa\u968f\u673a\u503c\uff0c\u4f7f\u7528 set \u8d4b\u503c\uff0c\u8d4b\u503c\u6210\u529f\uff0c\u6301\u6709\u5206\u5e03\u5f0f\u9501\u3002    \\n5\u3001\u7528\u6237\u4e00\uff1a\u4efb\u52a1\u7ed3\u675f\uff0c\u83b7\u53d6\u9501\uff0c\u5bf9\u6bd4\u5f53\u524d\u9501\u662f\u5426\u5c5e\u4e8e\u81ea\u5df1\uff0c\u4e0d\u5c5e\u4e8e\u5219\u5ffd\u7565\u3002    \\n\\n## \u591a\u8282\u70b9\u5206\u5e03\u5f0f\u9501\\n\u5355\u8282\u70b9 redis \u53ef\u4ee5\u57fa\u4e8e `SET key uniqueValue NX PX 1000` \u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\uff0c\u4f46\u5b58\u5728\u5b95\u673a\u7684\u98ce\u9669\u3002   \\n\u6240\u4ee5 redis \u4f5c\u8005\u63d0\u51fa\u4e86 redlock \u7b97\u6cd5\uff0c\u7528\u4e8e\u652f\u6301\u591a\u8282\u70b9\u4e0b\u7684\u5206\u5e03\u5f0f\u9501\u3002\\n\\n\u5176\u7b97\u6cd5\u6b65\u9aa4\uff08\u4ee55\u4e2a\u8282\u70b9\u4e3a\u4f8b\uff09\uff1a     \\n1\u3001\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233 \u548c UUID\u503c\u3002   \\n2\u3001\u57fa\u4e8e\u8fc7\u671f\u65f6\u95f4\u9009\u62e9\u6beb\u79d2\u7ea7\u7684\u7f51\u7edc\u8fde\u63a5\u548c\u54cd\u5e94\u65f6\u95f4\u3002    \\n3\u3001\u5ba2\u6237\u7aef\u9010\u4e00\u53bb\u7533\u8bf7\u9501\uff0c\u7533\u8bf7\u65b9\u5f0f\u548c\u5355\u8282\u70b9\u4e00\u6837\uff0c\u5f53\u4ece `N/2 + 1` \u4e2a\u8282\u70b9\u90fd\u83b7\u53d6\u5230\u9501\uff0c\u4e14\u4f7f\u7528\u65f6\u95f4\u5c0f\u4e8e\u5f53\u524d\u9501\u5931\u6548\u65f6\u95f4\uff0c\u624d\u7b97\u83b7\u53d6\u6210\u529f\u3002      \\n4\u3001\u771f\u6b63\u7684\u6267\u884c\u65f6\u95f4\uff0c\u65f6\u8fc7\u671f\u65f6\u95f4-\u83b7\u53d6\u9501\u7684\u65f6\u95f4-\u65f6\u949f\u504f\u79fb\u65f6\u95f4\u3002     \\n5\u3001\u91ca\u653e\u9501\u65f6\u9700\u8981\u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u5c1d\u8bd5\u91ca\u653e\u9501\u3002   \\n\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"PEP8 \u89c4\u8303","metadata":{"permalink":"/docusaurus/blog/2022/06/20/pep8\u89c4\u8303","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/06-20-pep8\u89c4\u8303/index.md","source":"@site/blog/2022/06-20-pep8\u89c4\u8303/index.md","title":"PEP8 \u89c4\u8303","description":"PEP \u662f Python Enhancement Proposal \u7684\u7f29\u5199\uff0c\u8868\u793aPython \u589e\u5f3a\u63d0\u6848\u3002","date":"2022-06-20T00:00:00.000Z","formattedDate":"June 20, 2022","tags":[{"label":"python","permalink":"/docusaurus/blog/tags/python"}],"readingTime":0.415,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"redis \u5206\u5e03\u5f0f\u9501","permalink":"/docusaurus/blog/2022/06/21/redis\u5206\u5e03\u5f0f\u9501"},"nextItem":{"title":"\u57fa\u4e8edocker\u642d\u5efagitlan-runner","permalink":"/docusaurus/blog/2022/06/17/\u57fa\u4e8edocker\u642d\u5efagitlan-runner"}},"content":"PEP \u662f `Python Enhancement Proposal` \u7684\u7f29\u5199\uff0c\u8868\u793a**Python \u589e\u5f3a\u63d0\u6848**\u3002\\n\\nPEP8 \u5219\u8868\u793a\u5176\u4e2d\u7b2c8\u6761\u63d0\u6848\uff0c\u8fd9\u662f\u9488\u5bf9\u7f16\u7801\u89c4\u8303\u7684\u63d0\u6848\u3002\u5176\u4e2d\u5305\u62ec\uff1a**\u547d\u540d\u89c4\u8303\u3001\u7f16\u6392\u89c4\u8303\u3001\u6ce8\u91ca\u89c4\u8303\u3001\u4ee3\u7801\u89c4\u8303**\u7b49\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u57fa\u4e8edocker\u642d\u5efagitlan-runner","metadata":{"permalink":"/docusaurus/blog/2022/06/17/\u57fa\u4e8edocker\u642d\u5efagitlan-runner","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/06-17-\u57fa\u4e8edocker\u642d\u5efagitlan-runner/index.md","source":"@site/blog/2022/06-17-\u57fa\u4e8edocker\u642d\u5efagitlan-runner/index.md","title":"\u57fa\u4e8edocker\u642d\u5efagitlan-runner","description":"gitlab-runner\u5b9e\u9645\u8fd0\u884c\u65f6\uff0c\u4f1a\u8fdc\u7a0b\u83b7\u53d6\u6211\u4eec\u7684\u4ee3\u7801\u4ed3\uff0c\u7136\u540e\u6267\u884c\u914d\u7f6e\u7684.gitlab-ci.yaml\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u548cjenkinsfile\u4e00\u4e2a\u6027\u8d28\uff0c\u91cc\u9762\u5b9a\u4e49\u4e86 CICD \u7684\u68c0\u6d4b\u6d41\u7a0b\u3002","date":"2022-06-17T00:00:00.000Z","formattedDate":"June 17, 2022","tags":[{"label":"\u5176\u4ed6","permalink":"/docusaurus/blog/tags/\u5176\u4ed6"}],"readingTime":2.08,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"PEP8 \u89c4\u8303","permalink":"/docusaurus/blog/2022/06/20/pep8\u89c4\u8303"},"nextItem":{"title":"\u5982\u4f55\u7406\u89e3 OKR & KPI","permalink":"/docusaurus/blog/2022/06/09/\u5982\u4f55\u7406\u89e3OKRKPI"}},"content":"`gitlab-runner`\u5b9e\u9645\u8fd0\u884c\u65f6\uff0c\u4f1a\u8fdc\u7a0b\u83b7\u53d6\u6211\u4eec\u7684\u4ee3\u7801\u4ed3\uff0c\u7136\u540e\u6267\u884c\u914d\u7f6e\u7684`.gitlab-ci.yaml`\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u548c`jenkinsfile`\u4e00\u4e2a\u6027\u8d28\uff0c\u91cc\u9762\u5b9a\u4e49\u4e86 CICD \u7684\u68c0\u6d4b\u6d41\u7a0b\u3002\\n\\n\u6362\u53e5\u8bdd\u8bf4\uff0c`gitlab-runner`\u548c\u6211\u4eec\u7684\u4ee3\u7801\u4ed3\u662f\u5b8c\u5168\u89e3\u8026\u7684\u3002\u662f\u53ef\u4ee5\u90e8\u7f72\u5728\u5176\u4ed6\u670d\u52a1\u5668\u4e0a\uff0c\u5e76\u4e14\u53ef\u4ee5\u90e8\u7f72\u591a\u4e2a\u7684\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## 1\u3001\u521b\u5efa volume\\n\u9996\u5148\u9700\u8981\u4e3a `gitlab-runner` \u521b\u5efa\u4e00\u4e2a\u516c\u5171\u914d\u7f6e\u5b58\u5728\u8def\u5f84\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u5171\u4eab\u914d\u7f6e\u3002\\n\\n\u53ef\u4ee5\u662f\u5177\u4f53\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 `docker volume create` \u521b\u5efa\u4e00\u4e2a\u516c\u5171\u6302\u8f7d\uff0c\u540e\u7eed\u5176\u4ed6\u7684 runner \u90fd\u6302\u8f7d\u6b64\u76ee\u5f55\uff0c\u5373\u53ef\u5b9e\u73b0\u5171\u4eab\u914d\u7f6e\u3002   \\n```shell script\\ndocker volume create gitlab-runner-config\\n```\\n\\n## 2\u3001\u6ce8\u518c runner\\n\u9996\u5148\u9700\u8981\u83b7\u53d6 gitlab \u57fa\u7840\u4fe1\u606f\u3002    \\n![](./register-runner.png)\\n\\n\u7136\u540e\u6ce8\u518c runner   \\n```shell script\\ndocker run --rm -v gitlab-runner-config:/etc/gitlab-runner gitlab/gitlab-runner register \\\\\\n  --non-interactive \\\\\\n  --url \\"Gitlab \u7684 URL \u590d\u5236\u8fc7\u6765\\" \\\\\\n  --registration-token \\"Gitlab \u7684 Token \u590d\u5236\u8fc7\u6765\\" \\\\\\n  --executor \\"docker\\" \\\\\\n  --docker-image \\"\u8981\u8fd0\u884c\u7684\u955c\u50cf\uff0ceg: python:3.6.8\\" \\\\\\n  --description \\"docker-runner-test\\" \\\\\\n  --tag-list \\"docker,test\\" \\\\\\n  --run-untagged=\\"true\\" \\\\\\n  --locked=\\"false\\" \\\\\\n  --access-level=\\"not_protected\\" \\\\\\n  --docker-pull-policy=\\"if-not-present\\"\\n```\\n\\n\u6ce8\u518c\u5b8c\u6210\u540e\uff0c\u5728 gitlab \u754c\u9762\u4f1a\u51fa\u73b0\u4f60\u6ce8\u518c\u7684 runner \u4fe1\u606f\u3002\u6ca1\u6709\u53ef\u4ee5\u5237\u65b0\u770b\u770b\uff0c\u5b9e\u5728\u6ca1\u6709\uff0c\u5e94\u8be5\u662f\u6ce8\u518c\u5931\u8d25\u4e86\u3002      \\n![](./register-runner-2.png)   \\n\\n## 3\u3001\u542f\u52a8 runner\\n```shell script title=\\"help\u5e2e\u52a9\u6307\u4ee41\\"\\ndocker run -it --name gitlab-runner --rm \\\\\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\\\\n    -v gitlab-runner-config:/etc/gitlab-runner \\\\\\n    gitlab/gitlab-runner:latest help\\n```\\n\\n```shell script title=\\"help\u5e2e\u52a9\u6307\u4ee42\\"\\ndocker run -it --name gitlab-runner --rm \\\\\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\\\\n    -v gitlab-runner-config:/etc/gitlab-runner \\\\\\n    gitlab/gitlab-runner:latest help unregister\\n```\\n\\n```shell script title=\\"list \u5217\u8868\u67e5\u770brunner\\"\\ndocker run -it --name gitlab-runner --rm \\\\\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\\\\n    -v gitlab-runner-config:/etc/gitlab-runner \\\\\\n    gitlab/gitlab-runner:latest list\\n```\\n\\n```shell script title=\\"unregister \u5220\u9664runner\\"\\ndocker run -it --name gitlab-runner --rm \\\\\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\\\\n    -v gitlab-runner-config:/etc/gitlab-runner \\\\\\n    gitlab/gitlab-runner:latest unregister -t=GIRLAB_TOKEN\\n```\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u5982\u4f55\u7406\u89e3 OKR & KPI","metadata":{"permalink":"/docusaurus/blog/2022/06/09/\u5982\u4f55\u7406\u89e3OKRKPI","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/06-09-\u5982\u4f55\u7406\u89e3OKRKPI/index.md","source":"@site/blog/2022/06-09-\u5982\u4f55\u7406\u89e3OKRKPI/index.md","title":"\u5982\u4f55\u7406\u89e3 OKR & KPI","description":"\u4ec0\u4e48\u662f KPI","date":"2022-06-09T00:00:00.000Z","formattedDate":"June 9, 2022","tags":[{"label":"\u57fa\u7840\u6280\u80fd","permalink":"/docusaurus/blog/tags/\u57fa\u7840\u6280\u80fd"}],"readingTime":3.87,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u57fa\u4e8edocker\u642d\u5efagitlan-runner","permalink":"/docusaurus/blog/2022/06/17/\u57fa\u4e8edocker\u642d\u5efagitlan-runner"},"nextItem":{"title":"PostgreSQL vs MySQL","permalink":"/docusaurus/blog/2022/06/07/pgvsmysql"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u4ec0\u4e48\u662f KPI\\nKPI \u6307 `Key Performance Indicator`\uff0c\u5373**\u5173\u952e\u7ee9\u6548\u6307\u6807**\u3002\\n\\n\u5bf9\u4e8e\u516c\u53f8\u6765\u8bb2\uff0c\u4ed6\u53ef\u4ee5\u5c06\u516c\u53f8\u7684\u76ee\u6807\u4ece\u4e0a\u81f3\u4e0b\u5730\u5206\u89e3\uff0c\u7136\u540e\u901a\u8fc7\u76f8\u5173\u7684\u5173\u952e\u7ee9\u6548\u6307\u6807\u6765\u8861\u91cf\u5b9e\u9645\u7684\u6267\u884c\u6548\u679c\u3002\\n\\n## KPI \u5b58\u5728\u7684\u95ee\u9898\\n\u7ecf\u8fc7\u5927\u91cf\u5b9e\u8df5\u8bc1\u660e\uff0cKPI \u53ea\u9002\u5408**\u6807\u51c6\u5316\u7684\u3001\u76ee\u6807\u7a33\u5b9a\u7684\u5de5\u4f5c\u3002**\\n\\n\u6bd4\u5982\u67d0\u6807\u51c6\u7684\u5de5\u4e1a\u6d41\u6c34\u7ebf\u4e2d\uff0cKPI \u53ef\u4ee5\u5236\u5b9a\u6d41\u6c34\u7ebf\u4e2d\u8f6c\u5316\u6548\u7387\u3001\u8f6c\u5316\u6bd4\u7387\u7b49\uff0c\u8fd9\u4e9b\u90fd\u662f\u53ef\u4ee5\u5b9a\u91cf\u7684\u3002       \\n\u4f46\u662f\u5bf9\u4e8e**\u521b\u65b0\u7c7b**\u6280\u672f\u6765\u8bf4\uff0c\u5b83\u5b58\u5728\u6bd4\u8f83\u5927\u7684\u4e0d\u786e\u5b9a\u6027\u3002\u8fd9\u79cd\u7c7b\u578b\u5c31\u4e0d\u9002\u5408\u7528 KPI \u6765\u8861\u91cf\u4e86\u3002\\n\\n\u5176\u6b21\uff0c**KPI \u4f1a\u7ed9\u56e2\u961f\u5e26\u6765\u4e0d\u826f\u98ce\u6c14**\uff0c\u6bd4\u5982\uff1a   \\n1\u3001\u8ffd\u6c42\u4f4e\u6307\u6807\uff1a\u5982\u679c\u5236\u5b9a\u6307\u6807\u8fc7\u9ad8\uff0c\u5b8c\u4e0d\u6210\uff0c\u90a3\u5c31\u662f\u642c\u8d77\u77f3\u5934\u7838\u81ea\u5df1\u7684\u811a\uff0c\u6240\u4ee5\u5927\u5bb6\u4f1a\u66f4\u503e\u5411\u4e8e\u5236\u5b9a\u4f4e\u6307\u6807\u3002        \\n2\u3001\u8ffd\u6c42\u77ed\u89c6\uff1a\u4e00\u4e9b\u9700\u8981\u957f\u671f\u6295\u5165\u7684\u4e8b\u60c5\u4f1a\u88ab\u4eba\u5acc\u5f03\uff0c\u5927\u5bb6\u66f4\u52a0\u5173\u6ce8\u77ed\u671f\u83b7\u76ca\u7684KPI\u3002   \\n3\u3001\u5de5\u4f5c\u548c\u8003\u6838\u672c\u672b\u5012\u7f6e\uff1a\u5728\u5236\u5b9a\u548c\u628a\u63a7\u4e25\u683c\u7684KPI\u7ba1\u7406\u4e0a\uff0c\u6295\u5165\u4e86\u5927\u91cf\u7684\u65f6\u95f4\u548c\u7cbe\u529b\u3002\u7b49\u771f\u6b63\u5230\u4e86\u5177\u4f53\u6267\u884c\u4e0a\uff0c\u5374\u6577\u884d\u4e86\u4e8b\u3002\u8fd9\u7c7b\u73b0\u8c61\u6bd4\u6bd4\u7686\u662f\u3002   \\n\\n## \u4ec0\u4e48 OKR\\nOKR \u662f `Objectives and Key Results`\uff0c\u5373**\u76ee\u6807\u4e0e\u5173\u952e\u6210\u679c**\u3002\\n\\n\u5b83\u7684\u5b9e\u65bd\u6b65\u9aa4\u662f\uff1a     \\n1\u3001\u9996\u5148\u5236\u5b9a**\u4e1a\u52a1\u76ee\u6807 Objectives**\u3002\u6bd4\u5982\uff1a\u63d0\u5347\u67d0\u7cfb\u7edf\u7a33\u5b9a\u6027\u3002       \\n2\u3001\u7136\u540e\u4e3a\u6bcf\u4e2a\u76ee\u6807\u8bbe\u5b9a\u5173\u952e\u7ed3\u679c Key Results\u3002\u6bd4\u5982\uff1a\u4e3a\u4e86\u5b9e\u73b0 \u63d0\u5347\u7cfb\u7edf\u7a33\u5b9a\u6027 \u8fd9\u4e2a\u76ee\u6807\uff0c\u8ba1\u5212\u5f15\u5165\u6570\u636e\u5e93\u4e3b\u5907\u673a\u5236\u3001\u5f02\u5730\u591a\u6d3b\u65b9\u6848\u7b49\u3002\\n\\n## OKR \u548c KPI \u4e4b\u95f4\u7684\u533a\u522b\u4e0e\u8054\u7cfb\\n\u6211\u4eec\u4f1a\u53d1\u73b0 OKR \u548c KPI \u5f88\u50cf\uff0c\u6574\u4f53\u770b\u4e0b\u6765\u751a\u81f3\u90fd\u6ca1\u6709\u4ec0\u4e48\u533a\u522b\u3002\u56e0\u4e3a **OKR \u4e2d\u7684\u4e00\u4e2a KR\uff0c\u4f3c\u4e4e\u5c31\u662f\u4e00\u4e2a KPI \u6307\u6807**\u3002\\n\\n\u5176\u5b9e\u533a\u522b\u5f88\u7b80\u5355\uff0cKPI \u4e2d\u7684\u5173\u952e\u8bcd\u662f Indicators\uff0c\u800c OKR \u4e2d\u7684\u5173\u952e\u8bcd\u662f Objectives\u3002         \\n\u6362\u53e5\u8bdd\u8bf4\uff0cKPI \u5173\u6ce8\u7684\u662f**\u6570\u636e\u6307\u6807**\uff0cOKR \u5173\u6ce8\u7684\u662f**\u4e1a\u52a1\u76ee\u6807**\u3002  \\n\\n\u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3\uff0c\u53ef\u4ee5\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u4ee5\u67d0\u573a\u6bd4\u8d5b\u4e3a\u4f8b\uff1a     \\n\u5982\u679c\u4ece KPI \u7684\u89d2\u5ea6\u770b\uff0c\u6211\u4eec\u5219\u66f4\u5173\u6ce8\u62ff\u5230\u51e0\u5206\u3001\u8d62\u4e86\u51e0\u573a\u7b49\u3002      \\n\u5982\u679c\u4ece OKR \u7684\u89d2\u5ea6\u770b\uff0c\u6211\u4eec\u66f4\u5173\u6ce8\u593a\u51a0\u3001\u8fdb\u56db\u5f3a\u3001\u4fdd\u7ea7\u7b49\u3002   \\n\\n\u5173\u952e\u533a\u522b\u70b9\u5c31\u662f\u6307\u6807\u548c\u76ee\u6807\u8fd9\u4e24\u4e2a\u8bcd\uff0c\u867d\u7136\u53ea\u662f\u7b80\u5355\u7684\u4e24\u4e2a\u8bcd\uff0c\u5374\u53cd\u6620\u4e86\u4e24\u79cd\u622a\u7136\u4e0d\u540c\u7684\u601d\u7ef4\u65b9\u5f0f\u3002\\n\\n\u5f53\u6211\u4eec\u4f7f\u7528 KPI \u89c4\u5212\u6cd5\u65f6\uff0c\u66f4\u5173\u6ce8\u6570\u636e\u6307\u6807\uff0c\u7b2c\u4e00\u601d\u7ef4\u5c31\u662f\uff1a\u6211\u8981\u505a\u4ec0\u4e48\u4e8b\u3002\u5728\u8fd9\u79cd\u601d\u7ef4\u4e0b\u6211\u4eec\u66f4\u5173\u6ce8\u5f53\u4e0b\u5df2\u6709\u7684\u5de5\u4f5c\u3002       \\n\u5f53\u6211\u4eec\u4f7f\u7528 OKR \u89c4\u5212\u6cd5\u65f6\uff0c\u66f4\u5173\u6ce8\u4e1a\u52a1\u76ee\u6807\uff0c\u7b2c\u4e00\u601d\u7ef4\u5c31\u662f\uff1a\u6211\u8981\u505a\u6210\u4ec0\u4e48\u4e8b\u3002\u5728\u8fd9\u79cd\u601d\u7ef4\u4e0b\u6211\u4eec\u5168\u5c40\u5b9a\u4f4d\u65b9\u5411\uff0c\u518d\u6307\u5b9aKR\u3002\\n\\n\u9664\u6b64\u4e4b\u5916\uff0cOKR \u548c KPI \u4e5f\u6709\u5f88\u5f3a\u7684\u5185\u5728\u8054\u7cfb\u3002      \\nOKR \u7684 KR \u5c31\u6709\u4e24\u79cd\u8868\u73b0\u5f62\u5f0f\uff0c\u4e00\u79cd\u5c31\u662f KPI\uff0c\u4e00\u79cd\u5c31\u662f\u91cc\u7a0b\u7891\u3002\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"PostgreSQL vs MySQL","metadata":{"permalink":"/docusaurus/blog/2022/06/07/pgvsmysql","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/06-07-pgvsmysql/index.md","source":"@site/blog/2022/06-07-pgvsmysql/index.md","title":"PostgreSQL vs MySQL","description":"\x3c!--","date":"2022-06-07T00:00:00.000Z","formattedDate":"June 7, 2022","tags":[{"label":"\u6570\u636e\u5e93","permalink":"/docusaurus/blog/tags/\u6570\u636e\u5e93"}],"readingTime":5.1,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u5982\u4f55\u7406\u89e3 OKR & KPI","permalink":"/docusaurus/blog/2022/06/09/\u5982\u4f55\u7406\u89e3OKRKPI"},"nextItem":{"title":"Go Http\u6a21\u5757\u5751\u70b9","permalink":"/docusaurus/blog/2022/06/05/golanghttp\u6a21\u5757"}},"content":"\x3c!--\\n\u300apostgresql\u4fee\u70bc\u4e4b\u9053\u300b\\nhttps://blog.csdn.net/Hehuyi_In/article/details/95895473\\n--\x3e\\n\\nMySQL \u662f\u4e1a\u754c\u4e3b\u6d41\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff0c\u76ee\u524d\u88ab Oracle \u6536\u8d2d\uff0c\u5e76\u63d0\u4f9b\u5305\u62ec\u514d\u8d39\u3001\u4ed8\u8d39\u7b49\u591a\u79cd\u793e\u533a\u7248\u672c\u3002    \\nPostgreSQL \u5219\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u6570\u636e\u5e93\u3002\u6709\u53e5\u6bd4\u8f83\u7ecf\u5178\u7684\u8bdd\u4f60\u53ef\u80fd\u542c\u8fc7\uff0c\u90a3\u5c31\u662f\uff1a\\"PostgreSQL \u80fd\u4e0e Oracle \u5ab2\u7f8e\uff0c\u5e76\u4e14\u6ca1\u6709\u90a3\u4e48\u6602\u8d35\u7684\u4ef7\u683c\u548c\u50b2\u6162\u7684\u5ba2\u670d\u3002\\"    \\n\\n\u4e24\u7c7b\u6570\u636e\u5e93\u5404\u6709\u9ad8\u4f4e\uff0c\u672c\u6587\u4e3b\u8981\u5b66\u4e60\u603b\u7ed3\u4e0b\u4e8c\u8005\u4e4b\u95f4\u7684\u7279\u70b9\uff0c\u4ee5\u53ca\u5404\u81ea\u7684\u4f18\u52bf\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## PG\u76f8\u8f83\u4e8eMySQL\u4f18\u52bf\\n\u9996\u5148 PG \u5b8c\u5168\u5f00\u6e90\uff0c\u76f8\u8f83\u4e8e MySQL \u6765\u8bf4\uff0c\u62e5\u6709\u66f4\u8fc5\u901f\u7684\u529f\u80fd\u8fed\u4ee3\u3002\\n\\n### \u66f4\u4e30\u5bcc\u7684\u6570\u636e\u7c7b\u578b\\n\u9664\u4e86\u5e38\u89c4\u7684\u6570\u636e\u7c7b\u578b\u5916\uff0cPG \u7684\u6570\u636e\u7c7b\u578b\u66f4\u52a0\u4e30\u5bcc\uff0c\u4e14\u5b8c\u5584\u4e86\u90e8\u5206 MySQL \u6570\u636e\u7c7b\u578b\u7684\u4e00\u4e9b\u69fd\u70b9\u3002\\n\\n#### \u652f\u6301json\u3001jsonb\u7c7b\u578b\\n\u968f\u7740json\u683c\u5f0f\u7684\u6d41\u884c\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u6570\u636e\u5b58\u50a8\u548c\u4f20\u8f93\uff0c\u91c7\u7528json\u683c\u5f0f\u3002     \\n\\n\u4f46\u5b58\u50a8\u8fd9\u7c7b\u534a\u7ed3\u6784\u5316\u6570\u636e\uff0c\u5bf9\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u6765\u8bf4\u5e76\u4e0d\u53cb\u597d\u3002\u5f80\u5f80\u53ea\u80fd\u5148\u5c06json\u6570\u636e\u5e8f\u5217\u5316\u4e3a\u6210\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u5b58\u50a8\u5b57\u7b26\u4e32\u3002   \\n\u8fd9\u4e5f\u662f MongoDB \u7b49\u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u9010\u6e10\u6d41\u884c\u7684\u539f\u56e0\u4e4b\u4e00\u3002       \\n\\nPG \u652f\u6301 json\u3001jsonb \u4e24\u7c7b\u6570\u636e\u7c7b\u578b\uff1a   \\n* json\uff1a\u5b58\u50a8\u6587\u672c\u6570\u636e\uff0c\u6bcf\u6b21\u8bfb\u53d6\u90fd\u4f1a\u5bf9\u5176\u8fdb\u884cjson\u89e3\u6790\u3002\u4e0d\u652f\u6301\u7d22\u5f15\u3002  \\n* jsonb\uff1a\u5b58\u50a8\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u76f8\u5bf9\u4e8ejson\u7c7b\u578b\u6765\u8bf4\uff0c\u907f\u514d\u4e86\u91cd\u590d\u89e3\u6790\uff0c\u5e76\u4e14\u652f\u6301\u7d22\u5f15\u3002  \\n\\n\u6240\u4ee5\u5f53\u6570\u636e\u5e93\u5b57\u6bb5\u8bbe\u8ba1\u65f6\uff0c\u4ec5\u4ec5\u6709\u90e8\u5206\u5b57\u6bb5\u6570\u636e\u7c7b\u578b\u662f\u534a\u7ed3\u6784\u5316\u7684\uff0c\u6570\u636e\u5e93\u9009\u578b\u65f6 PG \u5c06\u662f\u975e\u5e38\u4f18\u79c0\u7684\u9009\u62e9\u3002\\n\\n#### text\u65e0\u957f\u5ea6\u9650\u5236\uff0c\u652f\u6301\u5168\u6587\u7d22\u5f15\\n\u4e00\u822c\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u5b57\u7b26\u4e32\u6709\u957f\u5ea6\u9650\u5236\uff0c\u5927\u5c0f\u57288k\u5de6\u53f3\uff0cPG \u5219\u6ca1\u6709\u9650\u5236\u3002\\n\\n#### \u5b57\u7b26\u7f16\u7801\u652f\u6301\u66f4\u53cb\u597d\\n\u5bf9\u4e8e emoji \u7684\u5b58\u50a8\uff0cMySQL \u9700\u8981 utf8mb4 \u7f16\u7801\u624d\u80fd\u6b63\u786e\u663e\u793a\uff0c\u5728 PG \u79cd\u9047\u4e0d\u5230\u3002\\n\\n### \u66f4\u4e30\u5bcc\u7684\u7d22\u5f15\u7c7b\u578b\\nMySQL \u7684\u7d22\u5f15\u7c7b\u578b\u53d6\u51b3\u4e8e\u5e95\u5c42\u5f15\u64ce\u9009\u578b\uff0c\u50cf MyISAM\u3001InnoDB \u7b49\u652f\u6301B+\u6811\u7d22\u5f15\u7c7b\u578b\u3002       \\nPG \u5219\u652f\u6301B+\u6570\u7d22\u5f15\u3001\u54c8\u5e0c\u7d22\u5f15\u3001Gist\u7d22\u5f15\u7b49\u3002\\n\\n### \u66f4\u4e30\u5bcc\u7684\u96c6\u7fa4\u652f\u6301\\nMySQL \u7684\u96c6\u7fa4\u9ad8\u53ef\u7528\u4f9d\u8d56\u4e8e\u4e3b\u4ece\u590d\u5236\uff08replication\uff09\uff0c\u5176\u5e95\u5c42\u57fa\u4e8e binlog \u5b9e\u73b0\uff0c\u5e76\u4e14\u662f\u5f02\u6b65\u7684\u3002   \\n\u8fd9\u79cd\u540c\u6b65\u65b9\u6848\u5f88\u96be\u5b9e\u73b0\u540c\u6b65\u590d\u5236\uff0c\u66f4\u9002\u5408\u5f02\u5730\u590d\u5236\u7684\u573a\u666f\u3002\u5f53\u4e3b\u4ece\u8282\u70b9\u5904\u7406\u80fd\u529b\u4e0d\u4e00\u81f4\u65f6\uff0c\u7279\u522b\u662f\u4e3b\u8282\u70b9\u80fd\u529b\u5f31\u4e8e\u4ece\u8282\u70b9\u65f6\uff0c\u53ef\u80fd\u4f1a\u5b58\u5728\u8f83\u5927\u7684\u9ebb\u70e6\u3002\\n\\nPG \u7684\u4e3b\u5907\u590d\u5236\u5c5e\u4e8e\u7269\u7406\u590d\u5236\uff0c\u76f8\u8f83\u4e8ebinlog\u7684\u903b\u8f91\u590d\u5236\uff0c\u6570\u636e\u7684\u4e00\u81f4\u6027\u66f4\u52a0\u53ef\u9760\uff0c\u590d\u5236\u6027\u80fd\u66f4\u9ad8\uff0c\u5bf9\u4e3b\u673a\u7684\u5f71\u54cd\u4e5f\u66f4\u5c0f\u3002    \\nPG \u96c6\u7fa4\u6709\u8f83\u591a\u7684\u63d2\u4ef6\uff1a   \\n* slony \u652f\u6301\u5b57\u6bb5\u7ea7\u7684\u540c\u6b65\u96c6\u7fa4\u3002  \\n* standby \u652f\u6301WAL\u6587\u4ef6\u7ea7\u6216\u6d41\u5f0f\u7684\u8bfb\u5199\u5206\u79bb\u96c6\u7fa4\u3002     \\n\\n\\n## MySQL\u76f8\u8f83\u4e8ePG\u4f18\u52bf\\n\\n### \u4e1a\u754c\u4e3b\u6d41\\n\u4e3b\u6d41\u5c31\u610f\u5473\u7740\u4f60\u80fd\u627e\u5230\u66f4\u591a\u7684\u7528\u6237\u7ecf\u9a8c\u3001\u89e3\u51b3\u65b9\u6848\u3001\u6587\u6863\u7b49\u3002\\n\\n### \u7ebf\u7a0b\u6a21\u5f0f\u6bd4\u8fdb\u7a0b\u6a21\u5f0f\u66f4\u5360\u636e\u4f18\u52bf\\nMySQL \u4f7f\u7528\u4e86\u7ebf\u7a0b\uff0c\u800c PG \u4f7f\u7528\u7684\u662f\u8fdb\u7a0b\u3002\\n\\n\u8fdb\u7a0b\u4e4b\u95f4\u7684\u8c03\u5ea6\u5f00\u9500\u8981\u6bd4\u7ebf\u7a0b\u5927\u5f88\u591a\u3002\u4e5f\u662f\u56e0\u4e3a\u8fd9\u4e2a\u539f\u56e0\uff0cPG \u9ed8\u8ba4\u6700\u5927\u8fde\u63a5\u6570\u53ea\u6709 100\uff0c\u5bf9\u4e8e\u6570\u636e\u5e93\u6765\u8bf4\uff0c\u8fd9\u662f\u975e\u5e38\u5c0f\u7684\u8fde\u63a5\u6570\u4e86\u3002    \\n\u56e0\u6b64\uff0cPG \u66f4\u9700\u8981\u7c7b\u4f3c pgbounder \u7684\u8fde\u63a5\u6c60\u4ee3\u7406\u670d\u52a1\u6765\u786e\u4fdd\u6570\u636e\u5e93\u7a33\u5b9a\u3002\\n\\n### \u5b58\u50a8\u5f15\u64ce\u63d2\u4ef6\u5316\\nMySQL \u7684\u5b58\u50a8\u5f15\u64ce\u63d2\u4ef6\u5316\u673a\u5236\uff0c\u662f\u7684\u5b83\u7684\u5e94\u7528\u573a\u666f\u66f4\u52a0\u5e7f\u6cdb\uff0c\u6bd4\u5982 InnoDB \u9002\u5408\u4e8b\u52a1\u573a\u666f\uff0cMyISAM \u5219\u66f4\u9002\u5408\u9759\u6001\u6570\u636e\u7684\u67e5\u8be2\u573a\u666f\u3002\\n\\n### \u7d22\u5f15\u7ec4\u7ec7\u8868\\n\u4ee5 InnoDB \u4e3a\u4f8b\uff0cB+\u6811\u7d22\u5f15\u4e2d\uff0c\u4e3b\u952e\u7d22\u5f15\u6811\u4e2d\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684\u5c31\u662f\u7269\u7406\u6570\u636e\uff0c\u666e\u901a\u8282\u70b9\u7269\u7406\u7d22\u5f15\u5b58\u50a8\u7684\u662f\u4e3b\u952e\u7684\u7d22\u5f15\u3002\\n\\nPG \u7684\u7d22\u5f15\u8bb0\u5f55\u7684\u5747\u662f\u7269\u7406\u4f4d\u7f6e\uff0c\u9700\u8981\u4e8c\u6b21\u67e5\u8be2\u3002\\n\\n\x3c!--\\nSELECT virus_name, minor_type, rules#>>\'{0,rule,0}\' as c FROM \\"public\\".\\"avl_models\\" WHERE \\"expire\\" = \'f\' AND \\"major_type\\" = \'gen\'\\n\\nhttps://www.herodotus.cn/knowledge/postgresql/\\nhttps://www.modb.pro/db/51063\\nhttp://postgres.cn/docs/12/datatype-json.html\\n--\x3e\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"Go Http\u6a21\u5757\u5751\u70b9","metadata":{"permalink":"/docusaurus/blog/2022/06/05/golanghttp\u6a21\u5757","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/06-05-golanghttp\u6a21\u5757/index.md","source":"@site/blog/2022/06-05-golanghttp\u6a21\u5757/index.md","title":"Go Http\u6a21\u5757\u5751\u70b9","description":"\u8bb0\u5f55\u539f\u751f\u5e93 net/http \u4e2d\u53ef\u80fd\u9047\u5230\u7684\u5751\u70b9\u3002","date":"2022-06-05T00:00:00.000Z","formattedDate":"June 5, 2022","tags":[{"label":"go","permalink":"/docusaurus/blog/tags/go"}],"readingTime":0.46,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"PostgreSQL vs MySQL","permalink":"/docusaurus/blog/2022/06/07/pgvsmysql"},"nextItem":{"title":"golang\u9ad8IO\u573a\u666f\u4e0b\u7684\u5751\u70b9","permalink":"/docusaurus/blog/2022/05/31/golang\u9ad8IO\u573a\u666f\u4e0b\u7684\u5751\u70b9"}},"content":"\u8bb0\u5f55\u539f\u751f\u5e93 `net/http` \u4e2d\u53ef\u80fd\u9047\u5230\u7684\u5751\u70b9\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u9ed8\u8ba4 HttpClient \u672a\u914d\u7f6e\u8d85\u65f6\\n\u9ed8\u8ba4\u7684 `http.DefaultClient` \u4e0d\u5305\u542b\u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4\u3002\u5728\u67d0\u4e9b\u573a\u666f\u4f1a\u9020\u6210\u7a0b\u5e8f\u5f02\u5e38\u963b\u585e\u3002\\n\\n```go title=\\"\u589e\u52a0\u8d85\u65f6\u65f6\u95f4\\"\\nclient := &http.Client{\\n    Timeout: 60 * time.Second,\\n}\\n``` \\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"golang\u9ad8IO\u573a\u666f\u4e0b\u7684\u5751\u70b9","metadata":{"permalink":"/docusaurus/blog/2022/05/31/golang\u9ad8IO\u573a\u666f\u4e0b\u7684\u5751\u70b9","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/05-31-golang\u9ad8IO\u573a\u666f\u4e0b\u7684\u5751\u70b9/index.md","source":"@site/blog/2022/05-31-golang\u9ad8IO\u573a\u666f\u4e0b\u7684\u5751\u70b9/index.md","title":"golang\u9ad8IO\u573a\u666f\u4e0b\u7684\u5751\u70b9","description":"\u8ba1\u7b97\u673a\u7a0b\u5e8f\u573a\u666f\u53ef\u5206\u4e3a\u8ba1\u7b97\u5bc6\u96c6\u578b\u548cIO\u5bc6\u96c6\u578b\u3002\u8ba1\u7b97\u5bc6\u96c6\u578b\uff0c\u5373CPU\u5360\u7528\u8f83\u9ad8\u7684\u7a0b\u5e8f\uff0c\u4e00\u822c\u7c7b\u4f3cAI\u7b97\u6cd5\u7b49\u3002IO\u5bc6\u96c6\u578b\u5219\u5305\u62ec\u78c1\u76d8IO\u548c\u7f51\u7edcIO\u7b49\u3002","date":"2022-05-31T00:00:00.000Z","formattedDate":"May 31, 2022","tags":[{"label":"go","permalink":"/docusaurus/blog/tags/go"}],"readingTime":1.245,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"Go Http\u6a21\u5757\u5751\u70b9","permalink":"/docusaurus/blog/2022/06/05/golanghttp\u6a21\u5757"},"nextItem":{"title":"go mod\u7406\u89e3","permalink":"/docusaurus/blog/2022/04/07/gomod\u7406\u89e3"}},"content":"\u8ba1\u7b97\u673a\u7a0b\u5e8f\u573a\u666f\u53ef\u5206\u4e3a\u8ba1\u7b97\u5bc6\u96c6\u578b\u548cIO\u5bc6\u96c6\u578b\u3002\u8ba1\u7b97\u5bc6\u96c6\u578b\uff0c\u5373CPU\u5360\u7528\u8f83\u9ad8\u7684\u7a0b\u5e8f\uff0c\u4e00\u822c\u7c7b\u4f3cAI\u7b97\u6cd5\u7b49\u3002IO\u5bc6\u96c6\u578b\u5219\u5305\u62ec\u78c1\u76d8IO\u548c\u7f51\u7edcIO\u7b49\u3002    \\nGo \u7684\u534f\u7a0b\uff0c\u5929\u7136\u652f\u6301\u5e76\u53d1\u573a\u666f\uff0c\u5bf9\u4e8e\u8ba1\u7b97\u5bc6\u96c6\u578b\u548cIO\u5bc6\u96c6\u578b\u90fd\u6bd4\u8f83\u53cb\u597d\u3002\u4f46\u662f\u9ad8\u78c1\u76d8IO\u573a\u666f\u4f1a\u6709\u70b9\u95ee\u9898\uff0c\u4f7f\u7528\u4e0d\u5f53\u8fd8\u53ef\u80fd\u9020\u6210\u5751\u70b9\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u7f51\u7edcIO\u5c5e\u4e8e**\u4e8b\u4ef6\u9a71\u52a8**\u578b\uff0c\u53ef\u4ee5\u901a\u8fc7\u6ce8\u518c\u56de\u8c03\u5b9e\u73b0\u5f02\u6b65\u5316\u3002     \\n\u78c1\u76d8IO\u7684 read/write \u90fd\u662f\u540c\u6b65IO\uff0c\u662f\u963b\u585e\u4e8b\u4ef6\uff0c\u9700\u8981\u540c\u6b65\u7b49\u5f85\u3002\\n\\n\u6240\u4ee5\uff0c\u78c1\u76d8IO\u4f1a\u9020\u6210Go\u7684\u7ebf\u7a0b\u963b\u585e\uff0c\u800cGo\u57fa\u4e8eGMP\u6a21\u578b\uff0c\u5f53M\u963b\u585e\u7684\u65f6\u5019\uff0c\u4f1a\u91cd\u65b0\u521b\u5efa\u65b0\u7684M\u6765\u6267\u884cG\u4efb\u52a1\u3002   \\n\u6240\u4ee5\u5f53\u7c7b\u4f3c\u4efb\u52a1\u8db3\u591f\u591a\u65f6\uff0c\u4f1a\u9020\u6210Go\u7684M\u66b4\u6da8\uff0c\u8d85\u8fc71w\u4ee5\u540e\uff0c\u4f1a\u88ab\u6740\u6389\u3002\\n\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"go mod\u7406\u89e3","metadata":{"permalink":"/docusaurus/blog/2022/04/07/gomod\u7406\u89e3","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/04-07-gomod\u7406\u89e3/index.md","source":"@site/blog/2022/04-07-gomod\u7406\u89e3/index.md","title":"go mod\u7406\u89e3","description":"\u5982\u679c\u4f60\u642d\u5efa\u8fc7\u65e9\u671f Go \u9879\u76ee\uff0c\u5e94\u8be5\u4f1a\u6bd4\u8f83\u719f\u6089 GOPATH\u3002","date":"2022-04-07T00:00:00.000Z","formattedDate":"April 7, 2022","tags":[{"label":"go","permalink":"/docusaurus/blog/tags/go"}],"readingTime":0.845,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"golang\u9ad8IO\u573a\u666f\u4e0b\u7684\u5751\u70b9","permalink":"/docusaurus/blog/2022/05/31/golang\u9ad8IO\u573a\u666f\u4e0b\u7684\u5751\u70b9"},"nextItem":{"title":"tcmalloc\u7406\u89e3","permalink":"/docusaurus/blog/2022/04/05/tcmalloc\u7406\u89e3"}},"content":"\u5982\u679c\u4f60\u642d\u5efa\u8fc7\u65e9\u671f Go \u9879\u76ee\uff0c\u5e94\u8be5\u4f1a\u6bd4\u8f83\u719f\u6089 GOPATH\u3002   \\n\u5728\u4ee5\u524d\uff0c\u9879\u76ee\u4f9d\u8d56\u4e09\u65b9\u5305\u65f6\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7`go get`\u5c06\u4e09\u65b9\u4f9d\u8d56\u5e93\u4e0b\u8f7d\u5230 GOPATH\u3002\u8fd9\u5c31\u6d89\u53ca\u5230\u4e00\u4e2a\u7248\u672c\u7ef4\u62a4\u7684\u95ee\u9898\u3002  \\n\\n\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5f15\u5165\u4e86`go mod`\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## go mod\\n`go mod` \u662f\u4e00\u4e2a\u5305\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u3002\\n\\n\\n## git\u6ca1\u6cd5\u62c9\u4ee3\u7801\\ngo mod vendor\u62c9\u53d6\u4ee3\u7801\u62a5\u9519\uff1a\\n```text title=\\"\\"\\nThe project you were looking for could not be found\\n```\\n\u8fd9\u79cd\u5c5e\u4e8egit\u672a\u914d\u7f6e\u597d\u5bfc\u81f4\u7684\uff0c\u53ef\u4ee5\u518d\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\uff1a\\n```text title=\\".git-credentials\\"\\nhttps://user:pwd@gitee.com\\nhttps://user:pwd@github.com\\n```\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"tcmalloc\u7406\u89e3","metadata":{"permalink":"/docusaurus/blog/2022/04/05/tcmalloc\u7406\u89e3","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/04-05-tcmalloc\u7406\u89e3/index.md","source":"@site/blog/2022/04-05-tcmalloc\u7406\u89e3/index.md","title":"tcmalloc\u7406\u89e3","description":"tcmalloc\uff08Thread-Caching Malloc\uff09\u662f\u4e00\u4e2a\u5185\u5b58\u5206\u914d\u5668\uff0c\u7528\u4e8e\u7ba1\u7406\u5806\u5185\u5b58\u3002","date":"2022-04-05T00:00:00.000Z","formattedDate":"April 5, 2022","tags":[{"label":"\u8ba1\u7b97\u673a\u57fa\u7840","permalink":"/docusaurus/blog/tags/\u8ba1\u7b97\u673a\u57fa\u7840"}],"readingTime":0.99,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"go mod\u7406\u89e3","permalink":"/docusaurus/blog/2022/04/07/gomod\u7406\u89e3"},"nextItem":{"title":"redis\u6307\u6807\u5c0f\u7ed3","permalink":"/docusaurus/blog/2022/04/02/redis\u6307\u6807\u5c0f\u7ed3"}},"content":"tcmalloc\uff08Thread-Caching Malloc\uff09\u662f\u4e00\u4e2a\u5185\u5b58\u5206\u914d\u5668\uff0c\u7528\u4e8e\u7ba1\u7406\u5806\u5185\u5b58\u3002  \\n\u4e3b\u8981\u5f71\u54cd\u7684\u662fmalloc\u548cfree\uff0c\u7528\u4e8e\u964d\u4f4e\u9891\u7e41\u5206\u914d\u3001\u91ca\u653e\u5185\u5b58\u573a\u666f\u6240\u9020\u6210\u7684\u6027\u80fd\u635f\u8017\uff0c\u53ef\u4ee5\u6709\u6548\u7684\u63a7\u5236\u5185\u5b58\u788e\u7247\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## ptmalloc & tcmalloc\\n\u5728tcmalloc\u4e4b\u524d\uff0c\u8fd8\u6709\u4e00\u4e2aptmalloc\uff0ctcmalloc\u53f7\u79f0\u8981\u6bd4\u5b83\u5feb\u3002   \\n\u4e00\u6b21malloc\u548cfree\u64cd\u4f5c\uff0cptmalloc\u9700\u8981300ns\uff0c\u800ctcmalloc\u53ea\u9700\u898150ns\u3002   \\n\\ntcmalloc\u5c06\u5185\u5b58\u8bf7\u6c42\u5206\u4e3a\u4e86\u4e24\u7c7b\uff1a\u5927\u5bf9\u8c61\u8bf7\u6c42\u548c\u5c0f\u5bf9\u8c61\u8bf7\u6c42\u3002\uff08\u5927\u4e8e32K\u7684\u5c5e\u4e8e\u5927\u5bf9\u8c61\uff09   \\n\u5b83\u4f1a\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u5206\u914d\u672c\u5730\u7f13\u5b58\uff0c\u5c0f\u5bf9\u8c61\u8bf7\u6c42\u53ef\u4ee5\u76f4\u63a5\u4ece\u672c\u5730\u7f13\u5b58\u83b7\u53d6\uff0c\u6240\u4ee5\u5bf9\u4e8e\u5c0f\u5bf9\u8c61\u7684\u5206\u914d\u57fa\u672c\u4e0d\u5b58\u5728\u9501\u7ade\u4e89\u3002\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"redis\u6307\u6807\u5c0f\u7ed3","metadata":{"permalink":"/docusaurus/blog/2022/04/02/redis\u6307\u6807\u5c0f\u7ed3","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/04-02-redis\u6307\u6807\u5c0f\u7ed3/index.md","source":"@site/blog/2022/04-02-redis\u6307\u6807\u5c0f\u7ed3/index.md","title":"redis\u6307\u6807\u5c0f\u7ed3","description":"\u672c\u6587\u5b66\u4e60\u603b\u7ed3\u4e0b redis \u5e38\u7528\u7684\u89c2\u6d4b\u6307\u6807\uff0c\u5305\u62ec\uff1a\u6027\u80fd\u6307\u6807\u3001\u5185\u5b58\u6307\u6807\u7b49\u3002","date":"2022-04-02T00:00:00.000Z","formattedDate":"April 2, 2022","tags":[{"label":"redis","permalink":"/docusaurus/blog/tags/redis"}],"readingTime":1.565,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"tcmalloc\u7406\u89e3","permalink":"/docusaurus/blog/2022/04/05/tcmalloc\u7406\u89e3"},"nextItem":{"title":"\u8bb0\u4e00\u6b21 redis \u67e5\u8be2 \u5f02\u5e38","permalink":"/docusaurus/blog/2022/04/01/\u8bb0\u4e00\u6b21redis\u67e5\u8be2\u5f02\u5e38"}},"content":"\u672c\u6587\u5b66\u4e60\u603b\u7ed3\u4e0b redis \u5e38\u7528\u7684\u89c2\u6d4b\u6307\u6807\uff0c\u5305\u62ec\uff1a\u6027\u80fd\u6307\u6807\u3001\u5185\u5b58\u6307\u6807\u7b49\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u6027\u80fd\u6307\u6807\\nredis \u4f5c\u4e3a\u9ad8\u6027\u80fd\u7f13\u5b58\u670d\u52a1\uff0c\u5176\u6027\u80fd\u6307\u6807\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u89c2\u6d4b\u70b9\u3002\\n\\n|\u540d\u79f0|\u8bf4\u660e|\\n|---|---|\\n|latency|\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\u3002\u8be5\u6570\u636e\u65e0\u6cd5\u4ece info \u4e2d\u83b7\u53d6\uff0c\u9700\u8981\u4f7f\u7528 redis-cli \u52a0\u6307\u5b9a\u53c2\u6570\u3002eg\uff1a`redis-cli --latency`|\\n|instantaneous_ops_per_sec|\u6bcf\u79d2\u5904\u7406\u7684\u547d\u4ee4\u603b\u6570\uff0c\u53ef\u4ee5\u5728 info stats \u4e2d\u83b7\u53d6\u3002|\\n|hit rate|\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be5\u503c\u65e0\u6cd5\u76f4\u63a5\u83b7\u53d6\uff0c\u9700\u8981\u901a\u8fc7\u8ba1\u7b97\uff1a`keyspace_hits /\uff08keyspace_hits + keyspace_misses\uff09`|\\n\\n\\n## \u5185\u5b58\u6307\u6807\\nredis \u4f5c\u4e3a\u5e38\u89c1\u5185\u5b58\u6570\u636e\u5e93\uff0c\u5176\u5185\u5b58\u6307\u6807\u4e5f\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u89c2\u6d4b\u70b9\u3002\\n\\n|\u540d\u79f0|\u8bf4\u660e|\\n|---|---|\\n|used_memory|\u5185\u5b58\u4f7f\u7528\u91cf\uff0c\u53ef\u4ee5\u5728 info memory \u4e2d\u83b7\u53d6\u3002|\\n|mem_fragmentation_ratio|\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u7684\u5185\u5b58\u548c redis \u8bf7\u6c42\u7684\u5185\u5b58\u7684\u6bd4\u7387\u3002\u8ba1\u7b97\u65b9\u5f0f\u4e3a\uff1a`mem_fragmentation_ratio = used_memory_rss / used_memory`\u3002\u8be5\u6307\u6807\u53ef\u4ee5\u7528\u4e8e\u89c2\u6d4b redis \u670d\u52a1\u5668\u7684\u5185\u5b58\u788e\u7247\u7387\u3002\u8be5\u503c\u5927\u4e8e1\uff0c\u8868\u793a\u5b58\u5728\u5185\u5b58\u788e\u7247\uff0c\u6bd4\u59821.5\uff0c\u5219\u8868\u793a50%\u662f\u5185\u5b58\u788e\u7247\u3002\u82e5\u8be5\u503c\u5c0f\u4e8e1\uff0c\u5219\u8868\u793aredis\u5185\u5b58\u5206\u914d\u8d85\u51fa\u4e86\u7269\u7406\u5185\u5b58\uff0c\u64cd\u4f5c\u7cfb\u7edf\u6b63\u5728\u8fdb\u884c\u5185\u5b58\u4ea4\u6362\u3002|\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u8bb0\u4e00\u6b21 redis \u67e5\u8be2 \u5f02\u5e38","metadata":{"permalink":"/docusaurus/blog/2022/04/01/\u8bb0\u4e00\u6b21redis\u67e5\u8be2\u5f02\u5e38","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/04-01-\u8bb0\u4e00\u6b21redis\u67e5\u8be2\u5f02\u5e38/index.md","source":"@site/blog/2022/04-01-\u8bb0\u4e00\u6b21redis\u67e5\u8be2\u5f02\u5e38/index.md","title":"\u8bb0\u4e00\u6b21 redis \u67e5\u8be2 \u5f02\u5e38","description":"\u4eca\u5929\u9047\u5230\u4e00\u4e2a\u8be1\u5f02\u7684\u4e8b\u60c5\uff0c\u6709\u4e00\u4e2a\u57fa\u4e8e redis \u63d0\u4f9b\u9ad8\u6027\u80fd\u67e5\u8be2\u7684\u670d\u52a1\uff0c\u5728\u975e\u9ad8\u5cf0\u671f\u65f6\u5c45\u7136\u5927\u91cf\u62a5\u9519\u3002","date":"2022-04-01T00:00:00.000Z","formattedDate":"April 1, 2022","tags":[{"label":"redis","permalink":"/docusaurus/blog/tags/redis"}],"readingTime":5.71,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"redis\u6307\u6807\u5c0f\u7ed3","permalink":"/docusaurus/blog/2022/04/02/redis\u6307\u6807\u5c0f\u7ed3"},"nextItem":{"title":"golang \u9009\u9879\u6a21\u5f0f","permalink":"/docusaurus/blog/2022/03/28/golang\u9009\u9879\u6a21\u5f0f"}},"content":"\u4eca\u5929\u9047\u5230\u4e00\u4e2a\u8be1\u5f02\u7684\u4e8b\u60c5\uff0c\u6709\u4e00\u4e2a\u57fa\u4e8e redis \u63d0\u4f9b\u9ad8\u6027\u80fd\u67e5\u8be2\u7684\u670d\u52a1\uff0c\u5728\u975e\u9ad8\u5cf0\u671f\u65f6\u5c45\u7136\u5927\u91cf\u62a5\u9519\u3002      \\n\u4e3a\u4ec0\u4e48\u8bf4\u8be1\u5f02\u5462\uff0c\u56e0\u4e3a\u62a5\u9519\u5185\u5bb9\u4e3a\uff1a`redis: connection pool timeout`\u3002\u800c\u8fd9\u4e2a\u670d\u52a1\u7684\u67e5\u8be2\u573a\u666f\u53ca\u5176\u7b80\u5355\uff0c\u53ea\u6709 `get` \u548c `mget` \u4e24\u79cd\uff0c\u62a5\u8fd9\u4e2a\u9519\u5c31\u610f\u5473\u7740 redis \u67e5\u8be2\u6027\u80fd\u4e0d\u8db3\uff1f         \\n\u672c\u6587\u8bb0\u5f55\u4e00\u4e0b\u6392\u67e5\u95ee\u9898\u7684\u8fc7\u7a0b\u3002      \\n![](./1.1.png)\\n\\n\x3c!--truncate--\x3e\\n\\n## \u7b2c\u4e00\u8f6e\u5206\u6790\u5b9a\u4f4d\\n`redis: connection pool timeout` \u662f\u8fde\u63a5\u6c60\u8d85\u65f6\uff0c\u8fd9\u79cd\u95ee\u9898\u53d1\u751f\u7684\u573a\u666f\u4e00\u822c\u662f\u7531\u4e8e\u67d0\u4e2a\u64cd\u4f5c\u8fc7\u4e8e\u8017\u65f6\uff0c\u5bfc\u81f4 redis \u963b\u585e\uff0c\u4ece\u800c\u5bfc\u81f4\u5176\u4ed6\u67e5\u8be2\u62a5\u9519\u3002      \\n\u6240\u4ee5\u7b2c\u4e00\u6b65\u5c31\u662f\u53bb\u7ebf\u4e0a\u67e5\u770b\u6162\u65e5\u5fd7 `SLOWLOG`\uff0c\u6211\u4eec\u6162\u65e5\u5fd7\u9608\u503c\u4e3a 1s\uff0c\u800c\u8fde\u63a5\u8d85\u65f6\u914d\u7f6e\u4e3a 4s\u3002\u5982\u679c\u662f\u56e0\u4e3a\u6162\u64cd\u4f5c\u5bfc\u81f4\u8d85\u65f6\uff0c\u90a3\u5e94\u8be5\u662f\u4f1a\u88ab\u8bb0\u5f55\u4e0b\u6765\u7684\u3002  \\n\u4f46\u5b9e\u9645\u6ca1\u6709\uff0c\u56e0\u4e3a\u6211\u4eec\u4e1a\u52a1\u573a\u666f\u53ea\u6709\u7b80\u5355\u7684 `get` \u548c \u5c0f\u91cf\u7684 `mget`\u3002\u6240\u4ee5\u8981\u4ece\u5176\u4ed6\u89d2\u5ea6\u8fdb\u884c\u5206\u6790\u3002\\n\\n\u8fd9\u4e2a\u670d\u52a1\u5f53\u65f6\u7684\u5e76\u53d1\u538b\u529b\u5728\u51e0\u5343QPS\u5de6\u53f3\uff0credis \u4e0d\u5e94\u8be5\u5b58\u5728\u6297\u4e0d\u4f4f\u7684\u95ee\u9898\u3002\u7ffb\u4e86\u4e0b\u62a5\u9519\u65f6\u95f4\u70b9\u7684\u4e0a\u4e0b\u6587\u65e5\u5fd7\uff0c\u786e\u5b9e\u53d1\u73b0\u4e86\u4e00\u4e9b\u95ee\u9898\uff1a       \\n![](1.2.png)     \\n\u7bad\u5934\u65f6\u95f4\u6bb5\uff0c\u5373\u572842\u5206\u523044\u5206\u4e4b\u95f4\uff0c\u521a\u597d\u5c31\u662f redis \u67e5\u8be2\u62a5\u9519\u7684\u65f6\u95f4\u6bb5\u3002     \\n\u8bf4\u660e\u5c31\u662f42\u5206\u7684\u540c\u6b65\u884c\u4e3a\uff0c\u5f71\u54cd\u5230\u4e86 redis \u7684\u67e5\u8be2\u6027\u80fd\u3002   \\n\\n\u901a\u8fc7\u6392\u67e5\u53d1\u73b0\uff0c\u8fd9\u4e2a\u670d\u52a1\u6709\u70b9\u7279\u6b8a\uff0c\u662f\u4ee5 daemon \u7684\u5f62\u5f0f\u90e8\u7f72\u5728 k8s \u4e0a\uff0c\u4e14\u5355 pod \u72ec\u5360\u8282\u70b9\u3002pod \u5185\u53c8\u5305\u542b redis \u548c postgres \u7b49\u591a\u4e2a\u670d\u52a1\u3002      \\n\u8fdb\u4e00\u6b65\u6392\u67e5\u4e86\u89e3\u5230\uff0c\u56e0\u4e3a\u8d44\u6e90\u6709\u9650\uff0c\u6240\u4ee5\u6ca1\u52a0\u8d44\u6e90\u914d\u989d\uff0c\u907f\u514d\u670d\u52a1\u90e8\u7f72\u4e0d\u4e0a\u53bb\u3002\u56e0\u6b64\uff0c\u5b58\u5728\u67d0\u65f6\u523b\u7684**\u8d44\u6e90\u503e\u659c**\u5bfc\u81f4\u5176\u4f59\u670d\u52a1\u4e0d\u53ef\u7528\u3002\\n      \\n\u8fd9\u7c7b\u95ee\u9898\u5176\u5b9e\u5728\u7269\u7406\u673a\u4e0a\u7ecf\u5e38\u53d1\u751f\uff0c\u6ca1\u60f3\u5230\u8fd9\u6b21\u6362\u4e86\u79cd\u5f62\u5f0f\u53d1\u751f\u5728\u4e86 k8s \u4e0a\u9762\u3002    \\n\u89e3\u51b3\u65b9\u6cd5\u4e5f\u6bd4\u8f83\u7b80\u5355\uff1a    \\n1\u3001\u589e\u52a0\u673a\u5668\u8d44\u6e90\uff0c\u5efa\u8bae 4c \u5347\u7ea7 8c\u3002     \\n2\u3001\u589e\u52a0\u8d44\u6e90\u914d\u989d\u3002 \\n\\n\u7531\u4e8e\u9884\u7b97\u4e0d\u8db3\uff0c\u6682\u65f6\u53ea\u80fd\u91c7\u7528\u7b2c\u4e8c\u79cd\u65b9\u6848\uff0c\u5373\u52a0\u4e0a\u8d44\u6e90\u914d\u989d\u3002    \\n\u4f46\u662f\u8d44\u6e90\u5b9e\u5728\u6709\u9650\uff0c\u65e0\u6cd5\u5177\u4f53\u7cbe\u786e\u5230\u6bcf\u4e00\u4e2a\u5bb9\u5668\uff0c\u6545\u6682\u65f6\u4ec5\u5bf9 redis \u52a0\u4e0a\u8d44\u6e90\u914d\u989d\uff1a  \\n```yaml\\nresources:\\n  requests:\\n    cpu: \'1\'\\n```\\n\\n## \u7b2c\u4e8c\u8f6e\u5206\u6790\u5b9a\u4f4d\\n\u901a\u8fc7\u51e0\u5929\u7684\u89c2\u5bdf\uff0c\u53d1\u73b0\u5e76\u6ca1\u6709\u5b9e\u9645\u7684\u6548\u679c\u3002redis \u4ecd\u7136\u51fa\u73b0\u4e86\u67e5\u8be2\u8d85\u65f6\u7684\u573a\u666f\u3002\u800c\u4e14\u8fd8\u662f\u5728\u66f4\u65b0\u9ad8\u5cf0\u671f\u65f6\u95f4\u6bb5\u53d1\u751f\u7684\u3002   \\n\u4f46\u662f\u6211\u4eec\u5df2\u7ecf\u7ed9 redis \u5355\u72ec\u7533\u8bf7\u4e86 1c \u7684\u8ba1\u7b97\u8d44\u6e90\uff0c\u4e0d\u5e94\u8be5\u51fa\u73b0\u7c7b\u4f3c\u95ee\u9898\u3002\\n\\n\u6211\u4eec\u4ed4\u7ec6\u6392\u67e5\u4e86\u5bb9\u5668\u76d1\u63a7\uff0c\u53d1\u73b0\u5404\u4e2a\u5bb9\u5668\u90fd\u6ca1\u6709\u51fa\u73b0\u660e\u663e\u7684\u9ad8\u8d1f\u8f7d\u573a\u666f\u3002\u60c5\u51b5\u6709\u70b9\u8be1\u5f02\uff0c\u4ece\u5185\u90e8\u770b\u4e0d\u51fa\u4ec0\u4e48\u60c5\u51b5\uff0c\u6240\u4ee5\u6211\u4eec\u770b\u4e86\u4e0b\u5f53\u524d\u8282\u70b9\u7684\u76d1\u63a7\uff1a   \\n![](./1.5.png)   \\n\u679c\u7136\uff0ccpu \u5229\u7528\u7387\u6ca1\u6709\u6ee1\uff0c\u4f46\u662f Load \u8d1f\u8f7d\u5df2\u7ecf\u6ee1\u4e86\u3002\u751a\u81f3\u8d85\u4e86\u5f88\u591a\u3002  \\n\u57fa\u672c\u53ef\u4ee5\u77f3\u9524\u662f pg \u5728\u9ad8\u66f4\u65b0\u573a\u666f\u5f71\u54cd redis \u8c03\u5ea6\u3002\u6682\u65f6\u53ea\u80fd\u589e\u52a0 limits \u8d44\u6e90\u9650\u5236\u4e86\u3002\\n\\n:::info load average - \u5e73\u5747\u8d1f\u8f7d\\n`load average` \u662f\u6307\u5355\u4f4d\u65f6\u95f4\u5185\uff0c\u7cfb\u7edf\u5904\u4e8e **\u53ef\u8fd0\u884c\u72b6\u6001** \u548c **\u4e0d\u53ef\u7ec8\u7aef\u72b6\u6001** \u7684\u5e73\u5747\u8fdb\u7a0b\u6570\uff0c\u5b83\u548c cpu \u4f7f\u7528\u7387\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\u3002\\n\\n\u5176\u4e2d\uff0c\u53ef\u8fd0\u884c\u72b6\u6001\u6307\u6b63\u5728\u4f7f\u7528 cpu \u6216\u8005 \u6b63\u5728\u7b49\u5f85 cpu \u7684\u8fdb\u7a0b\uff0c\u5373\u5904\u4e8e R \u72b6\u6001\u7684\u8fdb\u7a0b\u3002      \\n\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u7684\u8fdb\u7a0b\uff0c\u662f\u6307\u6b63\u5904\u4e8e\u5185\u6838\u6001\u5173\u952e\u6d41\u7a0b\u4e2d\u7684\u8fdb\u7a0b\uff0c\u5e76\u4e14\u8fd9\u4e9b\u8fdb\u7a0b\u662f\u4e0d\u53ef\u6253\u65ad\u7684\u3002\u6bd4\u5982\u6700\u5e38\u89c1\u7684\u5c31\u662f\u7b49\u5f85\u786c\u4ef6\u8bbe\u5907\u7684IO\u54cd\u5e94\u3002    \\n\\n\u6240\u4ee5\uff0c1m load average \u7684\u610f\u601d\u5c31\u662f\u6307 1min \u5185\u6b63\u5728\u4f7f\u7528 cpu \u7684\u7ebf\u7a0b + \u6b63\u5728\u7b49\u5f85 cpu \u7684\u7ebf\u7a0b + \u6b63\u5728\u7b49\u5f85IO\u7684\u7ebf\u7a0b\u3002\u540c\u7406 5m \u548c 15 m \u4e5f\u662f\u5982\u6b64\u8ba1\u7b97\u3002\\n\\n\u5bf9\u4e8e\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\uff0ccpu \u4f7f\u7528\u7387\u5347\u9ad8\u65f6\uff0c\u5e73\u5747\u8d1f\u8f7d\u57fa\u672c\u4e5f\u4f1a\u5347\u9ad8\u3002     \\n\u5bf9\u4e8eIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0ccpu \u4f7f\u7528\u7387\u53ef\u80fd\u4e0d\u4f1a\u5f88\u9ad8\uff0c\u4f46\u7531\u4e8e\u7b49\u5f85IO\u7684\u7ebf\u7a0b\u4f1a\u589e\u52a0\uff0c\u6240\u4ee5\u5e73\u5747\u8d1f\u8f7d\u4e5f\u4f1a\u589e\u52a0\u3002         \\n:::\\n\\n\\n## \u7b2c\u4e09\u8f6e\u5206\u6790\u5b9a\u4f4d\\n\u7a81\u7136\u60f3\u8d77\u5b98\u7f51\u7684\u4e00\u53e5\u8bdd\uff1a\u5bf9\u4e8e redis \u6765\u8bf4\uff0ccpu \u5f80\u5f80\u4e0d\u4f1a\u662f\u6027\u80fd\u74f6\u9888\uff0c\u5185\u5b58\u5927\u5c0f\u548c\u7f51\u7edc\u5e26\u5bbd\u624d\u53ef\u80fd\u662f redis \u7684\u74f6\u9888\u3002\\n\\n\u4e4b\u524d\u7684\u5206\u6790\u5e94\u8be5\u662f\u88ab\u5e26\u504f\u4e86\u3002\u5bf9\u4e8e\u9ad8\u66f4\u65b0\u573a\u666f\uff0c\u6570\u636e\u5e93\u4f1a\u5360\u7528\u5927\u91cf\u7684\u78c1\u76d8IO\uff0c\u8fd9\u4e00\u5757\u53ef\u80fd\u4f1a\u9020\u6210\u5f71\u54cd\uff1f\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"golang \u9009\u9879\u6a21\u5f0f","metadata":{"permalink":"/docusaurus/blog/2022/03/28/golang\u9009\u9879\u6a21\u5f0f","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/03-28-golang\u9009\u9879\u6a21\u5f0f/index.md","source":"@site/blog/2022/03-28-golang\u9009\u9879\u6a21\u5f0f/index.md","title":"golang \u9009\u9879\u6a21\u5f0f","description":"\u5728 golang \u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u9047\u5230\u8fd9\u4e48\u4e00\u79cd\u95ee\u9898\uff1a\u53c2\u6570\u8fc7\u591a\uff0c\u5f53\u5e0c\u671b\u5c06\u53c2\u6570\u914d\u7f6e\u6210\u53ef\u9009\u7684\u6a21\u5f0f\u3002","date":"2022-03-28T00:00:00.000Z","formattedDate":"March 28, 2022","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"}],"readingTime":1.715,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u8bb0\u4e00\u6b21 redis \u67e5\u8be2 \u5f02\u5e38","permalink":"/docusaurus/blog/2022/04/01/\u8bb0\u4e00\u6b21redis\u67e5\u8be2\u5f02\u5e38"},"nextItem":{"title":"golang \u7684 CSP&GMP \u6a21\u578b","permalink":"/docusaurus/blog/2022/03/27/golang-GMP\u6a21\u578b"}},"content":"\u5728 golang \u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u9047\u5230\u8fd9\u4e48\u4e00\u79cd\u95ee\u9898\uff1a\u53c2\u6570\u8fc7\u591a\uff0c\u5f53\u5e0c\u671b\u5c06\u53c2\u6570\u914d\u7f6e\u6210\u53ef\u9009\u7684\u6a21\u5f0f\u3002    \\n\\n\u5728\u5176\u4ed6\u8bed\u8a00\u4e2d\u6709\u4e0d\u540c\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u6bd4\u5982 python \u5c31\u652f\u6301\u9ed8\u8ba4\u53c2\u6570\uff0c\u53ef\u4ee5\u5f88\u597d\u7684\u5904\u7406\u8fd9\u4e2a\u95ee\u9898\u3002      \\n\u5728 golang \u4e2d\u4e5f\u6709\u4e00\u79cd\u9009\u9879\u6a21\u5f0f\uff0c\u53ef\u4ee5\u6bd4\u8f83\u53cb\u597d\u7684\u5904\u7406\u8fd9\u7c7b\u95ee\u9898\u3002   \\n\\n\x3c!--truncate--\x3e\\n\\n#### \u9009\u9879\u6a21\u5f0f\\n\u9009\u9879\u6a21\u5f0f\u7684\u4e3b\u8981\u6d41\u7a0b\u662f\uff1a\u521d\u59cb\u5316\u4e00\u4e2a\u9ed8\u8ba4\u53c2\u6570\uff0c\u7136\u540e\u63d0\u4f9b\u53ef\u53d8\u53c2\u6570\uff0c\u8fd9\u4e9b\u53c2\u6570\u53ef\u4ee5\u9488\u5bf9\u6027\u7684\u4fee\u6539\u6b64\u9ed8\u8ba4\u53c2\u6570\uff0c\u6700\u7ec8\u5f97\u5230\u76ee\u6807\u53c2\u6570\u3002\\n\\n```go\\ntype MyFuncOption func(options *MyFuncOptions)\\n\\nfunc WithOptionStr1(str1 string) MyFuncOption {\\n    return func(options *MyFuncOptions) {\\n        options.optionStr1 = str1\\n    }\\n}\\n\\nfunc WithOptionInt1(int1 int) MyFuncOption {\\n    return func(options *MyFuncOptions) {\\n        options.optionInt1 = int1\\n    }\\n}\\n\\nfunc WithOptionStr2AndInt2(str2 string, int2 int) MyFuncOption {\\n    return func(options *MyFuncOptions) {\\n        options.optionStr2 = str2\\n        options.optionInt2 = int2\\n    }\\n}\\n\\nfunc NewIns(options ...MyFuncOption) {\\n    defaultOptions := Options{}\\n    for _, f := range options {\\n        f(&defaultOptions)\\n    }\\n}\\n```\\n\\n#### \u5e38\u89c1\u65b9\u6cd5\\n\u8fd9\u7c7b\u53c2\u6570\u7684\u9009\u62e9\u8d77\u59cb\u6bd4\u8f83\u81ea\u7531\uff0c\u4e00\u822c\u9009\u9879\u6a21\u5f0f\u9002\u7528\u4e8e\u53c2\u6570\u91cf\u8f83\u591a\u7684\u573a\u666f\uff0c\u5f53\u53c2\u6570\u8f83\u5c11\u65f6\uff0c\u4e0d\u59a8\u76f4\u63a5\u5339\u914d\u9009\u9879\\n```go\\ntype Opt int\\n\\nconst (\\n    OptEnv Opt = 1 << iota\\n    OptDefault\\n    OptSilent // ignore err and iterate over all fields.\\n)\\n\\nfunc NewIns(opts ...Opt) {\\n    var opt Opt = 0\\n    for _, o := range opts {\\n        opt = opt | o\\n    }\\n}\\n```\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"golang \u7684 CSP&GMP \u6a21\u578b","metadata":{"permalink":"/docusaurus/blog/2022/03/27/golang-GMP\u6a21\u578b","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/03-27-golang-GMP\u6a21\u578b/index.md","source":"@site/blog/2022/03-27-golang-GMP\u6a21\u578b/index.md","title":"golang \u7684 CSP&GMP \u6a21\u578b","description":"CSP","date":"2022-03-27T00:00:00.000Z","formattedDate":"March 27, 2022","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"}],"readingTime":4.235,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"golang \u9009\u9879\u6a21\u5f0f","permalink":"/docusaurus/blog/2022/03/28/golang\u9009\u9879\u6a21\u5f0f"},"nextItem":{"title":"\u8bb0\u4e00\u6b21pg\u8fc1\u79fbk8s\u7684\u5751\u70b9","permalink":"/docusaurus/blog/2022/03/25/\u8bb0\u4e00\u6b21pg\u8fc1\u79fbk8s\u7684\u5751\u70b9"}},"content":"\x3c!-- https://zhuanlan.zhihu.com/p/261590663 --\x3e\\n\\n\x3c!--truncate--\x3e\\n\\n## CSP\\nCSP\uff08communicating sequential processes\uff09\uff0c\u662f golang \u63a8\u5d07\u7684\u4e00\u79cd\u5e76\u53d1\u6a21\u5f0f\uff0c\u5176\u4e2d\u6709\u4e00\u53e5\u6bd4\u8f83\u7ecf\u5178\u7684\u8bdd\u662f\uff1a    \\n**\u4e0d\u8981\u4ee5\u5171\u4eab\u5185\u5b58\u7684\u65b9\u5f0f\u6765\u901a\u4fe1\uff0c\u76f8\u53cd\uff0c\u5e94\u8be5\u4ee5\u901a\u4fe1\u7684\u65b9\u5f0f\u6765\u5171\u4eab\u5185\u5b58\u3002**\\n\\n\u5728\u5e38\u89c1\u7684\u591a\u7ebf\u7a0b\u5171\u4eab\u5185\u5b58\u7684\u6a21\u5f0f\u4e2d\uff0c\u5f53\u6d89\u53ca\u5230\u591a\u7ebf\u7a0b\u64cd\u4f5c\u5171\u4eab\u6570\u636e\u65f6\uff0c\u4e00\u822c\u9700\u8981\u901a\u8fc7\u52a0\u9501\u6765\u4fdd\u8bc1\u6570\u636e\u548c\u7ebf\u7a0b\u5b89\u5168\u3002  \\ngo \u5219\u5f15\u5165\u4e86 chan \u4fe1\u9053\uff0c\u53ef\u4ee5\u7528\u4e8e\u591a goroutine \u4e4b\u95f4\u7684\u901a\u4fe1\u3002\\n\\n## GMP\\ngolang \u6267\u884c\u591a\u4efb\u52a1\u65f6\uff0c\u4f1a\u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\uff0c\u7136\u540e\u6709\u8c03\u5ea6\u5668\u4f1a\u5c06\u4efb\u52a1\u5355\u5143\u5206\u914d\u7ed9\u7ebf\u7a0b\u6267\u884c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u4e00\u79cd\u5178\u578b\u7684\u751f\u4ea7\u8005\u6d88\u8d39\u8005\u6a21\u5f0f\u3002\\n\\n* G\uff1agoroutine\uff0c\u6b64\u5904\u6307\u534f\u7a0b\u3002\u5b83\u76f8\u5f53\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fdb\u7a0b\u63a7\u5236\u5757\uff0c\u5305\u542b\uff1a\u5bc4\u5b58\u5668\u3001\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u3001\u51fd\u6570\u6267\u884c\u6307\u4ee4\u7b49\u3002     \\n* M\uff1amachine\uff0c\u6b64\u5904\u6307\u5b9e\u9645\u7684\u5185\u6838\u7ebf\u7a0b\uff0c\u7528\u4e8e\u6267\u884c G\u3002    \\n* P\uff1aprocessor\uff0c\u6b64\u5904\u6307\u8c03\u5ea6\u5668\uff0c\u662f M \u6240\u9700\u8981\u7684\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u5185\u90e8\u7ef4\u62a4\u6709\u4e00\u4e2a\u672c\u5730\u961f\u5217\u3002\u5f53 P \u4e2d\u6709\u4efb\u52a1\u65f6\uff0c\u4f1a\u521b\u5efa\u6216\u8005\u5524\u9192 M \u53bb\u5904\u7406\u4efb\u52a1\u3002   \\n* \u672c\u5730\u961f\u5217\uff1aP \u7ef4\u62a4\u4e00\u4e2a\u672c\u5730\u961f\u5217\u6765\u5b58\u653e G\uff0c\u65b0\u521b\u5efa\u7684 G \u4f1a\u4f18\u5148\u5b58\u653e\u5728 P \u7684\u672c\u5730\u961f\u5217\uff0c\u5f53\u672c\u5730\u961f\u5217\u6ee1\u540e\uff0c\u4f1a\u653e\u5165\u5230\u5168\u5c40\u961f\u5217\u3002    \\n* \u5168\u5c40\u961f\u5217\uff1aM \u6267\u884c\u65f6\u4f1a\u5148\u4ece\u672c\u5730\u961f\u5217\u83b7\u53d6 G\uff0c\u672c\u5730\u6ca1\u6709\u5219\u53bb\u5168\u5c40\u961f\u5217\u83b7\u53d6\uff0c\u5982\u679c\u5168\u5c40\u961f\u5217\u4e5f\u6ca1\u6709\uff0c\u5219\u5c1d\u8bd5\u53bb\u5176\u4ed6 P \u7684\u672c\u5730\u961f\u5217\u53bb\u5077\u53d6\u4e00\u4e9b\u4efb\u52a1\u3002   \\n* M0\uff1a\u7a0b\u5e8f\u542f\u52a8\u540e\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u8d1f\u8d23\u542f\u52a8\u8d77\u4e00\u4e2a G0 \u5e76\u6267\u884c\u521d\u59cb\u5316\u64cd\u4f5c\uff0c\u5305\u542b\u521d\u59cb\u5316\u672c\u5730\u961f\u5217\u3001\u5168\u5c40\u961f\u5217\u7b49\uff0c\u542f\u52a8 G0 \u4e4b\u540e M0 \u5c31\u548c\u666e\u901a M \u4e00\u6837\u4e86\u3002\\n* G0\uff1a\u6bcf\u521b\u5efa\u4e00\u4e2a M\uff0c\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a G0\uff0c\u8fd9\u91cc\u7684 G0 \u4ec5\u7528\u4e8e\u8d1f\u8d23\u8c03\u5ea6\u5176\u4ed6\u7684 G\u3002\u6bd4\u5982\u5f53 M \u4ece G1 \u5207\u6362\u81f3 G2\uff0c\u9996\u5148\u5e94\u8be5\u5207\u5230 G0\uff0c\u7136\u540e\u7531 G0 \u5e72\u6389 G1\uff0c\u518d\u628a G2 \u52a0\u8f7d\u8fdb\u6765\u3002\\n\\n![](./gmp.png)  \\n1\u3001go \u521b\u5efa G\u3002   \\n2\u3001\u5c06 G \u4fdd\u5b58\u5728\u672c\u5730\u961f\u5217\uff0c\u82e5\u672c\u5730\u961f\u5217\u6ee1\u4e86\uff0c\u5219\u4fdd\u5b58\u5230\u5168\u5c40\u961f\u5217\u3002    \\n3\u3001P \u4e0e M \u7ed1\u5b9a\uff0cM \u6267\u884c\u672c\u5730\u961f\u5217\u4efb\u52a1 G\uff0c\u82e5\u672c\u5730\u961f\u5217\u4efb\u52a1\u6267\u884c\u5b8c\u6210\uff0c\u5219\u4ece\u5168\u5c40\u961f\u5217\u83b7\u53d6\u4efb\u52a1\uff0c\u82e5\u5168\u5c40\u961f\u5217\u4e5f\u6ca1\u6709\uff0c\u5219\u4ece\u5176\u4ed6 P \u7684\u672c\u5730\u961f\u5217\u4e2d\u5077\u53d6\u4e00\u534a\u4efb\u52a1\u6765\u6267\u884c\u3002   \\n4\u3001\u82e5 M \u6267\u884c\u671f\u95f4\u53d1\u751f\u7cfb\u7edf\u963b\u585e\uff0c\u6b64\u65f6 M \u4e0e P \u89e3\u7ed1\uff0cP \u5c06\u7533\u8bf7\u521b\u5efa\u65b0\u7684 M \u6216\u8005\u5524\u9192\u4f11\u7720\u7684 M \u91cd\u65b0\u7ed1\u5b9a\u4e0e\u6267\u884c\u3002     \\n5\u3001\u5f53 M \u6062\u590d\u65f6\uff0c\u4f1a\u5c1d\u8bd5\u83b7\u53d6\u4e00\u4e2a\u7a7a\u95f2\u7684 P\uff0c\u5982\u679c\u6ca1\u6709 P \u7a7a\u95f2\uff0cM \u5219\u8fdb\u5165\u4f11\u7720\uff0cG \u4f1a\u653e\u5165\u5230\u5168\u5c40\u961f\u5217\u3002  \\n\\n#### go \u521d\u59cb\u5316\u6d41\u7a0b\\n1\u3001\u521b\u5efa M0  \\n2\u3001\u521b\u5efa G0  \\n3\u3001\u7ed1\u5b9a M0 \u4e0e G0   \\n4\u3001\u6267\u884c\u521d\u59cb\u5316\u64cd\u4f5c  \\n5\u3001M0 \u6295\u5165\u4f7f\u7528\uff0c\u5c1d\u8bd5\u4e0e\u7a7a\u95f2 P \u7ed1\u5b9a   \\n\\n\\n\\n## 1.14 \u57fa\u4e8e\u4fe1\u53f7\u7684\u62a2\u5360\u5f0f\u8c03\u5ea6\\n\u5f53\u6709\u5927\u91cf G \u4efb\u52a1\uff0c\u4e3a\u4e86\u8ba9\u6bcf\u4e2a\u4efb\u52a1\u90fd\u6709\u65f6\u95f4\u8fd0\u884c\uff0c`runtime.main` \u4f1a\u521b\u5efa\u4e00\u4e2a\u989d\u5916\u7684 M \u6765\u8fd0\u884c `sysmon` \u51fd\u6570\uff0c\u6765\u5b9e\u73b0\u76d1\u63a7\u4e0e\u62a2\u5360\u3002\\n```go\\nfunc main() {\\n    runtime.GOMAXPROCS(1)\\n    go func() {\\n        fmt.Println(\\"pass\\")\\n    }\\n    for {\\n    }\\n}\\n```\\n\u5728 1.14 \u4e4b\u524d\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u5c06\u4e0d\u4f1a\u8f93\u51fa\u4efb\u4f55\u7ed3\u679c\uff0c\u56e0\u4e3a main \u4f1a\u5360\u7528\u5168\u90e8\u7684\u8ba1\u7b97\u8d44\u6e90\u3002   \\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u8bb0\u4e00\u6b21pg\u8fc1\u79fbk8s\u7684\u5751\u70b9","metadata":{"permalink":"/docusaurus/blog/2022/03/25/\u8bb0\u4e00\u6b21pg\u8fc1\u79fbk8s\u7684\u5751\u70b9","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/03-25-\u8bb0\u4e00\u6b21pg\u8fc1\u79fbk8s\u7684\u5751\u70b9/index.md","source":"@site/blog/2022/03-25-\u8bb0\u4e00\u6b21pg\u8fc1\u79fbk8s\u7684\u5751\u70b9/index.md","title":"\u8bb0\u4e00\u6b21pg\u8fc1\u79fbk8s\u7684\u5751\u70b9","description":"\u5751\u70b9\uff1a\u5b57\u7b26\u96c6\u4e0d\u517c\u5bb9","date":"2022-03-25T00:00:00.000Z","formattedDate":"March 25, 2022","tags":[{"label":"\u6570\u636e\u5e93","permalink":"/docusaurus/blog/tags/\u6570\u636e\u5e93"}],"readingTime":1.83,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"golang \u7684 CSP&GMP \u6a21\u578b","permalink":"/docusaurus/blog/2022/03/27/golang-GMP\u6a21\u578b"},"nextItem":{"title":"make\u548cnew\u4e4b\u95f4\u7684\u533a\u522b","permalink":"/docusaurus/blog/2022/03/24/make\u548cnew\u4e4b\u95f4\u7684\u533a\u522b"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u5751\u70b9\uff1a\u5b57\u7b26\u96c6\u4e0d\u517c\u5bb9\\n\u6709\u53f0\u7269\u7406\u673a\u90e8\u7f72\u4e86 postgres \u6570\u636e\u5e93\uff0c\u73b0\u5728\u8981\u628a\u8fd9\u4e2a\u6570\u636e\u5e93\u8fc1\u79fb\u81f3 k8s\u3002\\n\\n\u7b2c\u4e00\u6b21\u8fc1\u79fb\uff0c\u6211\u4eec\u9996\u5148\u5173\u95ed\u4e86\u6570\u636e\u5e93\uff0c\u628a\u6587\u4ef6\u76f4\u63a5\u632a\u5230\u4e86 k8s \u4e0a\uff0c\u914d\u4e0a\u5bf9\u5e94\u7684 pg \u955c\u50cf\u3002    \\n\u6d4b\u8bd5\u65f6\uff0c\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u4e86\uff0c\u4f46\u662f\u6ca1\u6709\u529e\u6cd5\u63d0\u4f9b\u6570\u636e\u670d\u52a1\uff0c\u751a\u81f3\u8fde\u6570\u636e\u5e93\u4e5f\u8fde\u63a5\u4e0d\u4e0a\u3002\\n```text title=\\"\u8fde\u63a5\u62a5\u9519\\"\\nzh_CN.UTF-8:initdb: error: locale \u201czh_CN.UTF-8\u201c requires unsupported encoding \\"en_CN.UTF-8\\"\\n```\\n\u6211\u4eec\u6ca1\u6709\u6df1\u7a76\uff0c\u5c31\u611f\u89c9\u53ef\u80fd\u662f\u6570\u636e\u5e93\u6587\u4ef6\u4e0d\u517c\u5bb9\uff0c\u4e0d\u80fd\u76f4\u63a5\u66b4\u529b\u8fc1\u79fb\u6587\u4ef6\u3002\\n\\n\u7b2c\u4e8c\u6b21\u8fc1\u79fb\uff0c\u6211\u4eec\u4f7f\u7528 pg_dumps \u548c pg_restore \u5de5\u5177\u8fdb\u884c\u8fc1\u79fb\u3002\u6570\u636e\u91cf\u6709\u70b9\u5927\uff0c\u7b49\u5f85\u8fc1\u79fb\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u518d\u6b21\u8fdb\u884c\u4e86\u6d4b\u8bd5\u3002\\n```text title=\\"\u8fde\u63a5\u62a5\u9519\\"\\nzh_CN.UTF-8:initdb: error: locale \u201czh_CN.UTF-8\u201c requires unsupported encoding \\"en_CN.UTF-8\\"\\n```\\n\u4ecd\u7136\u62a5\u5b57\u7b26\u96c6\u4e0d\u517c\u5bb9\u7684\u95ee\u9898\u3002\u8fd9\u7740\u5b9e\u6709\u70b9\u8ba9\u4eba\u8d39\u89e3\u3002\\n\\n\u54a8\u8be2\u4e86\u8fd0\u7ef4\u5927\u4f6c\u540e\uff0c\u7ed9\u7684\u5efa\u8bae\u662f\u5b89\u88c5\u4e0b\u4f9d\u8d56\uff0c\u5373\uff1a\\n```shell script\\nyum install -y langpacks-zh_CN\\n```\\n\u8fd9\u79cd\u65b9\u5f0f\u9700\u8981\u5728\u7f16\u8bd1\u955c\u50cf\u65f6\u5b89\u88c5\uff0c\u5f71\u54cd\u6bd4\u8f83\u5c0f\u3002\\n\\n\u540e\u9762\u53c8\u67e5\u8be2\u5230\u4e00\u79cd\u65b9\u5f0f\uff0c\u5728\u7f16\u8bd1\u955c\u50cf\u65f6\uff0c\u4f7f\u7528 `localedef` \u6307\u5b9a\u7f16\u7801\u5e76\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u4e3a LANG \u4e3a zh_CN.utf8\uff1a\\n```dockerfile\\nFROM postgres\\nRUN localedef -i zh_CN -c -f UTF-8 -A /usr/share/locale/locale.alias zh_CN.UTF-8\\nENV LANG zh_CN.utf8\\n```\\n\u4f46\u662f\u7528\u4e86\u8fd9\u79cd\u65b9\u6cd5\uff0c\u65e5\u5fd7\u4f3c\u4e4e\u4f1a\u53d8\u6210\u4e2d\u6587\ud83d\ude02\ud83d\ude02\ud83d\ude02\\n\\n![\u53c2\u8003\u6587\u6863](https://serverfault.com/questions/1074738/docker-postgresql-change-database-encoding-to-utf-8/1074756)\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"make\u548cnew\u4e4b\u95f4\u7684\u533a\u522b","metadata":{"permalink":"/docusaurus/blog/2022/03/24/make\u548cnew\u4e4b\u95f4\u7684\u533a\u522b","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/03-24-make\u548cnew\u4e4b\u95f4\u7684\u533a\u522b/index.md","source":"@site/blog/2022/03-24-make\u548cnew\u4e4b\u95f4\u7684\u533a\u522b/index.md","title":"make\u548cnew\u4e4b\u95f4\u7684\u533a\u522b","description":"make \u548c new \u90fd\u662f\u7528\u6765\u521b\u5efa\u5bf9\u8c61\u548c\u521d\u59cb\u5316\u5185\u5b58\u7684\u3002\u5728\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u4e2d\u8fd8\u662f\u6709\u4e00\u4e9b\u4e0d\u540c\u7684\u3002","date":"2022-03-24T00:00:00.000Z","formattedDate":"March 24, 2022","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"}],"readingTime":2.145,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u8bb0\u4e00\u6b21pg\u8fc1\u79fbk8s\u7684\u5751\u70b9","permalink":"/docusaurus/blog/2022/03/25/\u8bb0\u4e00\u6b21pg\u8fc1\u79fbk8s\u7684\u5751\u70b9"},"nextItem":{"title":"golang\u6d4b\u8bd5\u68b3\u7406","permalink":"/docusaurus/blog/2022/03/23/golang\u6d4b\u8bd5\u68b3\u7406"}},"content":"make \u548c new \u90fd\u662f\u7528\u6765\u521b\u5efa\u5bf9\u8c61\u548c\u521d\u59cb\u5316\u5185\u5b58\u7684\u3002\u5728\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u4e2d\u8fd8\u662f\u6709\u4e00\u4e9b\u4e0d\u540c\u7684\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n#### new\\n```go title=\\"new \u6e90\u7801\u6ce8\u91ca\\"\\n// The new built-in function allocates memory. The first argument is a type,\\n// not a value, and the value returned is a pointer to a newly\\n// allocated zero value of that type.\\nfunc new(Type) *Type\\n```\\n\u5728\u6e90\u7801\u6ce8\u91ca\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u51fa new \u7684\u529f\u80fd\uff1a**\u8f93\u5165\u4e00\u4e2a\u7c7b\u578b\uff0c\u4e0d\u80fd\u662f\u503c\uff0c\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u8be5\u7c7b\u578b\u96f6\u503c\u7684\u6307\u9488\u3002**\\n\\n#### make\\n```go title=\\"make \u6e90\u7801\u6ce8\u91ca\\"\\n// The make built-in function allocates and initializes an object of type\\n// slice, map, or chan (only). Like new, the first argument is a type, not a\\n// value. Unlike new, make\'s return type is the same as the type of its\\n// argument, not a pointer to it. The specification of the result depends on\\n// the type:\\n//\\tSlice: The size specifies the length. The capacity of the slice is\\n//\\tequal to its length. A second integer argument may be provided to\\n//\\tspecify a different capacity; it must be no smaller than the\\n//\\tlength. For example, make([]int, 0, 10) allocates an underlying array\\n//\\tof size 10 and returns a slice of length 0 and capacity 10 that is\\n//\\tbacked by this underlying array.\\n//\\tMap: An empty map is allocated with enough space to hold the\\n//\\tspecified number of elements. The size may be omitted, in which case\\n//\\ta small starting size is allocated.\\n//\\tChannel: The channel\'s buffer is initialized with the specified\\n//\\tbuffer capacity. If zero, or the size is omitted, the channel is\\n//\\tunbuffered.\\nfunc make(t Type, size ...IntegerType) Type\\n```\\n\u5728\u6e90\u7801\u6ce8\u91ca\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u51fa make \u7684\u529f\u80fd\uff1a**\u8f93\u5165\u4e00\u4e2a\u7c7b\u578b\uff08\u5fc5\u987b\u662fslice\u3001map\u3001chan\uff09\uff0c\u8fd4\u56de\u4e00\u4e2a\u6309\u6307\u5b9a\u6761\u4ef6\u521d\u59cb\u5316\u540e\u7684\u7c7b\u578b\u5bf9\u8c61\u3002**\\n\\n## \u4e3b\u8981\u533a\u522b\\n\u5176\u5b9e\u611f\u89c9\u6ca1\u4ec0\u4e48\u592a\u5927\u5173\u7cfb\uff0c\u90fd\u662f\u5185\u7f6e\u7684\u521d\u59cb\u5316\u51fd\u6570\uff0cnew \u8fd4\u56de\u6307\u9488\uff0cmake \u53ea\u80fd\u7528\u4e8e\u7279\u5b9a\u7c7b\u578b\u3002\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"golang\u6d4b\u8bd5\u68b3\u7406","metadata":{"permalink":"/docusaurus/blog/2022/03/23/golang\u6d4b\u8bd5\u68b3\u7406","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/03-23-golang\u6d4b\u8bd5\u68b3\u7406/index.md","source":"@site/blog/2022/03-23-golang\u6d4b\u8bd5\u68b3\u7406/index.md","title":"golang\u6d4b\u8bd5\u68b3\u7406","description":"\u5355\u5143\u6d4b\u8bd5 flag","date":"2022-03-23T00:00:00.000Z","formattedDate":"March 23, 2022","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"}],"readingTime":1.745,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"make\u548cnew\u4e4b\u95f4\u7684\u533a\u522b","permalink":"/docusaurus/blog/2022/03/24/make\u548cnew\u4e4b\u95f4\u7684\u533a\u522b"},"nextItem":{"title":"\u8bb0\u4e00\u6b21\u5173\u4e8e httpClient \u7684\u5751\u70b9","permalink":"/docusaurus/blog/2022/03/22/\u8bb0\u4e00\u6b21\u5173\u4e8ehttpClient\u7684\u5751\u70b9"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u5355\u5143\u6d4b\u8bd5 flag\\n#### -bench regexp\\n\u6267\u884c\u57fa\u51c6\u6d4b\u8bd5\uff0c\u540e\u9762\u53ef\u4ee5\u63a5\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u9700\u8981\u6267\u884c\u5168\u90e8\u7684\u57fa\u51c6\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u4f7f\u7528 `-bench=.`\\n```go\\nfunc Benchmark(b *testing.B) {\\n    b.ResetTimer()\\n    for i := 0; i < b.N; i++ {\\n    }\\n}\\n```\\n\\n\\n#### -benchtime t\\n\u57fa\u51c6\u6d4b\u8bd5\u7684\u6301\u7eed\u65f6\u95f4\uff0c\u9ed8\u8ba4\u662f 1s\uff0c\u53ef\u4ee5\u4f7f\u7528 `-benchtime=1h30s`\\n\\n#### -count n\\n\u57fa\u51c6\u6d4b\u8bd5\u7684\u6267\u884c\u6b21\u6570\uff0c\u9ed8\u8ba4\u4ec5\u6267\u884c\u4e00\u6b21\u3002\\n\\n#### -cover\\n\u7528\u4e8e\u5206\u6790\u5e76\u8f93\u51fa\u5355\u5143\u6d4b\u8bd5\u8986\u76d6\u7387\u3002\\n\\n#### -covermode set,count,atomic\\n\u5355\u5143\u6d4b\u8bd5\u7684\u8986\u76d6\u7387\u5206\u6790\u6a21\u5f0f\u3002\u9ed8\u8ba4\u5206\u6790\u6a21\u5f0f\u662f set\uff0c\u5f53\u4f7f\u7528 -race \u65f6\uff0c\u5219\u5206\u6790\u6a21\u5f0f\u53d8\u4e3a atomic\u3002\\n\\nset\uff1a\u54ea\u4e00\u884c\u4ee3\u7801\u88ab\u6267\u884c\u4e86\u3002  \\ncount\uff1a\u54ea\u884c\u4ee3\u7801\u88ab\u6267\u884c\u4e86\uff0c\u4e14\u88ab\u6267\u884c\u4e86\u591a\u5c11\u6b21\u3002   \\natomic\uff1a\u7c7b\u4f3c count\uff0c\u4f46\u662f\u4f1a\u591a\u7ebf\u7a0b\u5e76\u53d1\u68c0\u6d4b\uff0c\u5b58\u5728\u5e76\u53d1\u51b2\u7a81\u65f6\u4f1a\u62a5\u9519\u3002  \\n\\n#### -cpu\\n\u6307\u5b9a GOMAXPROCS\\n\\n#### -failfast\\n\u5f53\u6d4b\u8bd5\u5931\u8d25\u65f6\u7acb\u5373\u9000\u51fa\u5f53\u524d\u6d4b\u8bd5\uff0c\u800c\u4e0d\u662f\u7ee7\u7eed\u6267\u884c\u5269\u4e0b\u7684\u6d4b\u8bd5\u3002\\n\\n#### -timeout\\n\u5355\u4e2a\u5355\u5143\u6d4b\u8bd5\u6267\u884c\u7684\u6700\u957f\u65f6\u95f4\uff0c\u9ed8\u8ba4\u662f 10 \u5206\u949f\\n\\n#### -benchmem\\n\u8f93\u51fa\u57fa\u51c6\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u5185\u5b58\u7684\u5206\u914d\u4e0e\u7edf\u8ba1\u3002\\n\\n#### -coverprofile cover.out\\n\u6d4b\u8bd5\u8fc7\u7a0b\u8986\u76d6\u7387\u60c5\u51b5\\n\\n```shell script title=\\"\u53ef\u89c6\u5316\u5355\u5143\u6d4b\u8bd5\u8986\u76d6\u7387\\"\\ngo tool cover -html=cover.out\\n```\\n\\n#### -cpuprofile cpu.out\\n\u6d4b\u8bd5\u8fc7\u7a0b cpu \u8c03\u5ea6\u60c5\u51b5\\n\\n#### -memprofile\\n\u6d4b\u8bd5\u8fc7\u7a0b\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u8bb0\u4e00\u6b21\u5173\u4e8e httpClient \u7684\u5751\u70b9","metadata":{"permalink":"/docusaurus/blog/2022/03/22/\u8bb0\u4e00\u6b21\u5173\u4e8ehttpClient\u7684\u5751\u70b9","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/03-22-\u8bb0\u4e00\u6b21\u5173\u4e8ehttpClient\u7684\u5751\u70b9/index.md","source":"@site/blog/2022/03-22-\u8bb0\u4e00\u6b21\u5173\u4e8ehttpClient\u7684\u5751\u70b9/index.md","title":"\u8bb0\u4e00\u6b21\u5173\u4e8e httpClient \u7684\u5751\u70b9","description":"\u5751\u70b9\uff1aDefaultClient \u65e0\u8d85\u65f6","date":"2022-03-22T00:00:00.000Z","formattedDate":"March 22, 2022","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"}],"readingTime":1.48,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"golang\u6d4b\u8bd5\u68b3\u7406","permalink":"/docusaurus/blog/2022/03/23/golang\u6d4b\u8bd5\u68b3\u7406"},"nextItem":{"title":"\u6570\u636e\u5e93\u5355\u8868\u5341\u4ebf\u91cf\u7ea7\u7684\u4f18\u5316\u4e4b\u8def","permalink":"/docusaurus/blog/2022/03/18/\u6570\u636e\u5e93\u5355\u8868\u5341\u4ebf\u91cf\u7ea7\u7684\u4f18\u5316\u4e4b\u8def"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u5751\u70b9\uff1aDefaultClient \u65e0\u8d85\u65f6\\ngo \u9ed8\u8ba4\u7684 httpClient \u4e0d\u5305\u542b\u8d85\u65f6\u65f6\u95f4\uff0c\u4e0d\u50cf\u5176\u4ed6\u8bed\u8a00\u53ef\u80fd\u4f1a\u6709\u9ed8\u8ba4\u7684\u8d85\u65f6\u65f6\u95f4\u3002   \\n\u4e00\u822c\u5c3d\u91cf\u5c11\u7528\u9ed8\u8ba4\u7684 http.DefaultClient\uff0c\u672a\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u52a0\u4e0a\u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4\u3002\\n```golang title=\\"\u914d\u7f6e\u8d85\u65f6\u65f6\u95f4\\"\\nclient := &http.Client{\\n    Timeout: time.Second * 10,\\n}\\n```\\n\\n## \u5751\u70b9\uff1aDefaultClient \u957f\u8fde\u63a5\u53d7\u9650\\n```go\\nvar DefaultTransport RoundTripper = &Transport{\\n\\tProxy: ProxyFromEnvironment,\\n\\tDialContext: (&net.Dialer{\\n\\t\\tTimeout:   30 * time.Second,\\n\\t\\tKeepAlive: 30 * time.Second,\\n\\t}).DialContext,\\n\\tForceAttemptHTTP2:     true,\\n\\tMaxIdleConns:          100,\\n\\tIdleConnTimeout:       90 * time.Second,\\n\\tTLSHandshakeTimeout:   10 * time.Second,\\n\\tExpectContinueTimeout: 1 * time.Second,\\n}\\n\\n// DefaultMaxIdleConnsPerHost is the default value of Transport\'s\\n// MaxIdleConnsPerHost.\\nconst DefaultMaxIdleConnsPerHost = 2\\n```\\n#### DefaultMaxIdleConnsPerHost\\nDefaultMaxIdleConnsPerHost \u8868\u793a\u5ba2\u6237\u7aef\u5bf9\u6bcf\u4e2a\u4e3b\u673a\u670d\u52a1\u4fdd\u7559\u7684\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\u6570\u3002  \\n\\n\u5728\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\uff0chttp.DefaultClient \u914d\u7f6e\u6709 DefaultMaxIdleConnsPerHost\uff0c\u503c\u4e3a 2\u3002   \\n\u8868\u793a\u5ba2\u6237\u7aef\u5bf9\u6bcf\u4e2a\u4e3b\u673a\u670d\u52a1\u4fdd\u7559\u7684\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\u6570\u4e3a 2\uff0c\u6240\u4ee5\u5f53\u6211\u4eec\u6709\u8f83\u591a\u957f\u8fde\u63a5\u573a\u666f\u65f6\uff0chttp.DefaultClient \u53ef\u80fd\u4f1a\u5e72\u6389\u5176\u4ed6\u957f\u8fde\u63a5\uff0c\u4ec5\u4fdd\u7559\u4e24\u4e2a\u3002\\n\\n#### KeepAlive\\nKeepAlive \u8868\u793a\u957f\u8fde\u63a5\u5b58\u6d3b\u65f6\u95f4\u3002  \\n\\n\u6b64\u5904\u9ed8\u8ba4\u4e3a 30s\uff0c\u5728\u67d0\u4e9b\u538b\u529b\u6d4b\u8bd5\u573a\u666f\u4e0b\u53ef\u80fd\u4f1a\u5bfc\u81f4 socket \u8fde\u63a5\u88ab\u8017\u5c3d\u3002\\n```go title=\\"\u914d\u7f6e\u5b58\u6d3b\u65f6\u95f4 24h \u6848\u4f8b\\"\\nclient := &http.Client{\\n    Transport: &http.Transport{\\n        DialContext: (&net.Dialer{\\n            KeepAlive: time.Hour * 24,\\n        }).DialContext,\\n    },\\n}\\n```"},{"id":"\u6570\u636e\u5e93\u5355\u8868\u5341\u4ebf\u91cf\u7ea7\u7684\u4f18\u5316\u4e4b\u8def","metadata":{"permalink":"/docusaurus/blog/2022/03/18/\u6570\u636e\u5e93\u5355\u8868\u5341\u4ebf\u91cf\u7ea7\u7684\u4f18\u5316\u4e4b\u8def","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/03-18-\u6570\u636e\u5e93\u5355\u8868\u5341\u4ebf\u91cf\u7ea7\u7684\u4f18\u5316\u4e4b\u8def/index.md","source":"@site/blog/2022/03-18-\u6570\u636e\u5e93\u5355\u8868\u5341\u4ebf\u91cf\u7ea7\u7684\u4f18\u5316\u4e4b\u8def/index.md","title":"\u6570\u636e\u5e93\u5355\u8868\u5341\u4ebf\u91cf\u7ea7\u7684\u4f18\u5316\u4e4b\u8def","description":"\u5728\u5e38\u89c4\u6570\u636e\u5e93\u4e2d\uff0c\u5355\u8868\u6570\u636e\u91cf\u5230\u8fbe\u767e\u4e07\u65f6\uff0c\u67e5\u8be2\u65b9\u9762\u5c31\u53ef\u80fd\u51fa\u73b0\u6027\u80fd\u95ee\u9898\u3002\u800c\u5f53\u5355\u8868\u6570\u636e\u91cf\u8fbe\u5230\u5343\u4e07\u91cf\u7ea7\u65f6\uff0c\u4e0d\u4ec5\u67e5\u8be2\uff0c\u8fde\u7d22\u5f15\u7ef4\u62a4\u4e5f\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\u3002","date":"2022-03-18T00:00:00.000Z","formattedDate":"March 18, 2022","tags":[{"label":"\u6570\u636e\u5e93","permalink":"/docusaurus/blog/tags/\u6570\u636e\u5e93"}],"readingTime":14.97,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u8bb0\u4e00\u6b21\u5173\u4e8e httpClient \u7684\u5751\u70b9","permalink":"/docusaurus/blog/2022/03/22/\u8bb0\u4e00\u6b21\u5173\u4e8ehttpClient\u7684\u5751\u70b9"},"nextItem":{"title":"\u6570\u636e\u5e93\u662f\u5426\u9002\u5408\u5bb9\u5668\u5316\u90e8\u7f72","permalink":"/docusaurus/blog/2022/02/22/\u6570\u636e\u5e93\u662f\u5426\u9002\u5408\u5bb9\u5668\u5316\u90e8\u7f72"}},"content":"\u5728\u5e38\u89c4\u6570\u636e\u5e93\u4e2d\uff0c\u5355\u8868\u6570\u636e\u91cf\u5230\u8fbe\u767e\u4e07\u65f6\uff0c\u67e5\u8be2\u65b9\u9762\u5c31\u53ef\u80fd\u51fa\u73b0\u6027\u80fd\u95ee\u9898\u3002\u800c\u5f53\u5355\u8868\u6570\u636e\u91cf\u8fbe\u5230\u5343\u4e07\u91cf\u7ea7\u65f6\uff0c\u4e0d\u4ec5\u67e5\u8be2\uff0c\u8fde\u7d22\u5f15\u7ef4\u62a4\u4e5f\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\u3002     \\n\u6b64\u6b21\u6211\u4eec\u7684\u4e3b\u89d2\u662f\\"\u5355\u8868\u91cf\u7ea7\u5341\u4ebf\\"\uff0c\u672c\u6587\u7ae0\u4e3b\u8981\u8bb0\u5f55\u5728\u4f18\u5316\u671f\u95f4\u7684\u4e00\u4e9b\u601d\u8def\u4e0e\u5b9e\u73b0\u3002\\n\\n\\n\x3c!--truncate--\x3e\\n\\n## \u80cc\u666f\u4ecb\u7ecd\\n* **\u6570\u636e\u5e93**\uff1apostgres  \\n* **\u6570\u636e\u5e93\u914d\u7f6e**\uff1a4c8g + ssd\\n* **\u8868\u540d**\uff1aczasg\uff08\u5df2\u8131\u654f\uff09\\n* **\u8868\u91cf\u7ea7**\uff1a10\u4ebf  \\n* **\u8868\u5b57\u6bb5**\uff1a\uff08\u5df2\u8131\u654f\uff09\\n    * **key**\uff1a\u4e3b\u952e\uff0c\u7c7b\u578b text\\n    * **value**\uff1a \u7c7b\u578b text\\n* **\u4e1a\u52a1\u9700\u6c42**\uff1a\u6bcf\u5929\u4f1a\u6709\u4e00\u6279\u6570\u636e\u6e90\uff0c400w \u5de6\u53f3\uff0c\u9700\u6c42\u5c31\u662f\u5199\u5165\u8fd9\u6279\u6570\u636e\uff0c\u5e76\u8f93\u51fa\u5b9e\u9645\u65b0\u589e\u548c\u66f4\u65b0\u7684\u6570\u636e\u3002\\n\\n\u5f53\u524d\u7ebf\u4e0a\u5904\u7406\u65b9\u5f0f\u6bd4\u8f83\u5e38\u89c4\uff0c\u4e3b\u8981\u5305\u62ec\u4e0b\u9762\u4e24\u4e2a\u6b65\u9aa4\uff1a\\n\\n#### 1\u3001\u521b\u5efa\u4e34\u65f6\u8868\uff0c\u5199\u5165\u6570\u636e\\n\u521b\u5efa\u4e34\u65f6\u8868\uff0c\u5b58\u50a8\u4e1a\u52a1\u5f85\u5904\u7406\u6570\u636e\uff0c\u603b\u91cf\u5728 400w \u4e0a\u4e0b\u3002\uff08\u6570\u636e\u63d2\u5165\u8fc7\u7a0b\u7565\uff09\\n```sql\\nCREATE TEMPORARY TABLE tmp_czasg (\\n    key    text,\\n    value  text\\n) ON COMMIT DROP;\\n```\\n\\n\u521b\u5efa\u4e34\u65f6\u8868\uff0c\u7528\u4e8e\u5b58\u50a8\u6700\u7ec8\u66f4\u65b0\u6570\u636e\u3002\\n```sql\\nCREATE TEMPORARY TABLE tmp_czasg_update (\\n    key        text,\\n    value      text,\\n    old_value  text\\n) ON COMMIT DROP;\\n```\\n\\n\\n#### 2\u3001join \u8ba1\u7b97\u7ed3\u679c\u96c6\\n\u4ee5 key \u4e3a\u8fde\u63a5\u6761\u4ef6 join \u539f\u8868\uff0c\u518d\u8fc7\u6ee4\u51fa value \u4e0d\u540c\u6216\u8005\u539f\u8868 value \u4e3a\u7a7a\u7684\u6570\u636e.\\n```sql\\nINSERT INTO tmp_czasg_update \\nSELECT newkv.key, newkv.value, kv.value FROM tmp_czasg AS newkv \\nLEFT JOIN czasg AS kv ON newkv.key = kv.key \\nWHERE newkv.value != kv.value OR kv.value IS NULL;\\n```\\n\\n#### 3\u3001\u5c06\u7ed3\u679c\u96c6\u66f4\u65b0\u81f3\u8868 `czasg`\\n\\n`tmp_czasg_update` \u4e2d old_value \u4e3a\u7a7a\u7684\u8868\u793a\u65b0\u589e\u6570\u636e\uff0c\u6211\u4eec\u5c06\u5b83\u63d2\u5165\u5230\u539f\u8868\u4e2d\u3002\\n```sql\\nINSERT INTO czasg SELECT key, value FROM tmp_czasg_update \\nWHERE old_value IS NULL;\\n```\\n\\n`tmp_czasg_update` \u4e2d old_value \u975e\u7a7a\u7684\u8868\u793a\u66f4\u65b0\u6570\u636e\uff0c\u6211\u4eec\u5c06\u5b83\u66f4\u65b0\u5230\u539f\u8868\u4e2d\u3002\\n```sql\\nUPDATE czasg AS kv SET kv.value = newkv.value FROM \\n(SELECT * FROM tmp_czasg_update WHERE old_value IS NOT NULL) AS newkv \\nWHERE kv.key = newkv.key;\\n```\\n\\n\u81f3\u6b64\u4e1a\u52a1\u7ed3\u675f\u3002\u6839\u636e\u5f53\u524d\u7ebf\u4e0a\u60c5\u51b5\uff0c\u6267\u884c\u5b8c\u4e00\u6b21\u9700\u8981 N\uff08N >= 2\uff09\u5c0f\u65f6\u3002\\n\\n\u4f18\u5316\u9700\u6c42\uff1a\u7531\u4e8e\u8be5\u4e1a\u52a1\u4f1a\u957f\u65f6\u95f4\u963b\u585e\uff0c\u5f71\u54cd\u5176\u4ed6\u5173\u8054\u4e1a\u52a1\uff0c**\u5e0c\u671b\u51cf\u5c11\u6b64\u9636\u6bb5\u7684\u6267\u884c\u65f6\u95f4\u3002**\\n\\n\\n## \u4f18\u5316\u4e4b\u8def\uff1a\u75db\u70b9\u5206\u6790\\n\u770b\u5b8c\u4e0a\u9762\u7684\u80cc\u666f\u4ecb\u7ecd\u540e\uff0c\u6211\u4eec\u5e94\u8be5\u5df2\u7ecf\u521d\u6b65\u4e86\u89e3\u4e1a\u52a1\u6d41\u7a0b\u4e86\uff0c\u6574\u7406\u5982\u4e0b\u56fe\uff1a  \\n![](./data-update.png)\\n\\n\\n\u53ef\u4ee5\u770b\u51fa\uff0c\u4e3b\u8981\u6d89\u53ca\u5230\u7684\u64cd\u4f5c\u5c31\u662f\u5bf9\u6570\u636e\u8868\u66f4\u65b0\u5e76\u751f\u6210\u7248\u672c\u66f4\u65b0\u5305\u3002\\n\\n\u73b0\u5728\u6211\u4eec\u6765\u62c6\u89e3\u5176\u4e2d\u7684\u6d41\u7a0b\uff0c\u5927\u81f4\u5206\u6790\u4e0b\u8017\u65f6\u7684\u539f\u56e0\uff1a\\n\\n1\u3001\u521b\u5efa\u4e34\u65f6\u8868  \\n2\u3001\u6570\u636e\u5199\u5165\u4e34\u65f6\u8868  \\n3\u3001**\u5173\u8054\u8ba1\u7b97\u6700\u7ec8\u5f85\u4f5c\u4e1a\u7684\u6570\u636e**    \\n4\u3001**\u63d2\u5165\u65b0\u6570\u636e**    \\n5\u3001\u66f4\u65b0\u65e7\u6570\u636e   \\n6\u3001\u5bfc\u51fa\u7ed3\u679c\u96c6   \\n\\n\u5728\u4e0a\u8ff0\u6d41\u7a0b\u4e2d\uff0c\u4e3b\u8981\u8017\u65f6\u70b9\u5c31\u662f\u6b65\u9aa4 3 \u548c 4\u3002     \\n\u6b65\u9aa4 3 \u8017\u65f6\u662f\u56e0\u4e3a\u6570\u636e\u91cf\u8fc7\u5927\uff0c\u5173\u8054\u8fc7\u7a0b\u65e0\u6cd5\u5168\u7a0b\u5728\u5185\u5b58\u4e2d\u64cd\u4f5c\uff0c\u9700\u8981\u501f\u7528\u78c1\u76d8\u6765\u5b8c\u6210\u4e2d\u95f4\u8ba1\u7b97\u3002               \\n\u6b65\u9aa4 4 \u8017\u65f6\u662f\u56e0\u4e3a\u5b58\u5728\u7d22\u5f15\uff0c\u5bf9\u8fd9\u4e2a\u91cf\u7ea7\u7684\u7d22\u5f15\u8fdb\u884c\u589e\u5220\u64cd\u4f5c\u90fd\u4f1a\u975e\u5e38\u8017\u65f6\u3002     \\n\\n\u9996\u5148\uff0c\u9488\u5bf9\u91cf\u7ea7\u8fc7\u5927\u7684\u95ee\u9898\uff0c\u89e3\u51b3\u65b9\u6848\u6bd4\u8f83\u7edf\u4e00\uff0c\u90a3\u5c31\u662f\u8fdb\u884c\u6c34\u5e73\u62c6\u5206\uff0c\u5c3d\u53ef\u80fd\u51cf\u5c0f\u8868\u7684\u5927\u5c0f\u3002   \\n\u5176\u6b21\uff0c\u9488\u5bf9\u7d22\u5f15\u5bfc\u81f4\u7684\u63d2\u5165/\u5220\u9664\u8017\u65f6\uff0c\u89e3\u51b3\u65b9\u6848\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u63d2\u5165/\u5220\u9664\u524d\uff0c\u5148 `DROP INDEX`\uff0c\u6267\u884c\u5b8c\u64cd\u4f5c\u540e\uff0c\u518d `CREATE INDEX`\u3002     \\n\u5728\u8fd9\u91cc\u6211\u4eec\u4e4b\u6240\u4ee5\u4e0d\u8fd9\u6837\u505a\uff0c\u662f\u56e0\u4e3a\u91cd\u5efa\u4e00\u5f20 10\u4ebf \u91cf\u7ea7\u8868\u7684\u7d22\u5f15\uff0c\u4e0d\u89c1\u5f97\u6bd4\u5f53\u524d\u65b9\u6848\u5feb\u591a\u5c11\u3002     \\n\\n\u6709\u4e86\u5927\u81f4\u601d\u8def\uff0c\u6211\u4eec\u518d\u6765\u60f3\u60f3\u5177\u4f53\u7684\u843d\u5730\u65b9\u6848\u3002\\n\\n\\n## \u4f18\u5316\u4e4b\u8def\uff1a\u8868\u5206\u533a\\n\u9488\u5bf9\u7b2c\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u8ba1\u5212\u9009\u62e9\u6c34\u5e73\u62c6\u5206\u8fd9\u5f20\u5927\u8868\u3002    \\n\u62c6\u5206\u65f6\u8981\u8003\u8651\u5230\u5355\u8868\u7684\u5927\u5c0f\uff0c\u6700\u597d\u80fd\u63a7\u5236\u5728\u767e\u4e07\u7ea7\u3002    \\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u5c06\u8fd9\u5f20 10\u4ebf \u5927\u8868\u62c6\u5206\u6210 256 \u5f20\u5c0f\u8868\uff0c\u8fd9\u6837\u5e73\u5747\u5230\u6bcf\u5f20\u8868\u7684\u5927\u5c0f\u5c31\u662f 400w \u5de6\u53f3\u4e86\u3002\\n\\n\u4e00\u822c\u62c6\u5206\u7684\u65b9\u5f0f\u5c31\u662f\u521b\u5efa\u591a\u5f20\u7269\u7406\u8868\uff0c\u7136\u540e\u5c06\u6570\u636e\u6309\u7167\u67d0\u79cd\u89c4\u5219\u5747\u5300\u7684\u63d2\u5165\u5230\u8fd9\u4e9b\u8868\u4e2d\uff0c\u4ece\u800c\u51cf\u5c0f\u5355\u8868\u7684\u5927\u5c0f\u3002  \\n\u4f46\u6211\u4eec\u4e1a\u52a1\u573a\u666f\u5e76\u6ca1\u6709\u7279\u522b\u590d\u6742\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u9009\u62e9\u4e86**\u8868\u5206\u533a**\u3002\\n\\n\u81ea\u7136\u800c\u7136\uff0c`key` \u5b57\u6bb5\u4e5f\u5c31\u6210\u4e86\u6211\u4eec\u9996\u9009\u7684\u5206\u533a\u6761\u4ef6\u3002  \\n\u7531\u4e8e\u8be5\u5b57\u6bb5\u662f\u968f\u673a\u5b57\u4e32\uff0c\u6ca1\u6709\u89c4\u5f8b\uff0c\u53ea\u80fd\u91c7\u7528\u54c8\u5e0c\u7684\u65b9\u5f0f\u6563\u5c04\u5230\u5404\u4e2a\u5206\u533a\u3002  \\n\u7136\u540e\u6211\u5728\u5206\u533a\u5185\u521b\u5efa `key_btree_index_key` \u7d22\u5f15\uff0c\u6b64\u65f6\u6bcf\u4e2a\u5206\u533a\u7684\u7d22\u5f15\u5927\u5c0f\u5c31\u53ef\u4ee5\u63a7\u5236\u5728\u8f83\u5c0f\u7684\u8303\u56f4\u5185\u4e86\u3002  \\n\\n\u5230\u8fd9\u91cc\uff0c\u521d\u6b65\u4f18\u5316\u65b9\u6848\u5df2\u7ecf\u5f62\u6210\u3002\u4f46\u8003\u8651\u5230\u968f\u673a\u5b57\u4e32\u751f\u6210\u7684\u7d22\u5f15\uff0c\u65e0\u8bba\u5728\u7a7a\u95f4\u8fd8\u662f\u6027\u80fd\u4e0a\u90fd\u6709\u6240\u6b20\u7f3a\uff0c\\n\u6240\u4ee5\u672c\u7740\u4e00\u6b65\u4f18\u5316\u5230\u4f4d\u7684\u60f3\u6cd5\uff0c\u6211\u4eec\u51b3\u5b9a\u91cd\u65b0\u8bbe\u8ba1\u5b57\u6bb5\u7d22\u5f15\uff1a  \\n1\u3001\u65b0\u589e\u4e00\u4e2a\u5b57\u6bb5 `key_crc32`\uff0c\u7528\u4e8e\u5b58\u50a8 `key` \u503c\u8ba1\u7b97\u51fa\u7684\u54c8\u5e0c\u6570\uff0c\u6b64\u6570\u4f4d\u4e8e `1 ~ 2^32` \u4e4b\u95f4\u3002    \\n2\u3001\u5c06\u5206\u533a\u6761\u4ef6\u8bbe\u5b9a\u4e3a `key_crc32`     \\n3\u3001\u521b\u5efa\u5206\u533a\u7d22\u5f15 `key_crc32_btree_index_key`     \\n\\n\u81f3\u6b64\uff0c\u6211\u4eec\u7684\u8868\u5206\u533a\u65b9\u6848\u521d\u6b65\u843d\u5730\u3002\u7d22\u5f15\u8fd9\u4e00\u5757\u5c5e\u4e8e\u8fc7\u5ea6\u8bbe\u8ba1\uff0c\u56e0\u4e3a\u5f15\u5165\u4e86\u65b0\u5b57\u6bb5\uff0c\u6240\u4ee5\u662f\u5426\u5c5e\u4e8e\u6b63\u5411\u4f18\u5316\uff0c\u6709\u5f85\u8003\u91cf\u3002\\n\\n\\n\x3c!-- http://www.postgres.cn/docs/12/ddl-inherit.html --\x3e\\n:::tip \u8868\u7ee7\u627f\\n\u5728 postgres \u4e2d\uff0c\u7ee7\u627f\u53ef\u4ee5\u5feb\u901f\u7684**\u5173\u8054\u3001\u533a\u5206**\u591a\u5f20\u8868\uff0c\u8ba9\u6570\u636e\u7ef4\u62a4\u66f4\u52a0\u9ad8\u6548\u3002  \\n\\n\u4f7f\u7528\u7ee7\u627f\u65f6\uff0c\u81f3\u5c11\u9700\u8981\u6709\u4e00\u5f20\u6e90\u8868\uff0c\u7136\u540e\u901a\u8fc7\u6307\u5b9a\u6e90\u8868\u6765\u521b\u5efa\u7ee7\u627f\u8868\u3002    \\n\u5bf9\u4e8e\u7ee7\u627f\u8868\u6765\u8bf4\uff0c\u6b64\u65f6\u7684\u7ee7\u627f\u8868\u5c06**\u62e5\u6709\u6e90\u8868\u7684\u5168\u90e8\u5217**\uff0c\u5e76\u4e14\u53ef\u4ee5\u81ea\u5b9a\u4e49\u989d\u5916\u7684\u5217\u5c5e\u6027\u3002       \\n\u5bf9\u4e8e\u6e90\u8868\u6765\u8bf4\uff0c\u6b64\u65f6\u7684\u6e90\u8868\u5c06\u53ef\u4ee5\u68c0\u7d22**\u81ea\u8eab\u4ee5\u53ca\u7ee7\u627f\u8868\u7684\u5168\u90e8\u6570\u636e**\u3002   \\n\\n\u5728\u8fd9\u91cc\u6211\u4eec\u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u4f60\u6709\u4e00\u5f20\u8868 `cities`\uff0c\u91cc\u9762\u5b58\u653e\u4e86\u56fd\u5185\u5916\u6240\u6709\u7684\u57ce\u5e02\u3002\\n```sql\\nCREATE TABLE cities (\\n    name      text,   -- \u57ce\u5e02\u540d\\n    altitude  int     -- \u57ce\u5e02\u6d77\u62d4\u9ad8\u5ea6\\n);\\n```\\n\u53ef\u662f\u6bcf\u4e2a\u56fd\u5bb6\u53ea\u6709\u4e00\u4e2a\u9996\u90fd\u57ce\u5e02\uff0c\u73b0\u5728\u6709\u4e1a\u52a1\u9700\u6c42\u8981\u5feb\u901f\u7b5b\u5206\u9996\u90fd\u57ce\u5e02\u3002  \\n\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u7ed9\u8fd9\u5f20\u8868\u52a0\u4e00\u4e2a\u5b57\u6bb5\uff0c\u6216\u8005\u91cd\u65b0\u521b\u5efa\u4e00\u5f20\u9996\u90fd\u57ce\u5e02\u7684\u8868\uff0c\u8fd9\u4e9b\u90fd\u662f\u4e0d\u9519\u7684\u5b9e\u73b0\u65b9\u6848\u3002  \\n\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u7528\u7ee7\u627f\u6765\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\uff1a\\n```sql\\nCREATE TABLE capitals (\\n    country  text     -- \u6240\u5c5e\u56fd\\n) INHERITS (cities);\\n```\\n\u5728\u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u7ee7\u627f\u8868 `capitals`\uff0c\u7ee7\u627f\u81ea `cities`\u3002\u8fd9\u65f6\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5b58\u50a8\u6570\u636e\uff1a  \\n1\u3001\u5c06\u9996\u90fd\u57ce\u5e02\u5b58\u653e\u81f3 `capitals`\uff0c\u5e76\u6307\u5b9a\u6240\u5c5e\u56fd\u3002  \\n2\u3001\u5c06\u5176\u4f59\u57ce\u5e02\u5b58\u653e\u81f3 `cities`\u3002   \\n```sql title=\\"\u67e5\u8be2\u6240\u6709\u57ce\u5e02\u4e2d\uff0c\u6d77\u62d4\u9ad8\u4e8e500\u7684\u57ce\u5e02\\"\\nSELECT * FROM cities WHERE altitude > 500;\\n```\\n```sql title=\\"\u67e5\u8be2\u975e\u9996\u90fd\u57ce\u5e02\u4e2d\uff0c\u6d77\u62d4\u9ad8\u4e8e500\u7684\u57ce\u5e02\\"\\nSELECT * FROM ONLY cities WHERE altitude > 500; -- \u901a\u8fc7 ONLY \u9650\u5236\u4ec5\u67e5 cities \u8868\\n```\\n```sql title=\\"\u67e5\u8be2\u6240\u6709\u9996\u90fd\u57ce\u5e02\u4e2d\uff0c\u6d77\u62d4\u9ad8\u4e8e500\u7684\u57ce\u5e02\\"\\nSELECT * FROM capitals WHERE altitude > 500;\\n```\\n:::\\n\\n\x3c!-- http://www.postgres.cn/docs/12/ddl-partitioning.html --\x3e\\n:::tip \u8868\u5206\u533a\\n\u5728 postgres \u4e2d\uff0c\u8868\u5206\u533a\u662f\u5c06\u4e00\u5f20\u5927\u8868\uff0c\u5212\u5206\u6210\u4e00\u4e9b\u5c0f\u7684\u7269\u7406\u4e0a\u7684\u7247\u3002\u8fd9\u6837\u5212\u5206\u7684\u597d\u5904\u6709\u5f88\u591a\uff1a  \\n* \u67d0\u4e9b\u573a\u666f\u4e0b\u8bfb\u5199\u6027\u80fd\u63d0\u5347\u3002**\u51cf\u5c0f\u5355\u8868\u6570\u636e\u91cf\u3001\u7d22\u5f15\u5927\u5c0f**\u3002      \\n* \u67d0\u4e9b\u573a\u666f\u4e0b\uff0c**\u6279\u91cf\u64cd\u4f5c**\u6027\u80fd\u5c06\u5f97\u5230\u6781\u5927\u63d0\u5347\u3002     \\n* \u53ef\u4ee5\u6309\u5b9e\u9645\u9700\u6c42\uff0c\u5c06\u4ef7\u503c\u4f4e\u7684\u6570\u636e\u5757\u8fc1\u79fb\u81f3\u4fbf\u5b9c\u4e14\u8f83\u6162\u7684\u5b58\u50a8\u4ecb\u8d28\u4e0a\u3002   \\n\\n\u521b\u5efa\u8868\u5206\u533a\u7684\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a    \\n\u7b2c\u4e00\u79cd\uff0c\u521d\u59cb\u5316\u65f6\u901a\u8fc7 `PARTITION BY` \u58f0\u660e\u8be5\u8868\u4e3a\u5206\u533a\u8868\uff0c\u4e14\u9700\u8981\u6307\u5b9a\u5206\u533a\u952e\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u521b\u5efa\u5206\u533a\u4e86\u3002\\n```sql title=\\"\u58f0\u660e\u5206\u533a\u8868\\"\\nCREATE TABLE measurement (\\n    city_id    int not null,\\n    logdate    date not null,\\n    peaktemp   int,\\n    unitsales  int\\n) PARTITION BY RANGE (logdate); -- \u5206\u533a\u652f\u6301\u8303\u56f4\u5212\u5206\u3001\u5217\u8868\u5212\u5206\u3001\u54c8\u5e0c\u5212\u5206\\n```\\n```sql title=\\"\u521b\u5efa\u5206\u533a\\"\\nCREATE TABLE measurement_y2006m02 PARTITION OF measurement\\n    FOR VALUES FROM (\'2006-02-01\') TO (\'2006-03-01\');\\nCREATE TABLE measurement_y2006m03 PARTITION OF measurement\\n    FOR VALUES FROM (\'2006-03-01\') TO (\'2006-04-01\');\\n```\\n\u521b\u5efa\u5206\u533a\u4e4b\u540e\uff0c\u4f60\u5bf9 `measurement` \u7684\u64cd\u4f5c\u90fd\u4f1a\u88ab\u91cd\u5b9a\u5411\u5230\u67d0\u4e2a\u5206\u533a\uff0c\u6bd4\u5982\uff1a  \\n1\u3001\u63d2\u5165\u4e00\u6761\u6570\u636e\u5230 `measurement` \u4e2d\uff0c\u5f53\u8fd9\u6761\u6570\u636e\u88ab**\u6620\u5c04\u5230 `measurement_y2006m02` \u65f6**\uff0c\\n\u8fd9\u6761\u6570\u636e\u5c06\u88ab**\u91cd\u5b9a\u5411**\u5230 `measurement_y2006m02` \u5206\u533a\u3002  \\n2\u3001\u8bfb\u53d6\u4e00\u6761\u6570\u636e\uff0c\u5f53\u8fd9\u6761\u6570\u636e\u88ab\u6620\u5c04\u5230 `measurement_y2006m02` \u65f6\uff0c\u67e5\u8be2\u4e5f\u4f1a\u91cd\u5b9a\u5411\u3002\\n\\n\u7b2c\u4e8c\u79cd\uff0c\u901a\u8fc7\u7ee7\u627f\u5b9e\u73b0\u8868\u5206\u533a\u3002\\n```sql title=\\"\u521b\u5efa\u7ee7\u627f\u8868\\"\\nCREATE TABLE measurement_y2006m02 () INHERITS (measurement);\\n```\\n\u4e3a\u4e86\u5b9e\u73b0\u7c7b\u4f3c\u5206\u533a\u8868\u7684\u80fd\u529b\uff0c\u6211\u4eec\u5f15\u5165\u89e6\u53d1\u5668\uff1a\\n```sql title=\\"\u521b\u5efa\u89e6\u53d1\u5668\u4e0e\u51fd\u6570\\"\\nCREATE OR REPLACE FUNCTION measurement_insert_trigger()\\nRETURNS TRIGGER AS $$\\nBEGIN\\n    INSERT INTO measurement_y2008m01 VALUES (NEW.*);\\n    RETURN NULL;\\nEND;\\n$$\\nLANGUAGE plpgsql;\\n\\nCREATE TRIGGER insert_measurement_trigger\\n    BEFORE INSERT ON measurement\\n    FOR EACH ROW EXECUTE FUNCTION measurement_insert_trigger();\\n```\\n\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u901a\u8fc7\u7ee7\u627f\u4e0e\u89e6\u53d1\u5668\u7684\u65b9\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u95f4\u63a5\u5b9e\u73b0\u5206\u533a\u8868\u7684\u80fd\u529b\uff0c\u4ed6\u76f8\u6bd4\u4e8e\u58f0\u660e\u5f0f\u5206\u533a\u8868\uff0c\u4f18\u52bf\u5c31\u662f\u9650\u5236\u4f1a\u5bbd\u677e\u4e00\u4e9b\uff0c\\n\u6bd4\u5982\u6211\u4eec\u53ef\u4ee5\u4e3a\u6bcf\u4e00\u4e2a\u5206\u533a\u521b\u5efa\u4e0d\u540c\u7684\u5b57\u6bb5\u7684\u4e0d\u540c\u7d22\u5f15\uff0c\u4f46\u4ee3\u4ef7\u5c31\u662f\u66f4\u590d\u6742\u7ef4\u62a4\u903b\u8f91\u3002\\n:::\\n\\n\\n## \u4f18\u5316\u4e4b\u8def\uff1a\u7ee7\u627f\u5f0f\u5206\u533a\u8868\u586b\u5751\\n\u6309\u7167\u9884\u671f\u65b9\u6848\u5b9e\u73b0\u540e\uff0c\u6211\u62f7\u8d1d\u4e86\u4e00\u4efd\u6b63\u5f0f\u73af\u5883\u6570\u636e\u6267\u884c\u6d4b\u8bd5\uff0c\u7ed3\u679c\u4ee4\u4eba\u9707\u60ca\uff0c\u8017\u65f6 3\u5c0f\u65f6 \ud83d\ude31\ud83d\ude31\ud83d\ude31       \\n\u5c31\u79bb\u4e86\u4e2a\u5927\u8c31\uff0c\u59a5\u59a5\u7684\u53cd\u5411\u4f18\u5316\u3002 \ud83d\ude2d\ud83d\ude2d\ud83d\ude2d  \\n\\n\u7406\u8bba\u548c\u5b9e\u9645\u5dee\u8ddd\u8fc7\u5927\uff0c\u4e0d\u5f97\u4e0d\u8ba9\u6211\u5f00\u59cb\u53cd\u601d\u5230\u5e95\u662f\u54ea\u91cc\u51fa\u73b0\u4e86\u5f02\u5e38\u3002   \\n\u901a\u8fc7\u65e5\u5fd7\u53d1\u73b0\u5728\u5173\u8054\u8ba1\u7b97\u3001\u63d2\u5165\u65b0\u6570\u636e\u3001\u66f4\u65b0\u6570\u636e\u8fd9\u4e9b\u6d41\u7a0b\u90fd\u975e\u5e38\u8017\u65f6\u3002  \\n\u4f46\u662f\u6211\u4eec\u5df2\u7ecf\u8bbe\u8ba1\u4e86\u5206\u533a\uff0c\u51cf\u5c0f\u4e86\u6bcf\u5f20\u8868\u7684\u6570\u91cf\u548c\u7d22\u5f15\u5927\u5c0f\u3002\u6240\u4ee5\u7406\u8bba\u4e0a\u64cd\u4f5c\u4e0d\u53ef\u80fd\u4f1a\u66f4\u8017\u65f6\u3002  \\n\\n\u901a\u8fc7\u8fdb\u4e00\u6b65\u6253\u65ad\u70b9\u8f93\u51fa\u65e5\u5fd7\uff0c\u6211\u53d1\u73b0\u4e86\u7ee7\u627f\u5f0f\u5206\u533a\u8868\u7684\u89e6\u53d1\u5668\uff0c\u5728\u6267\u884c\u64cd\u4f5c\u65f6\u6027\u80fd\u975e\u5e38\u62c9\u8de8\u3002\\n```sql title=\\"\u521d\u59cb\u5316\u8868\u5206\u533a\\"\\nCREATE TABLE IF NOT EXISTS origin_0 (CHECK (origin_id = 0)) INHERITS (cloud_search_kvs);\\nCREATE TABLE IF NOT EXISTS origin_0_0 (CHECK (0 < k_crc32 AND k_crc32 <= 858993459)) INHERITS (origin_0);\\nCREATE TABLE IF NOT EXISTS origin_0_1 (CHECK (858993459 < k_crc32 AND k_crc32 <= 1717986918)) INHERITS (origin_0);\\nCREATE TABLE IF NOT EXISTS origin_0_2 (CHECK (1717986918 < k_crc32 AND k_crc32 <= 2576980377)) INHERITS (origin_0);\\nCREATE TABLE IF NOT EXISTS origin_0_3 (CHECK (2576980377 < k_crc32 AND k_crc32 <= 3435973836)) INHERITS (origin_0);\\nCREATE TABLE IF NOT EXISTS origin_0_4 (CHECK (3435973836 < k_crc32 AND k_crc32 <= 4294967295)) INHERITS (origin_0);\\n```\\n```sql title=\\"\u521d\u59cb\u5316\u89e6\u53d1\u5668\\"\\nCREATE OR REPLACE FUNCTION origin_0_insert_trigger() RETURNS TRIGGER AS $$\\nBEGIN\\n IF (0 < NEW.k_crc32 AND NEW.k_crc32 <= 858993459) THEN INSERT INTO origin_0_0 VALUES (NEW.*);\\n ELSIF (858993459 < NEW.k_crc32 AND NEW.k_crc32 <= 1717986918) THEN INSERT INTO origin_0_1 VALUES (NEW.*);\\n ELSIF (1717986918 < NEW.k_crc32 AND NEW.k_crc32 <= 2576980377) THEN INSERT INTO origin_0_2 VALUES (NEW.*);\\n ELSIF (2576980377 < NEW.k_crc32 AND NEW.k_crc32 <= 3435973836) THEN INSERT INTO origin_0_3 VALUES (NEW.*);\\n ELSIF (3435973836 < NEW.k_crc32 AND NEW.k_crc32 <= 4294967295) THEN INSERT INTO origin_0_4 VALUES (NEW.*);\\n END IF;\\n RETURN NULL;\\nEND;\\n$$ LANGUAGE plpgsql;\\n```\\n\u89e6\u53d1\u5668\u7684\u539f\u7406\u5c31\u662f\u901a\u8fc7\u67e5\u8be2\u6761\u4ef6\uff0c\u5c06\u6570\u636e\u91cd\u5b9a\u5411\u5230\u6307\u5b9a\u5206\u533a\u3002  \\n\u4e0a\u9762\u7684\u521d\u59cb\u5316\u8bed\u53e5\u90fd\u662f\u7b80\u5316\u540e\u7684\uff0c\u5b9e\u9645\u4e0a\u6709 256 \u4e2a\u5224\u65ad\u6761\u4ef6\uff0c\u800c\u4e14\u89e6\u53d1\u5668\u6bcf\u6b21\u4f3c\u4e4e\u53ea\u80fd\u6267\u884c\u5355\u6761\u8bed\u53e5\uff0c\u8fd9\u4e5f\u5bfc\u81f4\u4e86\u6574\u4f53\u6027\u80fd\u6025\u5267\u4e0b\u964d\u3002   \\n\u6211\u4eec\u65b9\u6848\u8bbe\u8ba1\u4e0a\u6ca1\u6709\u592a\u5927\u7684\u95ee\u9898\uff0c\u4f46\u662f\u6267\u884c\u65b9\u5f0f\u6709\u95ee\u9898\uff0c\u89e6\u53d1\u5668\u7684\u91cd\u5b9a\u5411\u4e0d\u9002\u5408\u8fd9\u79cd\u573a\u666f\uff0c\u6240\u4ee5\u6211\u53ea\u80fd\u5c1d\u8bd5\u81ea\u5df1\u7ef4\u62a4\u3002\\n\\n\u91cd\u65b0\u4f18\u5316\u601d\u8def\uff0c\u83b7\u53d6\u6bcf\u4e2a\u5206\u533a\u7684\u6570\u636e\uff0c\u76f4\u63a5\u548c\u76ee\u6807\u5206\u533a\u4f5c\u5173\u8054\u8fd0\u7b97\uff0c\u7ed5\u5f00\u89e6\u53d1\u5668\u3002  \\n```sql\\nCREATE TEMPORARY TABLE temp_diff_%[2]d (\\n    k text,\\n    v text,\\n\\tk_crc32 bigint,\\n    old_v text\\n) ON COMMIT DROP;\\nWITH temp_diff_w AS (SELECT * FROM temp_add WHERE (%[3]d < k_crc32 AND k_crc32 <= %[4]d))\\nINSERT INTO temp_diff_%[2]d SELECT tadd.k, tadd.v, tadd.k_crc32, tadd.origin_id, kv.v FROM temp_diff_w AS tadd LEFT JOIN origin AS kv ON tadd.k = kv.k AND tadd.k_crc32 = kv.k_crc32 WHERE tadd.v != kv.v OR kv.v IS NULL;\\nINSERT INTO temp_diff (SELECT * FROM temp_diff;\\nUPDATE origin AS o SET v = row.v FROM (SELECT * FROM temp_diff_%[2]d WHERE old_v IS NOT NULL) as row WHERE o.k_crc32 = row.k_crc32 AND o.k = row.k;\\nDROP INDEX IF EXISTS origin_btree_index_key;\\nINSERT INTO origin (k, v, k_crc32, origin_id) (SELECT k, v, k_crc32, origin_id FROM temp_diff_%[2]d WHERE old_v IS NULL);\\nCREATE INDEX IF NOT EXISTS origin_btree_index_key ON origin USING btree (k_crc32);\\nDROP TABLE IF EXISTS temp_diff_%[2]d;\\n```\\n\u4ee5\u4e0a\u662f\u90e8\u5206\u6267\u884c\u8bed\u53e5\uff08\u5df2\u8131\u654f\uff09\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u7b2c\u4e00\u6b65\u5c31\u53d6\u51fa\u4e86\u5206\u533a\u6570\u636e\uff0c\u7136\u540e\u6267\u884c\u5173\u8054\u8fd0\u7b97\u83b7\u53d6\u6700\u7ec8\u7ed3\u679c\u96c6\uff0c\u518d\u5c06\u7ed3\u679c\u96c6\u6570\u636e\u5199\u5165\u6e90\u8868\u5373\u53ef\u3002  \\n\\n\u518d\u6b21\u6d4b\u8bd5\uff0c\u6267\u884c\u4e00\u6b21\u5927\u6982\u5728 \u534a\u5c0f\u65f6 \u5de6\u53f3\uff0c\u5b8c\u7f8e \ud83e\udd20\ud83e\udd20\ud83e\udd20\\n\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg    \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u6570\u636e\u5e93\u662f\u5426\u9002\u5408\u5bb9\u5668\u5316\u90e8\u7f72","metadata":{"permalink":"/docusaurus/blog/2022/02/22/\u6570\u636e\u5e93\u662f\u5426\u9002\u5408\u5bb9\u5668\u5316\u90e8\u7f72","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/02-22-\u6570\u636e\u5e93\u662f\u5426\u9002\u5408\u5bb9\u5668\u5316\u90e8\u7f72/index.md","source":"@site/blog/2022/02-22-\u6570\u636e\u5e93\u662f\u5426\u9002\u5408\u5bb9\u5668\u5316\u90e8\u7f72/index.md","title":"\u6570\u636e\u5e93\u662f\u5426\u9002\u5408\u5bb9\u5668\u5316\u90e8\u7f72","description":"\u968f\u7740 Kubernetes \u7684\u6d41\u884c\uff0c\u8d8a\u6765\u8d8a\u6765\u7684\u5e94\u7528\u88ab\u6253\u5305\u6210\u955c\u50cf\uff0c\u4f5c\u4e3a\u5bb9\u5668\u90e8\u7f72\u5728 k8s \u4e0a\u3002","date":"2022-02-22T00:00:00.000Z","formattedDate":"February 22, 2022","tags":[{"label":"\u6570\u636e\u5e93","permalink":"/docusaurus/blog/tags/\u6570\u636e\u5e93"}],"readingTime":4.5,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u6570\u636e\u5e93\u5355\u8868\u5341\u4ebf\u91cf\u7ea7\u7684\u4f18\u5316\u4e4b\u8def","permalink":"/docusaurus/blog/2022/03/18/\u6570\u636e\u5e93\u5355\u8868\u5341\u4ebf\u91cf\u7ea7\u7684\u4f18\u5316\u4e4b\u8def"},"nextItem":{"title":"\u8bb0\u4e00\u6b21 golang \u5347\u7ea7\u5bfc\u81f4\u7684 goland \u4e0d\u53ef\u7528","permalink":"/docusaurus/blog/2022/02/17/golang\u5347\u7ea7\u5bfc\u81f4goland\u4e0d\u53ef\u7528"}},"content":"\u968f\u7740 Kubernetes \u7684\u6d41\u884c\uff0c\u8d8a\u6765\u8d8a\u6765\u7684\u5e94\u7528\u88ab\u6253\u5305\u6210\u955c\u50cf\uff0c\u4f5c\u4e3a\u5bb9\u5668\u90e8\u7f72\u5728 k8s \u4e0a\u3002\\n\\n\u5728 k8s \u4e2d\uff0cpod \u662f\u6700\u5c0f\u7684\u90e8\u7f72\u5355\u4f4d\uff0c\u5185\u90e8\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u5bb9\u5668\u955c\u50cf\uff0c\u6bcf\u4e00\u4e2a pod \u90fd\u5177\u6709\u6709\u9650\u7684\u751f\u547d\u5468\u671f\u3002    \\n\u5bf9\u4e8e\u65e0\u72b6\u6001\u670d\u52a1\u6765\u8bf4\uff0c\u7279\u522b\u9002\u5408\u5728 k8s \u4e0a\u8fd0\u884c\uff0c\u56e0\u4e3a\u65e0\u72b6\u6001\u670d\u52a1\uff0c\u662f\u5177\u6709\u5f39\u6027\u7684\uff0c\u53ef\u4ee5\u66f4\u597d\u7684\u5e94\u5bf9 pod \u6269\u7f29\u5bb9\u3001\u91cd\u542f\u7b49\u7279\u6027\u3002  \\n\u76f8\u53cd\uff0c\u5bf9\u4e8e\u6709\u72b6\u6001\u670d\u52a1\uff08\u7c7b\u4f3c\u6570\u636e\u5e93\u7b49\uff09\uff0c\u5219\u5b58\u5728\u4e00\u5b9a\u7684\u74f6\u9888\u9650\u5236\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u5148\u6765\u770b\u4e0b k8s \u5982\u4f55\u90e8\u7f72\u6709\u72b6\u6001\u670d\u52a1\uff0c\u7136\u540e\u8ba8\u8bba\u4e0b\u5176\u4f18\u7f3a\u70b9\u3002\\n\\n## DaemonSet & StatefulSet\\n**DaemonSet** \u662f k8s \u7684\u63a7\u5236\u5668\u8d44\u6e90\u5bf9\u8c61\u4e4b\u4e00\uff0c\u5176\u7279\u70b9\u662f\uff1a   \\n> 1\u3001\u786e\u4fdd\u6bcf\u4e2a\u8282\u70b9\u4ec5\u542f\u52a8\u4e00\u4e2a pod \u526f\u672c\uff0c\u5f53\u6709\u65b0\u8282\u70b9\u52a0\u5165\u96c6\u7fa4\u65f6\uff0c\u81ea\u52a8\u4e3a\u5176\u589e\u52a0\u4e00\u4e2a pod\u3002\\n\\n\u6bd4\u8f83\u5178\u578b\u7684\u662f\u65e5\u5fd7\u6536\u96c6\u670d\u52a1\uff0c\u6bd4\u5982\uff1a\u6211\u4eec\u9700\u8981\u786e\u4fdd\u6bcf\u4e2a\u8282\u70b9\u4e0a\u8d77\u4e00\u4e2a `logstash`\uff0c\u4ee5\u4fbf\u56de\u6536\u8282\u70b9\u4e0a\u7684\u670d\u52a1\u65e5\u5fd7\u3002  \\n\\n\u6570\u636e\u5e93\u670d\u52a1\u53ef\u4ee5\u5728\u7c7b\u4f3c\u573a\u666f\u4e0b\u4f7f\u7528\uff0c\u6bd4\u5982\u7ed9\u67d0\u4e2a\u8282\u70b9\u6253\u4e0a\u6807\u7b7e\uff0c\u786e\u4fdd\u67d0\u4e2a\u6570\u636e\u5e93\u5728\u5bf9\u5e94\u8282\u70b9\u4e0a\u4ee5 DaemonSet \u7c7b\u578b\u542f\u52a8\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u786e\u4fdd\u8be5\u8282\u70b9\u4ec5\u6709\u4e00\u4e2a pod \u526f\u672c\u3002\\n\u6700\u540e\u901a\u8fc7 `nodeport` \u7684\u65b9\u5f0f\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002\\n\u6b64\u65f6\u6211\u4eec\u7684\u6570\u636e\u5e93\u5c31\u62e5\u6709\u4e86\u7a33\u5b9a\u7684\u8282\u70b9 ip \u548c\u672c\u5730\u5b58\u50a8\u3002  \\n\\n\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\uff0c\u548c\u76f4\u63a5\u5728\u7269\u7406\u673a\u4e0a\u90e8\u7f72\u7684\u65b9\u5f0f\u5dee\u522b\u4e0d\u5927\uff0c\u4e3b\u8981\u662f\u590d\u7528\u4e86 k8s \u7684\u7ba1\u7406\u80fd\u529b\u3002\\n\\n<br/>\\n\\n**StatefulSet** \u662f k8s \u4e13\u4e3a\u6709\u72b6\u6001\u670d\u52a1\u8bbe\u8ba1\u7684\u8d44\u6e90\u7c7b\u578b\uff0c\u5b83\u62e5\u6709\uff1a  \\n> 1\u3001\u7a33\u5b9a\u7684\u7f51\u7edc\u6807\u8bc6\uff1a\u5f53\u670d\u52a1\u91cd\u542f\uff0cpod \u7ed1\u5b9a\u7684 ip \u4e0d\u4f1a\u53d8\u5316\uff0c\u4f46\u662f\u624b\u52a8\u5220\u9664\u6216\u8005\u91cd\u5efa\u526f\u672c\u65f6\uff0c\u4f1a\u91cd\u65b0\u5206\u914d ip\u3002\\n>\u521b\u5efa headless service \u65f6\u53ef\u4ee5\u901a\u8fc7 `${serviceName-number}.${service}.${namespace}` \u8bbf\u95ee\u6307\u5b9a pod\u3002       \\n> 2\u3001\u7a33\u5b9a\u7684\u6301\u4e45\u5b58\u50a8\uff1a\u57fa\u4e8e pvc \u5b9e\u73b0\uff0c\u6bcf\u4e2a pod \u4f1a\u7ed1\u5b9a\u4e13\u6709\u7684 pvc \u5b58\u50a8\u3002    \\n> 3\u3001\u6709\u5e8f\u7684\u6269\u7f29\u5bb9\uff1a\u4f1a\u5b89\u88c5\u987a\u5e8f\u4ece 0 \u9010\u4e00\u542f\u52a8\u6216\u8005\u91cd\u5efa\uff0c\u6b64\u65f6\u7c7b\u4f3c\u6eda\u52a8\u66f4\u65b0\u7684\u6269\u5bb9\u7b56\u7565\u4e0d\u5728\u9002\u7528\u3002      \\n\\n\u5f53\u6211\u4eec\u7684\u6570\u636e\u5e93\u670d\u52a1\u90e8\u7f72 k8s \u4e0a\u65f6\uff0c\u53ef\u4ee5\u9009\u62e9 StatefulSet \u8d44\u6e90\u7c7b\u578b\u3002  \\n\u5b83\u7684\u57fa\u672c\u80fd\u529b\uff0c\u8db3\u591f\u652f\u6301\u4e00\u4e2a\u6709\u72b6\u6001\u670d\u52a1\u7684\u6b63\u5e38\u8fd0\u8f6c\u3002\\n\\n## \u6027\u80fd\u74f6\u9888\\n\x3c!--\\n\u5e94\u7528\u7684\u5bb9\u5668\u5316\u90e8\u7f72\uff0c\u7279\u522b\u662f\u5728\u8de8\u8282\u70b9\u7684\u60c5\u51b5\u4e0b\uff0c\u6beb\u65e0\u7591\u95ee\u662f\u4f1a\u589e\u5927\u7f51\u7edcIO\u7684\uff0c\u4f46 k8s \u6574\u4f53\u5e26\u6765\u7684\u4fbf\u5229\u6027\uff0c\u662f\u8fdc\u8fdc\u5927\u4e8e\u8fd9\u70b9\u635f\u5931\u3002\\n\u65e0\u72b6\u6001\u670d\u52a1\u53ef\u4ee5\u901a\u8fc7\u5feb\u901f\u7684\u6269\u5bb9\u63d0\u5347\u670d\u52a1\u541e\u5410\u91cf\u3002\\n--\x3e\\n\\n\u6570\u636e\u5e93\u4e3b\u8981\u662f\u548c\u5b58\u50a8\u6253\u4ea4\u9053\uff0c\u5176\u6027\u80fd\u74f6\u9888\u901a\u5e38\u5728\u78c1\u76d8IO\u3002    \\n\u90a3\u4e48\u5feb\u901f\u7684\u78c1\u76d8IO\uff0c\u5c06\u6709\u52a9\u4e8e\u63d0\u5347\u6570\u636e\u5e93\u7684\u6027\u80fd\u548c\u541e\u5410\u91cf\u3002    \\n\u6bd4\u5982\uff1a\u5206\u522b\u90e8\u7f72\u5728 HDD \u548c SSD \u4e0a\u7684\u4e24\u4e2a\u6570\u636e\u5e93\uff0c\u5728\u76f8\u540c\u5176\u4ed6\u6761\u4ef6\u4e0b\uff0cSSD \u4e0a\u7684\u6570\u636e\u5e93\u80af\u5b9a\u62e5\u6709\u66f4\u9ad8\u7684\u6027\u80fd\u3002 \\n\\n\u5f53\u6211\u4eec\u7684\u6570\u636e\u5e93\u90e8\u7f72\u5728 k8s \u4e0a\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6302\u8f7d\u5377 volume\uff08nfs\u3001ceph\uff09\u6301\u4e45\u5316\u6570\u636e\uff0c\u4f46\u662f\u8fd9\u6837\u5c31\u4e0d\u53ef\u907f\u514d\u7684\u5f15\u5165\u4e86\u7f51\u7edcIO\uff0c\u5728\u672c\u8eab\u7684\u74f6\u9888\u4e0a\u53c8\u8865\u4e00\u5200\u3002  \\n\u6240\u4ee5\u5f53\u6211\u4eec\u4f7f\u7528 k8s \u90e8\u7f72\u6570\u636e\u5e93\u65f6\uff0c\u53ef\u80fd\u9700\u8981\u91cd\u70b9\u8003\u8651\u4e0b\u6027\u80fd\u95ee\u9898\u3002\\n\\n\u9664\u4e86 nfs\u3001ceph \u4e4b\u5916\uff0c\u8fd8\u6709 hostpath \u8fd9\u7c7b\u672c\u5730\u5b58\u50a8\uff0c\u53ef\u4ee5\u5ffd\u7565\u7f51\u7edc\u5f71\u54cd\u3002\\n\u4f46\u662f\u8fd9\u9700\u8981\u6211\u4eec\u7684\u526f\u672c\u7ed1\u5b9a\u5230\u56fa\u5b9a\u7684\u8282\u70b9\u4e0a\uff0c\u6b64\u65f6\u5c31\u8d70\u7684\u7c7b\u4f3c DaemonSet \u7684\u90e8\u7f72\u8def\u7ebf\u4e86\u3002\\n\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg  \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u8bb0\u4e00\u6b21 golang \u5347\u7ea7\u5bfc\u81f4\u7684 goland \u4e0d\u53ef\u7528","metadata":{"permalink":"/docusaurus/blog/2022/02/17/golang\u5347\u7ea7\u5bfc\u81f4goland\u4e0d\u53ef\u7528","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/02-17-golang\u5347\u7ea7\u5bfc\u81f4goland\u4e0d\u53ef\u7528/index.md","source":"@site/blog/2022/02-17-golang\u5347\u7ea7\u5bfc\u81f4goland\u4e0d\u53ef\u7528/index.md","title":"\u8bb0\u4e00\u6b21 golang \u5347\u7ea7\u5bfc\u81f4\u7684 goland \u4e0d\u53ef\u7528","description":"go1.14.1 \u5347\u7ea7\u81f3 go1.17.7\uff0c\u5bfc\u81f4 goland \u6253\u5f00\u540e\u663e\u793a\u65e0\u6cd5\u627e\u5230 GOROOT\u3002","date":"2022-02-17T00:00:00.000Z","formattedDate":"February 17, 2022","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"},{"label":"bug","permalink":"/docusaurus/blog/tags/bug"}],"readingTime":0.655,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u6570\u636e\u5e93\u662f\u5426\u9002\u5408\u5bb9\u5668\u5316\u90e8\u7f72","permalink":"/docusaurus/blog/2022/02/22/\u6570\u636e\u5e93\u662f\u5426\u9002\u5408\u5bb9\u5668\u5316\u90e8\u7f72"},"nextItem":{"title":"Jmeter\u53ca\u6027\u80fd\u6d4b\u8bd5","permalink":"/docusaurus/blog/2022/02/02/jmeter\u53ca\u6027\u80fd\u6d4b\u8bd5"}},"content":"go1.14.1 \u5347\u7ea7\u81f3 go1.17.7\uff0c\u5bfc\u81f4 goland \u6253\u5f00\u540e\u663e\u793a\u65e0\u6cd5\u627e\u5230 GOROOT\u3002\\n\\n\u9519\u8bef\u663e\u793a\uff1a\\n```text\\nThe selected directory is not a valid home for Go SDK\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u901a\u8fc7 go env \u67e5\u770b\u540e\u53d1\u73b0\u76f8\u5173\u914d\u7f6e\u65e0\u95ee\u9898\uff0c\u73af\u5883\u53d8\u91cf\u4e5f\u65e0\u95ee\u9898\u3002\\n\\n\u6700\u540e\u627e\u7684\u89e3\u51b3\u65b9\u6848\uff1a  \\n**1\u3001**go version \u67e5\u770b\u81ea\u5df1\u5f53\u524d\u7248\u672c  \\n**2\u3001**\u7f16\u8f91 {GOROOT}/src/runtime/internal/sys/zversion.go \u6587\u4ef6\uff0c\u5199\u5165\u4ee5\u4e0b\u53d8\u91cf\\n```go\\nconst TheVersion = `go1.17.4`\\n```\\n**3\u3001**\u91cd\u542f goland\uff0c\u7136\u540e\u70b9\u51fb setroot \u5373\u53ef\u3002  \\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg    \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"Jmeter\u53ca\u6027\u80fd\u6d4b\u8bd5","metadata":{"permalink":"/docusaurus/blog/2022/02/02/jmeter\u53ca\u6027\u80fd\u6d4b\u8bd5","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/02-02-jmeter\u53ca\u6027\u80fd\u6d4b\u8bd5/index.md","source":"@site/blog/2022/02-02-jmeter\u53ca\u6027\u80fd\u6d4b\u8bd5/index.md","title":"Jmeter\u53ca\u6027\u80fd\u6d4b\u8bd5","description":"\u8bb0\u5f55 jmeter \u5de5\u5177\u7684\u4f7f\u7528\uff0c\u4ee5\u53ca\u5728\u6027\u80fd\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u5b66\u4e60\u5230\u7684\u4e00\u4e9b\u77e5\u8bc6\u70b9\u3002","date":"2022-02-02T00:00:00.000Z","formattedDate":"February 2, 2022","tags":[{"label":"\u6027\u80fd\u6d4b\u8bd5","permalink":"/docusaurus/blog/tags/\u6027\u80fd\u6d4b\u8bd5"},{"label":"jmeter","permalink":"/docusaurus/blog/tags/jmeter"}],"readingTime":2.35,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u8bb0\u4e00\u6b21 golang \u5347\u7ea7\u5bfc\u81f4\u7684 goland \u4e0d\u53ef\u7528","permalink":"/docusaurus/blog/2022/02/17/golang\u5347\u7ea7\u5bfc\u81f4goland\u4e0d\u53ef\u7528"},"nextItem":{"title":"\u5e38\u89c1 sql \u6279\u91cf\u64cd\u4f5c","permalink":"/docusaurus/blog/2022/01/20/\u5e38\u7528sql\u64cd\u4f5c"}},"content":"\u8bb0\u5f55 jmeter \u5de5\u5177\u7684\u4f7f\u7528\uff0c\u4ee5\u53ca\u5728\u6027\u80fd\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u5b66\u4e60\u5230\u7684\u4e00\u4e9b\u77e5\u8bc6\u70b9\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u6027\u80fd\u6307\u6807\\n* TPS\uff08Transactions Per Second\uff09\uff1a\u6bcf\u79d2\u4e8b\u52a1\u6570\uff0c\u541e\u5410\u7387\\n* QPS\uff08Queries Per Second\uff09\uff1a\u6bcf\u79d2\u67e5\u8be2\u6570\\n* RT\uff08Response Time\uff09\uff1a\u54cd\u5e94\u65f6\u95f4\uff0c\u670d\u52a1\u5ef6\u8fdf\\n\\n\u6027\u80fd\u95ee\u9898\uff0c\u5f52\u6839\u7ed3\u5e95\u8fd8\u662f\u8d44\u6e90\u95ee\u9898\u3002\u5e38\u89c1\u7684\u74f6\u9888\u70b9\uff1a  \\n1\u3001\u7f51\u7edcIO  \\n2\u3001\u5b58\u50a8IO  \\n3\u3001CPU\u3001\u5185\u5b58  \\n4\u3001\u5e94\u7528  \\n\\n\\n## jmeter \u7ed3\u679c\u89e3\u8bfb\\n\u5e76\u53d1\u7ebf\u7a0b\u3001\u54cd\u5e94\u65f6\u95f4\u3001TPS\u4e4b\u95f4\u7684\u5173\u8054\uff1a\\n```text\\nTPS = (1s/\u54cd\u5e94\u65f6\u95f4) * \u5e76\u53d1\u7ebf\u7a0b\\n```\\n\\n:::note\\n\u5047\u8bbe\u67094\u4e2a\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u6bcf\u79d2\u53d1\u8d774\u4e2a\u8bf7\u6c42\u5e76\u54cd\u5e94\uff0c\u6b64\u65f6\u5e76\u53d1\u662f16\u800c\u975e4\\n:::\\n\\n```text title=\\"1\u4e2a\u7ebf\u7a0b\\"\\nsummary +   5922 in 00:00:30 =  197.4/s Avg:     4 Min:     0 Max:    26 Err:     0 (0.00%) Active: 1 Started: 1 Finished: 0\\nsummary =  35463 in 00:03:05 =  192.0/s Avg:     5 Min:     0 Max:   147 Err:     0 (0.00%)\\nsummary +   5922 in 00:00:30 =  197.5/s Avg:     4 Min:     0 Max:    24 Err:     0 (0.00%) Active: 1 Started: 1 Finished: 0\\nsummary =  41385 in 00:03:35 =  192.8/s Avg:     5 Min:     0 Max:   147 Err:     0 (0.00%)\\nsummary +   5808 in 00:00:30 =  193.6/s Avg:     5 Min:     0 Max:    25 Err:     0 (0.00%) Active: 1 Started: 1 Finished: 0\\nsummary =  47193 in 00:04:05 =  192.9/s Avg:     5 Min:     0 Max:   147 Err:     0 (0.00%)\\n```\\n(1000ms/5ms)*1=200TPS\\n\\n\\n```text title=\\"10\u4e2a\u7ebf\u7a0b\\"\\nsummary +  11742 in 00:00:30 =  391.3/s Avg:    25 Min:     0 Max:   335 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0\\nsummary =  55761 in 00:02:24 =  386.6/s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)\\nsummary +  11924 in 00:00:30 =  397.5/s Avg:    25 Min:     0 Max:    80 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0\\nsummary =  67685 in 00:02:54 =  388.5/s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)\\nsummary +  11884 in 00:00:30 =  396.2/s Avg:    25 Min:     0 Max:   240 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0\\nsummary =  79569 in 00:03:24 =  389.6/s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)\\n```\\n(1000ms/25ms)*10=400TPS\\n\\n## \u5206\u5e03\u5f0f\u538b\u529b\u6d4b\u8bd5\\n```shell script title=\\"\u542f\u52a8\u6307\u4ee4\\"\\n/jemeter/bin/jmeter -n -t ./script.jmx -r -l ./script.jtl -e -o ./script\\n```\\n\\n```shell script title=\\"\u5206\u5e03\u5f0f jmeter \u542f\u52a8\u6307\u4ee4\\"\\n/jmeter/bin/jmeter -n -t tmpl.jmx -R 1.1.1.1:8000,1.1.1.2:8000\\n```\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg    \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u5e38\u89c1 sql \u6279\u91cf\u64cd\u4f5c","metadata":{"permalink":"/docusaurus/blog/2022/01/20/\u5e38\u7528sql\u64cd\u4f5c","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/01-20-\u5e38\u7528sql\u64cd\u4f5c/index.md","source":"@site/blog/2022/01-20-\u5e38\u7528sql\u64cd\u4f5c/index.md","title":"\u5e38\u89c1 sql \u6279\u91cf\u64cd\u4f5c","description":"\u6574\u7406\u4e0b sql \u5e38\u89c1\u7684\u6279\u91cf\u64cd\u4f5c\u5199\u6cd5\u3002","date":"2022-01-20T00:00:00.000Z","formattedDate":"January 20, 2022","tags":[{"label":"\u6570\u636e\u5e93","permalink":"/docusaurus/blog/tags/\u6570\u636e\u5e93"}],"readingTime":0.81,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"Jmeter\u53ca\u6027\u80fd\u6d4b\u8bd5","permalink":"/docusaurus/blog/2022/02/02/jmeter\u53ca\u6027\u80fd\u6d4b\u8bd5"},"nextItem":{"title":"nginx \u914d\u7f6e\u8bf4\u660e","permalink":"/docusaurus/blog/2022/01/12/nginx\u914d\u7f6e\u8bf4\u660e"}},"content":"\u6574\u7406\u4e0b sql \u5e38\u89c1\u7684\u6279\u91cf\u64cd\u4f5c\u5199\u6cd5\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u63d2\u5165\\n```sql title=\\"\u6279\u91cf\u63d2\u5165\\"\\nINSERT INTO my_table (k, v) VALUES (\'k\', \'v\'); -- \u63d2\u5165\u5355\u6761\\nINSERT INTO my_table (SELECT * FROM same_table); -- \u76f8\u540c\u7ed3\u6784\u8868\u4e4b\u95f4\u7684\u6279\u91cf\u63d2\u5165\\nINSERT INTO my_table (k, v) (SELECT k, v FROM other_table); -- \u4e0d\u540c\u7ed3\u6784\u8868\u4e4b\u95f4\u7684\u6279\u91cf\u63d2\u5165\\n```\\n\\n## \u66f4\u65b0\\n```sql title=\\"\u6279\u91cf\u66f4\u65b0\\"\\nUPDATE my_table SET v = \'new_v\' WHERE k = \'new_k\'; -- \u66f4\u65b0\u4e00\u6b21\\nUPDATE my_table AS o SET v = new_table.v FROM (SELECT * FROM other_table) as new_table WHERE o.k = new_table.k; -- \u6279\u91cf\u66f4\u65b0\\n```\\n\\n## \u5220\u9664\\n```sql title=\\"\u6279\u91cf\u5220\u9664\\"\\nDELETE FROM new_table AS kv USING other_table AS row WHERE kv.k = row.k;\\n```\\n\\n```sql title=\\"\u8054\u7ea7\u5220\u9664 CASCADE\\"\\nDROP TABLE IF EXISTS my_table CASCADE;\\n```"},{"id":"nginx \u914d\u7f6e\u8bf4\u660e","metadata":{"permalink":"/docusaurus/blog/2022/01/12/nginx\u914d\u7f6e\u8bf4\u660e","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2022/01-12-nginx\u914d\u7f6e\u8bf4\u660e/index.md","source":"@site/blog/2022/01-12-nginx\u914d\u7f6e\u8bf4\u660e/index.md","title":"nginx \u914d\u7f6e\u8bf4\u660e","description":"\u8bb0\u5f55\u4e00\u4e0b nginx \u5e38\u89c1\u914d\u7f6e\u8bf4\u660e\u548c\u90e8\u7f72\u6a21\u677f\uff08docker\u3001k8s\uff09\u3002","date":"2022-01-12T00:00:00.000Z","formattedDate":"January 12, 2022","tags":[{"label":"nginx","permalink":"/docusaurus/blog/tags/nginx"}],"readingTime":5.5,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u5e38\u89c1 sql \u6279\u91cf\u64cd\u4f5c","permalink":"/docusaurus/blog/2022/01/20/\u5e38\u7528sql\u64cd\u4f5c"},"nextItem":{"title":"golang\u5185\u5b58\u7ba1\u7406","permalink":"/docusaurus/blog/2021/12/27/golang\u5185\u5b58\u7ba1\u7406"}},"content":"\u8bb0\u5f55\u4e00\u4e0b nginx \u5e38\u89c1\u914d\u7f6e\u8bf4\u660e\u548c\u90e8\u7f72\u6a21\u677f\uff08docker\u3001k8s\uff09\u3002\\n\\n\x3c!--truncate--\x3e\\n\\nnginx \u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684 web \u670d\u52a1\u5668\uff0c\u540c\u65f6\u4e5f\u80fd\u63d0\u4f9b\u8d1f\u8f7d\u5747\u8861\u548c\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u3002\\n\\n## nginx \u5e38\u7528\u6307\u4ee4\\n* -c\uff1a\u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\\n* -t\uff1a\u7528\u4e8e\u6d4b\u8bd5\u914d\u7f6e\u662f\u5426\u53ef\u7528\\n* -s\uff1a\u7528\u4e8e\u53d1\u9001\u4fe1\u53f7\uff0c\u5305\u62ec\uff1astop, quit, reopen, reload\u3002eg\uff1a`nginx -s reload`\\n\\n```shell script title=\\"\u6307\u5b9a\u5e76\u6d4b\u8bd5\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6b63\u786e\\"\\nnginx -t -c ./nginx.conf\\n```\\n\\n## nginx \u6838\u5fc3\u6a21\u5757\\nnginx \u7684\u6838\u5fc3\u6a21\u5757\u4e3b\u8981\u6709\u4e09\u4e2a\uff1a\\n* \u4e3b\u6a21\u5757\uff1a\u7ba1\u7406 nginx \u57fa\u672c\u529f\u80fd\u7684\u6a21\u5757\\n* \u4e8b\u4ef6\u6a21\u5757\uff1a\u7ba1\u7406 nginx \u5904\u7406\u8fde\u63a5\u8bf7\u6c42\u7684\u6a21\u5757\\n* HTTP \u6a21\u5757\uff1a\u7ba1\u7406 nginx \u5904\u7406 http \u8bf7\u6c42\u7684\u6a21\u5757\\n\\n### \u4e3b\u6a21\u5757\\n```text\\nuser  nginx;  # \u7528\u6237\\npid  /var/run/nginx.pid;  # \u8fdb\u7a0bID\\nworker_processes  auto;  # \u5de5\u4f5c\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u6307\u5b9a\u5177\u4f53\u6570\u5b57\\nerror_log  /var/log/nginx/error.log notice;  # \u6307\u5b9a\u65e5\u5fd7\u548c\u9519\u8bef\u7ea7\u522b\uff0c\u5305\u542b\uff1adebug\u3001info\u3001notice\u3001warn\u3001error\u3001crit\\n\\nworker_cpu_affinity  none;  # \u7528\u4e8e\u7ed1\u5b9a worker \u8fdb\u7a0b\u4e0e cpu\\n```\\n\\n### \u4e8b\u4ef6\u6a21\u5757\\n```text\\nevents {\\n    worker_connections  1024;  # \u6bcf\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u6700\u5927\u94fe\u63a5\u6570\u3002\u4e58\u4ee5 worker_processes \u5c31\u662f\u8be5 nginx \u670d\u52a1\u7684\u6700\u5927\u8fde\u63a5\u6570\\n}\\n```\\n\\n### HTTP \u6a21\u5757\\n#### location \u8def\u7531\u5339\u914d\u89c4\u5219\u53ca\u987a\u5e8f  \\n* `=`: \u7cbe\u786e\u5339\u914d\\n* `^~`: \u4f18\u5148\u524d\u7f00\u5339\u914d\\n* `~`: \u6b63\u5219\u5339\u914d\uff0c\u533a\u5206\u5927\u5c0f\u5199\\n* `~*`: \u6b63\u5219\u5339\u914d\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\\n* `!~`: \u6b63\u5219\u5339\u914d\uff0c\u533a\u5206\u5927\u5c0f\u5199\\n* `!~*`: \u6b63\u5219\u5339\u914d\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\\n* `/route`: \u666e\u901a\u524d\u7f00\u5339\u914d\\n* `/`: \u901a\u7528\u5339\u914d\\n\\n> \u7cbe\u786e\u5339\u914d > \u4f18\u5148\u524d\u7f00\u5339\u914d > \u6b63\u5219\u5339\u914d > \u666e\u901a\u524d\u7f00\u5339\u914d > \u901a\u7528\u5339\u914d\\n\\n```text\\nhttp {\\n    server {\\n        # \u4f18\u5148\u5339\u914d\u4f9d\u6b21\u5f80\u4e0b\\n        location = /route { return 200; }\\n        location ^~ /route { return 201; }\\n        location ~ ^/route { return 202; }\\n        location /route { return 203; }\\n        location / { return 204; }\\n    }\\n}\\n```\\n\\n#### upstream \u8d1f\u8f7d\u5747\u8861\u7b56\u7565  \\n* \u8f6e\u8be2\uff1a\u5728\u6bcf\u4e2a\u670d\u52a1\u4e4b\u95f4\u8f6e\u8be2\u8bf7\u6c42\\n* weight\uff1a\u6309\u6307\u5b9a\u6743\u91cd\u6bd4\u4f8b\u5728\u670d\u52a1\u4e4b\u95f4\u8bf7\u6c42\uff0c\u9ed8\u8ba4 weight \u4e3a 1\\n* ip_hash\uff1a\u6309\u7167\u8bf7\u6c42 IP \u8ba1\u7b97 Hash\uff0c\u4fdd\u8bc1\u6bcf\u6b21\u8bf7\u6c42\u90fd\u8bbf\u95ee\u540c\u4e00\u4e2a\u670d\u52a1\\n* fair\uff1a\u6309\u7167\u540e\u7aef\u7684\u54cd\u5e94\u65f6\u95f4\u6765\u5206\u914d\uff08\u4e09\u65b9\u63d2\u4ef6\u5b9e\u73b0\uff09\\n```text\\nhttp {\\n    # \u8d1f\u8f7d\u5747\u8861\\n    upstream serverName {\\n        # ip_hash;  # \u6307\u5b9a ip_hash \u8d1f\u8f7d\u5747\u8861\u7b56\u7565\\n        server 10.251.10.10:8080 weight=2;  # \u6307\u5b9a\u6743\u91cd\u6bd4\u4f8b\\n        server 10.251.10.10:8081 down;  # down \u8868\u793a\u670d\u52a1\u4e0b\u7ebf\\n        server 10.251.10.10:8082;\\n        server 10.251.10.10:8083 backup;  # backup \u8868\u793a\u5907\u7528\uff0c\u5f53\u5176\u4ed6\u673a\u5668 down \u6216\u8005\u538b\u529b\u6bd4\u8f83\u5927\u65f6\uff0c\u6d41\u91cf\u4f1a\u8d70\u5230\u6b64\u670d\u52a1\\n        # fair;  # \u6307\u5b9a fair \u8d1f\u8f7d\u5747\u8861\u7b56\u7565\\n    }\\n\\n    server {\\n        listen  80;  # \u76d1\u542c\u7aef\u53e3\\n        server_name  _;  # \u4e0d\u542f\u7528\u57df\u540d\u68c0\u6d4b\\n\\n        location / {\\n            proxy_pass  http://serverName;  # \u6307\u5b9a upstream \u540d\u5b57\u5373\u53ef\\n        }\\n    }\\n}\\n```\\n\\n#### http \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u53c2\u6570\u914d\u7f6e\\n```text\\nhttp {\\n    server {\\n        client_body_timeout  60s;  # \u5b9a\u4e49\u8bfb\u53d6\u5ba2\u6237\u7aef\u8bf7\u6c42\u4f53\u7684\u8d85\u65f6\\n        client_body_buffer_size  8k;  # \u8bbe\u7f6e\u8bfb\u53d6\u5ba2\u6237\u7aef\u8bf7\u6c42\u4f53\u7684\u7f13\u51b2\u533a\u5927\u5c0f\uff08\u8d85\u8fc7\u5219\u5b58\u50a8\u5230\u4e34\u65f6\u6587\u4ef6\u4e2d\uff09\\n        client_header_timeout  60s;  # \u5b9a\u4e49\u8bfb\u53d6\u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u7684\u8d85\u65f6\\n        client_header_buffer_size  1k;  # \u8bbe\u7f6e\u8bfb\u53d6\u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u7684\u7f13\u51b2\u533a\u5927\u5c0f\\n        client_max_body_size  0;  # \u6570\u636e\u6700\u5927\u4f20\u8f93\u9650\u5236\\n        proxy_request_buffering  off;  # \u9ed8\u8ba4\u5f00\u542f\uff0c\u4f5c\u7528\u662f\u7f13\u51b2\u8bf7\u6c42\u3002\u5173\u95ed\u540e\u8bf7\u6c42\u4f1a\u7acb\u5373\u8f6c\u53d1\u5230\u540e\u7aef\u670d\u52a1\\n        proxy_buffering  off;  # \u5bf9\u4ee3\u7406\u670d\u52a1\u5668\u7684\u54cd\u5e94\u5185\u5bb9\u7f13\u51b2\\n        proxy_buffer_size  4k;  # \u4ece\u4ee3\u7406\u670d\u52a1\u5668\u83b7\u53d6\u90e8\u5206\u54cd\u5e94\u540e\u8fdb\u884c\u7f13\u51b2\\n        proxy_buffers  8 4k;  # \u4ece\u88ab\u4ee3\u7406\u7684\u540e\u7aef\u670d\u52a1\u5668\u53d6\u5f97\u7684\u54cd\u5e94\u5185\u5bb9\uff0c\u4f1a\u7f13\u51b2\u5230\u8fd9\u91cc\\n        proxy_connect_timeout  60s;  # \u4e0e\u540e\u7aef\u670d\u52a1\u5efa\u7acb\u8fde\u63a5\u7684\u8d85\u65f6\u65f6\u95f4\\n        proxy_send_timeout  60s;  # \u5411\u540e\u7aef\u4f20\u8f93\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4\\n        proxy_read_timeout  60s;  # \u4ece\u540e\u7aef\u8bfb\u53d6\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\\n        proxy_set_header  Host $proxy_host;\\n\\n        proxy_set_header  Host $proxy_host;\\n\\n        location / {\\n            proxy_set_header  Auth \\"auth-key\\";\\n            proxy_pass  http://serverName;\\n        }\\n    }\\n}\\n```\\n\\n```text\\nhttp {\\n    server {\\n        location /index {\\n            index  index.html;  # \u9996\u9875\uff0c\u5373\u672a\u6307\u5b9a\u540e\u7eed\u8def\u5f84\u65f6\uff0c\u5339\u914d\u9996\u9875\\n        }\\n        location /try_files {\\n            root  /static\\n            try_files  $uri index.html;  # \u4f9d\u6b21\u5c1d\u8bd5\u3002/try_files/file -> /try_files/static/file\\n        }\\n        location /alias/ {\\n            alias  /a/new/route/;  # \u8bf7\u6c42\u8def\u5f84 /alias/files \u7b49\u6548\u4e8e /a/new/route/files\uff0c\u4f1a\u66ff\u6362\u6389\u5339\u914d\u8def\u7531\\n        }\\n        location /root {\\n            root  /a/new/route/;  # \u8bf7\u6c42\u8def\u5f84 /root/files \u7b49\u6548\u4e8e /a/new/route/root/files\uff0c\u4f1a\u4fdd\u7559\u5339\u914d\u8def\u7531\\n            # proxy_pass  http://serverName/;  # /root/index.html -> http://serverName/index.html\\n            # proxy_pass  http://serverName;  # /root/index.html -> http://serverName/root/index.html\\n        }\\n        location /rewrite {\\n            rewrite  ^/rewrite/permanent/(.*) http://serverName/$1 permanent;  # 301 \u6c38\u4e45\u91cd\u5b9a\u5411\\n            rewrite  ^/rewrite/redirect/(.*) http://serverName/$1 redirect;  # 302 \u4e34\u65f6\u91cd\u5b9a\u5411\\n            rewrite  ^/rewrite/last/(.*) http://serverName/$1 last;  # \u5b9e\u73b0\u91cd\u5b9a\u5411\\n            rewrite  ^/rewrite/break/(.*) http://serverName/$1 break;  # \u5b9e\u73b0\u91cd\u5b9a\u5411\\n        }\\n    }\\n}\\n```\\n\\n#### mirror\\n```text\\nhttp {\\n    server {\\n        location /mirror {\\n            mirror  /internal;  # mirror \u5b9e\u73b0\u6d41\u91cf\u62f7\u8d1d\\n            proxy_pass  http://serverName;\\n        }\\n\\n        location /internal {\\n            internal;  # \u8868\u793a\u4ec5\u88ab\u5185\u90e8\u8bf7\u6c42\u53d1\u73b0\\n            proxy_pass  http://serverName;  # \u6307\u5b9a upstream \u540d\u5b57\u5373\u53ef\\n        }\\n    }\\n}\\n```\\n\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"golang\u5185\u5b58\u7ba1\u7406","metadata":{"permalink":"/docusaurus/blog/2021/12/27/golang\u5185\u5b58\u7ba1\u7406","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-27-golang\u5185\u5b58\u7ba1\u7406/index.md","source":"@site/blog/2021/12-27-golang\u5185\u5b58\u7ba1\u7406/index.md","title":"golang\u5185\u5b58\u7ba1\u7406","description":"golang \u7684 GC \u4e00\u76f4\u662f\u5927\u5bb6\u8bdf\u75c5\u6700\u591a\u7684\u8bdd\u9898\u4e4b\u4e00\u3002\u4e0b\u9762\u662f golang \u4e0d\u540c\u7248\u672c\u4e4b\u4e2d\u6709\u4e00\u4e9b\u91cd\u8981\u6539\u8fdb\uff1a","date":"2021-12-27T00:00:00.000Z","formattedDate":"December 27, 2021","tags":[{"label":"\u672a\u5b9a\u4e49","permalink":"/docusaurus/blog/tags/\u672a\u5b9a\u4e49"}],"readingTime":2.6,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"nginx \u914d\u7f6e\u8bf4\u660e","permalink":"/docusaurus/blog/2022/01/12/nginx\u914d\u7f6e\u8bf4\u660e"},"nextItem":{"title":"python\u5185\u5b58\u7ba1\u7406","permalink":"/docusaurus/blog/2021/12/26/python\u5185\u5b58\u7ba1\u7406"}},"content":"golang \u7684 GC \u4e00\u76f4\u662f\u5927\u5bb6\u8bdf\u75c5\u6700\u591a\u7684\u8bdd\u9898\u4e4b\u4e00\u3002\u4e0b\u9762\u662f golang \u4e0d\u540c\u7248\u672c\u4e4b\u4e2d\u6709\u4e00\u4e9b\u91cd\u8981\u6539\u8fdb\uff1a  \\n* v1.1 STW\\n* v1.3 Mark STW\uff0cSweep \u5e76\u884c\\n* v1.5 \u4e09\u8272\u6807\u8bb0\u6cd5\\n* v1.8 hybrid write barrier\\n\\n\x3c!--truncate--\x3e\\n\\n## \u4e09\u8272\u6807\u8bb0\u6cd5\\n\u4e09\u8272\u6807\u8bb0\u6cd5\uff0c\u5c31\u662f\u5c06\u5bf9\u8c61\u6309\u72b6\u6001\u5206\u4e3a\u4e09\u7c7b\uff0c\u5e76\u5206\u4e3a\u8d4b\u4e88\u4e09\u79cd\u989c\u8272\uff1a   \\n1\u3001**\u767d\u8272\u5bf9\u8c61**\uff08\u53ef\u80fd\u6b7b\u4ea1\uff09\uff1a\u672a\u88ab\u56de\u6536\u5668\u8bbf\u95ee\u5230\u7684\u5bf9\u8c61\u3002\u6240\u6709\u5bf9\u8c61\u5728\u8d77\u59cb\u9636\u6bb5\u5747\u4e3a\u767d\u8272\uff0c\u5728\u56de\u6536\u7ed3\u675f\u540e\u767d\u8272\u5bf9\u8c61\u88ab\u56de\u6536\u3002    \\n2\u3001**\u7070\u8272\u5bf9\u8c61**\uff08\u4e2d\u95f4\u6001\uff09\uff1a\u5df2\u88ab\u56de\u6536\u5668\u8bbf\u95ee\u5230\u7684\u5bf9\u8c61\u3002\u4f46\u53ef\u80fd\u5b58\u5728\u6307\u5411\u5176\u4ed6\u5bf9\u8c61\u7684\u5f15\u7528\u3002    \\n3\u3001**\u9ed1\u8272\u5bf9\u8c61**\uff08\u786e\u5b9a\u5b58\u6d3b\uff09\uff1a\u5df2\u88ab\u56de\u6536\u5668\u8bbf\u95ee\u5230\u7684\u5bf9\u8c61\uff0c\u4e14\u4e0d\u5b58\u5728\u6307\u5411\u5176\u4ed6\u5bf9\u8c61\u7684\u5f15\u7528\u3002    \\n\\n\u9664\u6b64\u4e4b\u5916\uff0c\u5728 v1.8 \u7248\u672c\u91cd\u8fd8\u5f15\u5165**\u5199\u5c4f\u969c**\u7684\u6982\u5ff5\uff1a\u5728 GC \u6267\u884c\u671f\u95f4\uff0c\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u4f1a\u88ab\u9ed8\u8ba4\u8d4b\u4e88\u7070\u8272\u5bf9\u8c61\uff0c\u4ee5\u4fbf\u5783\u573e\u56de\u6536\u7684\u6b63\u5e38\u6267\u884c\u3002\\n\\n#### \u6807\u8bb0\u8d77\u59cb\u9636\u6bb5\\n1\u3001STW  \\n2\u3001\u786e\u5b9a GC ROOT\uff0c\u5e76\u5c06\u5176\u7f6e\u4e3a\u7070\u8272  \\n3\u3001\u5f15\u5165\u5199\u5c4f\u969c  \\n\\n#### \u6807\u8bb0\u9636\u6bb5\\n1\u3001\u6807\u8bb0\u4e0e\u4e1a\u52a1\u5e76\u884c\\n\\n#### \u6807\u8bb0\u7ec8\u6b62\u9636\u6bb5\\n1\u3001STW  \\n2\u3001\u79fb\u9664\u5199\u5c4f\u969c\\n\\n#### \u6e05\u9664\u9636\u6bb5\\n1\u3001\u56de\u6536\u767d\u8272\u5bf9\u8c61\\n\\n\u4e09\u8272\u6807\u8bb0\u6cd5\uff0c\u5927\u5927\u51cf\u5c11\u4e86 GC \u7684 STW \u65f6\u95f4\uff0c\u4f7f\u5f97\u6807\u8bb0\u9636\u6bb5\u4e0e\u4e1a\u52a1\u5e76\u884c\u3002     \\n\u5f15\u5165\u5199\u5c4f\u969c\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u5728 GC \u671f\u95f4\u4f1a\u6709\u989d\u5916\u7684\u6027\u80fd\u6d88\u8017\u3002  \\n\\n:::note \u9003\u9038\u5206\u6790\\n\u7528\u6765\u5728\u7f16\u8bd1\u9636\u6bb5\u786e\u8ba4\u5bf9\u8c61\u7684\u5185\u5b58\u662f\u5206\u914d\u5230\u5806\u4e2d\u8fd8\u662f\u5206\u914d\u5230\u6808\u4e2d\u3002\\n:::\\n\\n\\n## \u8c03\u4f18\uff1a\u907f\u514d\u5728GC\u671f\u95f4\u5f15\u5165\u8017\u65f6\u64cd\u4f5c\\n\u80cc\u666f\uff1a\u5e0c\u671b\u6536\u96c6\u7ebf\u4e0a GC \u65e5\u5fd7\uff0c\u4ee5\u4fbf\u7528\u4e8e\u540e\u7eed\u5206\u6790\u3002  \\n\u5b9e\u73b0\uff1a\u5f00\u542f GODEBUG=gctrace=1\uff0c\u5e76\u5c06\u8f93\u51fa\u6d41\u6307\u5411\u67d0\u6587\u4ef6\u3002  \\n\u5bfc\u81f4\uff1a\u76d1\u63a7\u663e\u793a\uff0c\u7ebf\u4e0a\u4e1a\u52a1\u5fc5\u5b9a\u95f4\u9694\u6027\u6296\u52a8\u3002  \\n\u539f\u56e0\uff1aGC \u65e5\u5fd7\u8f93\u51fa\u5c5e\u4e8e STW \u671f\u95f4\uff0c\u539f\u672c STW \u57fa\u4e8e\u5185\u5b58\u5b8c\u6210\uff0c\u4f46\u73b0\u5728\u5f3a\u884c\u5f15\u5165\u78c1\u76d8 IO\uff0c\u5bfc\u81f4\u5806\u7a0b\u5e8f\u9020\u6210\u6027\u80fd\u5f71\u54cd\u3002   \\n\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"python\u5185\u5b58\u7ba1\u7406","metadata":{"permalink":"/docusaurus/blog/2021/12/26/python\u5185\u5b58\u7ba1\u7406","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-26-python\u5185\u5b58\u7ba1\u7406/index.md","source":"@site/blog/2021/12-26-python\u5185\u5b58\u7ba1\u7406/index.md","title":"python\u5185\u5b58\u7ba1\u7406","description":"python \u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u9700\u8981\u50cf C/C++ \u90a3\u6837\u9700\u8981\u624b\u52a8\u7533\u8bf7\u5e76\u56de\u6536\u5185\u5b58\u3002","date":"2021-12-26T00:00:00.000Z","formattedDate":"December 26, 2021","tags":[{"label":"python","permalink":"/docusaurus/blog/tags/python"}],"readingTime":2.945,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"golang\u5185\u5b58\u7ba1\u7406","permalink":"/docusaurus/blog/2021/12/27/golang\u5185\u5b58\u7ba1\u7406"},"nextItem":{"title":"RAID \u72ec\u7acb\u78c1\u76d8\u5197\u4f59\u9635\u5217","permalink":"/docusaurus/blog/2021/12/24/raid\u521d\u8bc6"}},"content":"python \u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u9700\u8981\u50cf C/C++ \u90a3\u6837\u9700\u8981\u624b\u52a8\u7533\u8bf7\u5e76\u56de\u6536\u5185\u5b58\u3002  \\n\u8fd9\u5f97\u76ca\u4e8e\u9ad8\u7ea7\u8bed\u8a00\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\u3002\u6240\u6709\u7684 python \u5bf9\u8c61\u548c\u6570\u636e\u7ed3\u6784\u90fd\u5b58\u50a8\u5728\u79c1\u6709\u5806\u4e2d\uff0c\u7531\u5185\u5b58\u7ba1\u7406\u5668\u8fdb\u884c\u7ba1\u7406\u3002   \\n\\n\x3c!--truncate--\x3e\\n\\n## \u5783\u573e\u56de\u6536\\npython \u7684\u5783\u573e\u56de\u6536\u4e3b\u8981\u6709\u4e09\u79cd\u673a\u5236\uff1a**\u5f15\u7528\u8ba1\u6570**\u3001**\u6807\u8bb0\u6e05\u9664**\u3001**\u5206\u4ee3\u56de\u6536**   \\n\\n\u9996\u5148\u901a\u8fc7\\"\u5f15\u7528\u8ba1\u6570\\"\uff0c\u6765\u4fdd\u6301\u8ffd\u8e2a\u5185\u5b58\u4e2d\u7684\u5bf9\u8c61\uff0c\u4ee5\u4fbf\u521b\u5efa\u548c\u56de\u6536\u3002    \\n\u7136\u540e\u901a\u8fc7\\"\u6807\u8bb0-\u6e05\u9664\\"\u89e3\u51b3\u5bf9\u8c61\u4e4b\u95f4\u53ef\u80fd\u4ea7\u751f\u7684\u5faa\u73af\u5f15\u7528\u95ee\u9898\u3002     \\n\u6700\u540e\u901a\u8fc7\\"\u5206\u4ee3\u56de\u6536\\"\uff0c\u4ee5\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u65b9\u6cd5\u63d0\u9ad8\u5783\u573e\u56de\u6536\u6548\u7387\u3002   \\n\\n#### \u5f15\u7528\u8ba1\u6570\\n\u9996\u5148\u662f \u5f15\u7528\u8ba1\u6570\uff0c\u8fd9\u662f\u6700\u7b80\u5355\u7684\u4e00\u79cd\u56de\u6536\u673a\u5236\uff1a  \\n\u4e3a\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u7ef4\u62a4\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\uff0c\u6709\u53d8\u91cf\u6216\u8005\u5bb9\u5668\u7ed3\u6784\u5f15\u7528\u65f6\uff0c\u8be5\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u52a0\u4e00\uff0c\u53cd\u4e4b\u51cf\u4e00\u3002  \\n\u5f53\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u503c\u4e3a 0 \u65f6\uff0c\u5219\u53ef\u4ee5\u8fdb\u884c\u56de\u6536\u3002\\n\\n\u4f46\u662f\u5f15\u7528\u8ba1\u6570\u6709\u4e00\u4e2a\u81f4\u547d\u7684\u7f3a\u9677\uff0c\u5c31\u662f\u5faa\u73af\u5f15\u7528\uff0c\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\u5bf9\u8c61\u95f4\u7684\u5f15\u7528\u8ba1\u6570\u65e0\u6cd5\u6e05\u96f6\uff0c\u4f1a\u9020\u6210\u8d44\u6e90\u6cc4\u9732\u3002\\n\\n\\n#### \u6807\u8bb0\u6e05\u9664\\n\u6807\u8bb0\u6e05\u9664\u7b97\u6cd5\u5206\u4e3a\u6807\u8bb0\u9636\u6bb5\u548c\u6e05\u9664\u9636\u6bb5\uff1a    \\n\u6807\u8bb0\u9636\u6bb5\uff1a\u4ece\u6839\u5bf9\u8c61\u5f00\u59cb\u904d\u5386\uff0c\u5c06\u53ef\u4ee5\u8bbf\u95ee\u5230\u7684\u5bf9\u8c61\u6807\u8bb0\u4e3a\u53ef\u8fbe\u5bf9\u8c61\u3002   \\n\u6e05\u9664\u9636\u6bb5\uff1a\u5c06\u4e0d\u53ef\u8fbe\u5bf9\u8c61\u6e05\u9664\u3002\\n\\n\u867d\u7136 \u6807\u8bb0-\u6e05\u9664 \u53ef\u4ee5\u5f88\u597d\u7684\u89e3\u51b3\u5f15\u7528\u8ba1\u6570\u4e2d\u5faa\u73af\u4f9d\u8d56\u9020\u6210\u7684\u8d44\u6e90\u6cc4\u9732\u95ee\u9898\uff0c\u4f46\u662f\u6807\u8bb0\u6e05\u9664\u5b83\u672c\u8eab\u662f\u4e00\u4e2a\u5f88\u7b28\u91cd\u7684\u884c\u4e3a\uff0c\\n\u9700\u8981STW\uff08stop the world\uff09\u4e14\u904d\u5386\u5168\u90e8\u5bf9\u8c61\u3002\\n\\n\\n#### \u5206\u4ee3\u56de\u6536\\n\u5206\u4ee3\u56de\u6536\u57fa\u4e8e\u4e00\u4e2a\u7edf\u8ba1\u7406\u8bba\uff0c\u5373\u5b58\u6d3b\u8d8a\u4e45\u7684\u5bf9\u8c61\uff0c\u88ab\u6e05\u9664\u7684\u53ef\u80fd\u6027\u5c31\u8d8a\u5c0f\u3002\u6240\u4ee5\u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u5f15\u5165\u4e86\u5206\u4ee3\u56de\u6536\u7b97\u6cd5\u3002   \\n\u5c06\u5bf9\u8c61\u5206\u4e3a\u4e09\u4ee3\uff1a0\u30011\u30012\u4ee3\uff0c\u6d3b\u8fc7\u4e00\u6b21 gc\uff0c\u5219\u5206\u914d\u5230\u4e0b\u4e00\u4ee3\u3002\\n\\n\u9ed8\u8ba4\u9608\u503c\u4e3a\uff1a700\u300110\u300110  \\n700\uff1a\u8868\u793a\u65b0\u521b\u5efa\u5bf9\u8c61\u51cf\u53bb\u4ece\u65b0\u5bf9\u8c61\u4e2d\u56de\u6536\u7684\u5bf9\u8c61\u7684\u503c\uff0c\u5927\u4e8e 700 \u5219\u8fdb\u884c\u4e00\u6b21 0 \u4ee3\u56de\u6536\u3002  \\n10\uff1a10 \u6b21 0 \u4ee3\u56de\u6536\u89e6\u53d1\u4e00\u6b21 1 \u4ee3\u56de\u6536\u3002  \\n10\uff1a10 \u6b21 1 \u4ee3\u56de\u6536\u89e6\u53d1\u4e00\u6b21 2 \u4ee3\u56de\u6536\u3002\\n\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"RAID \u72ec\u7acb\u78c1\u76d8\u5197\u4f59\u9635\u5217","metadata":{"permalink":"/docusaurus/blog/2021/12/24/raid\u521d\u8bc6","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-24-raid\u521d\u8bc6/index.md","source":"@site/blog/2021/12-24-raid\u521d\u8bc6/index.md","title":"RAID \u72ec\u7acb\u78c1\u76d8\u5197\u4f59\u9635\u5217","description":"\u72ec\u7acb\u78c1\u76d8\u5197\u4f59\u9635\u5217 RAID\uff08redundant array of independent disks\uff09\u6280\u672f","date":"2021-12-24T00:00:00.000Z","formattedDate":"December 24, 2021","tags":[{"label":"\u8ba1\u7b97\u673a\u57fa\u7840","permalink":"/docusaurus/blog/tags/\u8ba1\u7b97\u673a\u57fa\u7840"}],"readingTime":3.075,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"python\u5185\u5b58\u7ba1\u7406","permalink":"/docusaurus/blog/2021/12/26/python\u5185\u5b58\u7ba1\u7406"},"nextItem":{"title":"\u521d\u6b65\u4e86\u89e3 k8s \u8d44\u6e90\u914d\u989d","permalink":"/docusaurus/blog/2021/12/23/k8s\u8d44\u6e90\u914d\u989d"}},"content":"\u72ec\u7acb\u78c1\u76d8\u5197\u4f59\u9635\u5217 RAID\uff08redundant array of independent disks\uff09\u6280\u672f   \\n\u662f\u5c06\u591a\u5757\u78c1\u76d8\u901a\u8fc7\u67d0\u79cd\u534f\u8bae\u7ba1\u7406\u8d77\u6765\uff0c\u4f7f\u5176\u5171\u540c\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u63d0\u5347\u6027\u80fd\u3002\\n\\n\u5e38\u89c1 RAID \u6709\u4e94\u79cd\uff1aRAID 0\u3001RAID 1\u3001RAID 10\u3001RAID 5\u3001RAID 6\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## RAID 0\\nRAID 0 \u662f\u5c06\u4e00\u4e2a\u6587\u4ef6\u7684\u6570\u636e\u5206\u6210 N \u7247\uff0c\u540c\u65f6\u5411 N \u4e2a\u78c1\u76d8\u5199\u5165\uff0c\u8fd9\u6837\u5355\u4e2a\u6587\u4ef6\u5c31\u53ef\u4ee5\u5b58\u50a8\u5728 N \u4e2a\u78c1\u76d8\u4e0a\u3002   \\n\u7406\u8bba\u4e0a\u901a\u8fc7 RAID 0\uff0c\u5355\u6587\u4ef6\u5bb9\u91cf\u53ef\u4ee5\u63d0\u5347 N \u500d\uff0c\u8bfb\u5199\u901f\u5ea6\u4e5f\u53ef\u4ee5\u63d0\u5347 N \u500d\u3002    \\n\u4f46\u662f RAID 0 \u53ef\u80fd\u63d0\u5347\u6587\u4ef6\u635f\u574f\u7684\u98ce\u9669\uff0c\u56e0\u4e3a\u4efb\u4f55\u4e00\u4e2a\u78c1\u76d8\u635f\u574f\uff0c\u90fd\u5c06\u5bfc\u81f4\u6570\u636e\u4e0d\u5b8c\u6574\u3002    \\n![](./raid-0.png)\\n\\n## RAID 1\\nRAID 1 \u662f\u540c\u65f6\u5f80\u4e24\u5757\u78c1\u76d8\u4e0a\u5199\u6570\u636e\uff0c\u5176\u4e2d\u4e00\u5757\u7528\u6237\u6570\u636e\u5907\u4efd\u3002\u8fd9\u6837\u53ea\u8981\u4e0d\u662f\u78c1\u76d8\u5168\u90e8\u635f\u574f\uff0c\u90a3\u4e48\u6587\u4ef6\u6570\u636e\u5c31\u4e0d\u4f1a\u4e22\u5931\uff0c\u6587\u4ef6\u7684\u53ef\u7528\u6027\u5927\u5927\u63d0\u5347\u3002   \\n\u4f46\u662f\u53ef\u7528\u7684\u5b58\u50a8\u7a7a\u95f4\u5c31\u964d\u4f4e\u4e00\u534a\u4e86\u3002\u800c\u4e14\u7531\u4e8e\u591a\u5199\u4e86\u4e00\u4efd\u6570\u636e\uff0c\u5199\u5165\u6027\u80fd\u4e5f\u53d8\u76f8\u7684\u964d\u4f4e\u4e86\u3002      \\n![](./raid-1.png)\\n\\n## RAID 10\\nRAID 10 \u662f\u7ed3\u5408\u4e86 RAID 1 \u548c RAID 0\uff0c\u5c06\u591a\u5757\u786c\u76d8\u8fdb\u884c\u4e24\u4e24\u5206\u7ec4\u3002\u6587\u4ef6\u6570\u636e\u88ab\u5206\u6210\u4e86 N \u4efd\uff0c\u6bcf\u4e2a\u7ec4\u5199\u5165\u4e00\u4efd\uff0c\u5e76\u4e14\u6bcf\u4e2a\u5206\u7ec4\u7684\u6570\u636e\u90fd\u6709\u4e00\u4efd\u5907\u4efd\u3002    \\n\u8fd9\u6837\u4e0d\u4ec5\u63d0\u5347\u4e86\u6587\u4ef6\u5b58\u50a8\u7684\u5bb9\u91cf\u548c\u6027\u80fd\uff0c\u4e5f\u63d0\u9ad8\u4e86\u6587\u4ef6\u7684\u53ef\u7528\u6027\u3002     \\n\u4f46\u4e0d\u53ef\u907f\u514d\u7684\u548c RAID 1 \u4e00\u6837\uff0c\u78c1\u76d8\u6574\u4f53\u5b58\u50a8\u5229\u7528\u53ea\u6709 50% \u4e86\u3002      \\n![](./raid-10.png)\\n\\n## RAID 5\\nRAID 5 \u9488\u5bf9 RAID 1 \u548c RAID 10 \u4e2d\u78c1\u76d8\u6d6a\u8d39\u7684\u60c5\u51b5\u8fdb\u884c\u4e86\u4f18\u5316\u3002   \\n\u5c06\u6570\u636e\u5206\u6210 N - 1 \u4efd\uff0c\u518d\u5229\u7528\u8fd9 N - 1 \u4efd\u6570\u636e\u8fdb\u884c\u4f4d\u8fd0\u7b97\uff0c\u8ba1\u7b97\u4e00\u7247\u6821\u9a8c\u6570\u636e\uff0c\u7136\u540e\u5c06\u8fd9 N \u7247\u6570\u636e\u5199\u5165 N \u4e2a\u78c1\u76d8\u4e2d\u3002   \\n\u8fd9\u6837\u4efb\u4f55\u4e00\u4e2a\u78c1\u76d8\u635f\u574f\uff0c\u90fd\u53ef\u4ee5\u5229\u7528\u6821\u9a8c\u6570\u636e\u8fdb\u884c\u6062\u590d\uff0c\u78c1\u76d8\u5229\u7528\u7387\u4e5f\u63d0\u9ad8\u5230 (N-1)/N  \\n\\n\u867d\u7136 RAID 5 \u53ef\u4ee5\u89e3\u51b3\u4e00\u5757\u78c1\u76d8\u635f\u574f\u540e\u4fee\u590d\u7684\u573a\u666f\uff0c\u4f46\u662f\u4e24\u5757\u78c1\u76d8\u635f\u574f\uff0c\u5c31\u4ecd\u7136\u4f1a\u51fa\u73b0\u6570\u636e\u4e22\u5931\u7684\u60c5\u51b5\u3002   \\n\\n\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\uff0c\u4f7f\u7528\u6700\u591a\u7684\u8fd8\u662f RAID 5.\\n\\n## RAID 6\\n\u9488\u5bf9 RAID 5 \u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u4e24\u5757\u78c1\u76d8\u635f\u574f\u7684\u573a\u666f\uff0c\u5f15\u5165\u4e86\u4e24\u79cd\u4f4d\u8fd0\u7b97\u8ba1\u7b97\u548c\u5b58\u50a8\u6570\u636e\uff0c\u8fd9\u6837\u5373\u4f7f\u4e24\u5757\u78c1\u76d8\u635f\u574f\uff0c\u4ecd\u7136\u662f\u53ef\u4ee5\u5f97\u5230\u4fee\u590d\u7684\u3002\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"\u521d\u6b65\u4e86\u89e3 k8s \u8d44\u6e90\u914d\u989d","metadata":{"permalink":"/docusaurus/blog/2021/12/23/k8s\u8d44\u6e90\u914d\u989d","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-23-k8s\u8d44\u6e90\u914d\u989d/index.md","source":"@site/blog/2021/12-23-k8s\u8d44\u6e90\u914d\u989d/index.md","title":"\u521d\u6b65\u4e86\u89e3 k8s \u8d44\u6e90\u914d\u989d","description":"\x3c!--","date":"2021-12-23T00:00:00.000Z","formattedDate":"December 23, 2021","tags":[{"label":"k8s","permalink":"/docusaurus/blog/tags/k-8-s"}],"readingTime":3.64,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"RAID \u72ec\u7acb\u78c1\u76d8\u5197\u4f59\u9635\u5217","permalink":"/docusaurus/blog/2021/12/24/raid\u521d\u8bc6"},"nextItem":{"title":"\u8bb0\u4e00\u6b21 golang cmd \u6a21\u5757\u5bfc\u81f4\u7684\u8fdb\u7a0b\u6cc4\u6f0f","permalink":"/docusaurus/blog/2021/12/22/golang-cmd\u6a21\u5757\u5bfc\u81f4\u7684\u8fdb\u7a0b\u6cc4\u6f0f"}},"content":"\x3c!--\\nhttps://www.freesion.com/article/3935476617/\\nhttps://kubernetes.io/zh/docs/concepts/policy/resource-quotas/\\nhttps://kubernetes.io/zh/docs/tasks/administer-cluster/manage-resources/quota-memory-cpu-namespace/\\n--\x3e\\n\\n\u7528\u4e00\u53f0\u670d\u52a1\u5668\u540c\u65f6\u8dd1\u591a\u4e2a\u4efb\u52a1\u65f6\uff0c\u6700\u5e38\u53d1\u751f\u7684\u4e8b\u6545\u5c31\u662f\u8d44\u6e90\u62a2\u5360\u95ee\u9898\u3002\u6bd4\u5982\u7aef\u53e3\u3001cpu\u3001\u5185\u5b58\u3001\u5b58\u50a8\u7b49\u90fd\u53ef\u80fd\u4f1a\u53d1\u751f\u51b2\u7a81\u3002   \\n\u800c k8s \u4f5c\u4e3a\u5bb9\u5668\u7f16\u6392\u5de5\u5177\uff0c\u5219\u63d0\u4f9b\u4e86\u8d44\u6e90\u914d\u989d\u6765\u907f\u514d\u8fd9\u7c7b\u95ee\u9898\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u8d44\u6e90\u914d\u989d ResourceQuota\\n\u8d44\u6e90\u914d\u989d\u7528\u4e8e\u58f0\u660e\u547d\u540d\u7a7a\u95f4\u4e2d\u6240\u6709 pod \u7684\u6700\u7ec8\u8d44\u6e90\u60c5\u51b5\uff0c\u4e00\u65e6\u547d\u540d\u7a7a\u95f4\u4e2d\u542f\u7528\u4e86 ResourceQuota\uff0c\u5219\u90e8\u7f72 pod \u65f6\u5fc5\u987b\u8bbe\u5b9a\u8bf7\u6c42\u503c\uff08request\uff09\u548c\u7ea6\u675f\u503c\uff08limit\uff09\uff0c\u5426\u5219\u914d\u989d\u7cfb\u7edf\u5c06\u62d2\u7edd pod \u7684\u521b\u5efa\u3002  \\n\u8d44\u6e90\u914d\u989d\u5728 k8s \u96c6\u7fa4\u4e2d\u9ed8\u8ba4\u662f\u652f\u6301\u7684\uff0c\u5f53\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\u4e2d\u5b58\u5728\u4e00\u4e2a ResourceQuota \u5bf9\u8c61\u65f6\uff0c\u8be5\u547d\u540d\u7a7a\u95f4\u7684\u8d44\u6e90\u914d\u989d\u5c31\u662f\u5f00\u542f\u7684\u3002   \\n```yaml title=\\"\u8d44\u6e90\u914d\u989d\uff1aResourceQuota.yaml\\"\\napiVersion: v1\\nkind: ResourceQuota\\nmetadata:\\n  name: demo\\nspec:\\n  hard:\\n    requests.cpu: \\"1\\"\\n    requests.memory: 1Gi\\n    limits.cpu: \\"2\\"\\n    limits.memory: 2Gi\\n```\\n\u6b64\u914d\u7f6e\u8868\u793a\uff1a \\n* \u6bcf\u4e2a\u5bb9\u5668\u5fc5\u987b\u6709 memory\u3001cpu \u7684\u8bf7\u6c42\u548c\u9650\u5236\u3002\\n* \u6240\u6709\u5bb9\u5668\u7684 memory \u8bf7\u6c42\u603b\u548c\u4e0d\u80fd\u8d85\u8fc7 1 GiB\u3002\\n* \u6240\u6709\u5bb9\u5668\u7684 memory \u9650\u5236\u603b\u548c\u4e0d\u80fd\u8d85\u8fc7 2 GiB\u3002\\n* \u6240\u6709\u5bb9\u5668\u7684 cpu \u8bf7\u6c42\u603b\u548c\u4e0d\u80fd\u8d85\u8fc7 1 cpu\u3002\\n* \u6240\u6709\u5bb9\u5668\u7684 cpu \u9650\u5236\u603b\u548c\u4e0d\u80fd\u8d85\u8fc7 2 cpu\u3002\\n\\n```yaml title=\\"\u90e8\u7f72\u793a\u4f8b\uff1apod.yaml\\"\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: demo\\nspec:\\n  containers:\\n  - name: nginx\\n    image: nginx\\n    resources:\\n      limits:\\n        cpu: \\"200m\\"\\n        memory: \\"400Mi\\"\\n      requests:\\n        cpu: \\"100m\\"\\n        memory: \\"200Mi\\"\\n```\\n\\n## requests/limits\\nrequests \u8868\u793a\u8bf7\u6c42\u503c\uff0c\u800c limits \u5219\u8868\u793a\u7ea6\u675f\u503c\u3002    \\n\u4e00\u822c\u60c5\u51b5\u4e0b requests \u662f\u5c0f\u4e8e limits \u7684\uff0c\u8fd9\u91cc\u6d89\u53ca\u5230\u670d\u52a1\u8d28\u91cf\u7b49\u7ea7\u6982\u5ff5\uff1a\\n\\n|\u670d\u52a1\u8d28\u91cf\u7b49\u7ea7|\u8bf4\u660e|\\n|---|---|\\n|Guaranteed\uff08\u5b8c\u5168\u53ef\u9760\u7684\uff09| pod \u4e2d\u5168\u90e8\u5bb9\u5668\u914d\u7f6e\u4e86\u8d44\u6e90\u914d\u989d\uff0c\u4e14 requests == limits\uff0c\u6216\u8005\u53ea\u8bbe\u7f6e\u4e86 limits\uff0c\u6b64\u65f6\u9ed8\u8ba4 requests \u7b49\u4e8e limits\u3002|\\n|Burstable\uff08\u5f39\u6027\u6ce2\u52a8\u3001\u8f83\u53ef\u9760\u7684\uff09| pod \u4e2d\u90e8\u5206\u5bb9\u5668\u914d\u7f6e\u4e86 requests \u548c limits\u3002|\\n|BestEffort\uff08\u5c3d\u529b\u800c\u4e3a\u3001\u4e0d\u592a\u53ef\u9760\u7684\uff09| pod \u4e2d\u5bb9\u5668\u672a\u914d\u7f6e requests \u548c limits\u3002|\\n\\n\u5f53\u6211\u4eec\u914d\u7f6e\u4e86 requests \u8bf7\u6c42\u503c\uff0c\u90a3\u4e48\u90e8\u7f72\u65f6\uff0c\u76ee\u6807\u8282\u70b9\u9700\u8981\u62e5\u6709\u591a\u4f59\u8be5\u8bf7\u6c42\u503c\u7684\u7a7a\u95f2\u8d44\u6e90\uff0c\u624d\u53ef\u4ee5\u90e8\u7f72\u6b64\u670d\u52a1\u3002\u5982\u679c\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u8282\u70b9\uff0c\u90a3\u4e48\u8be5\u670d\u52a1\u5c06\u65e0\u6cd5\u90e8\u7f72\u3002    \\n\u5f53\u6211\u4eec\u672a\u914d\u7f6e limits \u7ea6\u675f\u503c\u65f6\uff0climits \u9ed8\u8ba4\u5c31\u662f\u5f53\u524d\u8282\u70b9\u7684\u8d44\u6e90\u4e0a\u9650\u3002   \\n\\n## \u5e38\u4f7f\u7528\u7684\u914d\u989d\u7c7b\u578b\\n\u8d44\u6e90\u914d\u989d\u7684\u79cd\u7c7b\u6709\u5f88\u591a\uff0c\u6700\u5e38\u4f7f\u7528\u7684\u914d\u989d\u4e3b\u8981\u6709\u4e09\u7c7b\uff1a\\n* cpu\uff1a\u4e2d\u592e\u5904\u7406\u5668\\n* memory\uff1a\u5185\u5b58\\n* ephemeral-storage\uff1a\u5b58\u50a8\\n\\n\u5927\u90e8\u5206\u8d44\u6e90\u7c7b\u578b\u90fd\u53ef\u4ee5\u901a\u8fc7\u6807\u51c6\u7684\u6a21\u677f\u8fdb\u884c\u914d\u989d\u8bbe\u7f6e\uff0c\u5982\uff1a  \\n* `count/<resource>.<group>`\uff1a\u7528\u4e8e\u975e\u6838\u5fc3 core \u7ec4\u7684\u8d44\u6e90\\n* `count/<resource>`\uff1a\u7528\u4e8e\u6838\u5fc3\u7ec4\u7684\u8d44\u6e90\\n\\n|\u914d\u989d|\u8bf4\u660e|\\n|---|---|\\n|count/pods|\u5728\u8be5\u547d\u540d\u7a7a\u95f4\u4e2d\u5141\u8bb8\u5b58\u5728\u7684\u975e\u7ec8\u6b62\u72b6\u6001\u7684 pod \u603b\u6570\u4e0a\u9650\u3002|\\n|count/services|\u5728\u8be5\u547d\u540d\u7a7a\u95f4\u4e2d\u5141\u8bb8\u5b58\u5728\u7684 service \u603b\u6570\u4e0a\u9650\u3002|\\n|count/configmaps|\u5728\u8be5\u547d\u540d\u7a7a\u95f4\u4e2d\u5141\u8bb8\u5b58\u5728\u7684 configmaps \u603b\u6570\u4e0a\u9650\u3002|\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"\u8bb0\u4e00\u6b21 golang cmd \u6a21\u5757\u5bfc\u81f4\u7684\u8fdb\u7a0b\u6cc4\u6f0f","metadata":{"permalink":"/docusaurus/blog/2021/12/22/golang-cmd\u6a21\u5757\u5bfc\u81f4\u7684\u8fdb\u7a0b\u6cc4\u6f0f","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-22-golang-cmd\u6a21\u5757\u5bfc\u81f4\u7684\u8fdb\u7a0b\u6cc4\u6f0f/index.md","source":"@site/blog/2021/12-22-golang-cmd\u6a21\u5757\u5bfc\u81f4\u7684\u8fdb\u7a0b\u6cc4\u6f0f/index.md","title":"\u8bb0\u4e00\u6b21 golang cmd \u6a21\u5757\u5bfc\u81f4\u7684\u8fdb\u7a0b\u6cc4\u6f0f","description":"\u4e00\u4e2a\u7a33\u5b9a\u8dd1\u4e86\u4e00\u5e74\u591a\u7684\u9879\u76ee\uff0c\u8fd1\u671f\u7a81\u7136\u88ab\u8fd0\u7ef4\u544a\u77e5\u5b58\u5728\u8fdb\u7a0b\u6cc4\u6f0f\uff0c\u5e26\u7740\u61f5\u903c\u7684\u5fc3\u60c5\u5f00\u59cb\u4e86\u6392\u67e5...","date":"2021-12-22T00:00:00.000Z","formattedDate":"December 22, 2021","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"},{"label":"bug","permalink":"/docusaurus/blog/tags/bug"}],"readingTime":3.57,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u521d\u6b65\u4e86\u89e3 k8s \u8d44\u6e90\u914d\u989d","permalink":"/docusaurus/blog/2021/12/23/k8s\u8d44\u6e90\u914d\u989d"},"nextItem":{"title":"cpu \u8c03\u5ea6","permalink":"/docusaurus/blog/2021/12/21/cpu\u8c03\u5ea6"}},"content":"\u4e00\u4e2a\u7a33\u5b9a\u8dd1\u4e86\u4e00\u5e74\u591a\u7684\u9879\u76ee\uff0c\u8fd1\u671f\u7a81\u7136\u88ab\u8fd0\u7ef4\u544a\u77e5\u5b58\u5728\u8fdb\u7a0b\u6cc4\u6f0f\uff0c\u5e26\u7740\u61f5\u903c\u7684\u5fc3\u60c5\u5f00\u59cb\u4e86\u6392\u67e5...\\n\\n\x3c!--truncate--\x3e\\n\\n## \u50f5\u5c38\u8fdb\u7a0b\u62d6\u57ae\u670d\u52a1\u5668\\n\u9996\u5148\u6765\u770b\u4e0b\u8fd0\u7ef4\u63d0\u4f9b\u7684\u622a\u56fe\uff08\u5c4f\u853d\u4e86\u90e8\u5206\u654f\u611f\u4fe1\u606f\uff09\uff1a   \\n**1\u3001\u5927\u9762\u79ef\u50f5\u5c38\u8fdb\u7a0b\uff08\u8fdb\u7a0b\u72b6\u6001 Z\uff09**  \\n![](./\u8fdb\u7a0b\u6cc4\u6f0f1.png)  \\n\\n**2\u3001\u7edf\u8ba1\u8fdb\u7a0b\u6570\u8fd130w**  \\n![](./\u8fdb\u7a0b\u6cc4\u6f0f2.png)  \\n\\n\u5e76\u4e14\u50f5\u5c38\u8fdb\u7a0b\u6301\u7eed\u589e\u957f\uff0c\u6700\u7ec8\u62d6\u57ae\u670d\u52a1\u5668\u3002\\n\\n:::note \u50f5\u5c38\u8fdb\u7a0b\\n\u4e00\u4e2a\u8fdb\u7a0b\u7684\u9000\u51fa\uff0c\u9700\u8981\u88ab\u5b83\u7684\u7236\u8fdb\u7a0b\u6216\u8005\u76f8\u5173\u8054\u7684\u8fdb\u7a0b\u63a5\u6536\uff0c\u5426\u5219\u4f1a\u4e00\u76f4\u963b\u585e\uff0c\u6210\u4e3a\u50f5\u5c38\u8fdb\u7a0b\u3002\\n\\n\u5e38\u89c1\u7684\u50f5\u5c38\u8fdb\u7a0b\u4ea7\u751f\u573a\u666f\u6709\uff1a   \\n1\u3001\u7236\u8fdb\u7a0b\u8fd8\u5728\u6267\u884c\uff0c\u5b50\u8fdb\u7a0b\u9000\u51fa\u4e86\uff0c\u6b64\u65f6\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u6ca1\u6709\u88ab\u7236\u8fdb\u7a0b\u63a5\u6536\u5230\uff0c\u5bfc\u81f4\u5f53\u524d\u8fdb\u7a0b\u6210\u4e3a\u50f5\u5c38\u8fdb\u7a0b\u3002    \\n2\u3001\u5b50\u8fdb\u7a0b\u8fd8\u5728\u6267\u884c\uff0c\u7236\u8fdb\u7a0b\u9000\u51fa\u4e86\uff0c\u6b64\u65f6\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u65e0\u6cd5\u88ab\u5176\u4ed6\u8fdb\u7a0b\u63a5\u6536\uff0c\u5bfc\u81f4\u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b\uff0c\u4e5f\u662f\u50f5\u5c38\u8fdb\u7a0b\u7684\u4e00\u79cd\u3002     \\n\\n\u50f5\u5c38\u8fdb\u7a0b\u72b6\u6001\u4e3a\uff1aZ  \\n\u4ee5 `<defunct>` \u6807\u8bb0\u6307\u660e    \\n:::\\n\\n## \u4ee3\u7801\u5206\u6790\\n```golang title=\\"\u8c03\u7528 cmd \u6a21\u5757\\"\\nctxTimeout, cancel := context.WithDeadline(ctx, cfg.ExpiredAt)\\ndefer cancel()\\ncmd := exec.CommandContext(ctxTimeout, \\"/third_party/aria2c\\", args...)\\n```\\n\u5728\u4e0a\u8ff0\u4ee3\u7801\u80fd\u591f\u770b\u5230\uff0c\u8c03\u7528 `cmd` \u65f6\u4f20\u5165\u4e86 `ctxTimeout`\uff0c\u5e76\u4e14\u51fd\u6570\u6808\u9000\u51fa\u65f6\u8c03\u7528\u4e86 `cancel`\u3002  \\n\u770b\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u53ef\u4ee5\u5927\u81f4\u786e\u8ba4\uff0c`cmd` \u6700\u7ec8\u80af\u5b9a\u662f\u53ef\u4ee5\u9000\u51fa\u7684\u3002\u4f46\u662f\u5c31\u662f\u8fd9\u4e48\u4e00\u6bb5\u7b80\u5355\u7684\u4ee3\u7801\uff0c\u4ecd\u7136\u53d1\u751f\u4e86\u8fdb\u7a0b\u6cc4\u6f0f\u3002\\n\\n\u6211\u4eec\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0ccmd \u662f golang \u7684\u57fa\u7840\u5305\uff0c\u5176\u542f\u52a8\u65b9\u5f0f\u6709\u4e24\u79cd\uff0c\u5982\u4e0b\uff1a\\n```golang title=\\"cmd \u542f\u52a8\u65b9\u6cd5\\"\\n{\\n    cmd.Start()\\n    cmd.Wait()\\n}\\n{\\n    cmd.Run()  // \u7b49\u4ef7\u4e8e start + wait\\n}\\n```\\n\\n\u7ee7\u7eed\u5f80\u4e0b\u6392\u67e5\uff1a\\n```golang\\nctxTimeout, cancel := context.WithDeadline(ctx, cfg.ExpiredAt)\\ndefer cancel()\\ncmd := exec.CommandContext(ctxTimeout, \\"/third_party/aria2c\\", args...)\\n\\npath, err := consumeOutput(cmd, ctxTimeout, cfg)\\nif err != nil {\\n    retrun err\\n}\\n```\\n`consumeOutput` \u51fd\u6570\u4e2d\u6d89\u53ca\u5230\u4e00\u4e9b\u65e5\u5fd7\u8f93\u51fa\u7684\u8bfb\u53d6\u4e0e\u5206\u6790\uff0c\u8fd9\u91cc\u5c31\u4e0d\u5177\u4f53\u5c55\u793a\u4e86\uff0c\u4f46\u8fd9\u4e2a\u51fd\u6570\u7684**\u6700\u540e\u4e00\u884c\u8c03\u7528\u4e86** `cmd.Wait()`\u3002   \\n\u770b\u5230\u8fd9\u91cc\uff0c\u95ee\u9898\u7684\u8d77\u56e0\u5c31\u5927\u81f4\u6709\u70b9\u7709\u76ee\u4e86\u3002\\n\\n\u6211\u4eec\u6765\u770b\u4e0b `cmd.Wait()` \u7684\u6587\u6863\uff0c\u6700\u540e\u4e00\u884c\u5199\u7740\uff1a\\n```text\\nWait releases any resources associated with the Cmd.\\n```\\n\u6240\u4ee5\u53ef\u4ee5\u521d\u6b65\u5224\u5b9a\uff0c\u5c31\u662f\u56e0\u4e3a\u8be5\u51fd\u6570\u8c03\u7528\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u5f02\u5e38\uff0c\u6ca1\u6709\u6267\u884c `cmd.Wait()` \u51fd\u6570\u5c31\u76f4\u63a5\u9000\u51fa\uff0c\u5bfc\u81f4 cmd \u76f8\u5173\u7684\u5b50\u8fdb\u7a0b\u8d44\u6e90\u6ca1\u6709\u53ca\u65f6\u91ca\u653e\uff0c\u4ece\u800c\u9020\u6210\u7ebf\u4e0a\u5927\u91cf\u50f5\u5c38\u8fdb\u7a0b\u3002\\n\\n## \u89e3\u51b3\u65b9\u6cd5\\n\u8001\u9879\u76ee\uff0c\u600e\u4e48\u7b80\u5355\u600e\u6765\u3002  \\n\u8fd9\u4e2a\u95ee\u9898\u8bf4\u5230\u5e95\uff0c\u8fd8\u662f `cmd` \u6a21\u5757\u7684\u4f7f\u7528\u65b9\u6cd5\u4e0d\u6b63\u786e\u5bfc\u81f4\u7684\uff0c\u9879\u76ee\u80fd\u7a33\u5b9a\u8fd0\u884c\u4e00\u5e74\u591a\uff0c\u4e5f\u53ea\u80fd\u5f52\u7ed3\u4e8e\u8fd0\u6c14\u597d...\\n\\n\u76f4\u63a5\u5728 `consumeOutput` \u51fd\u6570\u8c03\u7528\u540e\u4e3b\u52a8\u52a0\u4e0a `cmd.Wait()` \u5c31\u884c\u4e86\uff0c\u867d\u7136\u4e0d\u4f18\u96c5\uff0c\u4f46\u80fd\u89e3\u51b3\u95ee\u9898\u3002\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"cpu \u8c03\u5ea6","metadata":{"permalink":"/docusaurus/blog/2021/12/21/cpu\u8c03\u5ea6","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-21-cpu\u8c03\u5ea6/index.md","source":"@site/blog/2021/12-21-cpu\u8c03\u5ea6/index.md","title":"cpu \u8c03\u5ea6","description":"\x3c!--","date":"2021-12-21T00:00:00.000Z","formattedDate":"December 21, 2021","tags":[{"label":"\u8ba1\u7b97\u673a\u57fa\u7840","permalink":"/docusaurus/blog/tags/\u8ba1\u7b97\u673a\u57fa\u7840"}],"readingTime":7.915,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u8bb0\u4e00\u6b21 golang cmd \u6a21\u5757\u5bfc\u81f4\u7684\u8fdb\u7a0b\u6cc4\u6f0f","permalink":"/docusaurus/blog/2021/12/22/golang-cmd\u6a21\u5757\u5bfc\u81f4\u7684\u8fdb\u7a0b\u6cc4\u6f0f"},"nextItem":{"title":"\u5b57\u7b26\u7f16\u7801","permalink":"/docusaurus/blog/2021/12/15/\u5b57\u7b26\u7f16\u7801"}},"content":"\x3c!--\\nhttps://bbs.huaweicloud.com/blogs/288296\\nhttps://developer.aliyun.com/article/23479\\nhttps://cloud.tencent.com/developer/article/1472672\\n--\x3e\\n\\n\u8bf4\u5230 cpu \u8c03\u5ea6\uff0c\u6211\u4eec\u7b2c\u4e00\u65f6\u95f4\u60f3\u5230\u7684\u53ef\u80fd\u662f\u65f6\u95f4\u7247\u3001\u5206\u65f6\u8c03\u5ea6\u7b49\u5173\u952e\u8bcd\u3002\\n\u8981\u8bf4\u66f4\u5177\u4f53\u7684\u5185\u5bb9\uff0c\u53ef\u80fd\u5c31\u6bd4\u8f83\u6a21\u7cca\u4e86\uff0c\u56e0\u4e3a\u6d89\u53ca\u5230\u4e86\u64cd\u4f5c\u7cfb\u7edf\u7684\u5e95\u5c42\u77e5\u8bc6\uff0c\u5e73\u5e38\u5de5\u4f5c\u4e2d\u63a5\u89e6\u7684\u6bd4\u8f83\u5c11\u3002\\n\\n\u8fd9\u7bc7\u6587\u7ae0\u4e5f\u4ec5\u4ec5\u505a\u4e2a\u7b80\u5355\u7684\u4e86\u89e3\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u57fa\u7840\u6982\u5ff5\\n\\n#### **cpu\uff1a\u4e0a\u4e0b\u6587\u5207\u6362**\\n\\n\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u542f\u52a8\uff0c\u90fd\u9700\u8981\u6709\u4e00\u4e2a\u6267\u884c\u6307\u4ee4\u5165\u53e3\uff0c\u5373\u4f7f\u8be5\u8fdb\u7a0b\u88ab\u6682\u505c\u8c03\u5ea6\uff0c\u4e5f\u4f1a\u6709\u4e00\u4e2a\u5373\u5c06\u88ab\u6267\u884c\u7684\u6307\u4ee4\u5165\u53e3\u3002 \\n\u5bf9\u4e8e\u8fd9\u4e9b\u5373\u5c06\u88ab\u6267\u884c\u7684\u6307\u4ee4\uff0c\u6211\u4eec\u5c06\u4ed6\u4eec\u7684\u5730\u5740\u4fe1\u606f\u4fdd\u5b58\u5728 cpu \u7684\u5bc4\u5b58\u5668\u4e2d\u3002  \\n\u6b64\u65f6\uff0c\u8fd9\u4e9b\u5bc4\u5b58\u5668\u4e2d\u7684\u4fe1\u606f\uff0c\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684 cpu \u4e0a\u4e0b\u6587\u3002\\n\\n\u6240\u4ee5\u7b80\u5355\u70b9\u7406\u89e3\u5c31\u662f\uff0c\u5c06\u5f53\u524d\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\u4fdd\u5b58\uff0c\u5e76\u5c06\u4e0b\u4e00\u4e2a\u6267\u884c\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668\u4e2d\u7684\u8fc7\u7a0b\uff0c\u79f0\u4e4b\u4e3a cpu \u7684\u4e0a\u4e0b\u6587\u5207\u6362\u3002\\n\u5f53\u7136\uff0c\u5b9e\u9645\u8fc7\u7a0b\u66f4\u4e3a\u590d\u6742\u3002\\n\\n:::note \u7528\u6237\u7ea7\u548c\u7cfb\u7edf\u7ea7\u7684\u4e0a\u4e0b\u6587\\n\u6211\u4eec\u5e38\u8bf4\u7684\u4e0a\u4e0b\u6587\u66f4\u591a\u7684\u662f\u7528\u6237\u7ea7\u522b\u7684\uff0c\u4ed6\u548c\u7cfb\u7edf\u7ea7\u4e0a\u4e0b\u6587\u4fdd\u5b58\u5185\u5bb9\u6709\u6240\u4e0d\u540c\uff1a  \\n* \u7528\u6237\u7ea7\u4e0a\u4e0b\u6587\uff1a\u7a0b\u5e8f\u8fd0\u884c\u65f6\u5806\u6808\u4fe1\u606f\u3001\u6570\u636e\u5757\u3001\u4ee3\u7801\u5757\u7b49\u3002  \\n* \u7cfb\u7edf\u7ea7\u4e0a\u4e0b\u6587\uff1a\u8fdb\u7a0b\u6807\u8bc6\u4fe1\u606f\u3001\u63a7\u5236\u4fe1\u606f\u7b49\u3002\\n:::\\n\\n#### **cpu\uff1a\u4e0a\u4e0b\u6587\u4fdd\u5b58\u7684\u65b9\u5f0f**\\n\u64cd\u4f5c\u7cfb\u7edf\u7ed9\u8fdb\u7a0b\u5206\u914d\u8d44\u6e90\u65f6\uff0c\u4f1a\u5206\u914d\u4e00\u4e2a\u5185\u6838\u7a7a\u95f4\uff0c\u8fd9\u90e8\u5206\u7a7a\u95f4\u53ea\u80fd\u591f\u7531\u5185\u6838\u4ee3\u7801\u8bbf\u95ee\u3002    \\n\u6267\u884c\u4e0a\u4e0b\u6587\u5207\u6362\u65f6\uff0c\u4f1a\u5c06\u4e0a\u4e0b\u6587\u4fe1\u606f\u4fdd\u5b58\u5728\u5185\u6838\u7a7a\u95f4\u4e2d\uff0c\u7b49\u5f85\u4e0b\u6b21\u8c03\u5ea6\u65f6\uff0c\u518d\u91cd\u65b0\u52a0\u8f7d\u5230 cpu \u4e2d\u3002\\n\\n#### **cpu\uff1a\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u65b9\u5f0f**\\n\u6267\u884c\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u9700\u8981\u7531 cpu \u6765\u6267\u884c\u3002\u4f46\u7531\u4e8e\u5f53\u524d cpu \u5df2\u7ecf\u88ab\u8fdb\u7a0b\u5360\u7528\u4e86\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u79cd\u7b56\u7565\uff0c\u6765\u83b7\u53d6 cpu \u7684\u6267\u884c\u6743\u9650\u3002\u83b7\u53d6\u7684\u65b9\u5f0f\u4e3b\u8981\u6709\u4e24\u79cd\uff1a\\n\\n1\u3001\u534f\u4f5c\u5f0f\u7b56\u7565   \\n\u7531\u8fdb\u7a0b\u4e3b\u52a8\u8ba9\u51fa cpu\\n\\n2\u3001\u62a2\u5360\u5f0f\u7b56\u7565   \\n\u4f9d\u8d56\u786c\u4ef6\u7684\u5b9a\u65f6\u4e2d\u65ad\u673a\u5236\uff0c\u64cd\u4f5c\u7cfb\u7edf\u521d\u59cb\u5316\u65f6\u5411\u786c\u4ef6\u6ce8\u518c\u4e2d\u65ad\u56de\u8c03\uff0c\u4ee5\u4fbf\u5f53\u786c\u4ef6\u53d1\u751f\u4e2d\u65ad\u65f6\uff0c\u786c\u4ef6\u4f1a\u5c06 cpu \u7684\u5904\u7406\u6743\u4ea4\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u3002  \\n\u8fd9\u6837\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e2d\u65ad\u56de\u8c03\u7684\u65b9\u5f0f\u6765\u83b7\u53d6 cpu \u7684\u8c03\u5ea6\u6743\u3002\\n\\n\\n## \u6700\u7b80\u5355\u7684\u8c03\u5ea6\uff1aFIFO\\n\u8bf4\u5230\u6700\u7b80\u5355\u7684\u8c03\u5ea6\u7b56\u7565\uff0c\u90a3\u80af\u5b9a\u662f\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7b56\u7565\u4e86\u3002  \\nFIFO \u7684\u610f\u601d\u5c31\u662f\u5148\u6765\u7684\u4efb\u52a1\u5148\u5904\u7406\uff0c\u7b49\u5f53\u524d\u4efb\u52a1\u6267\u884c\u5b8c\u6210\u540e\uff0c\u518d\u6267\u884c\u4e0b\u4e00\u4e2a\u4efb\u52a1\u3002\\n\\n\u4ed6\u7684\u4f18\u70b9\u5c31\u662f\u7b80\u5355\u660e\u4e86\uff0c\u7f3a\u70b9\u4e5f\u5f88\u660e\u663e\uff0c\u5c31\u662f\u6b63\u5728\u6267\u884c\u4e2d\u7684\u4efb\u52a1\u4f1a\u963b\u585e\u540e\u9762\u7684\u4efb\u52a1\u3002  \\n\u7279\u522b\u5f53\u6709\u591a\u4e2a\u4efb\u52a1\u65f6\uff1a\\n* \u6267\u884c\u65f6\u95f4\u8f83\u957f\u7684\u4efb\u52a1\u53ef\u80fd\u4f1a\u963b\u585e\u6267\u884c\u65f6\u95f4\u8f83\u77ed\u7684\u4efb\u52a1\\n* \u4f18\u5148\u7ea7\u4f4e\u7684\u4efb\u52a1\u53ef\u80fd\u4f1a\u963b\u585e\u4f18\u5148\u7ea7\u9ad8\u7684\u4efb\u52a1\\n\\n## \u6700\u77ed\u4efb\u52a1\u4f18\u5148\uff1aSJF\\nSJF \u5168\u79f0 Short Job First\uff0c\u5c31\u662f\u6267\u884c\u65f6\u95f4\u77ed\u7684\u4efb\u52a1\u4f18\u5148\u6267\u884c\u3002\\n\\n\u4ed6\u76f8\u8f83\u4e8e FIFO \u6765\u8bf4\uff0c\u5f25\u8865\u4e86\u4e00\u90e8\u5206\u8c03\u5ea6\u7b56\u7565\u7684\u7f3a\u9677\u3002  \\n\u5f53\u4e00\u6279\u4efb\u52a1\u5230\u6765\u65f6\uff0c\u53ef\u4ee5\u4f18\u5148\u5904\u7406\u6267\u884c\u65f6\u95f4\u8f83\u77ed\u7684\u4efb\u52a1\u3002  \\n\u4f46\u662f\u5f53\u6267\u884c\u65f6\u95f4\u8f83\u957f\u7684\u4efb\u52a1\u6b63\u5728\u88ab\u5904\u7406\uff0c\u6b64\u65f6\u518d\u6295\u653e\u6267\u884c\u65f6\u95f4\u8f83\u77ed\u7684\u4efb\u52a1\uff0c\u8fd9\u4e9b\u77ed\u4efb\u52a1\u4ecd\u7136\u4f1a\u88ab\u963b\u585e\u3002\\n\\n\\n## \u6700\u77ed\u65f6\u95f4\u4f18\u5148\u5b8c\u6210\uff1aSTCF\\nSTCF \u5168\u79f0 Shortest Time-to-Completion First\uff0c\u5c31\u662f\u5f53\u8fd0\u884c\u65f6\u95f4\u8f83\u77ed\u7684\u4efb\u52a1\u8fbe\u5230\u65f6\uff0c\u4f1a\u4e2d\u65ad\u5f53\u524d\u4efb\u52a1\uff0c\u8f6c\u800c\u6267\u884c\u8fd9\u6279\u77ed\u65f6\u95f4\u4efb\u52a1\u3002  \\n\u5f88\u663e\u7136\uff0c\u8fd9\u662f SJF \u7684\u4e00\u79cd\u4f18\u5316\u3002\\n\\n\u5728\u8fd9\u91cc\u6211\u4eec\u5176\u5b9e\u53ef\u4ee5\u770b\u5230\uff0c\u4e0d\u7ba1\u662f FIFO\u3001SJF \u8fd8\u662f STCF\uff0c\u8fd9\u4e9b\u8c03\u5ea6\u7b56\u7565\u7684\u672c\u8d28\u90fd\u662f\u5148\u6267\u884c\u4e00\u4e2a\u4efb\u52a1\uff0c\u518d\u6267\u884c\u4e0b\u4e00\u4e2a\u4efb\u52a1\u3002    \\n\\n\u5f53\u5b8c\u6210\u4e00\u4e2a\u77ed\u4efb\u52a1\u6240\u9700\u8981\u7684\u65f6\u95f4\u4e5f\u5f88\u957f\u65f6\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u4efb\u52a1\uff0c\u8c03\u5ea6\u6267\u884c\u7684\u65f6\u95f4\u5c06\u4e0d\u53ef\u907f\u514d\u7684\u88ab\u5ef6\u957f\u3002   \\n\\n\\n## \u57fa\u4e8e\u65f6\u95f4\u7247\u7684\u8f6e\u8be2\\n\u65e2\u7136\uff0c\u8fd9\u79cd\u5b8c\u6210\u4e00\u4e2a\u4efb\u52a1\u518d\u5b8c\u6210\u4e0b\u4e00\u4e2a\u4efb\u52a1\u7684\u8c03\u5ea6\u7b56\u7565\u8fd9\u4e48\u4e0d\u53cb\u597d\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u8ba9\u8fd9\u4e9b\u4efb\u52a1\u4e00\u8d77\u6267\u884c\u3002\\n\\n\u539f\u7406\u4e5f\u6bd4\u8f83\u7b80\u5355\uff1a    \\n1\u3001\u7ed9\u6bcf\u4e2a\u4efb\u52a1\u5206\u914d\u4e00\u4e2a\u65f6\u95f4\u7247\uff0c\u65f6\u95f4\u7247\u8868\u793a\u8be5\u4efb\u52a1\u88ab cpu \u8c03\u5ea6\u6267\u884c\u7684\u65f6\u95f4\u3002   \\n2\u3001\u5f53\u65f6\u95f4\u7247\u7684\u8c03\u5ea6\u65f6\u95f4\u7ed3\u675f\u540e\uff0ccpu \u4f1a\u4e2d\u65ad\u8be5\u4efb\u52a1\uff0c\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u4efb\u52a1\u3002   \\n3\u3001\u901a\u8fc7 round robin \u8f6e\u8be2\u7684\u7b56\u7565\uff0c\u5bf9\u6bcf\u4e00\u4e2a\u4efb\u52a1\u6267\u884c\u8c03\u5ea6\u3002    \\n\\n## \u591a\u7ea7\u53cd\u9988\u961f\u5217\uff1aMLFQ\\nMLFQ \u5168\u79f0 Multi-Level Feedback Queue\\n\\n\u8be5\u7b56\u7565\u7efc\u5408\u8003\u8651\u4e86\u4f18\u5148\u7ea7\u548c\u8f6e\u8be2\u7684\u7279\u70b9\uff0c\u6b64\u65f6\u8c03\u5ea6\u7b56\u7565\u7c7b\u4f3c\uff1a  \\n1\u3001\u4efb\u52a1\u4f18\u5148\u7ea7\u9ad8\u7684\u4efb\u52a1\u5148\u6267\u884c   \\n2\u3001\u4f18\u5148\u7ea7\u76f8\u540c\u7684\u4efb\u52a1\u8f6e\u8be2\u8c03\u5ea6\u6267\u884c  \\n\\n## linux\u5b8c\u5168\u516c\u5e73\u8c03\u5ea6\uff1aCFS\\nCFS \u5168\u79f0 Completely Fair Scheduler\\n\\nCFS \u5e0c\u671b\u5c06 cpu \u516c\u5e73\u7684\u5e73\u5747\u5206\u5230\u6bcf\u4e2a\u4efb\u52a1\u3002\u4e3a\u4e86\u5b9e\u73b0\u5e73\u5747\u80fd\u529b\uff0c CFS \u5f15\u5165\u4e86\u8ba1\u6570\u7684\u6982\u5ff5\u3002\\n\u6bcf\u4e2a\u4efb\u52a1\u90fd\u7ef4\u62a4\u6709\u4e00\u4e2a `vruntime` \u7684\u503c\uff0c\u7528\u6765\u8868\u793a\u8c03\u5ea6\u6267\u884c\u7684\u65f6\u95f4\uff0c\u6bcf\u6b21\u8c03\u5ea6\u6267\u884c\u540e\uff0c\u8be5\u503c\u90fd\u4f1a\u52a0\u4e0a\u6b64\u6b21\u8c03\u5ea6\u65f6\u95f4\u7684\u503c\u3002\\n\u6bcf\u4e00\u6b21\u8c03\u5ea6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u9009\u62e9 `vruntime` \u503c\u6700\u5c0f\u7684\u4f18\u5148\u8c03\u5ea6\u3002\\n\\n\u5728 CFS \u79cd\uff0c\u8c03\u5ea6\u6267\u884c\u65f6\u95f4\u7247\u4e0d\u662f\u56fa\u5b9a\u7684\uff0clinux \u63d0\u4f9b\u4e86\u53ef\u914d\u53c2\u6570 `sched_latency`\uff0c\u8c03\u5ea6\u65f6\u95f4\u7247\u5c31\u662f\uff1a`time_slice = sched_latency / n`\uff0c\\n\u8fd9\u91cc\u7684 n \u5c31\u662f\u4efb\u52a1\u6570\uff0c\u5373\u4efb\u52a1\u6570\u8d8a\u591a\uff0c\u65f6\u95f4\u7247\u8d8a\u5c0f\u3002\\n\\n\u9664\u6b64\u4e4b\u5916\uff0clinux \u4e5f\u63d0\u4f9b\u4e86\u6743\u91cd\u6765\u6807\u8bb0\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u9ad8\u7684\u4efb\u52a1\u5c06\u5206\u914d\u6709\u66f4\u591a\u7684\u6267\u884c\u65f6\u95f4\u7247\u3002\\n\\n:::note \u6743\u91cd\u673a\u5236\\nlinux \u63d0\u4f9b\u4e86\u6743\u91cd\u673a\u5236\uff0c\u7528\u4e8e\u6807\u8bb0\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u3002  \\n\u4f18\u5148\u7ea7\u9ad8\u7684\u4efb\u52a1\uff0c\u5c06\u88ab\u5206\u914d\u66f4\u591a\u7684\u6267\u884c\u65f6\u95f4\u7247\u3002  \\n\u5728\u6743\u91cd\u673a\u5236\u4e0b\uff0c\u4e5f\u4e0d\u518d\u662f\u53d6 `vruntime` \u503c\u6700\u5c0f\u7684\u4f18\u5148\u8c03\u5ea6\u4e86\uff0c\u4f1a\u6709\u65b0\u7684\u7b97\u6cd5\u5f15\u5165\u6743\u91cd\u503c\u3002\\n:::\\n\\n:::note CFS \u5b58\u50a8\u7ed3\u6784\uff1a\u7ea2\u9ed1\u6811\\n\u5728\u6587\u4e2d\u5df2\u7ecf\u8bf4\u660e\uff0cCFS \u8c03\u5ea6\u65f6\u4f1a\u9009\u62e9 `vruntime` \u6700\u5c0f\u7684\u503c\uff0c\u6b64\u65f6\u4e3a\u4e86\u6027\u80fd\uff0c\u91c7\u7528\u7684\u662f\u7ea2\u9ed1\u6811\u6765\u5b58\u50a8 `vruntime` \u6570\u636e\u3002  \\n\u7ea2\u9ed1\u6811\u5728\u63d2\u5165\u548c\u5220\u9664\u65f6\uff0c\u64cd\u4f5c\u590d\u6742\u5ea6\u4e3a log(n)   \\n\u800c\u6709\u5e8f\u94fe\u8868\u7684\u64cd\u4f5c\u590d\u6742\u5ea6\u4e3a O(n)\\n:::\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"\u5b57\u7b26\u7f16\u7801","metadata":{"permalink":"/docusaurus/blog/2021/12/15/\u5b57\u7b26\u7f16\u7801","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-15-\u5b57\u7b26\u7f16\u7801/index.md","source":"@site/blog/2021/12-15-\u5b57\u7b26\u7f16\u7801/index.md","title":"\u5b57\u7b26\u7f16\u7801","description":"\u5b57\u7b26\u4e32\u662f\u4f7f\u7528\u7684\u6700\u591a\u7684\u6570\u636e\u7c7b\u578b\u4e4b\u4e00\u3002","date":"2021-12-15T00:00:00.000Z","formattedDate":"December 15, 2021","tags":[{"label":"\u8ba1\u7b97\u673a\u57fa\u7840","permalink":"/docusaurus/blog/tags/\u8ba1\u7b97\u673a\u57fa\u7840"}],"readingTime":3.315,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"cpu \u8c03\u5ea6","permalink":"/docusaurus/blog/2021/12/21/cpu\u8c03\u5ea6"},"nextItem":{"title":"gRPC \u8d1f\u8f7d\u5747\u8861","permalink":"/docusaurus/blog/2021/12/13/gRPC\u8d1f\u8f7d\u5747\u8861"}},"content":"\u5b57\u7b26\u4e32\u662f\u4f7f\u7528\u7684\u6700\u591a\u7684\u6570\u636e\u7c7b\u578b\u4e4b\u4e00\u3002  \\n\u5982\u679c\u8bf4\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u4f1a\u9047\u5230\u4ec0\u4e48\u95ee\u9898\uff0c\u90a3\u53ef\u4ee5\u8bf4\uff0c\u5927\u90e8\u5206\u90fd\u662f\u7f16\u7801\u65b9\u9762\u7684\u95ee\u9898\u4e86\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## ascii \u7f16\u7801\\n> \u5b57\u7b26\u7f16\u7801\u7684\u672c\u8d28\uff0c\u662f\u6570\u5b57\u5230\u5b57\u7b26\u4e32\u7684\u6620\u5c04\\n\\n\u6700\u65e9\u7684\u7f16\u7801\u662f ascii \u7f16\u7801\uff0c\u5b83\u662f\u4e00\u4e2a\u5305\u542b 128 \u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u96c6\uff0c\u53ef\u4ee5\u7f16\u7801\u5b57\u6bcd\u548c\u7279\u6b8a\u5b57\u7b26\u3002\\n\\n:::note \u6bd4\u7279\u4e0e\u5b57\u8282\\n\u7531\u4e8e\u8ba1\u7b97\u673a\u5e95\u5c42\u53ea\u80fd\u591f\u5904\u7406\u6570\u5b57\uff0c\u5982\u679c\u8981\u5904\u7406\u7c7b\u4f3c\u6587\u672c\u56fe\u7247\u7b49\u6570\u636e\uff0c\u5c31\u9700\u8981\u5148\u5c06\u8fd9\u4e9b\u6570\u636e\u8f6c\u5316\u4e3a\u6570\u5b57\u624d\u80fd\u591f\u7ee7\u7eed\u5904\u7406\u3002  \\n\u6700\u65e9\u8ba1\u7b97\u673a\u5728\u8bbe\u8ba1\u65f6\u91c7\u7528 8 \u4e2a\u6bd4\u7279\uff08bit\uff09\u4f5c\u4e3a\u4e00\u4e2a\u5b57\u8282\uff08byte\uff09\uff0c\u6240\u4ee5\u4e00\u4e2a\u5b57\u8282\u80fd\u8868\u793a\u7684\u6700\u5927\u6570\u5b57\u5c31\u662f 255\uff0c\u4e8c\u8fdb\u5236\u8868\u793a `1111 1111`\\n\\n\u5982\u679c\u9700\u8981\u8868\u793a\u66f4\u5927\u7684\u6570\uff0c\u5c31\u9700\u8981\u66f4\u591a\u7684\u5b57\u8282\\n:::\\n\\n## unicode \u7f16\u7801\\n\u968f\u7740\u8ba1\u7b97\u673a\u7684\u53d1\u5c55\uff0c\u5355\u4e00\u7684 ascii \u7f16\u7801\u5df2\u7ecf\u65e0\u6cd5\u6ee1\u8db3\u591a\u5143\u7684\u6587\u5316\u9700\u6c42\u3002  \\n\u8ba1\u7b97\u673a\u9700\u8981\u652f\u6301\u66f4\u591a\u7684\u7f16\u7801\u96c6\uff0c\u4f8b\u5982\uff1a\u4e2d\u56fd\u5236\u5b9a\u6709 gb2312\uff0c\u5176\u4ed6\u56fd\u5bb6\u4e5f\u6709\u7c7b\u4f3c\u7684\u7f16\u7801\u96c6\u3002\\n\\n\u867d\u7136\u6bcf\u4e2a\u56fd\u5bb6\u90fd\u5b9e\u73b0\u4e86\u7279\u5b9a\u7684\u7f16\u7801\uff0c\u4f46\u662f\u5f53\u4e00\u4e2a\u6587\u672c\u4e2d\u6df7\u5408\u4e86\u591a\u4e2a\u56fd\u5bb6\u7684\u8bed\u8a00\u65f6\uff0c\u5c31\u4e0d\u53ef\u907f\u514d\u7684\u51fa\u73b0\u5c40\u90e8\u4e71\u7801\u3002\\n\\n\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4e1a\u754c\u51b3\u5b9a\u4f7f\u7528\u7edf\u4e00\u7684 unicode \u7f16\u7801\u3002  \\n\u5373\u5c06\u6240\u6709\u56fd\u5bb6\u7684\u7f16\u7801\u6536\u5f55\u5230\u4e00\u4e2a\u5b57\u7b26\u96c6\u4e2d\u3002\\n\\n\\n## utf-8 \u7f16\u7801\\n\u867d\u7136 unicode \u53ef\u4ee5\u89e3\u51b3\u4e71\u7801\u95ee\u9898\uff0c\u4f46\u5e76\u4e0d\u4f18\u96c5\u3002\u56e0\u4e3a\u5b83\u5b58\u5728\u4e00\u4e2a\u8fd9\u6837\u7684\u95ee\u9898\uff1a  \\n\u4e2d\u82f1\u6df7\u5408\u65f6\uff0c\u4e00\u4e2a\u4e2d\u6587\u53ef\u80fd\u9700\u8981\u5360\u636e\u4e24\u4e2a\u5b57\u8282\uff0c\u8fd9\u4e2a\u65f6\u5019\u4e3a\u4e86\u6b63\u786e\u7f16\u7801\uff0c\u539f\u672c\u53ea\u9700\u8981\u5360\u636e\u4e00\u4e2a\u5b57\u8282\u7684\u82f1\u6587\uff0c\u4e0d\u5f97\u4e0d\u5360\u636e\u4e24\u4e2a\u5b57\u8282\u3002  \\n\u4ece\u800c\u9020\u6210\u4e86\u8d44\u6e90\u6d6a\u8d39\u3002\\n\\n\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u7f3a\u9677\uff0c\u57fa\u4e8e unicode \u7f16\u7801\u53c8\u63a8\u51fa\u4e86\u53ef\u53d8\u957f\u7f16\u7801 utf-8\\n\\n\u5373 utf-8 \u4f1a\u6839\u636e\u5b9e\u9645\u7c7b\u578b\u9009\u62e9\u6700\u4f73\u7684\u5b57\u8282\u5360\u4f4d\uff0c\u4ece\u800c\u8282\u7701\u7a7a\u95f4\u3002\\n\\n\\n## \u8ba1\u7b97\u673a\u901a\u7528\u7f16\u7801\u65b9\u5f0f\\n\u641e\u6e05\u695a\u4e86 ascii\u3001unicode\u3001utf-8 \u7f16\u7801\uff0c\u6211\u4eec\u68b3\u7406\u4e0b\u8ba1\u7b97\u673a\u901a\u7528\u7684\u7f16\u7801\u65b9\u5f0f\uff1a    \\n1\u3001\u5728\u8ba1\u7b97\u673a\u5185\u5b58\u4e2d\uff0c\u7edf\u4e00\u4f7f\u7528 unicode \u7f16\u7801    \\n2\u3001\u5f53\u9700\u8981\u4fdd\u5b58\u5230\u786c\u76d8\u6216\u8005\u4f20\u8f93\u7684\u65f6\u5019\uff0c\u8f6c\u5316\u4e3a utf-8 \u7f16\u7801   \\n\\n\\n\u4ee5\u6211\u4eec\u7684 txt \u6587\u672c\u4e3a\u4f8b\uff1a  \\n1\u3001\u6253\u5f00\u6587\u672c\uff1a\u6570\u636e\u4ee5 unicode \u7f16\u7801\uff0c\u4ee5\u4fbf\u5c55\u793a\u5185\u5bb9\u3002  \\n2\u3001\u4fdd\u5b58\u6587\u672c\uff1a\u6570\u636e\u4ee5 utf-8 \u7f16\u7801\uff0c\u4ee5\u4fbf\u8282\u7ea6\u7a7a\u95f4\u3002\\n\\n:::note \u5e38\u7528\u5b57\u7b26 ascii \u7801\\n0-9\uff1a48 ~ 57   \\nA-Z\uff1a65 ~ 90    \\na-z\uff1a97 ~ 122    \\n:::\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"gRPC \u8d1f\u8f7d\u5747\u8861","metadata":{"permalink":"/docusaurus/blog/2021/12/13/gRPC\u8d1f\u8f7d\u5747\u8861","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-13-gRPC\u8d1f\u8f7d\u5747\u8861/index.md","source":"@site/blog/2021/12-13-gRPC\u8d1f\u8f7d\u5747\u8861/index.md","title":"gRPC \u8d1f\u8f7d\u5747\u8861","description":"\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u5728 k8s \u73af\u5883\u4e0b gRPC \u670d\u52a1\u5728\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u65f6\u9047\u5230\u7684\u95ee\u9898\u548c\u89e3\u51b3\u601d\u8def\u3002","date":"2021-12-13T00:00:00.000Z","formattedDate":"December 13, 2021","tags":[{"label":"grpc","permalink":"/docusaurus/blog/tags/grpc"}],"readingTime":6.505,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u5b57\u7b26\u7f16\u7801","permalink":"/docusaurus/blog/2021/12/15/\u5b57\u7b26\u7f16\u7801"},"nextItem":{"title":"gRPC \u539f\u7406\u53ca\u4f7f\u7528","permalink":"/docusaurus/blog/2021/12/12/gRPC\u539f\u7406"}},"content":"\x3c!-- \u53c2\u8003\u81ea https://www.lixueduan.com/post/grpc/13-loadbalance-on-k8s/ --\x3e\\n\\n\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u5728 k8s \u73af\u5883\u4e0b gRPC \u670d\u52a1\u5728\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u65f6\u9047\u5230\u7684\u95ee\u9898\u548c\u89e3\u51b3\u601d\u8def\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u6982\u8ff0\\n\u6211\u4eec\u7684 gRPC \u5e94\u7528\u6700\u521d\u4f7f\u7528 `DaemonSet` \u7c7b\u578b\u7684\u8d44\u6e90\u5bf9\u8c61\u90e8\u7f72\u5728 k8s \u4e0a\u3002\u901a\u8fc7\u6807\u7b7e\u914d\u7f6e\uff0c\u4f7f\u5f97\u5355\u53f0 Node \u8282\u70b9\u4ec5\u90e8\u7f72\u4e00\u4e2a pod \u5e94\u7528\u3002\\n\u800c gRPC \u5e94\u7528\u5219\u901a\u8fc7 `NodePort Service` \u7684\u65b9\u5f0f\u5bf9\u5916\u66b4\u9732\u670d\u52a1\u3002\\n\\n\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\u76f4\u63a5\u5bf9\u5916\u66b4\u9732\u56fa\u5b9a IP \u63d0\u4f9b\u670d\u52a1\uff0c\u4e1a\u52a1\u6d41\u91cf\u5168\u90e8\u6253\u5230\u5355\u53f0\u5bbf\u4e3b\u673a\u4e0a\uff0c\u6240\u4ee5\u4e5f\u4e0d\u5b58\u5728\u8d1f\u8f7d\u5747\u8861\u7684\u8bf4\u6cd5\u3002\\n\\n\u968f\u7740\u4e1a\u52a1\u538b\u529b\u9010\u6e10\u589e\u5927\uff0c\u5355\u70b9\u63d0\u4f9b\u7684\u80fd\u529b\u5df2\u9010\u6e10\u8fbe\u5230\u6781\u9650\uff0c\u6211\u4eec\u91c7\u7528\u6c34\u5e73\u62d3\u5c55\u7684\u65b9\u5f0f\uff0c\u90e8\u7f72\u4e86\u591a\u53f0\u5355\u8282\u70b9\u670d\u52a1\u3002\u4e5f\u7b97\u6682\u65f6\u6297\u4f4f\u4e86\u538b\u529b\u3002\u4f46\u968f\u540e\u7684\u66b4\u9732\u7684\u95ee\u9898\uff0c\u4e5f\u8ba9\u6211\u4eec\u88ab\u8feb\u9009\u62e9\u4e86\u91cd\u6784\u3002\\n\\n:::note \u4e3a\u4ec0\u4e48\u9009\u62e9\u91cd\u6784\\n\u4e1a\u52a1\u6301\u7eed\u62d3\u5c55\uff0c\u5f15\u5165\u591a\u8282\u70b9\u7684\u95ee\u9898\u4e5f\u9010\u6e10\u66b4\u9732\u51fa\u6765\uff0c\u5f53\u524d\u670d\u52a1\u67b6\u6784\u4e0b\uff0c\u591a\u8282\u70b9\u4e4b\u95f4\u7684\u6570\u636e\u4e00\u81f4\u6027\u5b8c\u5168\u4e0d\u80fd\u4fdd\u8bc1\uff0c\u4eba\u5de5\u8fd0\u7ef4\u7b80\u76f4\u4e0d\u8981\u592a\u6076\u5fc3\uff0c\u65e0\u5948\u53ea\u80fd\u91cd\u6784\u3002\u8fd9\u91cc\u6211\u4eec\u4e0d\u9488\u5bf9\u6b64\u5c55\u5f00\u3002  \\n:::\\n\\n\u670d\u52a1\u6539\u9020\u5347\u7ea7\u5b8c\u6bd5\u540e\uff0c\u5b8c\u5168\u517c\u5bb9\u5386\u53f2 gRPC \u63a5\u53e3\uff0c\u5728 k8s \u7684\u914d\u7f6e\u4e0a\u4e5f\u6709\u90e8\u5206\u6539\u52a8\uff0c\u4ee5\u524d\u7684 `DaemontSet` \u8d44\u6e90\u53d8\u66f4\u4e3a `Deployment` \u8d44\u6e90\uff0c\u800c `NodePort Service` \u8d44\u6e90\u5219\u53d8\u66f4\u4e3a `ClusterIP Service` \u8d44\u6e90\u3002   \\n\u9879\u76ee\u6b63\u5f0f\u8fdb\u5165\u5230\u4e86\u63d0\u6d4b\u9636\u6bb5\u3002\\n\\n\u529f\u80fd\u4e0a\u57fa\u672c\u6ca1\u6709\u592a\u5927\u7684\u95ee\u9898\uff0c\u6bd5\u7adf\u5f15\u7528\u4e86\u76f8\u540c\u7684 gRPC \u63a5\u53e3\u6587\u4ef6\u3002\\n\\n\u95ee\u9898\u4e3b\u8981\u51fa\u73b0\u5728\u4e86\u8d1f\u8f7d\u5747\u8861\u4e0a\uff0c\u5728\u591a\u526f\u672c\u7684\u573a\u666f\u4e0b\uff0c\u53d1\u751f\u4e86\u4e25\u91cd\u7684\u6d41\u91cf\u503e\u659c\uff0c\u5177\u4f53\u8868\u73b0\u5c31\u662f\u67d0\u4e2a\u526f\u672c\u7684\u538b\u529b\u975e\u5e38\u9ad8\uff0c\u800c\u5176\u4ed6\u526f\u672c\u7684\u538b\u529b\u5f88\u5c0f\uff0c\u8fdb\u800c\u5bfc\u81f4\u670d\u52a1\u6574\u4f53\u5f02\u5e38\u3002\\n\\n:::tip \u7b80\u5355\u5206\u6790\\ngRPC \u662f\u57fa\u4e8e HTTP2.0 \u5b9e\u73b0\u7684\u957f\u8fde\u63a5\uff0c\u4e14\u9ed8\u8ba4\u6ca1\u6709\u8d85\u65f6\uff0c\u8fd9\u79cd\u957f\u8fde\u63a5\u80fd\u591f\u5927\u91cf\u51cf\u5c11 TCP \u8fde\u63a5\u7ba1\u7406\u6240\u5e26\u6765\u7684\u5f00\u9500\uff0c\u4f46\u4e5f\u7834\u574f\u4e86\u6807\u51c6\u7684\u8fde\u63a5\u7ea7\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u56e0\u4e3a\u8fde\u63a5\u5df2\u7ecf\u5efa\u7acb\u4e14\u4e0d\u65ad\u5f00\uff0c\u6240\u4ee5\u4e5f\u65e0\u6cd5\u518d\u8fdb\u4e00\u6b65\u8d1f\u8f7d\u5747\u8861\u4e86\u3002  \\n\\n\u90a3\u4e48\u518d\u56de\u5230\u4e0a\u8ff0\u573a\u666f\uff0c\u663e\u7136\u5c31\u662f\u5ba2\u6237\u7aef\u4e0e\u67d0\u4e2a\u5177\u4f53\u7684\u670d\u52a1\u5efa\u7acb\u4e86\u957f\u8fde\u63a5\uff0c\u800c\u8fde\u63a5\u53c8\u4e0d\u4f1a\u65ad\u5f00\uff0c\u4ece\u800c\u5bfc\u81f4\u4e86\u6301\u7eed\u7684\u6d41\u91cf\u503e\u659c\u95ee\u9898\u3002\\n:::\\n\\n\u9009\u62e9\u6709\u6548\u7684 gRPC \u8d1f\u8f7d\u5747\u8861\u65b9\u6848\uff0c\u662f\u89e3\u51b3\u6211\u4eec\u5f53\u524d\u95ee\u9898\u7684\u6838\u5fc3\u3002\\n\\n\u5177\u4f53\u89e3\u51b3\u7684\u65b9\u6cd5\u6709\u591a\u79cd\uff0c\u6211\u4eec\u4e3b\u8981\u5c06\u5176\u5206\u4e3a\uff1a  \\n* \u7528\u6237\u4fa7\u7684\u8d1f\u8f7d\u5747\u8861\\n* \u670d\u52a1\u4fa7\u7684\u8d1f\u8f7d\u5747\u8861\\n\\n## gRPC \u8d1f\u8f7d\u5747\u8861 - \u7528\u6237\u4fa7\\n\u7528\u6237\u4fa7\u7684 gRPC \u8d1f\u8f7d\u5747\u8861\uff0c\u662f\u901a\u8fc7 DNS\uff0c\u4f7f\u7528\u6237\u89e3\u6790\u51fa\u5168\u90e8\u7684 gRPC \u670d\u52a1\u5730\u5740\uff0c\u7136\u540e\u7528\u6237\u81ea\u5df1\u5b9e\u73b0\u8d1f\u8f7d\u7b56\u7565\u3002\\n\u6700\u7b80\u5355\u7684\u7b56\u7565\u5c31\u662f\u4e0e\u6bcf\u4e2a\u670d\u52a1\u5efa\u7acb gRPC \u8fde\u63a5\uff0c\u7136\u540e\u8f6e\u8be2\u8bbf\u95ee\uff0c\u5b9e\u73b0 rr \u8d1f\u8f7d\u3002\\n\\n![](client-load-balancer.png)\\n\\n\u8be5\u65b9\u6848\u5b9e\u65bd\u8d77\u6765\u6bd4\u8f83\u5bb9\u6613\uff0c\u4f46\u5bf9\u4e8e\u7528\u6237\u4fa7\u6709\u4e00\u5b9a\u7684\u8981\u6c42\u3002\u5982\uff1a\\n\\n* \u5b89\u5168\u65b9\u9762\uff0c\u8981\u8003\u8651\u7528\u6237\u7684\u53ef\u9760\u6027\u3002\\n* \u66f4\u65b0\u7b56\u7565\uff0c\u89e3\u6790 DNS \u867d\u6709\u73b0\u6210\u7684\u65b9\u6848\uff0c\u4f46\u662f\u5e38\u89c4\u65b9\u6848\u4e00\u822c\u65e0\u6cd5\u63a2\u77e5\u5230\u540e\u7eed\u65b0\u521b\u5efa\u7684\u670d\u52a1\uff0c\u6240\u4ee5\u9700\u8981\u8bbe\u8ba1\u66f4\u65b0\u7b56\u7565\u3002\\n\\n## gRPC \u8d1f\u8f7d\u5747\u8861 - \u670d\u52a1\u4fa7\\n\u670d\u52a1\u4fa7\u7684 gRPC \u8d1f\u8f7d\u5747\u8861\uff0c\u9700\u8981\u5f15\u5165\u4e00\u4e2a\u8d1f\u8f7d\u5747\u8861\u4ee3\u7406\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a `Load Balancer`\uff0c\\n\u7528\u6237\u5411 LB \u53d1\u8d77 RPC \u8bf7\u6c42\uff0c\u7136\u540e\u7531\u8be5 LB \u5c06 RPC \u5206\u914d\u5230\u4e00\u4e2a\u53ef\u7528\u7684\u540e\u7aef\u670d\u52a1\u5668\u4e0a\uff0c\\n\u7531\u8be5\u670d\u52a1\u5668\u63d0\u4f9b gRPC \u670d\u52a1\uff0c\u5e76\u5c06\u8d1f\u8f7d\u60c5\u51b5\u62a5\u544a\u7ed9 LB\uff0c\u8fdb\u4e00\u6b65\u8865\u5168 LB \u7684\u8d1f\u8f7d\u4fe1\u606f\u3002\\n![](server-load-balancer.png)\\n\\n\u5728\u8be5\u65b9\u6848\u4e2d\uff0c\u8d1f\u8f7d\u5747\u8861\u7531 LB \u7edf\u4e00\u7ba1\u7406\uff0c\u6709\u4e00\u5b9a\u7684\u5b9e\u65bd\u96be\u5ea6\u3002  \\n\u9664\u975e\u80fd\u627e\u5230\u9ad8 star \u7684\u5f00\u6e90\u9879\u76ee\uff0c\u4e0d\u7136\u5f00\u53d1\u4e0e\u8fd0\u7ef4\u5c31\u662f\u4e00\u7b14\u4e0d\u5c0f\u7684\u6295\u5165\u3002\\n\\n## \u65b9\u6848\u9009\u62e9\\n\u8003\u8651\u5230\u5b9e\u65bd\u96be\u5ea6\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u7528\u6237\u4fa7\u7684\u8d1f\u8f7d\u5747\u8861\u65b9\u5f0f\u3002\\n\\n**\u9996\u5148\u8981\u89e3\u51b3 DNS \u7684\u89e3\u6790\u4e0e\u8d1f\u8f7d**\uff0c\u8fd9\u4e00\u5757\uff0c\u5b98\u65b9\u5df2\u7ecf\u5c01\u88c5\u4e86 gRPC SDK\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u5347\u7ea7 SDK \u5373\u53ef\u5b9e\u73b0\u8be5\u529f\u80fd\u3002\\n\\n**\u5176\u6b21\u5c31\u662f\u670d\u52a1\u53d1\u73b0\u8fd9\u4e00\u5757\u4e86**\u3002\u89e3\u51b3\u7684\u65b9\u6848\u4e5f\u6709\u4e24\u79cd\uff1a  \\n1\u3001\u670d\u52a1\u7aef\u5b9e\u73b0\uff1aMaxConnectionAge\u3002\u5b9a\u671f\u65ad\u5f00\u8fde\u63a5\uff0c\u4ece\u800c\u89e6\u53d1\u5ba2\u6237\u7aef\u91cd\u89e3\u6790\u3002  \\n2\u3001\u5ba2\u6237\u7aef\u5b9e\u73b0\uff1aKubeResolver\u3002\u5ba2\u6237\u7aef\u63a5\u5165 k8s api \u4ece\u800c\u5b9e\u73b0\u670d\u52a1\u53d1\u73b0\u3002   \\n\\n\\n:::note MaxConnectionAge\\nMaxConnectionAge \u662f gRPC \u670d\u52a1\u7aef\u7684\u53c2\u6570\uff0c\u7528\u4e8e\u6307\u5b9a\u957f\u8fde\u63a5\u6700\u5927\u4fdd\u6301\u65f6\u95f4\u3002  \\n\u914d\u7f6e\u8be5\u53c2\u6570\u4f1a\u4f7f\u5f97\u957f\u8fde\u63a5\u53d8\u6210\u201c\u77ed\u201d\u8fde\u63a5\uff0c\u6545\u6027\u80fd\u4f1a\u6709\u4e00\u5b9a\u7684\u964d\u4f4e\u3002\\n\\n\u8be5\u65b9\u6848\u7684\u539f\u7406\u662f\uff0c\u901a\u8fc7\u5b9a\u671f\u91ca\u653e\u8fde\u63a5\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u91cd\u65b0\u89e3\u6790 DNS \u83b7\u53d6\u6700\u65b0\u7684\u670d\u52a1\u5730\u5740\u3002\\n:::\\n\\n\\n:::note KubeResolver\\n\u8be5\u65b9\u6848\u7684\u539f\u7406\u662f\u901a\u8fc7\u76d1\u542c k8s \u7684 api \u8d44\u6e90\u72b6\u6001\uff0c\u5b9e\u65f6\u83b7\u53d6 gRPC \u670d\u52a1\u8d44\u6e90\u4fe1\u606f\uff0c\u4ece\u800c\u5b9e\u73b0\u68c0\u6d4b\u66f4\u65b0\u3002\\n:::\\n\\n\u7efc\u5408\u8003\u8651\u540e\uff0c\u6700\u7ec8\u9009\u62e9\u4e86 MaxConnectionAge \u65b9\u6848\uff0c\u56e0\u4e3a\u6b64\u65b9\u6848\u4ec5\u4ec5\u901a\u8fc7\u9002\u914d\u53c2\u6570\u5c31\u53ef\u4ee5\u5b8c\u6210\u9884\u671f\u529f\u80fd\uff0c\u867d\u7136\u7565\u663e\u50f5\u786c\uff0c\u4f46\u5b9e\u9645\u4e0a\u6548\u679c\u8fd8\u4e0d\u9519\u3002\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"gRPC \u539f\u7406\u53ca\u4f7f\u7528","metadata":{"permalink":"/docusaurus/blog/2021/12/12/gRPC\u539f\u7406","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-12-gRPC\u539f\u7406/index.md","source":"@site/blog/2021/12-12-gRPC\u539f\u7406/index.md","title":"gRPC \u539f\u7406\u53ca\u4f7f\u7528","description":"\x3c!--","date":"2021-12-12T00:00:00.000Z","formattedDate":"December 12, 2021","tags":[{"label":"gRPC","permalink":"/docusaurus/blog/tags/g-rpc"}],"readingTime":7.36,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"gRPC \u8d1f\u8f7d\u5747\u8861","permalink":"/docusaurus/blog/2021/12/13/gRPC\u8d1f\u8f7d\u5747\u8861"},"nextItem":{"title":"\u5173\u4e8e\u526f\u4e1a\u7684\u4e00\u4e9b\u601d\u8003","permalink":"/docusaurus/blog/2021/12/10/\u5173\u4e8e\u526f\u4e1a\u7684\u4e00\u4e9b\u601d\u8003"}},"content":"\x3c!-- \\nhttps://doc.oschina.net/grpc?t=58008\\nhttps://developers.google.com/protocol-buffers/docs/proto3\\n--\x3e\\n\\nRPC \u662f `Remote Procedure Call` \u7684\u7f29\u5199\uff0c\u5373**\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528**\u3002    \\n\u4e00\u822c RPC \u6846\u67b6\u4f1a\u5c4f\u853d\u5e95\u5c42\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\u548c\u4f20\u8f93\u65b9\u5f0f\uff0c\u8ba9\u670d\u52a1\u8c03\u7528\u8005\u53ef\u4ee5\u50cf\u8c03\u7528\u672c\u5730\u63a5\u53e3\u4e00\u6837\u8c03\u7528\u8fdc\u7a0b\u7684\u670d\u52a1\u3002\\n\\n\u4e1a\u754c\u4e3b\u6d41\u7684 RPC \u6846\u67b6\u4e3b\u8981\u6709\uff1a   \\n1\u3001Google \u7684 gRPC\uff0c\u57fa\u4e8e HTTP2 \u5b9e\u73b0\uff0c\u662f\u652f\u6301\u591a\u8bed\u8a00\u7684 RPC \u6846\u67b6\u3002     \\n2\u3001\u963f\u91cc\u7684 Dubbo\uff0c\u5e95\u5c42\u7531 RPC \u5b9e\u73b0\uff0c\u662f\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u5fae\u670d\u52a1\u6cbb\u7406\u7684\u5206\u5e03\u5f0f\u670d\u52a1\u6846\u67b6\u3002   \\n\\n\u672c\u6587\u4e3b\u8981\u5b66\u4e60 gRPC \u7684\u76f8\u5173\u539f\u7406\u53ca\u5176\u4f7f\u7528\u3002  \\n\\n\x3c!--truncate--\x3e\\n\\n## gRPC \u63ed\u79d8\\n\u8bf4\u5230 gRPC\uff0c\u6211\u4eec\u8111\u6d77\u4e2d\u7b2c\u4e00\u53cd\u5e94\u53ef\u80fd\u5c31\u662f\uff1aGoogle \u51fa\u54c1\uff0c\u5fc5\u5c5e\u7cbe\u54c1~\ud83d\ude03   \\n\u9664\u6b64\u4e4b\u5916\uff0c\u53ef\u80fd\u8fd8\u6709\u4e00\u4e9b\u4f8b\u5982 HTTP2\u3001`protocol buffers` \u7b49\u7c7b\u4f3c\u7684\u5173\u952e\u8bcd\u3002\\n\\n\u867d\u7136\u8bf4\u8111\u6d77\u4e2d\u6709\u5f88\u591a\u5173\u4e8e gRPC \u7684\u63cf\u8ff0\u4e0e\u7279\u70b9\uff0c\u4f46\u603b**\u611f\u89c9\u8bf4\u4e0d\u6e05 gRPC \u5230\u5e95\u662f\u4ec0\u4e48**\u3002\\n\\n\u5176\u5b9e\uff0c\u548c\u5176\u4ed6 RPC \u6846\u67b6\u4e00\u6837\uff0cgRPC \u4e5f\u6709\u4e00\u4e2a\u7406\u5ff5\uff1a       \\n\u5b9a\u4e49\u4e00\u4e2a\u670d\u52a1\uff0c\u6307\u5b9a\u5176\u80fd\u591f\u88ab\u8fdc\u7a0b\u8c03\u7528\u7684\u65b9\u6cd5\u3001\u53c2\u6570\u3001\u54cd\u5e94\u7b49\u3002\\n\u5728\u670d\u52a1\u7aef\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5e76\u8fd0\u884c\u4e00\u4e2a gRPC \u670d\u52a1\u5668\u6765\u5904\u7406\u5ba2\u6237\u7aef\u7684\u8c03\u7528\u3002\\n\u4f7f\u5f97\u5ba2\u6237\u7aef\u80fd\u591f\u50cf\u672c\u5730\u4e00\u6837\u8c03\u7528\u8fdc\u7a0b\u670d\u52a1\u7aef\u7684\u65b9\u6cd5\u3002\\n\\n\u6574\u4f53\u6765\u770b\uff0cgRPC \u5c31\u662f\u4e00\u4e2a RPC \u6846\u67b6\uff0c\u800c\u4e14\u662f\u4e00\u4e2a**\u57fa\u4e8eHTTP2\u3001\u652f\u6301`protocol buffers`\u5e8f\u5217\u5316\u673a\u5236\u3001\u652f\u6301\u591a\u8bed\u8a00\u7684\u3001\u9ad8\u6027\u80fd\u7684\u3001\u9762\u5411\u670d\u52a1\u7aef\u548c\u79fb\u52a8\u7aef**\u7684\u9ad8\u7ea7RPC\u6846\u67b6\u3002\\n\\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u770b\u5230 gRPC \u7684\u6807\u7b7e\u975e\u5e38\u591a\u3002\u90a3\u5b83\u533a\u522b\u4e8e\u5e38\u89c4 RPC \u6846\u67b6\u7684\u4eae\u70b9\u662f\u4ec0\u4e48?\\n\\n\u5982\u679c\u4f60\u7528\u8fc7 gRPC\uff0c\u90a3\u4f60\u4e00\u5b9a\u63a5\u89e6\u8fc7 `.proto` \u6587\u4ef6\uff0c\u8fd9\u662f gRPC \u7684\u4eae\u70b9\u4e4b\u4e00\uff0c\u5373 `protocol buffers` \u673a\u5236\u3002    \\n\\n![](./landing-2.svg)\\n\\n## protocol buffers\\n`protocol buffers` \u662f\u4e00\u79cd\u5e8f\u5217\u5316\u673a\u5236\uff0c\u7c7b\u4f3c JSON\uff0c\u53ea\u662f\u5b83\u66f4\u5c0f\u66f4\u5feb\uff0c\u5e76\u4e14\u4e0e\u751f\u6210\u7684\u672c\u5730\u4ee3\u7801\u7ed1\u5b9a\u3002\\n\\n\u5728\u5b66\u4e60 `protocol buffers` \u4e4b\u524d\uff0c\u5fc5\u987b\u8981\u5148\u5b66\u4e60\u5e76\u4e86\u89e3 proto \u7684\u76f8\u5173\u89c4\u8303\u3002\\n\\n### \u5b9a\u4e49 message\\n\u6240\u8c13\u6d88\u606f\u7c7b\u578b\uff0c\u5373 message \u7c7b\u578b\u3002\\n```proto\\nsyntax = \\"proto3\\";\\n\\nmessage ConstantRequest {\\n  string one = 1;\\n  int32 two = 2;\\n  float three = 3;\\n}\\n```\\n\u5728\u4e0a\u9762\u4ee3\u7801\u4e2d\u53ef\u4ee5\u770b\u5230\uff1a\\n* \u6587\u4ef6\u7b2c\u4e00\u884c\u6307\u5b9a `proto3` \u8bed\u6cd5\uff0c\u6ca1\u6709\u5219\u9ed8\u8ba4\u4f7f\u7528 `proto2`\u8bed\u6cd5\u3002\\n* \u6587\u4ef6\u540e\u9762\u5b9a\u4e49\u4e86\u4e00\u4e2a `ConstantRequest` \u7684\u6d88\u606f\uff0c\u8be5\u6d88\u606f\u6307\u5b9a\u4e86\u4e09\u4e2a\u5b57\u6bb5\uff0c\u6bcf\u4e2a\u5b57\u6bb5\u5305\u62ec\uff1a\u7c7b\u578b\u3001\u540d\u79f0\u3001\u503c\uff0c\u8fd9\u4e09\u4e2a\u5b57\u6bb5\u90fd\u662f**\u6807\u91cf\u5b57\u6bb5**\uff08int\u3001float\u3001bool\u7b49\uff09\u3002\\n\\n\u5728\u5b9a\u4e49\u5b57\u6bb5\u6a21\u5757\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e00\u4e9b\u5f88\u7279\u6b8a\u7684\u5730\u65b9\uff0c\u5c31\u662f\u8fd9\u4e9b\u6570\u5b57\u7f16\u53f7\uff081\u30012\u30013\uff09\u3002      \\n\u5728 proto \u7684\u4e00\u4e2a\u6d88\u606f\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u5b57\u6bb5\u90fd\u5e94\u8be5\u88ab**\u5206\u914d\u4e00\u4e2a\u552f\u4e00\u7684\u7f16\u53f7**\uff0c\u8fd9\u4e9b\u7f16\u53f7\uff0c\u7528\u4e8e\u5728\u4e8c\u8fdb\u5236\u6d88\u606f\u4e2d\u6807\u8bc6\u5e76\u533a\u5206\u5bf9\u5e94\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u7f16\u7801\u5173\u952e\u5b57\u3002\\n\u8005\u5bf9\u4e8e\u90a3\u4e9b\u6709\u7740\u5f88\u957f\u5b57\u6bb5\u7684\u6d88\u606f\u6765\u8bf4\uff0c\u662f\u51cf\u5c0f\u4f53\u79ef\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\\n\\n\u6240\u4ee5\u5b57\u6bb5\u7f16\u53f7\u5728proto\u4e2d\u5f88\u91cd\u8981\uff0c1-15 \u7f16\u7801\u5360\u636e\u4e00\u4e2a\u5b57\u8282\uff0c\u8fd915\u4e2a\u5b57\u6bb5\u5e94\u8be5\u5c3d\u53ef\u80fd\u7684\u5206\u914d\u7ed9\u51fa\u73b0\u8f83\u9891\u7e41\u7684\u6d88\u606f\u5143\u7d20\u3002    \\n\u9664\u6b64\u4e4b\u5916\uff0c\u4e00\u65e6\u6d89\u53ca\u5230\u5b57\u6bb5\u7f16\u7801\u7684\u53d8\u66f4\uff0c\u9700\u8981\u5c24\u5176\u5c0f\u5fc3\uff0c\u4e0d\u7136\u4f1a\u5f15\u8d77\u610f\u60f3\u4e0d\u5230\u7684\u5751\uff0c\u5305\u62ec\u6570\u636e\u635f\u574f\u3001\u9690\u79c1\u9519\u8bef\u7b49\u3002   \\n\\n\u4e00\u822c\u5c3d\u53ef\u80fd\u7684\u907f\u514d\u53d8\u66f4\u5b57\u6bb5\u7f16\u7801\uff0c\u5982\u679c\u771f\u7684\u9700\u8981\u53d8\u66f4\uff0c\u53ef\u4ee5\u91c7\u7528 `reserved` \u5173\u952e\u5b57\u6765\u5904\u7406\u3002\\n```go\\nmessage Foo {\\n  reserved 2, 15, 9 to 11;\\n  reserved \\"foo\\", \\"bar\\";\\n}\\n```\\n\\n### \u5b9a\u4e49 service\\n```go\\nsyntax = \\"proto3\\";\\n\\nservice HelloService {\\n  rpc SayHello (HelloRequest) returns (HelloResponse);\\n}\\n\\nmessage HelloRequest {\\n  required string greeting = 1;\\n}\\n\\nmessage HelloResponse {\\n  required string reply = 1;\\n}\\n```\\n\\n\u670d\u52a1\u7c7b\u578b\u5373 `service` \u7c7b\u578b\u3002\u540c\u65f6\uff0cgRPC \u5141\u8bb8\u4f60\u5b9a\u4e49\u56db\u7c7b\u670d\u52a1\u65b9\u6cd5\uff1a\\n\\n```go title=\\"\u5355\u6b21\u54cd\u5e94\\"\\nrpc SayHello(HelloRequest) returns (HelloResponse){\\n}\\n```\\n\\n```go title=\\"\u670d\u52a1\u7aef\u6d41\u5f0f RPC\\"\\nrpc LotsOfReplies(HelloRequest) returns (stream HelloResponse){\\n}\\n```\\n\\n```go title=\\"\u5ba2\u6237\u7aef\u6d41\u5f0f RPC\\"\\nrpc LotsOfGreetings(stream HelloRequest) returns (HelloResponse) {\\n}\\n```\\n\\n```go title=\\"\u53cc\u5411\u6d41\u5f0f RPC\\"\\nrpc BidiHello(stream HelloRequest) returns (stream HelloResponse){\\n}\\n```\\n\\n### \u5b9a\u4e49 enum\\n\u5728\u5b9a\u4e49\u6d88\u606f\u65f6\uff0c\u6709\u65f6\u5e0c\u671b\u67d0\u5b57\u6bb5\uff0c\u662f\u5c5e\u4e8e\u9884\u5b9a\u4e49\u503c\u4e4b\u4e00\u3002\u8fd9\u65f6\u679a\u4e3e\u5b57\u6bb5\u53ef\u4ee5\u8d77\u5230\u5f88\u597d\u7684\u4f5c\u7528\u3002\\n```go {2,6}\\nmessage SearchRequest {\\n  enum Corpus {\\n    UNIVERSAL = 0;\\n    WEB = 1;\\n    LOCAL = 2;\\n  }\\n  Corpus corpus = 1;\\n}\\n```\\n\\n### \u5b9a\u4e49\u5d4c\u5957\u7c7b\u578b\\n\u5b57\u6bb5\u7c7b\u578b\u53ef\u4ee5\u662f\u5176\u4ed6\u6d88\u606f\u7c7b\u578b\u3002\\n```go {2}\\nmessage SearchResponse {\\n  repeated Result results = 1;\\n}\\n\\nmessage Result {\\n  string url = 1;\\n  string title = 2;\\n  repeated string snippets = 3;\\n}\\n```\\n\\n### \u5b9a\u4e49 repeated\\n\u5728\u6b64\u5904 `repeated` \u5b57\u6bb5\u8868\u793a\u6b64\u5904\u63a5\u6536\u4e00\u4e2a\u6570\u7ec4\u7c7b\u578b\u3002\\n```go {2}\\nmessage SearchResponse {\\n  repeated Result results = 1;\\n}\\n\\nmessage Result {\\n  string url = 1;\\n  string title = 2;\\n  repeated string snippets = 3;\\n}\\n```\\n\\n### \u5b9a\u4e49 any\\n\u4efb\u610f\u7c7b\u578b\u6bd4\u8f83\u7279\u6b8a\uff0c\u9700\u8981\u5bfc\u5165\u5176\u4ed6\u5305\uff1a`google/protobuf/any.proto`\u3002\\n```go {1\uff0c5}\\nimport \\"google/protobuf/any.proto\\";\\n\\nmessage ErrorStatus {\\n  string message = 1;\\n  repeated google.protobuf.Any details = 2;\\n}\\n```\\n\\n### \u5b9a\u4e49 oneof\\n\u5f53\u5b58\u5728\u5305\u542b\u591a\u4e2a\u5b57\u6bb5\u7684\u6d88\u606f\uff0c\u5e76\u4e14\u6700\u591a\u540c\u65f6\u8bbe\u7f6e\u5176\u4e2d\u67d0\u4e00\u4e2a\u5b57\u6bb5\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 oneof \u8282\u7701\u5185\u5b58\u3002\\n```go {2}\\nmessage SampleMessage {\\n  oneof test_oneof {\\n    string name = 4;\\n    string sub_message = 9;\\n  }\\n}\\n```\\n\\n### \u5b9a\u4e49 map\\n```go {2}\\nmessage SampleMessage {\\n  map<string, Project> projects = 3;\\n}\\n\\nmessage Project {\\n  string message = 1;\\n}\\n```\\n\\n### \u5b9a\u4e49 package\\n```go\\noption go_package = \\"pb\\";\\n```\\n\\n## \u751f\u6210\u4ee3\u7801\\n```shell script\\nprotoc --proto_path=IMPORT_PATH --python_out=DST_DIR --go_out=DST_DIR file.proto\\n```\\n* IMPORT_PATH\u6307\u5b9a.proto\u89e3\u6790import\u6307\u4ee4\u65f6\u5728\u5176\u4e2d\u67e5\u627e\u6587\u4ef6\u7684\u76ee\u5f55\u3002\u5982\u679c\u7701\u7565\uff0c\u5219\u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u3002\\n* --proto_path\uff1a\u591a\u6b21\u4f20\u9012\u8be5\u9009\u9879\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\u5bfc\u5165\u76ee\u5f55\u3002\u4ed6\u4eec\u5c06\u88ab\u6309\u987a\u5e8f\u641c\u7d22\u3002\\n    * `-I=IMPORT_PATH` \u662f `--proto_path` \u7684\u7b80\u5199\u5f62\u5f0f\u3002\\n    * IMPORT_PATH \u662f\u6307\u5b9a.proto\u89e3\u6790import\u6307\u4ee4\u65f6\u5728\u5176\u4e2d\u67e5\u627e\u6587\u4ef6\u7684\u76ee\u5f55\u3002\\n* --go_out\uff1a\u751f\u6210 Go \u4ee3\u7801DST_DIR\u3002\\n* --python_out\uff1a\u751f\u6210 Python \u4ee3\u7801DST_DIR\u3002\\n* file.proto\uff1a\u5fc5\u987b\u63d0\u4f9b\u4e00\u4e2a\u6216\u591a\u4e2a.proto\u6587\u4ef6\u4f5c\u4e3a\u8f93\u5165\u3002.proto\u53ef\u4ee5\u4e00\u6b21\u6307\u5b9a\u591a\u4e2a\u6587\u4ef6\u3002\u5c3d\u7ba1\u6587\u4ef6\u662f\u76f8\u5bf9\u4e8e\u5f53\u524d\u76ee\u5f55\u547d\u540d\u7684\uff0c\u4f46\u6bcf\u4e2a\u6587\u4ef6\u5fc5\u987b\u4f4d\u4e8e\u5176\u4e2d\u4e00\u4e2aIMPORT_PATHs \u4e2d\uff0c\u4ee5\u4fbf\u7f16\u8bd1\u5668\u53ef\u4ee5\u786e\u5b9a\u5176\u89c4\u8303\u540d\u79f0\u3002\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"\u5173\u4e8e\u526f\u4e1a\u7684\u4e00\u4e9b\u601d\u8003","metadata":{"permalink":"/docusaurus/blog/2021/12/10/\u5173\u4e8e\u526f\u4e1a\u7684\u4e00\u4e9b\u601d\u8003","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-10-\u5173\u4e8e\u526f\u4e1a\u7684\u4e00\u4e9b\u601d\u8003/index.md","source":"@site/blog/2021/12-10-\u5173\u4e8e\u526f\u4e1a\u7684\u4e00\u4e9b\u601d\u8003/index.md","title":"\u5173\u4e8e\u526f\u4e1a\u7684\u4e00\u4e9b\u601d\u8003","description":"\u6240\u8c13\u526f\u4e1a\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u6253\u591a\u4efd\u5de5...","date":"2021-12-10T00:00:00.000Z","formattedDate":"December 10, 2021","tags":[{"label":"\u4e2a\u4eba","permalink":"/docusaurus/blog/tags/\u4e2a\u4eba"}],"readingTime":7.435,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"gRPC \u539f\u7406\u53ca\u4f7f\u7528","permalink":"/docusaurus/blog/2021/12/12/gRPC\u539f\u7406"},"nextItem":{"title":"Github \u642d\u5efa Docusaurus \u7ad9\u70b9","permalink":"/docusaurus/blog/2021/12/03/Github\u642d\u5efaDocusaurus\u7ad9\u70b9"}},"content":"\u6240\u8c13\u526f\u4e1a\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u6253\u591a\u4efd\u5de5...\\n\\n\u4e00\u5b9a\u8981\u548c\u6253\u5de5\u533a\u522b\u5f00\u6765\u7684\u8bdd\uff0c\u53ef\u80fd\u5c31\u662f\u6211\u4eec\u5982\u4eca\u6240\u8bf4\u7684\u526f\u4e1a\uff0c\u66f4\u591a\u7684\u5e26\u4e0a\u4e86\u5bf9\u4eba\u751f\u89c4\u5212\u7684\u4e00\u4e9b\u601d\u8003\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u77e5\u9053\u60f3\u505a\u4ec0\u4e48\\n\u77e5\u9053\u81ea\u5df1\u60f3\u505a\u4ec0\u4e48\uff0c\u6c38\u8fdc\u662f\u7b2c\u4e00\u6b65\u3002\\n\\n\u6211\u4eec\u5e38\u5e38\u542c\u5230\u522b\u4eba\u9ad8\u8c08\u81ea\u5df1\u7684\\"\u89c4\u5212\\"\uff0c\u5176\u5b9e\\"\u89c4\u5212\\"\u5e76\u4e0d\u795e\u79d8\u3002  \\n\u4f60\u53ef\u4ee5\u628a\u4ed6\u7406\u89e3\u4e3a\u4e00\u4e9b\u7b80\u5355\u7684\u60f3\u6cd5\uff0c\u6216\u8005\u8bf4\u662f\u5bf9\u672a\u6765\u7684\u4e00\u4e9b\u60f3\u6cd5\uff0c\u4ed6\u4eec\u53ef\u4ee5\u662f\u60f3\u505a\u7684\u4e8b\uff0c\u4e5f\u53ef\u4ee5\u662f\u60f3\u53bb\u7684\u5730\u65b9...   \\n\\n\u4f46\u4e8b\u5b9e\u662f\u5f88\u591a\u4eba\u4e0d\u77e5\u9053\u60f3\u505a\u4ec0\u4e48\u3002  \\n\u6211\u4eec\u7684\u7b2c\u4e00\u4efd\u5de5\u4f5c\uff0c\u5f80\u5f80\u548c\u6211\u4eec\u7b2c\u4e00\u5b66\u5386\u4e13\u4e1a\u6302\u94a9\u3002  \\n\u800c\u5927\u5b66\u6bd5\u4e1a\u540e\uff0c\u6bd5\u4e1a\u751f\u771f\u6b63\u77e5\u9053\u81ea\u5df1\u5e94\u8be5\u5e72\u4ec0\u4e48\u7684\uff0c\u5176\u5b9e\u5be5\u5be5\u65e0\u51e0\u3002\u751a\u81f3\u53ef\u80fd\u5de5\u4f5c\u4e24\u4e09\u5e74\u540e\u624d\u7a81\u7136\u9192\u609f\u5e94\u8be5\u8f6c\u6295\u5176\u4ed6\u884c\u4e1a\u3002\\n\\n\u6bd4\u5982\u6211\u672c\u4eba\u662f\u5de5\u7a0b\u7ba1\u7406\u5b66\u4e13\u4e1a\uff0c\u4f46\u6211\u6bd5\u4e1a\u540e\u5c31\u6295\u5165\u5230\u4e86\u4e92\u8054\u7f51\u884c\u4e1a\uff0c\u56e0\u4e3a\u6211\u77e5\u9053\u6211\u4e0d\u559c\u6b22\u8fdb\u5de5\u5382\uff0c\u76f8\u53cd\u6211\u5f88\u559c\u6b22\u8ba1\u7b97\u673a\u7f16\u7a0b\u3002  \\n\u800c\u6211\u7684\u5927\u90e8\u5206\u540c\u5b66\uff0c\u6bd5\u4e1a\u4e24\u4e09\u5e74\u540e\u4e5f\u9646\u9646\u7eed\u7eed\u7684\u8f6c\u884c...\\n\\n\u6240\u4ee5\uff0c\u6211\u89c9\u5f97\u5f88\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u5c31\u662f\u8981\u60f3\u6e05\u695a\u81ea\u5df1\u73b0\u9636\u6bb5\u5230\u5e95\u9700\u8981\u505a\u4ec0\u4e48\u3002    \\n\u4f60\u9700\u8981\u53bb\u5c1d\u8bd5\u505a\u4e00\u4e2a\u51b3\u5b9a\uff0c\u8fd9\u4e5f\u8bb8\u8fd9\u4e0d\u662f\u4e00\u4e2a\u957f\u671f\u7684\u51b3\u5b9a\uff0c\u4f46\u662f\u5b83\u5e94\u8be5\u662f\u73b0\u9636\u6bb5\u4f60\u80fd\u591f\u7a33\u5b9a\u6295\u5165\u7cbe\u529b\u7684\u4e00\u4e2a\u51b3\u5b9a\u3002\\n\\n\u8fd9\u4e2a\u65f6\u5019\uff0c\u4e5f\u4e0d\u9700\u8981\u8003\u8651\u4ec0\u4e48\u4e3b\u4e1a\u526f\u4e1a\uff0c\u80fd\u505a\u597d\u4e00\u4ef6\u5c31\u5df2\u7ecf\u5f88\u4e86\u4e0d\u8d77\u4e86\u3002\\n\\n\\n## \u4e3a\u4ec0\u4e48\u9700\u8981\u526f\u4e1a\\n\u90a3\u4e3a\u4ec0\u4e48\u73b0\u5728\u53c8\u6709\u8fd9\u4e48\u591a\u4eba\u9009\u62e9\u526f\u4e1a\u5462\uff1f\\n\\n\u4ee5\u6211\u81ea\u5df1\u7684\u60c5\u51b5\u6765\u8bf4\uff0c\u6beb\u65e0\u7591\u95ee\uff0c\u662f\u5178\u578b\u7684\u5c5e\u4e8e\u9700\u8981\u4f9d\u9760\u6253\u5de5\u6765\u7ef4\u6301\u751f\u8ba1\u7684\u7fa4\u4f53\u3002\u4e2a\u4eba\u7761\u540e\u6536\u5165\u7eaf\u9760\u94f6\u884c\u5229\u606f\uff0c\u5de5\u4f5c\u7684\u672c\u8d28\u662f\u4e3a\u4e86\u6df7\u53e3\u996d\u5403\u3002   \\n\u5f53\u7136\u6211\u6ca1\u6709\u526f\u4e1a\uff0c\u56e0\u4e3a\u4e92\u8054\u7f51\u5e76\u4e0d\u7b97\u7279\u522b\u8f7b\u677e\uff0c\u6211\u4e2a\u4eba\u65f6\u95f4\u4e5f\u5e76\u4e0d\u662f\u5f88\u5145\u88d5\uff0c\u5f88\u96be\u82b1\u65f6\u95f4\u53bb\u6253\u7b2c\u4e8c\u4efd\u5de5\u3002\\n\u51b5\u4e14\u4e92\u8054\u7f51\u6536\u5165\u76f8\u5bf9\u6765\u8bf4\u662f\u53ef\u4ee5\u7684\u3002   \\n\\n\u7136\u800c\uff0c\u8fd9\u4e00\u5207\u5728\u6211\u4e70\u623f\u4e4b\u540e\u5c31\u6539\u53d8\u4e86...  \\n\u8bd5\u60f3\uff0c\u5f53\u4f60\u7684\u4e00\u534a\u751a\u81f3\u4e00\u5927\u534a\u6536\u5165\uff0c\u5168\u90e8\u7528\u4e8e\u8fd8\u8d37\u4e86\uff0c\u8fd8\u5f97\u8fd8\u4e09\u5341\u5e74\uff0c\u4e00\u80a1\u6709\u5f62\u7684\u538b\u529b\u77ac\u95f4\u538b\u5f97\u4eba\u5598\u4e0d\u8fc7\u6c14\u6765\u3002  \\n\\n\u6240\u4ee5\u5e76\u4e0d\u662f\u6211\u5f88\u95f2\uff0c\u95f2\u7684\u8981\u53bb\u627e\u4e00\u4efd\u526f\u4e1a\u6765\u5145\u5b9e\u81ea\u5df1\uff0c\u800c\u662f\u6211\u5f88\u9700\u8981\u7b2c\u4e8c\u4efd\u6536\u5165\u6765\u5145\u5b9e\u81ea\u5df1...  \\n\u73b0\u5728\u793e\u4f1a\u5927\u73af\u5883\u53c8\u4e0d\u597d\uff0c\u5de5\u8d44\u8fc7\u4e07\uff0c\u4f60\u53ef\u4ee5\u6253\u8d25\u5168\u56fd\u4e00\u534a\u4ee5\u4e0a\u7684\u6253\u5de5\u7fa4\u4f53\uff0c\u4f46\u5728\u4e00\u4e8c\u7ebf\u57ce\u5e02\u7684\u623f\u4ef7\u7269\u4ef7\u9762\u524d\uff0c\u5c31\u662f\u4e2a\u5c41\u3002\\n\\n\u6240\u4ee5\uff0c\u6211\u60f3\u5230\u7684\u80fd\u575a\u6301\u53d1\u5c55\u526f\u4e1a\u7684\u4eba\u7fa4\uff1a  \\n**1\u3001**\u5165\u4e0d\u6577\u51fa\u3002   \\n**2\u3001**\u95f2\u4e0d\u4e0b\u6765\u3002   \\n**3\u3001**\u4e2a\u4eba\u7231\u597d\u3002    \\n\\n\u5927\u90e8\u5206\u4eba\u5e94\u8be5\u662f\u5c5e\u4e8e\u7b2c\u4e00\u7c7b\u5427... \u4f46\u6574\u4f53\u6765\u770b\uff0c\u6211\u89c9\u5f97\u65f6\u95f4\u548c\u7cbe\u529b\u624d\u662f\u6700\u7ec8\u843d\u5730\u6267\u884c\u7684\u51b3\u5b9a\u56e0\u7d20\u3002  \\n\u56e0\u4e3a\u8fc7\u4e8e\u900f\u652f\u81ea\u5df1\u7684\u751f\u547d\u6362\u6765\u7684\u8d22\u5bcc\uff0c\u5c06\u662f\u4e00\u7b14\u65e0\u6cd5\u507f\u8fd8\u7684\u9ad8\u5229\u8d37\u3002  \\n\\n## \u8ba4\u77e5\u81ea\u5df1\u7684\u5de5\u4f5c\u9636\u6bb5\\n\u5f53\u4f60\u6709\u53d1\u5c55\u526f\u4e1a\u7684\u60f3\u6cd5\u65f6\uff0c\u6211\u8fd8\u662f\u5efa\u8bae\u5148\u68b3\u7406\u4e0b\u4f60\u81ea\u5df1\u5f53\u524d\u7684\u5de5\u4f5c\u60c5\u51b5\uff0c\u5bf9\u4e8e\u4e00\u4efd\u7a33\u5b9a\u7684\u5de5\u4f5c\uff0c\u5e94\u8be5\u5927\u81f4\u671d\u7740\u8fd9\u4e2a\u9636\u6bb5\u65b9\u5411\u53d1\u5c55\uff1a  \\n\\n* **\u79ef\u7d2f\u9636\u6bb5**\\n\\n\u4e00\u822c\u6307\u4e00\u4e9b\u521a\u5165\u884c\u7684\u540c\u5b66\uff0c\u5728\u8fd9\u4e2a\u9636\u6bb5\u4ed6\u4eec\u9700\u8981\u53bb\u79ef\u7d2f\u4e00\u4e9b\u5de5\u4f5c\u7ecf\u9a8c\u3002\\n\\n\u5904\u4e8e\u8fd9\u4e2a\u9636\u6bb5\u65f6\uff0c\u4f1a\u6709\u4e00\u4e9b\u6bd4\u8f83\u660e\u663e\u7684\u7279\u70b9\u3002  \\n\u6bd4\u5982\u4f60\u7684\u7b80\u5386\u4e0a\u9762\uff0c\u53ef\u80fd\u9700\u8981\u7f16\u9020\u5927\u91cf\u6280\u80fd\u548c\u9879\u76ee\u7ecf\u9a8c\uff0c\u4ee5\u4fbf\u901a\u8fc7 HR \u7684\u7b5b\u9009\u3002\\n\u4e00\u65e6\u9762\u8bd5\u88ab\u4eba\u8ffd\u7740\u95ee\u7ec6\u8282\u65f6\uff0c\u5c31\u4f1a\u66b4\u9732\u3002\\n\\n\\n* **\u74f6\u9888\u9636\u6bb5**\\n\\n\u4e00\u822c\u6307\u5728\u67d0\u4e2a\u9886\u57df\u6709\u8db3\u591f\u7684\u7ecf\u9a8c\u3002\\n\\n\u5904\u4e8e\u8fd9\u4e2a\u9636\u6bb5\uff0c\u4f60\u53ef\u80fd\u4e0d\u5728\u9700\u8981\u6295\u9012\u7b80\u5386\u5c31\u80fd\u5f88\u8f7b\u677e\u7684\u627e\u5230\u4e00\u4efd\u5de5\u4f5c\u3002\\n\u5982\u679c\u5de5\u4f5c\u4e0d\u5f00\u5fc3\uff0c\u4f60\u4e5f\u5f88\u81ea\u4fe1\u53ef\u4ee5\u5f88\u5feb\u627e\u5230\u53e6\u4e00\u4efd\u5de5\u4f5c\uff0c\u867d\u7136\u627e\u7684\u4e0d\u4e00\u5b9a\u66f4\u597d\uff0c\u4f46\u4e0d\u7528\u62c5\u5fc3\u5931\u4e1a\u95ee\u9898\u3002\\n\\n\\n* **\u6ea2\u51fa\u9636\u6bb5**\\n\\n\u4e00\u822c\u6307\u5728\u67d0\u4e2a\u9886\u57df\u6709\u8db3\u591f\u7ecf\u9a8c\uff0c\u5728\u516c\u53f8\u4e5f\u5904\u4e8e\u4e2d\u9ad8\u5c42\u3002\\n\\n\u4f60\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u83b7\u53d6\u5de5\u4f5c\u4e4b\u5916\u7684\u62a5\u916c\uff0c\u6bd4\u5982\u516c\u53f8\u5206\u7ea2\u7b49\u3002\\n\\n\\n\u4e0d\u662f\u6240\u6709\u7684\u5de5\u4f5c\u90fd\u7b26\u5408\u8fd9\u4e09\u4e2a\u9636\u6bb5\uff0c\u4f46\u4e5f\u53ef\u4ee5\u5927\u81f4\u6bd4\u7167\u7740\u770b\u770b\u81ea\u5df1\u5e94\u8be5\u5904\u4e8e\u4ec0\u4e48\u9636\u6bb5\uff0c\u5bf9\u4e8e\u5904\u4e8e\u7b2c\u4e00\u9636\u6bb5\u7684\u540c\u5b66\uff0c\u6211\u5efa\u8bae\u8fd8\u662f\u5148\u6295\u5165\u7cbe\u529b\u5904\u7406\u597d\u81ea\u5df1\u7684\u5de5\u4f5c\uff0c\u5728\u8003\u8651\u53d1\u5c55\u5176\u4ed6\u526f\u4e1a\u3002\\n\\n## \u5173\u4e8e\u526f\u4e1a\u7684\u601d\u8003 - \u7ed9\u81ea\u5df1\\n> \u4e0d\u80fd\u76f2\u76ee\u8ddf\u98ce\uff01\\n\\n\u4e0d\u7ba1\u8fd9\u53e5\u8bdd\u9002\u4e0d\u9002\u7528\u4e8e\u6240\u6709\u9886\u57df\uff0c\u4f46\u5b83\u4e00\u76f4\u90fd\u662f\u6211\u957f\u671f\u4ee5\u6765\u575a\u4fe1\u7684\u3002\u867d\u7136\u6211\u5f88\u773c\u70ed\u80fd\u53d1\u5c55\u526f\u4e1a\u7684\u540c\u5b66\u4eec\uff0c\u4f46\u6bd4\u8d77\u76f2\u76ee\u53d1\u5c55\u526f\u4e1a\uff0c\u6211\u89c9\u5f97\u6211\u5e94\u8be5\u5148\u8ba4\u6e05\u81ea\u5df1\u7684\u60c5\u51b5\u3002\\n\\n\u9996\u5148\u6709\u5f88\u591a\u53d1\u5c55\u526f\u4e1a\u7684\u4eba\u90fd\u662f\u4e8b\u4e1a\u7f16\u5236\uff0c\u4ed6\u4eec\u76f8\u5bf9\u6765\u8bf4\u4e2a\u4eba\u65f6\u95f4\u6bd4\u8f83\u5145\u88d5\u3002  \\n\u800c\u4e92\u8054\u7f51\uff0c\u662f\u4e00\u4e2a\u65b0\u5174\u6280\u672f\u9891\u7e41\u66f4\u66ff\u7684\u884c\u4e1a\uff0c\u4e5f\u662f\u52a0\u73ed\u4e25\u91cd\u7684\u884c\u4e1a\u4e4b\u4e00\uff0c\u6211\u65f6\u5e38\u4e5f\u611f\u89c9\u81ea\u5df1\u4e2a\u4eba\u65f6\u95f4\u4e0d\u662f\u5f88\u5145\u88d5\u3002\\n  \\n\u5176\u6b21\uff0c\u6709\u90e8\u5206\u725b\u4eba\u8fbe\u5230\u4e86\u5de5\u4f5c\u7684 **\u74f6\u9888\u9636\u6bb5** \u751a\u81f3\u662f **\u6ea2\u51fa\u9636\u6bb5**\uff0c\u4ed6\u4eec\u6709\u80fd\u529b\u3001\u6709\u8d44\u6e90\u53bb\u6267\u884c\u526f\u4e1a\u8ba1\u5212\u3002  \\n\u800c\u6211\uff0c\u83dc\u9e1f\u4e00\u4e2a\uff0c\u77ed\u65f6\u95f4\u5185\u662f\u5f88\u96be\u96c4\u8d77\u4e86...\\n\\n\u8fd9\u6837\u4e00\u770b\uff0c\u6211\u662f\u5b8c\u5168\u4e0d\u9002\u5408\u53d1\u5c55\u526f\u4e1a\u7684\u4e86...\\n\\n\u57fa\u4e8e\u8fd9\u79cd\u80cc\u666f\uff0c\u7ed9\u81ea\u5df1\u4e00\u4e9b\u5efa\u8bae\uff1a    \\n1\u3001**\u591a\u6574\u7406\u5e76\u603b\u7ed3\u81ea\u5df1\u7684\u7b14\u8bb0\u3002**       \\n2\u3001**\u6574\u7406\u6587\u6863\u65f6\uff0c\u4f18\u5316\u4e0b\u81ea\u5df1\u7684\u6587\u7b14\uff0c\u4e0d\u8981\u4e71\u7cdf\u7cdf\u4e86\u4e8b\uff0c\u800c\u5e94\u8be5\u5c1d\u8bd5\u7ed9\u522b\u4eba\u8bb2\u8ff0\u6e05\u695a\u3002**      \\n\\n\\n\u8bf4\u5230\u5e95\uff0c\u77ed\u671f\u8fd8\u662f\u53ea\u80fd\u63d0\u5347\u8f6f\u5b9e\u529b\u4e86\u3002\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg   \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"Github \u642d\u5efa Docusaurus \u7ad9\u70b9","metadata":{"permalink":"/docusaurus/blog/2021/12/03/Github\u642d\u5efaDocusaurus\u7ad9\u70b9","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/12-03-Github\u642d\u5efaDocusaurus\u7ad9\u70b9/index.md","source":"@site/blog/2021/12-03-Github\u642d\u5efaDocusaurus\u7ad9\u70b9/index.md","title":"Github \u642d\u5efa Docusaurus \u7ad9\u70b9","description":"\u672c\u6587\u7ae0\u8bb0\u5f55\u57fa\u4e8e Docusaurus \u642d\u5efa\u9759\u6001\u7ad9\u70b9\uff0c\u5e76\u901a\u8fc7 Github-Actions \u5b9e\u73b0\u81ea\u52a8\u90e8\u7f72\u3002","date":"2021-12-03T00:00:00.000Z","formattedDate":"December 3, 2021","tags":[{"label":"docusaurus","permalink":"/docusaurus/blog/tags/docusaurus"}],"readingTime":3.705,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u5173\u4e8e\u526f\u4e1a\u7684\u4e00\u4e9b\u601d\u8003","permalink":"/docusaurus/blog/2021/12/10/\u5173\u4e8e\u526f\u4e1a\u7684\u4e00\u4e9b\u601d\u8003"},"nextItem":{"title":"\u5173\u4e8e\u534f\u7a0b\u7684\u4e00\u4e9b\u7406\u89e3","permalink":"/docusaurus/blog/2021/11/27/\u5173\u4e8e\u534f\u7a0b\u7684\u4e00\u4e9b\u7406\u89e3"}},"content":"\u672c\u6587\u7ae0\u8bb0\u5f55\u57fa\u4e8e Docusaurus \u642d\u5efa\u9759\u6001\u7ad9\u70b9\uff0c\u5e76\u901a\u8fc7 Github-Actions \u5b9e\u73b0\u81ea\u52a8\u90e8\u7f72\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## 1\u3001\u65b0\u5efa Github \u4ed3\u5e93\\n\u9996\u5148\uff0c\u767b\u5f55[Github\u4ed3\u5e93\u521b\u5efa\u9875\u9762](https://github.com/new)\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u7a7a\u767d\u4ed3\u5e93\uff0c\u9879\u76ee\u540d\u547d\u540d\u4e3a `testDocusaurus`\u3002\\n\\n\u7136\u540e\u901a\u8fc7 `git` \u5c06\u4ed3\u5e93\u62c9\u53d6\u5230\u672c\u5730\uff0c\u81f3\u6b64\uff0c\u6211\u4eec\u62e5\u6709\u4e86\u4e00\u4e2a\u5168\u65b0\u7684\u7a7a\u767d\u4ed3\u5e93 `testDocusaurus`\u3002  \\n\\n![](gitindex.png)\\n\\n## 2\u3001\u521d\u59cb\u5316 Docusaurus \u9879\u76ee\\n> [Docusaurus\u9879\u76ee\u521d\u59cb\u5316\u7ec6\u8282\u8bf7\u53c2\u8003\u5b98\u65b9\u6587\u6863](https://docusaurus.io/zh-CN/docs/installation)\\n\\n\u8fdb\u5165\u5230\u4ed3\u5e93 `testDocusaurus` \u6240\u5728\u7684\u7a7a\u767d\u76ee\u5f55\uff0c\u5e76\u5728\u6b64\u76ee\u5f55\u6253\u5f00\u7ec8\u7aef\u754c\u9762\u3002\\n\\n\u4e3a\u4e86\u66f4\u597d\u7684\u5b8c\u6210\u63a5\u4e0b\u6765\u7684\u6b65\u9aa4\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u9884\u5148\u5b89\u88c5**nodejs**\u3002\u5728\u6b64\uff0c\u5047\u8bbe\u4f60\u5df2\u7ecf\u51c6\u5907\u5b8c\u6bd5\u3002  \\n\u90a3\u6211\u4eec\u63a5\u4e0b\u6765\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\u521d\u59cb\u5316\u4e00\u4e2a `Docusaurus` \u9879\u76ee\u3002\\n```shell script\\n>>> npx create-docusaurus@latest website classic\\n...\\n...\\nSuccessfully created \\"website\\".\\nInside that directory, you can run several commands:\\n\\n  npm start\\n    Starts the development server.\\n\\n  npm run build\\n    Bundles your website into static files for production.\\n\\n  npm run serve\\n    Serves the built website locally.\\n\\n  npm deploy\\n    Publishes the website to GitHub pages.\\n\\nWe recommend that you begin by typing:\\n\\n  cd website\\n  npm start\\n\\nHappy building awesome websites!\\n```\\n\\n\u8be5\u6307\u4ee4\u8fd0\u884c\u5b8c\u540e\uff0c\u4f1a\u8f93\u51fa\u4e00\u4e9b\u7b80\u5355\u7684\u8fd0\u884c\u6307\u4ee4\uff0c\u800c\u4e14\u6211\u4eec\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a `website` \u7684\u76ee\u5f55\uff0c\u6211\u4eec\u5148\u5c06\u91cc\u9762\u7684\u5185\u5bb9\u526a\u8d34\u51fa\u6765\uff0c\u653e\u5230\u6211\u4eec\u7a7a\u767d\u4ed3\u5e93\u76ee\u5f55\u4e0b\u9762\u3002\\n\\n\u6b64\u65f6\uff0c\u6211\u4eec\u6309\u7167\u63d0\u793a\uff0c\u8fd0\u884c `npm start` \u6307\u4ee4\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd0\u884c\u6b64\u9879\u76ee\u3002\\n\\n\u901a\u5e38\u542f\u52a8\u7aef\u53e3\u4e3a3000\uff0c\u5219\u9ed8\u8ba4\u8def\u5f84\u4e3a\uff1ahttp://localhost:3000/  \\n\\n![](websiteindex.png)\\n\\n## 3\u3001\u642d\u5efa Github Actions\\n> Github Actions\u90e8\u7f72\u7ec6\u8282\u53c2\u8003[\u5b98\u65b9\u6587\u6863](https://docusaurus.io/zh-CN/docs/deployment#deploying-to-github-pages)\\n\\n\u63a5\u5165 `Github Actions` \u9700\u8981\u521b\u5efa\u4e00\u5bf9\u65b0\u7684 **SSH Key**\uff0c\u5e76\u5c06\u516c\u94a5\u548c\u5bc6\u94a5\u5747\u914d\u7f6e\u5230 Github\uff0c\u6211\u4eec\u6765\u5177\u4f53\u770b\u4e0b\u64cd\u4f5c\u3002\\n\\n\u9996\u5148\u521b\u5efa\u5bc6\u94a5\uff0c\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u65b0\u7684\u76ee\u5f55\uff0c\u7136\u540e\u5f97\u5230\u516c\u94a5\uff08id_rsa.pub\uff09\u548c\u79c1\u94a5\uff08id_rsa\uff09\\n```shell script\\n>>> ssh-keygen -t rsa -C \\"email\\"\\n...\\n...\\nThe key\'s randomart image is:\\n+---[RSA 3072]----+\\n| .=oo*=o=o.      |\\n| o+.=o==.o       |\\n|  .O.O=+o        |\\n|  ..=o@.oo       |\\n| . o +.+S+..     |\\n|  . + . E.o      |\\n|   o . .         |\\n|  .              |\\n|                 |\\n+----[SHA256]-----+\\n```\\n\\n\u6211\u4eec\u6253\u5f00\u4ed3\u5e93\u7684 `deploy keys`\uff0c\u9009\u62e9\u65b0\u589e\uff0c\u5c06 `id_rsa.pub` \u4e2d\u7684\u5185\u5bb9\u590d\u5236\u8fdb\u53bb\uff0c\u5e76\u9009\u4e2d `Allow write access` \u6846\uff0c\u8868\u793a\u8d4b\u4e88\u90e8\u7f72\u5199\u6743\u9650\u3002\\n![](deploykey.png)\\n\\n\u6b64\u65f6\u90e8\u7f72\u516c\u94a5\u5df2\u7ecf\u5b8c\u6210\uff0c\u6211\u4eec\u518d\u5c06\u79c1\u94a5\u4e5f\u914d\u7f6e\u4e0a\u3002\u6253\u5f00\u540c\u7ea7\u914d\u7f6e\u4e0b\u7684 Secret\uff0c\u9009\u62e9\u65b0\u589e\u5bc6\u94a5\uff0c\\n\u6211\u4eec\u5c06\u79c1\u94a5\u5185\u5bb9\u590d\u5236\u5230 `Value` \u4e2d\uff0c\u800c `Name` \u586b\u5199 `GH_PAGES_DEPLOY` \u5373\u53ef\u3002\\n\\n\u6700\u540e\uff0c\u6211\u4eec\u521b\u5efa `Github Actions`\uff0c\u5c06\u6a21\u677f\u590d\u5236\u8fdb\u53bb\uff0c\u5219\u6574\u4e2a\u6d41\u6c34\u7ebf\u5c31\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86\u3002\u590d\u5236\u65f6\uff0c\u5c06\u5bf9\u5e94\u7684\u57fa\u7840\u914d\u7f6e\u6539\u4e0b\u5373\u53ef\uff0c\u5982\u4e0b\uff1a\\n```shell script\\ngit config --global user.email \\"email\\"\\ngit config --global user.name \\"name\\"\\n```\\n\u8fd9\u91cc\u7684 `email` \u9700\u8981\u662f github \u914d\u7f6e\u7684 email\uff0c\u800c `name` \u5219\u662f github \u7528\u6237\u540d\u3002\\n\\n## 4\u3001\u66f4\u65b0\u4ed3\u5e93\uff0c\u5c1d\u8bd5\u81ea\u52a8\u90e8\u7f72\\n\\n\u786e\u4fdd Github Pages \u5df2\u7ecf\u521d\u59cb\u5316\u597d\uff0c\u90a3\u4e48\u6211\u4eec\u5f80\u4ed3\u5e93\u63a8\u9001\u4fee\u6539\u65f6\uff0c\u5c31\u53ef\u4ee5\u89e6\u53d1\u81ea\u52a8\u90e8\u7f72\u4e86\u3002\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"\u5173\u4e8e\u534f\u7a0b\u7684\u4e00\u4e9b\u7406\u89e3","metadata":{"permalink":"/docusaurus/blog/2021/11/27/\u5173\u4e8e\u534f\u7a0b\u7684\u4e00\u4e9b\u7406\u89e3","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/11-27-\u5173\u4e8e\u534f\u7a0b\u7684\u4e00\u4e9b\u7406\u89e3/index.md","source":"@site/blog/2021/11-27-\u5173\u4e8e\u534f\u7a0b\u7684\u4e00\u4e9b\u7406\u89e3/index.md","title":"\u5173\u4e8e\u534f\u7a0b\u7684\u4e00\u4e9b\u7406\u89e3","description":"\u4ee5\u4e0b\u573a\u666f\u5747\u4ee5\u5355\u6838 cpu \u4e3a\u4f8b\u3002","date":"2021-11-27T00:00:00.000Z","formattedDate":"November 27, 2021","tags":[{"label":"\u8ba1\u7b97\u673a\u57fa\u7840","permalink":"/docusaurus/blog/tags/\u8ba1\u7b97\u673a\u57fa\u7840"}],"readingTime":1.655,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"Github \u642d\u5efa Docusaurus \u7ad9\u70b9","permalink":"/docusaurus/blog/2021/12/03/Github\u642d\u5efaDocusaurus\u7ad9\u70b9"},"nextItem":{"title":"golang interface \u5751\u70b9","permalink":"/docusaurus/blog/2021/11/20/golang-interface\u5751\u70b9"}},"content":"\x3c!--truncate--\x3e\\n\\n\\n\u4ee5\u4e0b\u573a\u666f\u5747\u4ee5\u5355\u6838 cpu \u4e3a\u4f8b\u3002\\n\\n#### \u5e76\u53d1\\n\u903b\u8f91\u4e0a\u540c\u65f6\u5904\u7406\u4efb\u52a1\u7684\u80fd\u529b\u3002\\n\\ncpu \u5728\u77ed\u65f6\u95f4\u5185\u6765\u56de\u6267\u884c\u591a\u4e2a\u4efb\u52a1\uff0c\u4f7f\u5f97\u8fd9\u4e9b\u4efb\u52a1\u770b\u4e0a\u53bb\u662f\u540c\u4e00\u65f6\u95f4\u8fdb\u884c\u7684\u3002  \\n\u8fd9\u79cd\u5b8f\u89c2\u610f\u4e49\u4e0a\u662f\u540c\u65f6\u6267\u884c\uff0c\u5fae\u89c2\u4e0a\u4ecd\u7136\u662f\u987a\u5e8f\u6267\u884c\u7684\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u5e76\u53d1\u3002\\n\\n#### \u5e76\u884c\\n\u7269\u7406\u4e0a\u540c\u4e00\u65f6\u523b\u5904\u7406\u4e0d\u540c\u4efb\u52a1\u3002\\n\\n\u5f53\u7cfb\u7edf\u5b58\u5728\u591a\u6838 cpu\uff0c\u4f7f\u5f97\u4efb\u52a1\u53ef\u4ee5\u540c\u4e00\u65f6\u523b\u6267\u884c\uff0c\u79f0\u4e4b\u4e3a\u5e76\u884c\u3002\\n\\n#### \u8fdb\u7a0b\\n\u8fdb\u7a0b\u662f\u8ba1\u7b97\u673a\u8d44\u6e90\u5206\u914d\u7684\u57fa\u672c\u5355\u4f4d\u3002  \\n\\n\u56e0\u4e3a cpu \u5728\u591a\u4efb\u52a1\u4e4b\u95f4\u5207\u6362\u65f6\uff0c\u5982\u679c\u4e0d\u6b63\u786e\u4fdd\u5b58\u4e0a\u4e00\u4e2a\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\u72b6\u6001\uff0c\u90a3\u4e48\u4e0b\u6b21\u6267\u884c\u65f6\u5c31\u4f1a\u4e22\u5931\u8fd9\u4e2a\u4efb\u52a1\u7684\u6267\u884c\u4fe1\u606f\u3002   \\n\u8fdb\u7a0b\u5c31\u662f\u7528\u6765\u5b9a\u4e49\u4efb\u52a1\u53ca\u5176\u8d44\u6e90\u8fb9\u754c\u3002\\n\\n#### \u7ebf\u7a0b\\n\u7ebf\u7a0b\u662f cpu \u8c03\u5ea6\u7684\u57fa\u672c\u5355\u4f4d\u3002\\n\\n\\n#### \u534f\u7a0b\\n\u534f\u7a0b\u662f\u7528\u6237\u6001\u7684\u8f7b\u91cf\u7ea7\u7ebf\u7a0b\u3002\\n\\n\u534f\u7a0b\u62e5\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a  \\n1\u3001\u8c03\u5ea6\u7531\u7528\u6237\u63a7\u5236\u3002\u5373\u5728\u7528\u6237\u6001\u800c\u975e\u5185\u6838\u6001\u5b8c\u6210\u534f\u7a0b\u95f4\u7684\u8c03\u5ea6\u3002 \\n2\u3001\u66f4\u8f7b\u91cf\u3002\u521b\u5efa\u4e00\u4e2a\u534f\u7a0b\u4ec5\u9700\u8981\u5f88\u5c0f\u7684\u7a7a\u95f4\u3002   \\n3\u3001\u534f\u7a0b\u62e5\u6709\u81ea\u5df1\u7684\u5bc4\u5b58\u5668\u4e0a\u4e0b\u6587\u548c\u6808\u7a7a\u95f4\u3002   \\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg\\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d\\n:::"},{"id":"golang interface \u5751\u70b9","metadata":{"permalink":"/docusaurus/blog/2021/11/20/golang-interface\u5751\u70b9","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/11-20-golang-interface\u5751\u70b9/index.md","source":"@site/blog/2021/11-20-golang-interface\u5751\u70b9/index.md","title":"golang interface \u5751\u70b9","description":"\u5751\u70b9\uff1ainterface == nil","date":"2021-11-20T00:00:00.000Z","formattedDate":"November 20, 2021","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"}],"readingTime":1.3,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"\u5173\u4e8e\u534f\u7a0b\u7684\u4e00\u4e9b\u7406\u89e3","permalink":"/docusaurus/blog/2021/11/27/\u5173\u4e8e\u534f\u7a0b\u7684\u4e00\u4e9b\u7406\u89e3"},"nextItem":{"title":"golang \u5207\u7247\u5751\u70b9","permalink":"/docusaurus/blog/2021/11/19/golang\u5207\u7247\u5751\u70b9"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u5751\u70b9\uff1ainterface == nil\\n```go\\nvar v interface{}\\nfmt.Println(v == nil)\\nv = (*int)(nil)\\nfmt.Println(v == nil)\\n```\\n\u8fd9\u662f\u4e00\u6bb5\u7b80\u5355\u7684\u4ee3\u7801\uff0c\u6211\u4eec\u6765\u770b\u4e0b\u5b83\u7684\u8f93\u51fa\u7ed3\u679c\uff1a  \\n```text\\ntrue\\nfalse\\n```\\n\\n\u8fd9\u662f\u4e00\u4e2a\u5751\u70b9\uff0c\u5728 code \u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5e38\u5e38\u8ba4\u4e3a interface \u88ab\u8d4b\u503c\u4e86\u4e00\u4e2a\u7a7a\u503c nil\uff0c\u518d\u505a\u5224\u65ad\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u548c nil \u505a\u5bf9\u6bd4\u3002   \\n\u663e\u7136\u8fd9\u662f\u9519\u8bef\u7684\uff0c\u8fd9\u6837\u4f1a\u5f97\u5230\u4e0e\u6211\u4eec\u9884\u671f\u4e0d\u7b26\u7684\u7ed3\u679c\u3002 \\n\\n\u8fd9\u662f\u56e0\u4e3a interface \u5e76\u4e0d\u662f\u4e00\u4e2a\u6307\u9488\u7c7b\u578b\uff0c\u800c\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u7ed3\u6784\u4f53\uff0c\u5185\u90e8\u5305\u542b\u4e86\u4e24\u7c7b\u6570\u636e\u7ed3\u6784\uff1a**\u7c7b\u578b** \u548c **\u503c**\u3002  \\n\u6240\u4ee5\u5728\u4e0a\u9762\u7684\u5224\u65ad\u4e2d\uff0c\u9700\u8981\u7c7b\u578b\u548c\u503c\u90fd\u4e3a nil \u7684\u662f\u5426\u624d\u4f1a\u5224\u65ad\u6b63\u786e\u3002  \\n\u4e00\u65e6\u5bf9 interface \u8d4b\u4e88\u4e86\u67d0\u4e2a\u7c7b\u578b\u6216\u8005\u503c\uff0c\u5373\u4fbf\u662f\u7a7a\u503c\uff0c\u5f53\u518d\u6b21\u8fdb\u884c\u5224\u65ad\u65f6\uff0c\u4e5f\u4f1a\u51fa\u73b0\u4ee4\u4eba\u56f0\u60d1\u7684\u573a\u666f\u3002   \\n\\n\\n\u9488\u5bf9\u8fd9\u79cd\u573a\u666f\uff0c\u4e00\u822c\u6b63\u786e\u7684\u65b9\u5f0f\u662f\u8c03\u7528 reflect \u53cd\u5c04\u5305\u8fdb\u884c\u5224\u65ad\u3002\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"golang \u5207\u7247\u5751\u70b9","metadata":{"permalink":"/docusaurus/blog/2021/11/19/golang\u5207\u7247\u5751\u70b9","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/11-19-golang\u5207\u7247\u5751\u70b9/index.md","source":"@site/blog/2021/11-19-golang\u5207\u7247\u5751\u70b9/index.md","title":"golang \u5207\u7247\u5751\u70b9","description":"\u5207\u7247\u662f golang \u4e2d\u7684\u4e00\u79cd\u7279\u6b8a\u7ed3\u6784\uff0c\u7531\u6307\u5411\u6570\u7ec4\u9996\u4f4d\u7684\u6307\u9488\u3001\u957f\u5ea6\u3001\u5bb9\u91cf\u7ec4\u6210\u3002","date":"2021-11-19T00:00:00.000Z","formattedDate":"November 19, 2021","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"}],"readingTime":1.57,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"golang interface \u5751\u70b9","permalink":"/docusaurus/blog/2021/11/20/golang-interface\u5751\u70b9"},"nextItem":{"title":"golang \u5173\u4e8e\u7ee7\u627f\u7684\u5751\u70b9","permalink":"/docusaurus/blog/2021/11/18/golang\u7ee7\u627f\u7684\u5751\u70b9"}},"content":"\u5207\u7247\u662f golang \u4e2d\u7684\u4e00\u79cd\u7279\u6b8a\u7ed3\u6784\uff0c\u7531\u6307\u5411\u6570\u7ec4\u9996\u4f4d\u7684\u6307\u9488\u3001\u957f\u5ea6\u3001\u5bb9\u91cf\u7ec4\u6210\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u5751\u70b9\uff1a\u5207\u7247\u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u5f71\u54cd\\n\u5207\u7247\u5e95\u5c42\u4f7f\u7528\u4e86\u6570\u7ec4\u7ed3\u6784\uff0c\u518d\u6ca1\u6709\u89e6\u53d1\u6269\u5bb9\u673a\u5236\u524d\uff0c\u591a\u5207\u7247\u4e4b\u95f4\u662f\u53ef\u80fd\u76f8\u4e92\u5f71\u54cd\u7684\u3002\\n\\n```go\\npackage main\\n\\nimport \\"fmt\\"\\n\\nfunc main() {\\n\\tbase := []int{1, 2, 3, 4, 5}\\n\\tbase01 := base[0:1]\\n\\tbase02 := base[0:2]\\n\\tfmt.Println(base01, base02)\\n\\tbase01[0] = 11\\n\\tfmt.Println(base01, base02)\\n}\\n```\\n\u6b64\u65f6\u4fee\u6539 base01 \u7684\u503c\uff0c\u4f1a\u76f4\u63a5\u5f71\u54cd base02 \u7684\u503c\u3002  \\n```text title=\\"\u8f93\u51fa\u7ed3\u679c\\"\\n[11]\\n[11 2]\\n```   \\n\u8fd9\u662f\u56e0\u4e3a\u4ed6\u4eec\u6b64\u65f6\u516c\u7528\u7684\u5e95\u5c42\u6570\u7ec4\u3002\\n\\n:::note \u6269\u5bb9\u673a\u5236\\n```goalng title=\\"src/runtime/slice.go\\"\\nfunc growslice(et *_type, old slice, cap int) slice {\\n    ...\\n    newcap := old.cap\\n    doublecap := newcap + newcap\\n    if cap > doublecap {\\n        newcap = cap\\n    } else {\\n        if old.len < 1024 {\\n            newcap = doublecap\\n        } else {\\n            // Check 0 < newcap to detect overflow\\n            // and prevent an infinite loop.\\n            for 0 < newcap && newcap < cap {\\n                newcap += newcap / 4\\n            }\\n            // Set newcap to the requested cap when\\n            // the newcap calculation overflowed.\\n            if newcap <= 0 {\\n                newcap = cap\\n            }\\n        }\\n    }\\n    ...\\n}\\n```\\n\u770b\u6e90\u7801\u53ef\u4ee5\u770b\u5230\uff0c\u5f53\u5207\u7247\u957f\u5ea6\u5c0f\u4e8e 1024 \u65f6\uff0c\u6269\u5bb9\u65f6\u76f4\u63a5 double\uff0c\u5f53\u5207\u7247\u957f\u5ea6\u5927\u4e8e 1024 \u540e\uff0c\u6bcf\u6b21\u6269\u5bb9\u4e3a\u4e4b\u524d\u7684 1/4\u3002\\n:::\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"golang \u5173\u4e8e\u7ee7\u627f\u7684\u5751\u70b9","metadata":{"permalink":"/docusaurus/blog/2021/11/18/golang\u7ee7\u627f\u7684\u5751\u70b9","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/11-18-golang\u7ee7\u627f\u7684\u5751\u70b9/index.md","source":"@site/blog/2021/11-18-golang\u7ee7\u627f\u7684\u5751\u70b9/index.md","title":"golang \u5173\u4e8e\u7ee7\u627f\u7684\u5751\u70b9","description":"\u51c6\u786e\u6765\u8bf4\uff0cgolang \u6ca1\u6709\u7ee7\u627f\uff0c\u800c\u662f\u7ec4\u5408\u3002","date":"2021-11-18T00:00:00.000Z","formattedDate":"November 18, 2021","tags":[{"label":"golang","permalink":"/docusaurus/blog/tags/golang"}],"readingTime":0.99,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"golang \u5207\u7247\u5751\u70b9","permalink":"/docusaurus/blog/2021/11/19/golang\u5207\u7247\u5751\u70b9"},"nextItem":{"title":"python \u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u5668\u7406\u89e3","permalink":"/docusaurus/blog/2021/11/04/python\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u5668\u7406\u89e3"}},"content":"\u51c6\u786e\u6765\u8bf4\uff0cgolang \u6ca1\u6709\u7ee7\u627f\uff0c\u800c\u662f\u7ec4\u5408\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n```go\\npackage main\\n\\nimport \\"fmt\\"\\n\\ntype People struct{}\\n\\nfunc (p People) Hello() {\\n\\tfmt.Println(\\"hello\\")\\n\\tp.CallName()\\n}\\n\\nfunc (p People) CallName() {\\n\\tfmt.Println(\\"my name is people\\")\\n}\\n\\ntype Man struct {\\n\\tPeople\\n}\\n\\nfunc (m Man) CallName() {\\n\\tfmt.Println(\\"my name is man\\")\\n}\\n\\nfunc main() {\\n\\t(Man{}).Hello()\\n}\\n```\\n\u8be5\u4ee3\u7801\u6700\u7ec8\u8f93\u51fa\u7684\u90fd\u662f\u7ed3\u6784\u4f53 `People` \u5b9a\u4e49\u7684\u65b9\u6cd5:\\n```text title=\\"\u8f93\u51fa\u7ed3\u679c\\"\\nhello\\nmy name is people\\n```\\n\u8fd9\u662f\u56e0\u4e3a `p.CallName()` \u65b9\u6cd5\u53ea\u4f1a\u8c03\u7528\u81ea\u5df1\u6216\u8005\u7ec4\u5408\u8fc7\u6765\u7684\u65b9\u6cd5\u3002  \\n\u901a\u8fc7\u8fd9\u79cd\u533f\u540d\u7ec4\u5408\u7684\u65b9\u5f0f\uff0c\u88ab\u7ec4\u5408\u7684\u7c7b\u578b `People` \u6240\u5305\u542b\u7684\u65b9\u6cd5\uff0c\u867d\u7136\u5347\u7ea7\u6210\u4e86\u5916\u90e8\u7c7b\u578b `Teacher` \u8fd9\u4e2a\u7ec4\u5408\u7c7b\u578b\u7684\u65b9\u6cd5\uff0c\u4f46\u63a5\u53d7\u8c03\u7528\u7684\u65f6\u5019\u5e76\u6ca1\u6709\u53d1\u751f\u53d8\u5316\u3002\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"python \u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u5668\u7406\u89e3","metadata":{"permalink":"/docusaurus/blog/2021/11/04/python\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u5668\u7406\u89e3","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/11-04-python\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u5668\u7406\u89e3/index.md","source":"@site/blog/2021/11-04-python\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u5668\u7406\u89e3/index.md","title":"python \u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u5668\u7406\u89e3","description":"\u751f\u6210\u5668","date":"2021-11-04T00:00:00.000Z","formattedDate":"November 4, 2021","tags":[{"label":"python","permalink":"/docusaurus/blog/tags/python"}],"readingTime":1.43,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"golang \u5173\u4e8e\u7ee7\u627f\u7684\u5751\u70b9","permalink":"/docusaurus/blog/2021/11/18/golang\u7ee7\u627f\u7684\u5751\u70b9"},"nextItem":{"title":"python \u57fa\u7840\u6570\u636e\u7c7b\u578b\u4e2d\u9690\u85cf\u7684\u77e5\u8bc6\u70b9","permalink":"/docusaurus/blog/2021/11/03/python\u57fa\u7840\u6570\u636e\u7c7b\u578b"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u751f\u6210\u5668\\n\u751f\u6210\u5668\u662f python \u4e2d\u7684\u4e00\u79cd\u7279\u6b8a\u5bf9\u8c61\uff0c\u5b83\u53ef\u4ee5\u8fd0\u884c\u65f6\u8fd4\u56de\u8ba1\u7b97\u503c\uff0c\u800c\u4e0d\u7528\u4e00\u6b21\u5c06\u6240\u6709\u903b\u8f91\u6267\u884c\u5b8c\u3002  \\n\u751f\u6210\u5668\u5b9a\u4e49\u7684\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a  \\n```python title=\\"\u5217\u8868\u751f\u6210\u5f0f\u4e2d [] \u6539 ()\\"\\n(x * x for x in range(10))\\n```\\n```python title=\\"\u5728\u51fd\u6570\u4e2d\u5d4c\u5165 yield\\"\\ndef fib(max):\\n    n, a, b = 0, 0, 1\\n    while n < max:\\n        yield b\\n        a, b = b, a + b\\n        n = n + 1\\n    return \'done\'\\n```\\n\\n## \u8fed\u4ee3\u5668\\n\u5728 python \u4e2d\uff0c\u6211\u4eec\u5c06\u6240\u6709\u53ef\u4ee5\u76f4\u63a5\u7528\u4e8e for \u5faa\u73af\u7684\u5bf9\u8c61\uff0c\u7edf\u79f0\u4e3a**\u53ef\u8fed\u4ee3\u5bf9\u8c61**\uff1a`Iterable`\\n\\n\u800c\u751f\u6210\u5668\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5bf9\u8c61\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u76f4\u63a5\u4f5c\u7528\u4e8e for \u5faa\u73af\uff0c\u8fd8\u53ef\u4ee5\u88ab next \u51fd\u6570\u4e0d\u65ad\u8c03\u7528\u8fd4\u56de\u4e0b\u4e00\u4e2a\u503c\uff0c\u76f4\u81f3\u6700\u540e\u629b\u51fa StopIteration \u9519\u8bef\uff0c\\n\u8868\u793a\u5df2\u83b7\u53d6\u5230\u6700\u540e\u4e00\u4e2a\u503c\u3002  \\n\u6240\u4ee5\uff0c\u6211\u4eec\u5c06\u53ef\u4ee5\u88ab next \u51fd\u6570\u8c03\u7528\u5e76\u4e0d\u65ad\u8fd4\u56de\u503c\u7684\u5bf9\u8c61\u79f0\u4e4b\u4e3a **\u8fed\u4ee3\u5668**\uff1a`Iterator`\\n\\n`Iterator` \u548c\u5e38\u89c1\u7684 list\u3001map \u6982\u5ff5\u4e0d\u540c\uff1a`Iterator` \u8868\u793a\u7684\u662f\u6570\u636e\u6d41\uff0c\u800c\u4ed6\u4eec\u5219\u8868\u793a\u4e00\u4e2a\u6570\u636e\u96c6\u5408\u3002\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"},{"id":"python \u57fa\u7840\u6570\u636e\u7c7b\u578b\u4e2d\u9690\u85cf\u7684\u77e5\u8bc6\u70b9","metadata":{"permalink":"/docusaurus/blog/2021/11/03/python\u57fa\u7840\u6570\u636e\u7c7b\u578b","editUrl":"https://github.com/czasg/docusaurus/edit/main/blog/2021/11-03-python\u57fa\u7840\u6570\u636e\u7c7b\u578b/index.md","source":"@site/blog/2021/11-03-python\u57fa\u7840\u6570\u636e\u7c7b\u578b/index.md","title":"python \u57fa\u7840\u6570\u636e\u7c7b\u578b\u4e2d\u9690\u85cf\u7684\u77e5\u8bc6\u70b9","description":"\u6574\u6570","date":"2021-11-03T00:00:00.000Z","formattedDate":"November 3, 2021","tags":[{"label":"python","permalink":"/docusaurus/blog/tags/python"}],"readingTime":1.225,"truncated":true,"authors":[{"name":"Czasg","title":"\u9648\u5927\u54e5","url":"https://github.com/czasg","imageURL":"https://github.com/czasg.png","key":"czasg"}],"prevItem":{"title":"python \u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u5668\u7406\u89e3","permalink":"/docusaurus/blog/2021/11/04/python\u751f\u6210\u5668\u4e0e\u8fed\u4ee3\u5668\u7406\u89e3"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u6574\u6570\\n#### \u4e3a\u4e86\u66f4\u597d\u7684\u533a\u5206\u4f4d\u6570\uff0cpython \u652f\u6301\u4ee5\u4e0b\u5212\u7ebf\u5206\u5272\u6574\u6570\u3002  \\n```python\\n1_000_000_000 == 1000000000\\n```\\n\\n## \u5b57\u7b26\u4e32\\n#### \u683c\u5f0f\u5316\u5b57\u7b26\\n* `%d` \u8868\u793a\u8f93\u51fa\u5341\u8fdb\u5236\u3002\\n* `%.2d` \u8868\u793a\u8f93\u51fa\u6700\u4f4e\u4e24\u4f4d\u6709\u6548\u6570\u5b57\\n* `%2d` \u8868\u793a\u5bbd\u5ea6\u4e3a 2\uff0c\u4ee5\u53f3\u5bf9\u9f50\u65b9\u5f0f\u8f93\u51fa\uff0c\u5de6\u8fb9\u4e0d\u8db3\u5219\u8865\u7a7a\u683c\\n* `%02d` \u8868\u793a\u5bbd\u5ea6\u4e3a 2\uff0c\u4e0d\u8db3\u8865 0\\n* `%06.2d` \u8868\u793a\u5bbd\u5ea6\u4e3a 6\uff0c\u4fdd\u7559\u6700\u4f4e\u4e24\u4f4d\u6709\u6548\u6570\u5b57\uff0c\u4ee5\u53f3\u5bf9\u9f50\u65b9\u5f0f\u8f93\u51fa\uff0c\u5de6\u8fb9\u4e0d\u8db3\u8865 0\\n\\n## \u53d8\u91cf\\n> \u53d8\u91cf\uff0c\u6307\u503c\u53ef\u4ee5\u53d8\u7684\u91cf\u3002\u5728\u6570\u5b66\u4e2d\uff0c\u53d8\u91cf\u4ee5\u975e\u6570\u5b57\u7684\u7b26\u53f7\u6765\u8868\u8fbe\uff0c\u4e00\u822c\u7528\u62c9\u4e01\u5b57\u6bcd\u3002\u53d8\u91cf\u7684\u7528\u5904\u5728\u4e8e\u80fd\u62bd\u8c61\u5316\u63cf\u8ff0\u3002\\n\\n\u5728\u5f31\u7c7b\u578b\u8bed\u8a00\u4e2d\uff0c\u53d8\u91cf\u672c\u8eab\u7684\u7c7b\u578b\u662f\u4e0d\u56fa\u5b9a\u7684\uff0c\u53ef\u4ee5\u6307\u5411\u4efb\u610f\u5bf9\u8c61\u3002  \\n\u5728\u5f3a\u7c7b\u578b\u8bed\u8a00\u4e2d\uff0c\u7533\u660e\u53d8\u91cf\u65f6\u5fc5\u987b\u8981\u6307\u5b9a\u53d8\u91cf\u7c7b\u578b\u3002\\n\\n\\n<br/>\\n\\n:::info \ud83d\udc47\ud83d\udc47\ud83d\udc47\\n**\u672c\u6587\u4f5c\u8005:** Czasg     \\n**\u7248\u6743\u58f0\u660e:** \u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u54e6~\ud83d\udc6e\u200d    \\n:::"}]}')}}]);