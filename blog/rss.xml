<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Czasg Blog</title>
        <link>https://czasg.github.io/docusaurus/blog</link>
        <description>Czasg Blog</description>
        <lastBuildDate>Sun, 12 Mar 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <item>
            <title><![CDATA[ç®¡ç†è€…å¦‚ä½•è¯„ä»·å¾…è½¬æ­£å‘˜å·¥]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2023/03/12/ç®¡ç†è€…å¦‚ä½•è¯„ä»·å¾…è½¬æ­£å‘˜å·¥</link>
            <guid>ç®¡ç†è€…å¦‚ä½•è¯„ä»·å¾…è½¬æ­£å‘˜å·¥</guid>
            <pubDate>Sun, 12 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[ç®¡ç†è€…å¦‚ä½•è¯„ä»·å¾…è½¬æ­£å‘˜å·¥]]></description>
            <content:encoded><![CDATA[<h2>ç®¡ç†è€…å¦‚ä½•è¯„ä»·å¾…è½¬æ­£å‘˜å·¥</h2><p>ä½œä¸ºä¸€ä¸ªç®¡ç†è€…ï¼Œæˆ‘ä»¬é€šå¸¸ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è€ƒè™‘æˆ–è¯„ä»·ä¸€åå‘˜å·¥ï¼š</p><ul><li>å·¥ä½œè¡¨ç°</li><li>å›¢é˜Ÿåˆä½œèƒ½åŠ›</li><li>ä¸ªäººç´ å…»</li></ul><p>å¯¹äºå¿«è¦è½¬æ­£çš„å‘˜å·¥ï¼Œåº”è¯¥é’ˆå¯¹ä»¥ä¸Šå‡ ä¸ªæ–¹é¢è¿›è¡Œè¯„ä»·ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„å»ºè®®ã€‚</p><p>é¦–å…ˆæ˜¯<strong>å·¥ä½œè¡¨ç°</strong>ã€‚æˆ‘ä¼šè€ƒè™‘å‘˜å·¥åœ¨å·¥ä½œä¸­çš„è¡¨ç°ï¼ŒåŒ…æ‹¬å®Œæˆä»»åŠ¡çš„æ•ˆç‡ã€å·¥ä½œè´¨é‡ã€åˆ›æ–°èƒ½åŠ›ç­‰ã€‚
å¦‚æœå‘˜å·¥åœ¨è¿™äº›æ–¹é¢è¡¨ç°è‰¯å¥½ï¼Œæˆ‘ä¼šç§¯ææ¨èä»–è½¬æ­£ï¼Œå¹¶ç»™å‡ºå…·ä½“çš„å·¥ä½œå»ºè®®ï¼Œå¸®åŠ©ä»–è¿›ä¸€æ­¥æå‡å·¥ä½œè¡¨ç°ã€‚</p><p>å…¶æ¬¡æ˜¯<strong>å›¢é˜Ÿåˆä½œèƒ½åŠ›</strong>ã€‚ä¸€ä¸ªå¥½çš„å‘˜å·¥åº”è¯¥å…·å¤‡è‰¯å¥½çš„å›¢é˜Ÿåˆä½œèƒ½åŠ›ï¼Œèƒ½å¤Ÿä¸å…¶ä»–å›¢é˜Ÿæˆå‘˜æœ‰æ•ˆåœ°æ²Ÿé€šå’Œåä½œã€‚
å¦‚æœå‘˜å·¥åœ¨è¿™æ–¹é¢è¡¨ç°è‰¯å¥½ï¼Œæˆ‘ä¼šé¼“åŠ±ä»–åœ¨å›¢é˜Ÿä¸­ç»§ç»­å‘æŒ¥ä½œç”¨ï¼Œå¹¶ç»™å‡ºä¸€äº›å›¢é˜Ÿåˆä½œæ–¹é¢çš„å»ºè®®ã€‚</p><p>æœ€åæ˜¯<strong>ä¸ªäººç´ å…»</strong>ã€‚ä¸€ä¸ªå¥½çš„å‘˜å·¥åº”è¯¥å…·å¤‡é«˜åº¦çš„èŒä¸šç´ å…»ï¼ŒåŒ…æ‹¬è¯šå®ã€å®ˆæ—¶ã€è‡ªå¾‹ç­‰ã€‚
å¦‚æœå‘˜å·¥åœ¨è¿™æ–¹é¢è¡¨ç°è‰¯å¥½ï¼Œæˆ‘ä¼šç§¯ææ¨èä»–è½¬æ­£ï¼Œå¹¶ç»™å‡ºä¸€äº›ä¸ªäººç´ å…»æ–¹é¢çš„å»ºè®®ï¼Œå¸®åŠ©ä»–è¿›ä¸€æ­¥æå‡è‡ªå·±ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œä½œä¸ºä¸€ä¸ªç®¡ç†è€…ï¼Œéœ€è¦ä»å¤šä¸ªæ–¹é¢ç»¼åˆè¯„ä¼°å‘˜å·¥ï¼Œå¹¶ç»™å‡ºç§¯æçš„è¯„ä»·å’Œå»ºè®®ï¼Œå¸®åŠ©ä»–ä»¬æ›´å¥½åœ°æˆé•¿å’Œå‘å±•ã€‚</p><h2>å¦‚ä½•è¯„ä»·èƒ½åŠ›ä¸€èˆ¬çš„å‘˜å·¥å‘¢</h2><p>å¯¹äºèƒ½åŠ›ä¸€èˆ¬çš„å‘˜å·¥ï¼Œä»ç„¶å¯ä»¥ä»<strong>å·¥ä½œè¡¨ç°</strong>ã€<strong>å›¢é˜Ÿåˆä½œèƒ½åŠ›</strong>ã€<strong>ä¸ªäººç´ å…»</strong>è¿™ä¸‰ä¸ªæ–¹é¢è¿›è¡Œè¯„ä»·ï¼š</p><h4>å·¥ä½œè¡¨ç°æ–¹é¢</h4><p>å¦‚æœå‘˜å·¥çš„å·¥ä½œè¡¨ç°ä¸€èˆ¬ï¼Œæˆ‘ä¼šå»ºè®®ä»–åœ¨å·¥ä½œä¸­æ›´åŠ åŠªåŠ›ï¼Œæé«˜è‡ªå·±çš„æ•ˆç‡å’Œè´¨é‡ã€‚æˆ‘ä¼šæä¾›ä¸€äº›å…·ä½“çš„å»ºè®®ï¼Œå¸®åŠ©ä»–æ›´å¥½åœ°å®Œæˆå·¥ä½œã€‚</p><h4>å›¢é˜Ÿåˆä½œèƒ½åŠ›æ–¹é¢</h4><p>å¦‚æœå‘˜å·¥çš„å›¢é˜Ÿåˆä½œèƒ½åŠ›ä¸€èˆ¬ï¼Œæˆ‘ä¼šå»ºè®®ä»–ç§¯æå‚ä¸å›¢é˜Ÿæ´»åŠ¨ï¼Œä¸å…¶ä»–æˆå‘˜å»ºç«‹ç§¯æçš„åˆä½œå…³ç³»ã€‚æˆ‘ä¼šæä¾›ä¸€äº›å›¢é˜Ÿåˆä½œæ–¹é¢çš„å»ºè®®ï¼Œå¸®åŠ©ä»–æ›´å¥½åœ°èå…¥å›¢é˜Ÿã€‚</p><h4>ä¸ªäººç´ å…»æ–¹é¢</h4><p>å¦‚æœå‘˜å·¥çš„ä¸ªäººç´ å…»ä¸€èˆ¬ï¼Œæˆ‘ä¼šå»ºè®®ä»–æé«˜è‡ªå·±çš„èŒä¸šç´ å…»ï¼ŒåŒ…æ‹¬è¯šå®ã€å®ˆæ—¶ã€è‡ªå¾‹ç­‰æ–¹é¢ã€‚æˆ‘ä¼šæä¾›ä¸€äº›ä¸ªäººç´ å…»æ–¹é¢çš„å»ºè®®ï¼Œå¸®åŠ©ä»–æˆä¸ºä¸€ä¸ªæ›´å¥½çš„å‘˜å·¥ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæ— è®ºå‘˜å·¥çš„èƒ½åŠ›å¦‚ä½•ï¼Œéƒ½åº”è¯¥ç»™å‡ºç§¯æçš„è¯„ä»·å’Œå»ºè®®ï¼Œå¸®åŠ©ä»–ä»¬æ›´å¥½åœ°æˆé•¿å’Œå‘å±•ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[pythonå†™å…¥csvä¹±ç é—®é¢˜]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2023/03/09/pythonå†™å…¥csvä¹±ç é—®é¢˜</link>
            <guid>pythonå†™å…¥csvä¹±ç é—®é¢˜</guid>
            <pubDate>Thu, 09 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[æ­£å¸¸çš„å†™å…¥ä»£ç å¦‚ä¸‹ï¼Œä½†å®é™…æ‰“å¼€ç»“æœä¼šæ˜¯ä¹±ç ï¼]]></description>
            <content:encoded><![CDATA[<p>æ­£å¸¸çš„å†™å…¥ä»£ç å¦‚ä¸‹ï¼Œä½†å®é™…æ‰“å¼€ç»“æœä¼šæ˜¯ä¹±ç ï¼</p><pre><code class="language-python">import csv

with open(&quot;file.csv&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;, newline=&quot;&quot;) as w:
    csv_w = csv.write(w)
    csv_w.writerow([&quot;ä¸­æ–‡ä¹±ç &quot;])
</code></pre><p>é€šè¿‡æ’æŸ¥ï¼Œå‘ç°æ”¹å˜ç¼–ç æ–¹å¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å³æŠŠ<code>utf-8</code>å˜æ›´ä¸º<code>utf-8-sig</code>ç¼–ç ã€‚</p><pre><code class="language-python">import csv

with open(&quot;file.csv&quot;, &quot;w&quot;, encoding=&quot;utf-8-sig&quot;, newline=&quot;&quot;) as w:
    csv_w = csv.write(w)
    csv_w.writerow([&quot;ä¸­æ–‡æ­£å¸¸å±•ç¤º&quot;])
</code></pre><p>åŸå› åˆ†æï¼š</p><p>uft-8-sig ä¸­çš„ sig è¡¨ç¤º signatureï¼Œä¹Ÿå°±æ˜¯å¸¦æœ‰ç­¾åçš„ utf-8ã€‚</p><p>Excel åœ¨è¯»å– csv æ–‡ä»¶çš„æ—¶å€™æ˜¯é€šè¿‡è¯»å–æ–‡ä»¶å¤´ä¸Šçš„ BOM æ¥è¯†åˆ«ç¼–ç ã€‚å¦‚æœæ–‡ä»¶å¤´æ²¡æœ‰ BOM ä¿¡æ¯ï¼Œåˆ™é»˜è®¤æŒ‰ç…§ Unicode ç¼–ç è¯»å–ã€‚</p><p>å½“æˆ‘ä»¬ä½¿ç”¨ utf-8 ç¼–ç æ¥ç”Ÿæˆ csv æ–‡ä»¶çš„æ—¶å€™ï¼Œç”±äºå¹¶æ²¡æœ‰ç”Ÿæˆ BOM ä¿¡æ¯ï¼ŒExcel å°±ä¼šè‡ªåŠ¨æŒ‰ç…§ Unicode ç¼–ç è¯»å–ï¼Œä»è€Œå¯¼è‡´äº†ä¹±ç é—®é¢˜ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[jwtå­¦ä¹ ]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2023/03/08/jwtå­¦ä¹ </link>
            <guid>jwtå­¦ä¹ </guid>
            <pubDate>Wed, 08 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[JWT å…¨ç§° JSON Web Tokenï¼Œæ˜¯ä¸€ç§å…è®¸æºå¸¦éæ•æ„Ÿä¿¡æ¯çš„è®¤è¯æœºåˆ¶ã€‚å¸¸ç”¨äºæœåŠ¡ä¹‹é—´çš„è®¤è¯æ ¡éªŒã€‚]]></description>
            <content:encoded><![CDATA[<p>JWT å…¨ç§° JSON Web Tokenï¼Œæ˜¯ä¸€ç§å…è®¸æºå¸¦éæ•æ„Ÿä¿¡æ¯çš„è®¤è¯æœºåˆ¶ã€‚å¸¸ç”¨äºæœåŠ¡ä¹‹é—´çš„è®¤è¯æ ¡éªŒã€‚</p><p>JWT ç»“æ„ç»„æˆåŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>Headerï¼šä¸€èˆ¬ç”¨äºæŒ‡å®štokenç±»å‹ï¼ŒåŒ…æ‹¬<code>alg</code>å’Œ<code>typ</code>ä¸¤ä¸ªå­—æ®µ</li><li>Payloadï¼šæ•°æ®è½½ä½“ï¼Œä¸€èˆ¬éœ€è¦åŒ…å«<code>exp</code>è¡¨ç¤ºè¿‡æœŸæ—¶é—´</li><li>Signatureï¼šæ‘˜è¦ï¼Œæ˜¯å‰é¢ä¸¤ä¸ªéƒ¨åˆ†çš„æ‘˜è¦è¿ç®—</li></ul><p>ç»„æˆå½¢å¼ä¸º Headerè®¡ç®—Base64 . Payloadè®¡ç®—Base64 . å‰ä¸¤éƒ¨åˆ†å“ˆå¸Œè¿ç®—</p><pre><code class="language-python" metastring="title=&quot;https://github.com/czasg/pywss/blob/master/pywss/middleware/jwt.py&quot;" title="&quot;https://github.com/czasg/pywss/blob/master/pywss/middleware/jwt.py&quot;">import json
import time
import base64
import hashlib


class JWT:

    def __init__(self, secret: str, expire: int = 3600):
        self.secret = secret.encode()
        self.expire = expire
        self.header = base64.b64encode(json.dumps({
            &quot;alg&quot;: &quot;HS256&quot;,
            &quot;typ&quot;: &quot;JWT&quot;,
        }, ensure_ascii=False).encode())

    def encrypt(self, **kwargs):
        kwargs.update(exp=int(time.time()) + self.expire)
        payload = base64.b64encode(json.dumps(kwargs, ensure_ascii=False).encode())

        sha256 = hashlib.sha256()
        sha256.update(self.header)
        sha256.update(payload)
        sha256.update(self.secret)
        signature = sha256.hexdigest()

        return f&quot;{self.header.decode()}.{payload.decode()}.{signature}&quot;

    def decrypt(self, token: str) -&gt; dict:
        if token.startswith(&quot;Bearer&quot;):
            token = token.replace(&quot;Bearer&quot;, &quot;&quot;, 1).strip()

        tokens = token.split(&quot;.&quot;)
        if len(tokens) != 3:
            raise Exception(&quot;Invalid JWT Token&quot;)

        header, payload, signature = tokens  # type: str
        sha256 = hashlib.sha256()
        sha256.update(header.encode())
        sha256.update(payload.encode())
        sha256.update(self.secret)
        if sha256.hexdigest() != signature:
            raise Exception(&quot;Invalid JWT Token, Signature Except&quot;)

        return json.loads(base64.b64decode(payload))
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ­£åˆ™å­¦ä¹ æ€»ç»“]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2023/03/02/æ­£åˆ™å­¦ä¹ æ€»ç»“</link>
            <guid>æ­£åˆ™å­¦ä¹ æ€»ç»“</guid>
            <pubDate>Thu, 02 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ¬æ–‡ä½œè€…: Czasg]]></description>
            <content:encoded><![CDATA[<pre><code>()ä¸ºäº†æå–åŒ¹é…å­—ç¬¦ä¸²ï¼Œ(.*)
[]å®šä¹‰åŒ¹é…çš„å­—ç¬¦èŒƒå›´ï¼Œ[a-zA-Z0-9]   --- åªèƒ½å–è¿™é‡Œé¢çš„ä¸€ä¸ª
{}å®šä¹‰åŒ¹é…çš„é•¿åº¦ï¼Œ{0-9}

(0-9)åŒ¹é…&#x27;0-9&#x27;æœ¬èº«
[0-9]*åŒ¹é…æ•°å­—ï¼Œè‹¥åœ¨é‡Œé¢åŠ å…¥äº†^è¡¨ç¤ºå–éï¼Œå¦‚([^\d].*)
[0-9]{0,9}è¡¨ç¤ºé•¿åº¦ä¸º0-9çš„æ•°å­—å­—ç¬¦ä¸²

*å¯ä»¥è¡¨ç¤ºä¸º{0,}
+å¯ä»¥è¡¨ç¤ºä¸º{1,}
?å¯ä»¥è¡¨ç¤ºä¸º{0,1}

åœ¨æ­£åˆ™ä¸­ï¼Œä½ è¦åŒ¹é…å¤šç§ï¼Œéœ€è¦ä½¿ç”¨åˆ°[]ï¼Œæ¯”å¦‚ï¼š([\s\S]*)ï¼Œä½ è¿™æ ·æ‰èƒ½åŒ¹é…å¸¦ä»»ä½•æ•°æ®
è€Œè¿™å¥è¯ï¼Œæˆ‘ä»¬å¯ä»¥åŠ å…¥ flags=re.S è¡¨ç¤º . å¯ä»¥å»åˆ°ä»»ä½•æ•°æ®

è€Œä¸” [åŒ¹é…-â€”] åªèƒ½åŒ¹é…åˆ°è¿™é‡Œé¢çš„æŸä¸€ä¸ªå­—ï¼Œæ— æ³•å…·ä½“åŒ¹é…å…¶å­—ä¸²
æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ (?:åŒ¹é…|-|â€”)è¿™æ ·å°±å¯ä»¥äº†

(?&lt;=(href=)) è¡¨ç¤ºåŒ¹é…ä»¥(href=)å¼€å‘çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å­˜å‚¨åˆ°åˆ†ç»„ä¸­
(?=(href=)) è¡¨ç¤ºåŒ¹é…ä»¥(href=)ç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å­˜å‚¨åˆ°åˆ†ç»„ä¸­
(?&lt;=(?:href=)) è¡¨ç¤ºåŒ¹é…ä»¥(href=)å¼€å‘çš„å­—ç¬¦ä¸²ï¼Œä½†ä¸å­˜å‚¨åˆ°åˆ†ç»„ä¸­
(?=(?:href=)) è¡¨ç¤ºåŒ¹é…ä»¥(href=)ç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œä½†ä¸å­˜å‚¨åˆ°åˆ†ç»„ä¸­

(?:)  (czaissg|czaisorz) å°±æ˜¯ (czais(?:sg|orz))  
å¯ä»¥ç®€åŒ–è¡¨è¾¾å¼

(?=) (czaissg(?=1|2)) å¯ä»¥åŒ¹é…&#x27;czaissg1&#x27; / &#x27;czaissg2&#x27;ï¼Œä½†ä¸èƒ½åŒ¹é…&#x27;czaissg3&#x27;
åŒ¹é…ç»“å°¾çš„æ„æ€

(?&lt;=) ((?&lt;=1|2)czaissg) å¯ä»¥åŒ¹é…&#x27;1czaissg&#x27; / &#x27;2czaissg&#x27;ï¼Œä½†ä¸èƒ½åŒ¹é…&#x27;3czaissg&#x27;
åŒ¹é…å¼€å¤´çš„æ„æ€

(?!) (czaissg(?!1|2))ï¼Œå¯¹äºä¼—å¤šçš„&#x27;czaissgx&#x27;ï¼Œä¸åŒ¹é…ä»¥1,2ç»“å°¾çš„ï¼Œå…¶ä»–éƒ½åŒ¹é…
ä¸åŒ¹é…ç»“å°¾å­—æ®µçš„æ„æ€

(?&lt;!) ((?!1|2)czaissg) å¯¹äºä¼—å¤šçš„&#x27;xczaissg&#x27;ï¼Œä¸åŒ¹é…ä»¥1,2å¼€å¤´çš„ï¼Œå…¶ä»–éƒ½åŒ¹é…
Uå¸åŒ¹é…å¼€å¤´å­—æ®µçš„æ„æ€

å…¶ä»–è¯´æ³•ï¼š
(?:exp) åŒ¹é…exp,ä¸æ•è·åŒ¹é…çš„æ–‡æœ¬
(?=exp) åŒ¹é…expå‰é¢çš„ä½ç½®
(?&lt;=exp) åŒ¹é…expåé¢çš„ä½ç½®
(?!exp) åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯expçš„ä½ç½®
(?&lt;!exp) åŒ¹é…å‰é¢ä¸æ˜¯expçš„ä½ç½®


å¯¹äº()çš„å†…å®¹ï¼Œè·å–çš„æ–¹æ³•ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨groupæ¥è·å–
ä½†å®é™…ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨&#x27;\\1&#x27;æˆ–è€…r&#x27;\1&#x27;

(?:)  (czaissg|czaisorz) å°±æ˜¯ (czais(?:sg|orz))  
å¯ä»¥ç®€åŒ–è¡¨è¾¾å¼

(?=) (czaissg(?=1|2)) å¯ä»¥åŒ¹é…&#x27;czaissg1&#x27; / &#x27;czaissg2&#x27;ï¼Œä½†ä¸èƒ½åŒ¹é…&#x27;czaissg3&#x27;
åŒ¹é…ç»“å°¾çš„æ„æ€

(?&lt;=) ((?&lt;=1|2)czaissg) å¯ä»¥åŒ¹é…&#x27;1czaissg&#x27; / &#x27;2czaissg&#x27;ï¼Œä½†ä¸èƒ½åŒ¹é…&#x27;3czaissg&#x27;
åŒ¹é…å¼€å¤´çš„æ„æ€

(?!) (czaissg(?!1|2))ï¼Œå¯¹äºä¼—å¤šçš„&#x27;czaissgx&#x27;ï¼Œä¸åŒ¹é…ä»¥1,2ç»“å°¾çš„ï¼Œå…¶ä»–éƒ½åŒ¹é…
ä¸åŒ¹é…ç»“å°¾å­—æ®µçš„æ„æ€

(?&lt;!) ((?!1|2)czaissg) å¯¹äºä¼—å¤šçš„&#x27;xczaissg&#x27;ï¼Œä¸åŒ¹é…ä»¥1,2å¼€å¤´çš„ï¼Œå…¶ä»–éƒ½åŒ¹é…
Uå¸åŒ¹é…å¼€å¤´å­—æ®µçš„æ„æ€

å…¶ä»–è¯´æ³•ï¼š
(?:exp) åŒ¹é…exp,ä¸æ•è·åŒ¹é…çš„æ–‡æœ¬
(?=exp) åŒ¹é…expå‰é¢çš„ä½ç½®
(?&lt;=exp) åŒ¹é…expåé¢çš„ä½ç½®
(?!exp) åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯expçš„ä½ç½®
(?&lt;!exp) åŒ¹é…å‰é¢ä¸æ˜¯expçš„ä½ç½®


å¯¹äº()çš„å†…å®¹ï¼Œè·å–çš„æ–¹æ³•ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨groupæ¥è·å–
ä½†å®é™…ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨&#x27;\\1&#x27;æˆ–è€…r&#x27;\1&#x27;

a = re.search(&#x27;(?P&lt;test1&gt;.*?)_(?P&lt;test2&gt;.*?-)&#x27;, s).groupdict()  # èƒ½å¤Ÿå¾—åˆ°åŒ¹é…çš„å­—å…¸å’¯
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[çˆ¬è™«è¿›é˜¶-éšè—seleniumç‰¹å¾]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2023/02/27/çˆ¬è™«è¿›é˜¶-éšè—seleniumç‰¹å¾</link>
            <guid>çˆ¬è™«è¿›é˜¶-éšè—seleniumç‰¹å¾</guid>
            <pubDate>Mon, 27 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[è¿™æ˜¯ä¸€åœºåçˆ¬ä¸ååçˆ¬æŠ€æœ¯äººå‘˜ä¹‹é—´çš„æ–—äº‰~]]></description>
            <content:encoded><![CDATA[<p>è¿™æ˜¯ä¸€åœºåçˆ¬ä¸ååçˆ¬æŠ€æœ¯äººå‘˜ä¹‹é—´çš„æ–—äº‰~</p><p>çˆ¬è™«æœåŠ¡èƒ½å¤Ÿåœ¨ç½‘ç»œä¸Šä¸çŸ¥ç–²å€¦çš„è·å–ä¿¡æ¯ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šå¸¦æœ‰æŸäº›æ˜“äºå¸¸äººçš„ç‰¹å¾</p><p>åçˆ¬åˆ™åŸºäºè¿™äº›ç‰¹å¾è¿›è¡Œæ‹¦æˆªï¼Œè€Œååçˆ¬æœ‰ä¸¤ä¸ªæ€è·¯ï¼š<br/>
<!-- -->1ã€æ¶ˆé™¤çˆ¬è™«ç‰¹å¾ï¼Œä½¿å¾—è‡ªå·±åƒæ­£å¸¸äººä¸€æ ·ã€‚æ¯”å¦‚é™ä½çˆ¬å–é¢‘ç‡å°±æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹æ¡ˆ~<br/>
<!-- -->2ã€ç ´è§£åçˆ¬æŠ€æœ¯ï¼Œå³ä½¿è¢«è¯†åˆ«ä»ç„¶å¯ä»¥è·å–   </p><p>åœ¨ååçˆ¬çš„æŠ€æœ¯é¢†åŸŸï¼Œæœ‰è¿™ä¹ˆä¸€ç±»åæ–¹ï¼Œå°±æ˜¯è‡ªåŠ¨åŒ–ã€‚<br/>
<!-- -->å®ƒå®Œå…¨æ¨¡æ‹Ÿå¸¸äººæ“ä½œï¼Œä»è€Œè¾¾åˆ°&quot;ä¸€åŠ›ç ´ä¸‡æ³•&quot;çš„æ•ˆæœã€‚</p><p>ä½†éšç€åçˆ¬æŠ€æœ¯çš„è¿›ä¸€æ­¥å®Œå–„ï¼Œè‡ªåŠ¨åŒ–å·¥å…·ä¹Ÿé€æ¸çš„è¢«è¯†åˆ«å¹¶æ‹¦æˆªï¼Œéšä¹‹è€Œæ¥çš„å°±æ˜¯ä¸€æ³¢ååçˆ¬æŠ€æœ¯çš„å‡çº§~</p><h2>CDP</h2><p>CDP å…¨ç§°ä¸º <a href="https://chromedevtools.github.io/devtools-protocol/">Chrome Devtools-Protocol</a></p><p>é€šè¿‡æ‰§è¡Œ CDP å‘½ä»¤ï¼Œå¯ä»¥åœ¨ç½‘é¡µåŠ è½½å‰è¿è¡Œä¸€æ®µä»£ç ï¼Œè¿›è€Œæ”¹å˜ç”šè‡³å±è”½éƒ¨åˆ†æµè§ˆå™¨çš„æŒ‡çº¹ç‰¹å¾ã€‚</p><p>ç”±äºæµè§ˆå™¨ç‰¹å¾ç§ç±»è¿‡å¤šï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ç°æˆçš„å·¥å…·ï¼Œç›´æ¥å±è”½å¤§éƒ¨åˆ†ç‰¹å¾ã€‚å‚è€ƒï¼š
<a href="https://github.com/berstend/puppeteer-extra/blob/stealth-js/stealth.min.js">stealth.min.js</a></p><pre><code class="language-python">from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
import time

chrome_options = Options()

# æ— å¤´æ¨¡å¼
# chrome_options.add_argument(&quot;--headless&quot;)

# æ·»åŠ è¯·æ±‚å¤´
chrome_options.add_argument(
    &#x27;user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#x27;)

s = Service(r&quot;chromedriver.exeè·¯å¾„&quot;)

driver = webdriver.Chrome(service=s, options=chrome_options)

# åˆ©ç”¨stealth.min.jséšè—æµè§ˆå™¨æŒ‡çº¹ç‰¹å¾
# stealth.min.jsä¸‹è½½åœ°å€ï¼šhttps://github.com/berstend/puppeteer-extra/tree/stealth-js
with open(&#x27;./stealth.min.js&#x27;) as f:
    driver.execute_cdp_cmd(&quot;Page.addScriptToEvaluateOnNewDocument&quot;, {
        &quot;source&quot;: f.read()
    })

driver.get(url=&#x27;URL&#x27;)
# driver.get(url=&#x27;https://bot.sannysoft.com/&#x27;)

# ä¿å­˜å›¾ç‰‡
driver.save_screenshot(&#x27;result.png&#x27;)

time.sleep(200)
</code></pre><h2>undetected_chromedriver</h2><p>è¿™æ˜¯ä¸€ä¸ªé˜²æ­¢æµè§ˆå™¨æŒ‡çº¹ç‰¹å¾è¢«è¯†åˆ«çš„ä¾èµ–åº“ï¼Œå¯ä»¥è‡ªåŠ¨ä¸‹è½½é©±åŠ¨é…ç½®å†è¿è¡Œ</p><pre><code class="language-python" metastring="title=&quot;å®‰è£…ä¾èµ–&quot;" title="&quot;å®‰è£…ä¾èµ–&quot;">pip install undetected-chromedriver
</code></pre><pre><code class="language-python" metastring="title=&quot;undetected-chromedriverç”¨ä¾‹å‚è€ƒ&quot;" title="&quot;undetected-chromedriverç”¨ä¾‹å‚è€ƒ&quot;">from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
import time
import undetected_chromedriver as uc

chrome_options = Options()
# chrome_options.add_argument(&quot;--headless&quot;)

s = Service(r&quot;chromedriver.exe&quot;)

driver = uc.Chrome(service=s, options=chrome_options)

driver.get(url=&#x27;URL&#x27;)
# driver.get(url=&#x27;https://bot.sannysoft.com/&#x27;)

driver.save_screenshot(&#x27;result.png&#x27;)
time.sleep(100)
</code></pre><h2>æ“ä½œå·²å¼€å¯çš„æµè§ˆå™¨</h2><p>æ“ä½œçš„åŸç†æ˜¯å…ˆå•ç‹¬å¼€å¯ä¸€ä¸ªæµè§ˆå™¨ï¼Œå¹¶å¼€å¯è¿œç¨‹è°ƒè¯•èƒ½åŠ›ï¼Œå¦‚ï¼š</p><pre><code>import subprocess

# 1ã€æ‰“å¼€æµè§ˆå™¨
# æŒ‡å®šç«¯å£å·ä¸ºï¼š1234
# é…ç½®ç”¨æˆ·æ•°æ®è·¯å¾„ï¼š--user-data-dir
cmd = &#x27;C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe --remote-debugging-port=1234 --user-data-dir=&quot;C:\\selenum\\user_data&quot;&#x27;

subprocess.run(cmd)
</code></pre><p>ç„¶åè°ƒæ•´ä»£ç ï¼Œè¿œç¨‹åŠ å…¥è°ƒè¯•ï¼š</p><pre><code>import time
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service

# æ“ä½œä¸Šé¢å·²ç»æ‰“å¼€çš„æµè§ˆå™¨ï¼Œè¿›è¡Œç™¾åº¦æœç´¢
chrome_options = Options()

# æŒ‡å®šå·²ç»æ‰“å¼€æµè§ˆå™¨çš„åœ°å€åŠç«¯å£å·
chrome_options.add_experimental_option(&quot;debuggerAddress&quot;, &quot;127.0.0.1:1234&quot;)

# æ³¨æ„ï¼šchromeç‰ˆæœ¬ä¸chromedirveré©±åŠ¨è¦ä¿æŒä¸€è‡´
# ä¸‹è½½åœ°å€ï¼šhttp://chromedriver.storage.googleapis.com/index.html
s = Service(r&quot;chromedriver.exe&quot;)

driver = webdriver.Chrome(service=s, options=chrome_options)

# æ‰“å¼€ç›®æ ‡ç½‘ç«™
driver.get(url=&quot;URL&quot;)

time.sleep(200)
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç»“æ„åŒ–æ€è€ƒä¸æ²Ÿé€š]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2023/02/05/ç»“æ„åŒ–æ€è€ƒä¸æ²Ÿé€š</link>
            <guid>ç»“æ„åŒ–æ€è€ƒä¸æ²Ÿé€š</guid>
            <pubDate>Sun, 05 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[è¯­è¨€çš„æœ¬è´¨æ˜¯å¯¹æ€ç»´çš„è¡¨è¾¾ï¼Œåªæœ‰æŠŠæŸä¸ªäº‹åŠ¡çš„è„‰ç»œç†æ¸…äº†ï¼Œæ‰èƒ½æƒ³æ¸…æ¥šï¼Œè®²æ¸…æ¥šã€‚]]></description>
            <content:encoded><![CDATA[<p>è¯­è¨€çš„æœ¬è´¨æ˜¯å¯¹æ€ç»´çš„è¡¨è¾¾ï¼Œåªæœ‰æŠŠæŸä¸ªäº‹åŠ¡çš„è„‰ç»œç†æ¸…äº†ï¼Œæ‰èƒ½æƒ³æ¸…æ¥šï¼Œè®²æ¸…æ¥šã€‚</p><p>æ•´ç†ä¸‹ç»“æ„åŒ–æ€è€ƒä¸­æ‹æ¸…äº‹åŠ¡è„‰ç»œçš„æ–¹å¼ã€‚</p><p>è¯´è¯æ—¶ï¼Œé€‚å½“å‡æ…¢è¯­é€Ÿã€‚ä¸è¦è®©æ€ç»´è·Ÿä¸ä¸Šè¡¨è¾¾ã€‚</p><h2>è‡ªæˆ‘ä»‹ç»</h2><ul><li>ç»™è‡ªå·±ç»‘å®šå°‘é‡æ ‡ç­¾</li><li>æˆ‘ä¸ºä»€ä¹ˆæ¥è¿™é‡Œ  </li><li>æˆ‘èƒ½å¸¦æ¥ä»€ä¹ˆä»·å€¼  </li></ul><h2>ç¥è¾</h2><ul><li>è‡ªæˆ‘ç®€ä»‹</li><li>æ„Ÿè°¢</li><li>å›é¡¾</li><li>æ„¿æ™¯</li></ul><h2>è°ˆè¯</h2><ul><li>è¡¨æ‰¬</li><li>æ‰¹è¯„</li><li>è¡¨æ‰¬</li></ul><h2>å¤ç›˜</h2><ul><li>å›é¡¾ç›®æ ‡</li><li>ç»“æœå¯¹æ¯”</li><li>äº®ç‚¹ä»‹ç»</li></ul><h2>æ’é”™</h2><ul><li>æ‰¾åˆ°é—®é¢˜</li><li>åˆ†æåŸå› </li><li>è§£å†³æ–¹æ¡ˆ</li><li>è¾¾æˆç»“æœ</li></ul><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[seleniumå­¦ä¹ æ€»ç»“]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2023/01/04/seleniumå­¦ä¹ æ€»ç»“</link>
            <guid>seleniumå­¦ä¹ æ€»ç»“</guid>
            <pubDate>Wed, 04 Jan 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ¬æ–‡ä½œè€…: Czasg]]></description>
            <content:encoded><![CDATA[<pre><code class="language-python">from selenium import webdriver  # æä¾›WebDriverçš„å®ç°
from selenium.webdriver.common.keys import Keys  # æä¾›é”®ç›˜æŒ‰é”®çš„æ”¯æŒ

options = webdriver.ChromeOptions()
options.add_experimental_option(&#x27;excludeSwitches&#x27;, [&#x27;enable-automation&#x27;])  # è®¾ç½®ä¸ºå¼€å‘è€…æ¨¡å¼ï¼Œé¿å…è¢«è¯†åˆ«
options.add_argument(&#x27;--headless&#x27;)  # æ— ç•Œé¢æ“ä½œã€‚æ•ˆç‡åº”è¯¥é«˜ä¸€äº›
options.add_argument(&quot;--proxy-server=http://39.97.240.222:5739&quot;)  # ä½¿ç”¨ä»£ç†

driver = webdriver.Chrome()
driver.add_cookie({})  # æ·»åŠ cookie
driver.get(&quot;http://www.python.org&quot;)
elem = driver.find_element_by_name(&quot;q&quot;)
elem.clear()
elem.seWebDrivernd_keys(&quot;pycon&quot;)
elem.send_keys(Keys.RETURN)  # åœ¨inputä¸­è¾“å…¥å›è½¦é”®
driver.close()  # ä»…å…³é—­ä¸€ä¸ªæ ‡ç­¾é¡µã€‚quitå°†å…³é—­æ•´ä¸ªæµè§ˆå™¨ã€‚

element = driver.find_element_by_xpath(&quot;//select[@name=&#x27;name&#x27;]&quot;)  # æ‰¾åˆ°ä¸‹æ‹‰æ¡†
all_options = element.find_elements_by_tag_name(&quot;option&quot;)  # æ‰¾åˆ°æ­¤å…ƒç´ ä¸­çš„option
for option in all_options:
    print(&quot;Value is: %s&quot; % option.get_attribute(&quot;value&quot;))  # è·å–valueå±æ€§å€¼
    option.click()
</code></pre><pre><code class="language-python" metastring="title=&quot;æ‹–æ”¾å·¥å…·&quot;" title="&quot;æ‹–æ”¾å·¥å…·&quot;">from selenium.webdriver import ActionChains  # ä¸“é—¨ç”¨äºæ‹–æ”¾çš„

element = driver.find_element_by_name(&quot;source&quot;)
target = driver.find_element_by_name(&quot;target&quot;)
action_chains = ActionChains(driver)
action_chains.drag_and_drop(element, target).perform()

driver.switch_to_window(&quot;windowName&quot;)  # æ”¯æŒä¸åŒçª—å£ä¹‹é—´çš„ç§»åŠ¨
driver.forward()
driver.back()  # è®¿é—®å†å²è®°å½•
driver.get_cookies()  # è·å–æ˜‚å‰é¡µé¢çš„Cookie
</code></pre><pre><code class="language-python" metastring="title=&quot;xpathæŸ¥æ‰¾å…ƒç´ &quot;" title="&quot;xpathæŸ¥æ‰¾å…ƒç´ &quot;">from selenium.webdriver.common.by import By  # ç”¨äºæŸ¥æ‰¾å…ƒç´ 

driver.find_element(By.XPATH, &quot;//button[text()=&quot;something&quot;]&quot;)  # find_element æ–¹æ³•ç”¨äºæŸ¥æ‰¾å•ä¸ªå…ƒç´ 
driver.find_elements(By.XPATH, &#x27;//button&#x27;)  # find_elements ç”¨äºæŸ¥æ‰¾å¤šä¸ªå…ƒç´ 

# è¿™äºŒè€…æ˜¯ç­‰ä»·çš„æŠŠ
driver.find_element_by_id(&#x27;loginForm&#x27;)  # ç¬¬ä¸€ä¸ªè¯¥ åŒ¹é… å…ƒç´  ä¼šè¢«åŒ¹é…å¹¶è¿”å›
</code></pre><pre><code class="language-python">from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait  # ç”¨äºåˆ›å»ºç­‰å¾…å¯¹è±¡
from selenium.webdriver.support import expected_conditions as EC  # æä¾›äº†ä¸€ç»„é¢„å®šä¹‰çš„æ¡ä»¶ä¾›WebDriverWaitä½¿ç”¨

driver = webdriver.Chrome()
driver.get(&quot;http://somedomain/url_that_delays_loading&quot;)

# æ˜¾å¼ç­‰å¾… - ç­‰å¾…æ»¡è¶³ä¸€å®šæ¡ä»¶ä¹‹åå†è¿›ä¸€æ­¥æ‰§è¡Œ
try:
    element = WebDriverWait(driver, 10).until(
        EC.presence_of_element_located((By.ID, &quot;myDynamicElement&quot;))
    )
finally:
    driver.quit()

# éšå¼ç­‰å¾… - å»ç­‰å¾…ä¸€å®šçš„æ—¶é—´åå»æŸ¥æ‰¾å…ƒç´ ã€‚ é»˜è®¤ç­‰å¾…æ—¶é—´æ˜¯0ç§’ï¼Œä¸€æ—¦è®¾ç½®è¯¥å€¼ï¼Œéšå¼ç­‰å¾…æ˜¯è®¾ç½®è¯¥WebDriverçš„å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ
driver.implicitly_wait(10) # seconds
</code></pre><pre><code class="language-python">from selenium import webdriver
.get()
.get_cookie()
.get_cookies()
.get_screenshot_as_base64()  # ä»¥base64ç¼–ç çš„å­—ç¬¦ä¸²è·å–å½“å‰çª—å£çš„å±å¹•å¿«ç…§
.get_screenshot_as_file(filename)  # å°†å½“å‰çª—å£çš„å±å¹•å¿«ç…§ä¿å­˜åˆ°PNGå›¾åƒæ–‡ä»¶ä¸­
.get_screenshot_as_png()  # ä»¥äºŒè¿›åˆ¶æ•°æ®è·å–å½“å‰çª—å£çš„å±å¹•æˆªå›¾
.save_screenshot(filename)  # å°†å½“å‰çª—å£çš„å±å¹•å¿«ç…§ä¿å­˜åˆ°PNGå›¾åƒæ–‡ä»¶ä¸­
.get_window_position(windowHandle =&#x27;current&#x27; ) # è·å–å½“å‰çª—å£çš„xï¼Œyä½ç½®
.get_window_rect()  # è·å–çª—å£çš„xï¼Œyåæ ‡ä»¥åŠå½“å‰çª—å£çš„é«˜åº¦å’Œå®½åº¦
.get_window_size(windowHandle =&#x27;current&#x27;)  # è·å–å½“å‰çª—å£çš„å®½åº¦å’Œé«˜åº¦ã€‚
.add_cookie({})  # å°†cookieæ·»åŠ åˆ°å½“å‰ä¼šè¯
.delete_all_cookies()  # åˆ é™¤ä¼šè¯èŒƒå›´å†…çš„æ‰€æœ‰cookie
.delete_cookie(&#x27;name&#x27;)  # åˆ é™¤å…·æœ‰ç»™å®šåç§°çš„å•ä¸ªcookie
.back()
.forward()
.close()  # å…³é—­å½“å‰çª—å£
.create_web_element(element_id)  # ä½¿ç”¨æŒ‡å®šçš„element_idåˆ›å»ºä¸€ä¸ªWebå…ƒç´ 
.execute()  # ?
.execute_async_script(script, * args)  # åœ¨å½“å‰çª—å£/æ¡†æ¶ä¸­å¼‚æ­¥æ‰§è¡ŒJavaScript
.execute_script(script, * args)  # åœ¨å½“å‰çª—å£/æ¡†æ¶ä¸­åŒæ­¥æ‰§è¡ŒJavaScript  # arguments[0] arguments[1] è¿™äº›æ˜¯èµ·ä¼ é€’å‚æ•°çš„ä½œç”¨
.find_element()
.find_elements()
.find_element_by_id()
.find_element_by_class_name()
.find_element_by_name()
.find_element_by_xpath()
.maximize_window()  # æœ€å¤§åŒ–
.minimize_window()  # â€œæœ€å°åŒ–â€æ“ä½œ
.refresh()  # åˆ·æ–°å½“å‰é¡µé¢
.set_window_position(xï¼Œyï¼ŒwindowHandle =&#x27;current&#x27; )  # è®¾ç½®å½“å‰çª—å£çš„xï¼Œyä½ç½®
.set_window_rect(x = Noneï¼Œy = Noneï¼Œwidth = Noneï¼Œheight = None)  # è®¾ç½®çª—å£çš„xï¼Œyåæ ‡ä»¥åŠå½“å‰çª—å£çš„é«˜åº¦å’Œå®½åº¦
.set_window_size(widthï¼Œheightï¼ŒwindowHandle =&#x27;current&#x27; )  # è®¾ç½®å½“å‰çª—å£çš„å®½åº¦å’Œé«˜åº¦
.name  # è¿”å›æ­¤å®ä¾‹çš„åŸºç¡€æµè§ˆå™¨çš„åç§°ã€‚
.title  # è¿”å›å½“å‰é¡µé¢çš„æ ‡é¢˜
</code></pre><pre><code class="language-python">selenium.webdriver.remote.webelement.WebElement  # DOMå…ƒç´ 
.get_attribute(name)  # è·å–å…ƒç´ çš„ç»™å®šå±æ€§æˆ–å±æ€§ã€‚
.get_property()  # è·å–å…ƒç´ çš„ç»™å®šå±æ€§
.is_displayed()  # å…ƒç´ æ˜¯å¦å¯¹ç”¨æˆ·å¯è§
.is_enabled()  # æ˜¯å¦å¯ç”¨å…ƒç´ 
.is_selected()  # æ˜¯å¦é€‰æ‹©å…ƒç´ ã€‚
.screenshot()  # å°†å½“å‰å…ƒç´ çš„å±å¹•å¿«ç…§ä¿å­˜åˆ°PNGå›¾åƒæ–‡ä»¶ä¸­
.send_keys()  # æ¨¡æ‹Ÿè¾“å…¥åˆ°å…ƒç´ ä¸­
.submit()  # æäº¤è¡¨æ ¼
.clear()  # æ¸…é™¤æ–‡æœ¬
.click()  # å•å‡»å…ƒç´ 
.screenshot_as_base64()  # base64ç¼–ç å­—ç¬¦ä¸²çš„å½¢å¼è·å–å½“å‰å…ƒç´ çš„å±å¹•å¿«ç…§
.screenshot_as_png()  # ä»¥äºŒè¿›åˆ¶æ•°æ®è·å–å½“å‰å…ƒç´ çš„å±å¹•æˆªå›¾
.find_element()
.find_element_by_class_name()  # è¯¥å…ƒç´ çš„å­å…ƒç´ ä¸­æŸ¥æ‰¾å…ƒç´ 
.find_element_by_id()  # è¯¥å…ƒç´ çš„å­å…ƒç´ ä¸­æŸ¥æ‰¾å…ƒç´ 
.find_element_by_xpath()  # è¯¥å…ƒç´ çš„å­å…ƒç´ ä¸­æŸ¥æ‰¾å…ƒç´ 
.id
.tag_name
.text
</code></pre><pre><code class="language-python">from selenium.webdriver import ActionChains

# ç§»åŠ¨åˆ°å…ƒç´  menu ç„¶åç‚¹å‡» hidden_submenu æŒ‰é’®
menu = driver.find_element_by_css_selector(&quot;.nav&quot;)
hidden_submenu = driver.find_element_by_css_selector(&quot;.nav #submenu1&quot;)
ActionChains(driver).move_to_element(menu).click(hidden_submenu).perform()

# ä¸ä¸Šé¢ä½ æ˜¯ç­‰ä»·çš„
menu = driver.find_element_by_css_selector(&quot;.nav&quot;)
hidden_submenu = driver.find_element_by_css_selector(&quot;.nav #submenu1&quot;)
actions = ActionChains(driver)
actions.move_to_element(menu)
actions.click(hidden_submenu)
actions.perform()  # è¿™å¥è¯æ˜¯æ‰§è¡Œçš„æ„æ€

.click(on_element=None)  # ç‚¹å‡»æŸä¸ªå…ƒç´ ã€‚ç‚¹å®Œå°±æ¾å¼€äº†
.click_and_hold(on_element=None)  # å·¦é”®ç‚¹å‡»æŸä¸ªå…ƒç´ å¹¶ä¸”ä¸æ¾æ‰‹
.context_click(on_element=None)  # å³é”®ç‚¹å‡»æŸä¸ªå…ƒç´ 
.double_click(on_element=None)  # åŒå‡»æŸä¸ªå…ƒç´ 
.drag_and_drop(source, target)  # æŒ‰ä½æºå…ƒç´ ä¸Šçš„é¼ æ ‡å·¦é”®, ç„¶åç§»åŠ¨åˆ°ç›®æ ‡å…ƒç´ å¹¶é‡Šæ”¾é¼ æ ‡æŒ‰é’®
.drag_and_drop_by_offset(source, xoffset, yoffset)  # æŒ‰ä½æºå…ƒç´ ä¸Šçš„é¼ æ ‡å·¦é”®ï¼Œç„¶åç§»åŠ¨åˆ°ç›®æ ‡åç§»é‡å¹¶é‡Šæ”¾é¼ æ ‡æŒ‰é’®ã€‚
.key_down(value, element=None)  # åªå‘é€ä¸€ä¸ªæŒ‰é”®ï¼Œä¸é‡Šæ”¾å®ƒã€‚æ¯”å¦‚ä½¿ç”¨ Control, Alt and Shift çš„æ—¶å€™
.key_up(value, element=None)  # é‡Šæ”¾ä¿®æ”¹é”®
.move_by_offset(xoffset, yoffset)  # å°†é¼ æ ‡ç§»åŠ¨åˆ°å½“å‰é¼ æ ‡ä½ç½®çš„åç§»é‡ã€‚
.move_to_element(to_element)  # å°†é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ çš„ä¸­é—´ã€‚
.move_to_element_with_offset(to_element, xoffset, yoffset)  # å°†é¼ æ ‡ç§»åŠ¨æŒ‡å®šå…ƒç´ çš„åç§»é‡
.pause(s)  # æš‚åœæ‰€æœ‰è¾“å…¥è¾¾æŒ‡å®šçš„æŒç»­æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰
.perform()  # æ‰§è¡Œæ‰€æœ‰å­˜å‚¨çš„æ“ä½œ
.release(on_element = None )  # é‡Šæ”¾å…ƒç´ ä¸ŠæŒ‰ä½çš„é¼ æ ‡é”®
.reset_actions()  # æ¸…é™¤å·²å­˜å‚¨åœ¨è¿œç«¯çš„æ“ä½œã€‚
.send_keys(* keys_to_send )  # å°†é”®å‘é€åˆ°å½“å‰çš„ç„¦ç‚¹å…ƒç´ 
.send_keys_to_element(elementï¼Œ* keys_to_send )  # å°†é”®å‘é€åˆ°å…ƒç´ 
</code></pre><pre><code class="language-python">from selenium.webdriver.support import expected_conditions as EC  # æä¾›äº†ä¸€ç»„é¢„å®šä¹‰çš„æ¡ä»¶ä¾›WebDriverWaitä½¿ç”¨
.alert_is_present()  # å¸Œæœ›æœ‰è­¦æŠ¥å‡ºç°
.element_located_selection_state_to_be(locator,is_selected)  # æœŸæœ›æ‰¾åˆ°ä¸€ä¸ªå…ƒç´ å¹¶æ£€æŸ¥æŒ‡å®šçš„é€‰æ‹©çŠ¶æ€æ˜¯å¦å¤„äºè¯¥çŠ¶æ€. is_selectedçš„å…ƒç»„æ˜¯å¸ƒå°”å€¼
.element_located_to_be_selected()  # é€‰æ‹©å¯¹è¦å®šä½çš„å…ƒç´ çš„æœŸæœ›ã€‚å®šä½ç¬¦æ˜¯ï¼ˆæŒ‰è·¯å¾„ï¼‰çš„å…ƒç»„
.element_selection_state_to_be()  # ç”¨äºæ£€æŸ¥æ˜¯å¦é€‰æ‹©äº†ç»™å®šå…ƒç´ çš„æœŸæœ›ã€‚å…ƒç´ æ˜¯WebElementå¯¹è±¡is_selectedæ˜¯å¸ƒå°”å€¼
.element_to_be_clickable()  # ç”¨äºæ£€æŸ¥å…ƒç´ çš„æœŸæœ›æ˜¯å¯è§çš„å¹¶ä¸”å·²å¯ç”¨ï¼Œå› æ­¤æ‚¨å¯ä»¥å•å‡»å®ƒ
.element_to_be_selected()  # é€‰æ‹©æ£€æŸ¥é€‰æ‹©çš„æœŸæœ›
.frame_to_be_available_and_switch_to_it()  # ç”¨äºæ£€æŸ¥ç»™å®šå¸§æ˜¯å¦å¯åˆ‡æ¢åˆ°çš„æœŸæœ›ã€‚å¦‚æœè¯¥æ¡†æ¶å¯ç”¨ï¼Œå®ƒå°†ç»™å®šçš„é©±åŠ¨ç¨‹åºåˆ‡æ¢åˆ°æŒ‡å®šçš„æ¡†æ¶
.invisibility_of_element_located()  # ç”¨äºæ£€æŸ¥å…ƒç´ åœ¨DOMä¸Šä¸å¯è§æˆ–ä¸å­˜åœ¨çš„æœŸæœ›. ç”¨äºæŸ¥æ‰¾å…ƒç´ çš„å®šä½å™¨
.new_window_is_opened()  # æœŸæœ›å°†æ‰“å¼€ä¸€ä¸ªæ–°çª—å£å¹¶å¢åŠ çª—å£å¥æŸ„çš„æ•°é‡
.number_of_windows_to_be()  # æœŸæœ›çª—å£æ•°ä¸ºä¸€å®šå€¼
.presence_of_all_elements_located()  # æœŸæœ›æ£€æŸ¥ç½‘é¡µä¸Šæ˜¯å¦å­˜åœ¨è‡³å°‘ä¸€ä¸ªå…ƒç´ ã€‚å®šä½å™¨ç”¨äºæŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°åè¿”å›
.presence_of_element_located()  # æœŸæœ›æ£€æŸ¥é¡µé¢çš„DOMä¸Šæ˜¯å¦å­˜åœ¨å…ƒç´ ã€‚è¿™å¹¶ä¸ä¸€å®šæ„å‘³ç€è¯¥å…ƒç´ æ˜¯å¯è§çš„ã€‚å®šä½å™¨-ç”¨äºæŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°åè¿”å›
.staleness_of()  # ç­‰å¾…ç›´åˆ°å…ƒç´ ä¸å†é™„åŠ åˆ°DOMã€‚elementæ˜¯è¦ç­‰å¾…çš„å…ƒç´ ã€‚å¦‚æœè¯¥å…ƒç´ ä»é™„åŠ åœ¨DOMä¸Šï¼Œåˆ™è¿”å›Falseï¼Œå¦åˆ™è¿”å›true
.text_to_be_present_in_element()  # ç”¨äºæ£€æŸ¥æŒ‡å®šå…ƒç´ ä¸­æ˜¯å¦å­˜åœ¨ç»™å®šæ–‡æœ¬çš„æœŸæœ›ã€‚æ–‡å­—å®šä½å™¨
.text_to_be_present_in_element_value()  # ç”¨äºæ£€æŸ¥ç»™å®šæ–‡æœ¬æ˜¯å¦å­˜åœ¨äºå…ƒç´ çš„å®šä½å™¨ä¸­çš„æœŸæœ›
.title_contains()  # å½“å‰URLæ˜¯å¦åŒ…å«åŒºåˆ†å¤§å°å†™çš„å­å­—ç¬¦ä¸²
.url_changes(url)  # æœŸæœ›æ£€æŸ¥å½“å‰URL. urlæ˜¯æœŸæœ›çš„urlï¼Œå¦‚æœä¸ç›¸åŒï¼Œåˆ™ä¸èƒ½å®Œå…¨åŒ¹é…ï¼Œå¦åˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›false. æ”¹å˜äº†å°±è¡Œ
.url_contains()
.url_to_be()  # æœŸæœ›æ£€æŸ¥å½“å‰URLã€‚urlæ˜¯é¢„æœŸçš„urlï¼Œå¿…é¡»å®Œå…¨åŒ¹é…ï¼Œå¦‚æœæ ‡é¢˜åŒ¹é…ï¼Œåˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›falseã€‚è¿™ä¸ªå°±æ˜¯è¦å®Œå…¨å˜ä¸ºè¿™æ ·
.visibility_of()  # æœŸæœ›æ£€æŸ¥å·²çŸ¥åœ¨é¡µé¢DOMä¸Šå­˜åœ¨çš„å…ƒç´ æ˜¯å¦å¯è§
.visibility_of_any_elements_located()  # æœŸæœ›æ£€æŸ¥ç½‘é¡µä¸Šæ˜¯å¦å­˜åœ¨è‡³å°‘ä¸€ä¸ªå…ƒç´ ã€‚å®šä½å™¨ç”¨äºæŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°åè¿”å›WebElementåˆ—è¡¨
.visibility_of_element_located()  # æœŸæœ›æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨äºé¡µé¢çš„DOMä¸Šå¹¶ä¸”å¯è§ã€‚å¯è§æ€§æ„å‘³ç€ä¸ä»…æ˜¾ç¤ºå…ƒç´ ï¼Œè€Œä¸”å…¶é«˜åº¦å’Œå®½åº¦éƒ½å¤§äº0
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[tidbä¸»é”®è‡ªå¢å¼‚å¸¸æ’æŸ¥]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/12/08/tidbä¸»é”®è‡ªå¢å¼‚å¸¸æ’æŸ¥</link>
            <guid>tidbä¸»é”®è‡ªå¢å¼‚å¸¸æ’æŸ¥</guid>
            <pubDate>Thu, 08 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[åœ¨ä¸€æ¬¡çº¿ä¸Šè¿ç»´è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ€æ–°çš„æ•°æ®ï¼Œæ’åœ¨äº†å‰å‡ å¤©ä¹‹åã€‚]]></description>
            <content:encoded><![CDATA[<p>åœ¨ä¸€æ¬¡çº¿ä¸Šè¿ç»´è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ€æ–°çš„æ•°æ®ï¼Œæ’åœ¨äº†å‰å‡ å¤©ä¹‹åã€‚</p><p>å› ä¸ºåˆ—è¡¨æ˜¯æŒ‰ä¸»é”®æ’åºçš„ï¼Œæ‰€ä»¥æ˜¾ç¤ºæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p><p>é—®é¢˜å°±åœ¨äºï¼Œä¸ºä»€ä¹ˆæœ€æ–°çš„æ•°æ®ï¼Œä¸»é”®ä¼šå°äºå‰å‡ å¤©çš„æ•°æ®ã€‚</p><p>ä¹‹åï¼Œæˆ‘ä»¬é€šè¿‡é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°è¿™ä¼¼ä¹å¹¶ä¸æ˜¯ä¸€ä¸ªå¼‚å¸¸ã€‚</p><p>::: info
TiDB çš„è‡ªå¢ ID (AUTO_INCREMENT) åªä¿è¯è‡ªå¢ä¸”å”¯ä¸€ï¼Œå¹¶ä¸ä¿è¯è¿ç»­åˆ†é…ã€‚<br/>
<!-- -->TiDB ç›®å‰é‡‡ç”¨æ‰¹é‡åˆ†é…çš„æ–¹å¼ï¼Œæ‰€ä»¥å¦‚æœåœ¨å¤šå° TiDB ä¸ŠåŒæ—¶æ’å…¥æ•°æ®ï¼Œåˆ†é…çš„è‡ªå¢ ID ä¼šä¸è¿ç»­ã€‚<br/>
<!-- -->å½“å¤šä¸ªçº¿ç¨‹å¹¶å‘å¾€ä¸åŒçš„ tidb-server æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°åæ’å…¥çš„æ•°æ®è‡ªå¢ ID å°çš„æƒ…å†µã€‚
æ­¤å¤–ï¼ŒTiDBå…è®¸ç»™æ•´å‹ç±»å‹çš„å­—æ®µæŒ‡å®š AUTO_INCREMENTï¼Œä¸”ä¸€ä¸ªè¡¨åªå…è®¸ä¸€ä¸ªå±æ€§ä¸º AUTO_INCREMENT çš„å­—æ®µã€‚
:::</p><p>æ–‡æ¡£å‚è€ƒï¼š</p><ul><li><a href="https://docs.pingcap.com/zh/tidb/v4.0/auto-increment">https://docs.pingcap.com/zh/tidb/v4.0/auto-increment</a>  </li><li><a href="https://docs.pingcap.com/zh/tidb/v4.0/mysql-compatibility">https://docs.pingcap.com/zh/tidb/v4.0/mysql-compatibility</a></li></ul><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[pythonæ‰“åŒ…è¯´æ˜]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/12/02/pythonæ‰“åŒ…è¯´æ˜</link>
            <guid>pythonæ‰“åŒ…è¯´æ˜</guid>
            <pubDate>Fri, 02 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[é€šç”¨æµç¨‹]]></description>
            <content:encoded><![CDATA[<h2>é€šç”¨æµç¨‹</h2><ul><li>æ£€æµ‹</li></ul><pre><code class="language-shell" metastring="script">python setup.py check
</code></pre><ul><li>æ„å»º</li></ul><pre><code class="language-shell" metastring="script">python setup.py sdist
</code></pre><ul><li>ä¸Šä¼ </li></ul><pre><code class="language-shell" metastring="script">pip install twine
twine upload dist/__packages__-__version__.tar.gz
</code></pre><h2>æ–‡ä»¶ç®¡ç†</h2><p>åœ¨æ­£å¸¸æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæ‰“åŒ…ç¨‹åºå¯èƒ½ä¼šç´¢å¼•åˆ°ä¸€äº›æµ‹è¯•ã€ç¼“å­˜æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼š</p><ul><li><strong>pycache</strong></li><li>*.pyc</li><li>*_test.py</li></ul><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥<code>MANIFEST.in</code>æ–‡ä»¶ï¼Œæ¥å¯¹æ„å»ºè¿‡ç¨‹ä¸­çš„æ–‡ä»¶è¿›è¡Œç®€å•ç®¡ç†ã€‚ç›¸å…³æŒ‡ä»¤æœ‰ï¼š</p><table><thead><tr><th>æŒ‡ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>include file-pattern ...</td><td>æ·»åŠ æŒ‡å®šæ–‡ä»¶ï¼Œéæ ¹ç›®å½•æ–‡ä»¶éœ€è¦æŒ‡å®šè·¯å¾„</td></tr><tr><td>exclude file-pattern ...</td><td>æ’é™¤æŒ‡å®šæ–‡ä»¶ï¼Œéæ ¹ç›®å½•æ–‡ä»¶éœ€è¦æŒ‡å®šè·¯å¾„</td></tr><tr><td>recursive-include dir-pattern file-pattern ...</td><td>é€’å½’æ·»åŠ æŒ‡å®šç›®å½•ä¸‹çš„æŒ‡å®šæ–‡ä»¶</td></tr><tr><td>recursive-exclude dir-pattern file-pattern ...</td><td>é€’å½’æ’é™¤æŒ‡å®šç›®å½•ä¸‹çš„æŒ‡å®šæ–‡ä»¶</td></tr><tr><td>global-include file-or-dir-pattern ...</td><td>å…¨å±€æ·»åŠ æŒ‡å®šç›®å½•æˆ–è€…æ–‡ä»¶</td></tr><tr><td>global-exclude file-or-dir-pattern ...</td><td>å…¨å±€æ’é™¤æŒ‡å®šç›®å½•æˆ–è€…æ–‡ä»¶</td></tr><tr><td>graft dir-pattern</td><td>æ·»åŠ æŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶</td></tr><tr><td>prune dir-pattern</td><td>æ’é™¤æŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶</td></tr></tbody></table><p>æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œå¯ä»¥æä¾›ç²¾ç¡®åå­—ï¼Œä¹Ÿå¯ä»¥æä¾›æ­£åˆ™åŒ¹é…ã€‚å¦‚ï¼š</p><pre><code class="language-text" metastring="title=&quot;MANIFEST.in&quot;" title="&quot;MANIFEST.in&quot;">include LICENSE
include MANIFEST.in
include requirements.txt

exclude README.md

global-exclude __pycache__
global-exclude *.py[cod]
global-exclude *_test.py
global-exclude test_*.py

prune test
prune demo
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å‰ç«¯å…ƒç´ è‡ªåŠ¨é“ºæ»¡æ¢è¡Œ]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/11/30/å‰ç«¯å…ƒç´ è‡ªåŠ¨é“ºæ»¡æ¢è¡Œ</link>
            <guid>å‰ç«¯å…ƒç´ è‡ªåŠ¨é“ºæ»¡æ¢è¡Œ</guid>
            <pubDate>Wed, 30 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼š]]></description>
            <content:encoded><![CDATA[<p>ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>inline-block</li><li>flex + flex-wrap</li><li>grid</li></ul><h2>inline-block</h2><p>åœ¨å­å…ƒç´ ä¸­å¢åŠ <code>inline-block</code>å±æ€§</p><pre><code class="language-css">.block {
    display: inline-block;
}
</code></pre><h2>flex</h2><p>åœ¨çˆ¶å…ƒç´ ä¸­ä½¿ç”¨ï¼Œæ­¤æ—¶ä¸èƒ½è®¾ç½®é«˜åº¦ã€‚</p><pre><code class="language-css">.block {
    display: flex;
    flex-wrap: wrap;
}
</code></pre><p>å› ä¸º<code>flex-wrap</code>å±æ€§æŒ‡å®š<code>flex</code>å…ƒç´ å•è¡Œæ˜¾ç¤ºè¿˜æ˜¯å¤šè¡Œæ˜¾ç¤ºï¼Œè®¾ç½®äº†é«˜åº¦å°†ä¼šå¹³é“ºã€‚</p><h2>grid</h2><p>åœ¨çˆ¶å…ƒç´ ä¸­ä½¿ç”¨ï¼Œæ­¤æ—¶ä¸æ ¹æ®å¤§å°å¹³é“ºï¼Œè€Œæ˜¯å¼ºåˆ¶å¹³é“º</p><pre><code class="language-css">.block {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr; /*æ¨ªå‘æ’å¸ƒæ—¶ï¼Œå®½åº¦å‡åˆ†ä¸ºä¸‰ç­‰åˆ†*/
}
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Goå®ç°éè·³è½¬çš„httpè¯·æ±‚]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/11/17/Goå®ç°éè·³è½¬httpè¯·æ±‚</link>
            <guid>Goå®ç°éè·³è½¬çš„httpè¯·æ±‚</guid>
            <pubDate>Thu, 17 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Go http å‘èµ·è¯·æ±‚æ—¶ï¼Œä¸€æ—¦å­˜åœ¨302ç­‰è·³è½¬è¯·æ±‚çš„åœºæ™¯ï¼Œä¼šé»˜è®¤å¸®ä½ è·³è½¬è¿‡å»ã€‚]]></description>
            <content:encoded><![CDATA[<p>Go http å‘èµ·è¯·æ±‚æ—¶ï¼Œä¸€æ—¦å­˜åœ¨302ç­‰è·³è½¬è¯·æ±‚çš„åœºæ™¯ï¼Œä¼šé»˜è®¤å¸®ä½ è·³è½¬è¿‡å»ã€‚</p><p>æ¯”å¦‚ä½ åªæ˜¯æƒ³ç®€å•çš„ Head è¯·æ±‚ï¼Œä½†å½“å¯¹æ–¹å“åº” 302 æ—¶ï¼Œå®é™…æœ€åè·å–åˆ°çš„å°±æ˜¯ Location çš„ç»“æœã€‚</p><p>å®é™…æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ http client å®ç°éè·³è½¬è¯·æ±‚ï¼š</p><pre><code class="language-go">var client = http.Client{
    CheckRedirect: func(req *http.Request, via []*http.Request) error {
        return http.ErrUseLastResponse
    },
}
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è®°ä¸€æ¬¡å…³äºæ–‡ä»¶IOçš„äº‰æ‰§]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/11/11/è®°ä¸€æ¬¡æ–‡ä»¶IOå¼‚å¸¸</link>
            <guid>è®°ä¸€æ¬¡å…³äºæ–‡ä»¶IOçš„äº‰æ‰§</guid>
            <pubDate>Fri, 11 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯æ˜¯æœ‰ä¸ªéœ€æ±‚éœ€è¦ä¸‹è½½æ–‡ä»¶å¹¶è®¡ç®—æ­¤æ–‡ä»¶çš„MD5ã€‚]]></description>
            <content:encoded><![CDATA[<p>èƒŒæ™¯æ˜¯æœ‰ä¸ªéœ€æ±‚éœ€è¦ä¸‹è½½æ–‡ä»¶å¹¶è®¡ç®—æ­¤æ–‡ä»¶çš„MD5ã€‚</p><p>ç„¶ååŒäº‹å¼€å‘çš„ï¼ˆGoï¼‰ç¨‹åºæ˜¯å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå†™å…¥ä¸‹è½½æ•°æ®ã€‚å†æ²¡æœ‰å…³é—­æ–‡ä»¶çš„å‰æä¸‹ï¼Œé‡æ–°åˆå¼€å¯äº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶æµæ¥è®¡ç®—MD5ã€‚</p><p>ç”±æ­¤å¼•å‘äº†ä¸€äº›äº‰æ‰§...</p><p>ä¸ºæ­¤æˆ‘æ®ç†åŠ›äº‰ï¼š</p><p>æ–‡ä»¶IOåœ¨<code>write</code>çš„è¿‡ç¨‹ï¼Œæ˜¯ä¸ä¿è¯è½ç›˜çš„ï¼Œå³æœ‰ä¸€éƒ¨åˆ†æ•°æ®ä¼šæš‚å­˜åœ¨å†…å­˜ä¸­ã€‚<br/>
<!-- -->åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªåªè¯»çš„æ–‡ä»¶æµï¼Œå¯èƒ½è¯»ä¸åˆ°åœ¨å†…å­˜ä¸­çš„æ•°æ®...</p><p>ä½†æ˜¯åŒäº‹ç”¨å®é™…è¯æ˜äº†ï¼Œè¿™æ®µä»£ç å†å®é™…è®¡ç®—è¿‡ç¨‹ï¼Œå¹¶æ²¡æœ‰ä»»ä½•é—®é¢˜...</p><p>æˆ‘è‡ªå·±ä¹Ÿæ— æ³•å¤ç°...</p><p>ä¹‹åç”¨<code>Python</code>æµ‹è¯•äº†ä¸‹ï¼Œå‘ç°ç¡®å®è¯»ä¸åˆ°ï¼Œä½†<code>Go</code>å°±æ˜¯å¯ä»¥è¯»å–åˆ°...</p><pre><code class="language-python">with open(&quot;tmpfile&quot;, &quot;w&quot;, encoding=&quot;utf-8) as w:
    w.write(&quot;hello world&quot;)
    
    with open(&quot;tmpfile&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as r:
        assert r.read() == &quot;hello world&quot;
</code></pre><p>æœ€åæ€»ç»“ï¼š   </p><p>Go æ–‡ä»¶å¥æŸ„è°ƒç”¨ Write æ—¶æ˜¯ç›´æ¥è°ƒç”¨çš„ç³»ç»Ÿæ¥å£ï¼Œæ•…å¯ä»¥è¯»å–åˆ°æœªè½ç›˜ã€‚</p><p>Python åˆ™æ˜¯è‡ªå·±å®ç°äº†ç¼“å­˜æœºåˆ¶ã€‚åœ¨ Go ä¸­ä¹Ÿæœ‰ bufio åº“å¯ä»¥å®ç°ç±»ä¼¼çš„æœºåˆ¶</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Iaas & Paas & Saas]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/11/08/IaasPaasSaas</link>
            <guid>Iaas &amp; Paas &amp; Saas</guid>
            <pubDate>Tue, 08 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Iaas: Infrastructure as a Service åŸºç¡€è®¾æ–½å³æœåŠ¡]]></description>
            <content:encoded><![CDATA[<p><strong>Iaas</strong>: Infrastructure as a Service åŸºç¡€è®¾æ–½å³æœåŠ¡</p><p><strong>Paas</strong>: Platform as a service å¹³å°å³æœåŠ¡</p><p><strong>Saas</strong>: Software as a service è½¯ä»¶å³æœåŠ¡</p><p>ä»¥ä¸ªäººæ­å»ºæœåŠ¡ä¸ºä¾‹ï¼š</p><p>å½“æˆ‘ä»¬å¼€å‘å¥½ä¸€ä¸ªæœåŠ¡ï¼Œéœ€è¦è¿›è¡Œéƒ¨ç½²æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è´­ä¹°ç‰©ç†æœºè¿›è¡Œéƒ¨ç½²ï¼Œä½†è¿™æ ·æˆ‘ä»¬å°±éœ€è¦ç›´æ¥é¢å¯¹ç‰©ç†æœºçš„ç»´æŠ¤ï¼Œè¿˜æœ‰ç½‘ç»œç»´æŠ¤ç­‰é—®é¢˜ã€‚<br/>
<!-- -->ä¸ºäº†é¿å…è¿™äº›ç¹ççš„é—®é¢˜ï¼Œæˆ‘ä»¬æ›´ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥å»äº‘æœåŠ¡å‚å•†ç§Ÿä¸€å°äº‘æœåŠ¡å™¨ï¼Œç„¶åå°†æˆ‘ä»¬çš„ç¨‹åºéƒ¨ç½²åœ¨æ­¤æœåŠ¡å™¨ä¸Šã€‚<br/>
<!-- -->è¯¥äº‘æœåŠ¡å™¨ä¸ºæˆ‘ä»¬æä¾›äº†è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œç­‰ç¡¬ä»¶åŸºç¡€èƒ½åŠ›ï¼Œè¿™ç§ç§Ÿç¡¬ä»¶è®¾å¤‡çš„æœåŠ¡å°±æ˜¯Iaasã€‚</p><p>æ‰€ä»¥å¦‚æœä½ æœ‰è¿‡è´­ä¹°è¿‡æœåŠ¡å™¨çš„ç²¾åŠ›ç»å†ï¼Œé‚£å…¶å®ä½ å°±å·²ç»è´­ä¹°è¿‡IaasæœåŠ¡äº†~</p><p>å¦‚æœæˆ‘ä»¬å¼€å‘çš„æœåŠ¡ï¼Œæ¶‰åŠç±»ä¼¼æ”¯ä»˜ç­‰ä¸‰æ–¹èƒ½åŠ›æ—¶ï¼Œæˆ‘ä»¬å‡ ä¹ä¸å¯èƒ½è‡ªå·±å†™ä¸€å¥—æ”¯ä»˜äº¤æ˜“ç³»ç»Ÿï¼Œæ›´å¤šçš„æ˜¯å¯¹æ¥å¾®ä¿¡ã€æ”¯ä»˜å®ç­‰ä¸‰æ–¹æ”¯ä»˜æ¥å£ã€‚<br/>
<!-- -->è¿™ç±»æœåŠ¡å°±æ˜¯Paasï¼Œå¹³å°å³æœåŠ¡ã€‚</p><p>ä»¥ä¸ŠæœåŠ¡éƒ½æ˜¯è‡ªå·±å¼€å‘çš„ï¼Œå¸‚é¢ä¸Šè¿˜æœ‰å¾ˆå¤šæœåŠ¡æ˜¯é€šè¿‡æä¾›è½¯ä»¶æœåŠ¡ï¼Œå¦‚æœè´­ç‰©ç³»ç»Ÿã€ç‰©æµç³»ç»Ÿã€é‡‡è´­ç³»ç»Ÿç­‰ï¼Œè¿™äº›å°±æ˜¯SaasæœåŠ¡äº†ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SQLéšå½•]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/10/17/SQLéšå½•</link>
            <guid>SQLéšå½•</guid>
            <pubDate>Mon, 17 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[éœ€æ±‚è¯´æ˜ï¼šåœ¨ä¼—å¤šå‡½æ•°ä¸­ï¼Œæ‰¾åˆ°ä¸ç›®æ ‡è¡¨ç›¸å…³çš„å‡½æ•°ã€‚]]></description>
            <content:encoded><![CDATA[<pre><code class="language-sql">SELECT
    proname 
FROM
    pg_proc 
WHERE
    prosrc LIKE&#x27;%table_name%&#x27;;
</code></pre><p>éœ€æ±‚è¯´æ˜ï¼šåœ¨ä¼—å¤šå‡½æ•°ä¸­ï¼Œæ‰¾åˆ°ä¸ç›®æ ‡è¡¨ç›¸å…³çš„å‡½æ•°ã€‚</p><p>å®ç°è¯´æ˜ï¼š</p><ul><li>pg_procï¼špgå­˜å‚¨å‡½æ•°çš„è¡¨</li><li>prosrcï¼šæ˜¯å‡½æ•°æºç ï¼Œé€šè¿‡æ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢æ‰€æœ‰æºç ä¸­ï¼Œä¸ç›®æ ‡è¡¨æœ‰å…³çš„å‡½æ•°</li><li>pronameï¼šå‡½æ•°å</li></ul><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SQLéšå½•]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/10/14/SQLéšå½•</link>
            <guid>SQLéšå½•</guid>
            <pubDate>Fri, 14 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[éœ€æ±‚è¯´æ˜ï¼štable.keyæ˜¯ä¸€ä¸ªJSONBå­—æ®µï¼Œå­˜å‚¨æ•°æ®ä¸ºï¼š[{"rule": ["hash=hashstring;"]}]ï¼Œç°éœ€è¦è§£ææ­¤æ•°æ®ï¼Œ]]></description>
            <content:encoded><![CDATA[<pre><code class="language-sql">SELECT 
    SUBSTRING( ( table.key -&gt; 0- &gt; &#x27;rule&#x27; -&gt; 0 ) :: TEXT, &#x27;=*([0-9a-zA-Z]*);&#x27; ) AS hash 
FROM
    table;
</code></pre><p>éœ€æ±‚è¯´æ˜ï¼š<code>table.key</code>æ˜¯ä¸€ä¸ª<code>JSONB</code>å­—æ®µï¼Œå­˜å‚¨æ•°æ®ä¸ºï¼š<code>[{&quot;rule&quot;: [&quot;hash=hashstring;&quot;]}]</code>ï¼Œç°éœ€è¦è§£ææ­¤æ•°æ®ï¼Œ
å¹¶æˆªå–å‡ºæ­¤æ•°æ®ç»“æ„ä¸­çš„å“ˆå¸Œæ•°æ®ã€‚</p><p>å‚è€ƒï¼š<a href="http://postgres.cn/docs/12/functions-json.html">9.15. JSON å‡½æ•°å’Œæ“ä½œç¬¦</a><br/>
<!-- -->å‚è€ƒï¼š<a href="http://postgres.cn/docs/12/functions-string.html">9.4. å­—ç¬¦ä¸²å‡½æ•°å’Œæ“ä½œç¬¦</a>     </p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å¦‚ä½•ç†è§£å¼•æ“]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/10/07/å¦‚ä½•ç†è§£å¼•æ“</link>
            <guid>å¦‚ä½•ç†è§£å¼•æ“</guid>
            <pubDate>Fri, 07 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸é‡åˆ°å„ç§é«˜çº§è¯æ±‡ï¼Œæ¯”å¦‚ç—…æ¯’æŸ¥æ€å¼•æ“ã€äº‘å¼•æ“ç­‰ç­‰ã€‚]]></description>
            <content:encoded><![CDATA[<p>åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸é‡åˆ°å„ç§é«˜çº§è¯æ±‡ï¼Œæ¯”å¦‚ç—…æ¯’æŸ¥æ€å¼•æ“ã€äº‘å¼•æ“ç­‰ç­‰ã€‚   </p><p>æˆ‘ä¸ªäººç†è§£ï¼Œå¼•æ“æ›´å¤šç”¨äºå®šä¹‰ä¸€ç§ç»è¿‡é«˜åº¦æŠ½è±¡çš„ä¸šåŠ¡æ‰§è¡Œé€»è¾‘ã€‚   </p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è®°ä¸€æ¬¡SQLAlchemyè¿æ¥å¼‚å¸¸é—®é¢˜]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/08/21/è®°ä¸€æ¬¡SQLAlchemyè¿æ¥å¼‚å¸¸é—®é¢˜</link>
            <guid>è®°ä¸€æ¬¡SQLAlchemyè¿æ¥å¼‚å¸¸é—®é¢˜</guid>
            <pubDate>Sun, 21 Aug 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æ’æŸ¥ä¸å®šä½]]></description>
            <content:encoded><![CDATA[<pre><code class="language-text" metastring="title=&quot;æœåŠ¡é”™è¯¯æ—¥å¿—&quot;" title="&quot;æœåŠ¡é”™è¯¯æ—¥å¿—&quot;">mysql.connector.errors.OperationalError: 2055: Lost connection to MySQL server
</code></pre><h2>æ’æŸ¥ä¸å®šä½</h2><p>ä»è¿æ¥ä¿¡æ¯å¯ä»¥å¿«é€Ÿçœ‹å‡ºï¼Œæ˜¯æ•°æ®åº“è¿æ¥ä¸¢å¤±äº†ï¼Œæˆ‘ä»¬é¦–å…ˆåšäº†ç®€å•çš„æœåŠ¡é‡å¯ï¼Œå¹¶é‡è¯•è¯·æ±‚ï¼ŒæœŸé—´åŒæ­¥è§‚å¯Ÿæ•°æ®åº“çŠ¶æ€ï¼Œç¡®ä¿æ•°æ®åº“æœåŠ¡æŒç»­å¯ç”¨ã€‚</p><p>ç¥å¥‡çš„æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…ç°çš„é”™è¯¯ã€‚</p><pre><code class="language-text" metastring="title=&quot;æœåŠ¡é”™è¯¯æ—¥å¿—&quot;" title="&quot;æœåŠ¡é”™è¯¯æ—¥å¿—&quot;">File &quot;/usr/local/lib/python3.6/site-packages/mysql/connector/network.py&quot;, line 140, in send_plain 
    self.sock.sendall(packet) 
BrokenPipeError: [Errno 32] Broken pipe 
</code></pre><p>ç»§ç»­æ’æŸ¥æ—¥å¿—ï¼Œæˆ‘ä»¬çœ‹åˆ°æ˜¯åœ¨æ¨é€æ•°æ®çš„è¿‡ç¨‹ï¼Œè¿æ¥æŸåäº†ã€‚ç”±äºæ˜¯å¿…ç°ï¼Œæ‰€ä»¥ç½‘ç»œä¸ç¨³å®šåŸºæœ¬å¯ä»¥æ’é™¤ã€‚<br/>
<!-- -->æˆ‘ä»¬æ€€ç–‘è¿™å¯èƒ½æ˜¯æ•°æ®åº“ä¾§çš„ä¸»åŠ¨è¡Œä¸ºï¼Œå³è§¦å‘äº†æŸäº›æœºåˆ¶ï¼Œå¯¼è‡´æ•°æ®åº“å¼ºåˆ¶å…³é—­äº†è¿æ¥ã€‚</p><p>æˆ‘ä»¬æ‹¿åˆ°äº†å¾…æ‰§è¡Œçš„SQLï¼Œç›´æ¥åœ¨Navicatä¸Šè¿›è¡Œå¤ç°ï¼Œå‘ç°äº†æ–°çš„é”™è¯¯ä¿¡æ¯ï¼š</p><pre><code class="language-text" metastring="title=&quot;navicaté”™è¯¯æ—¥å¿—&quot;" title="&quot;navicaté”™è¯¯æ—¥å¿—&quot;">Got a packet bigger than &#x27;max_allowed_packet&#x27; bytes
</code></pre><p>è¿™æ˜æ˜¾å°±æ˜¯å•æ¬¡è¯·æ±‚å¤§å°è¶…è¿‡äº†æ•°æ®åº“çš„é™åˆ¶ï¼Œæ‰€ä»¥å¯¼è‡´è¿æ¥è¢«å¼ºåˆ¶å…³é—­ã€‚ä½†æ˜¯è¢«<code>SQLAlchemy</code>å°è£…äº†ä¸€å±‚ï¼Œå¯¼è‡´é”™è¯¯ä¿¡æ¯æœ‰éƒ¨åˆ†åå·®ã€‚</p><h2>ä¿®å¤</h2><p>é€šè¿‡æŸ¥è¯¢å¾—çŸ¥å½“å‰æ•°æ®åº“å•æ¬¡è¯·æ±‚ä½“ç§¯ä¸èƒ½æŸ¥è¶…è¿‡4M</p><pre><code class="language-sql">show variables like &#x27;max_allowed_packet&#x27;;
</code></pre><table><thead><tr><th>name</th><th>value</th></tr></thead><tbody><tr><td>max_allowed_packet</td><td>4194304</td></tr></tbody></table><p>è°ƒå¤§å³å¯ï¼Œè¿™é‡Œæˆ‘è°ƒåˆ°äº†64Mï¼Œæ»¡è¶³å½“å‰ä¸šåŠ¡è¿°æ±‚ã€‚</p><pre><code class="language-sql" metastring="title=&quot;ä¿®å¤SQL&quot;" title="&quot;ä¿®å¤SQL&quot;">set global max_allowed_packet = 67108864;
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å¦‚ä½•ä»é›¶å¼€å§‹è®¾è®¡ä¸€ä¸ªåç«¯æ¡†æ¶]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/07/18/å¦‚ä½•ä»é›¶å¼€å§‹è®¾è®¡ä¸€ä¸ªåç«¯æ¡†æ¶</link>
            <guid>å¦‚ä½•ä»é›¶å¼€å§‹è®¾è®¡ä¸€ä¸ªåç«¯æ¡†æ¶</guid>
            <pubDate>Mon, 18 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[webæ¢ç§˜]]></description>
            <content:encoded><![CDATA[<h2>webæ¢ç§˜</h2><p>æˆ‘ä»¬å¸¸è¯´çš„webæœåŠ¡ï¼Œé€šå¸¸æ˜¯æŒ‡çš„HTTP WEBæœåŠ¡ã€‚</p><p>åœ¨ä¸äº†è§£webæœåŠ¡ä¹‹å‰ï¼Œæˆ‘ä¸€ç›´å¾ˆå¥½å¥‡ä¸€ä»¶äº‹æƒ…ã€‚<br/>
<!-- -->æˆ‘åœ¨æµè§ˆå™¨é‡Œè¾“å…¥ä¸€ä¸ªåœ°å€ï¼Œä»–ä¼šè¿”å›ä¸€äº›å†…å®¹ç»™æˆ‘ã€‚
æˆ‘ä¸€ç›´å›°æƒ‘äºä»–å®ç°çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥è‡ªå·±æ­å»ºä¸€ä¸ªè¿™æ ·çš„æœåŠ¡ï¼Ÿä»¥å‰æ¢¦æƒ³å°±æ˜¯æƒ³è‡ªå·±æ­å»ºä¸€ä¸ªwebæœåŠ¡ã€‚</p><p>å¦‚æœä½ å­¦è¿‡pythonï¼Œé‚£ä½ ä¸€å®šç”¨è¿‡requestsåº“ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å‘èµ·ä¸€æ¬¡HTTPè¯·æ±‚</p><pre><code class="language-python">import requests  # pip install requests

resp = requests.get(&quot;http://www.baidu.com&quot;)
print(resp.text)
</code></pre><p>è¿™æ˜¯ä¸€æ®µéå¸¸ç®€å•çš„ä»£ç ï¼Œä½†ä¸çŸ¥é“ä½ ä»¬æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå®ƒæœ€åº•å±‚æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆç®€å•çš„å‡ è¡Œä»£ç ï¼Œå°±å¯ä»¥å‘èµ·ä¸€æ¬¡HTTPè¯·æ±‚ã€‚</p><pre><code class="language-python">import socket

sock = socket.socket()
sock.connect((&quot;www.baidu.com&quot;, 80))  # å»ºç«‹TCPè¿æ¥

sock.sendall(&quot;GET / HTTP/1.1\r\n\r\n&quot;.encode())  # è‡ªå·±æ„é€ è¯·æ±‚ï¼Œå‘é€ç»™æœåŠ¡ç«¯
print(sock.recv(1024*1024).decode())
</code></pre><p>HTTPè¯·æ±‚æŠ¥æ–‡</p><ul><li>è¯·æ±‚è¡Œ</li><li>è¯·æ±‚å¤´</li><li>è¯·æ±‚ä½“</li></ul><p>HTTPå“åº”æŠ¥æ–‡</p><ul><li>å“åº”è¡Œ</li><li>å“åº”å¤´</li><li>å“åº”ä½“</li></ul><p>æŠ›å¼€æ‰€æœ‰çš„ä¸šåŠ¡ï¼Œæ‰€æœ‰çš„å®ç°ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹HTTPçš„è¯·æ±‚ï¼Œæˆ–è€…è¯´webæœåŠ¡çš„æœ¬è´¨ï¼Œå…¶å®å°±æ˜¯æˆ‘ç»™ä½ ä¸€æ®µæ–‡æœ¬ï¼Œä½ ç»™æˆ‘ä¸€æ®µæ–‡æœ¬ã€‚</p><p>æ¡†æ¶ä½¿ç”¨å¤šäº†ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›é›†æˆåº¦å¾ˆé«˜çš„æ¡†æ¶ï¼Œå¯èƒ½ä¼šä½¿æˆ‘ä»¬å¤±å»ä¸€äº›åŸºç¡€çš„èƒ½åŠ›ã€åˆ¤æ–­åŠ›ã€‚</p><h2>å¦‚ä½•å®ç°ä¸€ä¸ªwebæœåŠ¡</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹flaskæ¡†æ¶å¦‚ä½•å®ç°ä¸€ä¸ªwebæœåŠ¡</p><pre><code class="language-python">import flask

app = flask.Flask(__name__)
app.route(&quot;/hello&quot;, methods=[&quot;GET&quot;])(lambda: &quot;hello world&quot;)
app.run()
</code></pre><p>é€šè¿‡routeæ³¨å†Œä¸€ä¸ªè·¯ç”±ï¼Œç„¶åç»‘å®šä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œæœ€åå¯åŠ¨æœåŠ¡ã€‚</p><p>è¿™æ˜¯æˆ‘ä»¬èƒ½çœ‹åˆ°çš„æ¡†æ¶ï¼Œé‚£ä¹ˆæ¡†æ¶å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ<br/>
<!-- -->é¦–å…ˆï¼Œç¬¬ä¸€ä»¶äº‹è‚¯å®šæ˜¯å¸®æˆ‘ä»¬è§£æHTTPè¯·æ±‚æŠ¥æ–‡ï¼Œç„¶åä½ è§‰å¾—ä»–ä»¬ä¼šåšä»€ä¹ˆäº‹æƒ…ã€‚<br/>
<!-- -->ä»–ä¼šå»åŒ¹é…è·¯ç”±ï¼Œç„¶åæ‰§è¡Œå¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚  </p><p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•åŸºäºsocketå®ç°æ–¹å¼ã€‚<br/>
<!-- -->åŸºäºsocketï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸è½»æ¾çš„å®ç°ä¸€ä¸ªç®€é™‹çš„webæœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡æ¥æ”¶ä»»ä½•è¯·æ±‚ï¼Œç„¶åå“åº”<code>hello world</code></p><pre><code class="language-python">import socket

sock = socket.socket()
sock.bind((&quot;localhost&quot;, 8080))
sock.listen()

while True:
    s, addr = sock.accept()
    print(s.recv(1024*1024).decode())
    s.sendall(&quot;HTTP/1.1 200 ok\r\nContent-Length: 11\r\n\r\nhello world&quot;.encode())
    s.close()
</code></pre><h2>å¦‚ä½•å®ç°ä¸€ä¸ªwebæ¡†æ¶</h2><p>æ¡†æ¶çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†å‡å°‘é‡å¤æ€§å·¥ä½œã€‚é‚£ä¹ˆæˆ‘ä»¬å®ç°è¿™ä¸ªæ¡†æ¶çš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºäº†ä¸åœ¨è‡ªå·±è§£æHTTPè¯·æ±‚å’Œæ„é€ HTTPå“åº”ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å¦‚ä½•è®¾è®¡ä¸€ä¸ªç»“æ„åŒ–æ—¥å¿—]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/07/17/ç»“æ„åŒ–æ—¥å¿—</link>
            <guid>å¦‚ä½•è®¾è®¡ä¸€ä¸ªç»“æ„åŒ–æ—¥å¿—</guid>
            <pubDate>Sun, 17 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[ç»“æ„åŒ–æ—¥å¿—ï¼Œå³æ—¥å¿—éµå¾ªä¸€å®šçš„ç»“æ„ã€‚ç¨‹åºè¾“å‡ºå†…å®¹ä¸å†æ˜¯è‡ªç”±æ ¼å¼ï¼Œè€Œæ˜¯ç±»ä¼¼JSONæ ¼å¼çš„æ–‡æœ¬ã€‚]]></description>
            <content:encoded><![CDATA[<p>ç»“æ„åŒ–æ—¥å¿—ï¼Œå³æ—¥å¿—éµå¾ªä¸€å®šçš„ç»“æ„ã€‚ç¨‹åºè¾“å‡ºå†…å®¹ä¸å†æ˜¯è‡ªç”±æ ¼å¼ï¼Œè€Œæ˜¯ç±»ä¼¼JSONæ ¼å¼çš„æ–‡æœ¬ã€‚</p><p>ç»“æ„åŒ–æ—¥å¿—çš„æœ€å¤§å¥½å¤„å°±æ˜¯ç®€åŒ–æ—¥å¿—è§£æï¼Œä¾¿äºæ—¥å¿—åˆ†ç±»ã€èšåˆã€‚</p><h2>å®šä¹‰æ ‡å‡†</h2><p>åœ¨å¼€å§‹ç¼–ç¨‹å‰ï¼Œéœ€è¦å…ˆè®¾è®¡å¥½é¡¹ç›®çš„æ•´ä½“æ¶æ„ã€‚</p><h3>æ—¥å¿—åŸºç¡€ä¿¡æ¯</h3><p>é¦–å…ˆï¼Œæ—¥å¿—æ ¼å¼æˆ‘ä»¬é€‰æ‹©JSONæ ¼å¼ã€‚<br/>
<!-- -->æ­¤å¤–ï¼Œè¿˜éœ€è¦é™„å¸¦åŸºç¡€æ—¥å¿—ä¿¡æ¯ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©æ—¶é—´å’Œæ—¥å¿—çº§åˆ«ã€‚  </p><pre><code class="language-python">import json, datetime

def log(msg):
    print(json.dumps(dict(
        time=f&quot;{datetime.datetime.now()}&quot;,
        level=&quot;info&quot;,
        msg=msg,
    )))
log(&quot;hello world&quot;)
</code></pre><p>è¿™æ ·ï¼Œä¸€ä¸ªç®€å•çš„ç»“æ„åŒ–æ—¥å¿—é›å½¢å°±å·²ç»å‡ºç°äº†ã€‚</p><h3>é¡¹ç›®ç»“æ„</h3><ul><li>Logger: æ—¥å¿—å®ä½“<ul><li>Level: æ—¥å¿—çº§åˆ«</li><li>Format: æ—¥å¿—æ ¼å¼</li><li>Hook: æ—¥å¿—é’©å­</li></ul></li><li>Entry: æ•°æ®å®ä½“<ul><li>Data: æ•°æ®</li></ul></li></ul><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[äº‘æœåŠ¡åˆè¯†]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/07/12/äº‘æœåŠ¡åˆè¯†</link>
            <guid>äº‘æœåŠ¡åˆè¯†</guid>
            <pubDate>Tue, 12 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Serverlessï¼šä»ä½¿ç”¨è§’åº¦çœ‹ä¸è§æœåŠ¡å™¨ï¼Œæ— éœ€åˆ›å»ºã€ç®¡ç†å¯¹åº”çš„æœåŠ¡ã€‚]]></description>
            <content:encoded><![CDATA[<p>Serverlessï¼šä»ä½¿ç”¨è§’åº¦çœ‹ä¸è§æœåŠ¡å™¨ï¼Œæ— éœ€åˆ›å»ºã€ç®¡ç†å¯¹åº”çš„æœåŠ¡ã€‚</p><p>ServiceMeshï¼šæœåŠ¡ç½‘æ ¼
æ˜¯è‡´åŠ›äºè§£å†³æœåŠ¡é—´é€šè®¯çš„åŸºç¡€è®¾æ–½å±‚ã€‚è´Ÿè´£ç°ä»£äº‘åŸç”Ÿåº”ç”¨ç¨‹åºçš„å¤æ‚æœåŠ¡æ‹“æ‰‘æ¥å¯é çš„ä¼ é€’è¯·æ±‚ã€‚
æœ¬è´¨æ˜¯ä¸€ç»„è½»é‡çº§çš„ç½‘ç»œä»£ç†ã€‚å’ŒæœåŠ¡åº”ç”¨éƒ¨ç½²åœ¨ä¸€èµ·ä½†æ˜¯å¯¹ç¨‹åºé€æ˜ã€‚
ç‰¹ç‚¹ï¼š
1ã€åº”ç”¨ç¨‹åºé—´é€šè®¯çš„ä¸­é—´å±‚
2ã€è½»é‡çº§çš„ç½‘ç»œä»£ç†
3ã€åº”ç”¨ç¨‹åºæ— æ„ŸçŸ¥
4ã€è§£è€¦åº”ç”¨ç¨‹åºçš„ç›‘æ§ã€è¿½è¸ªä¸æœåŠ¡å‘ç°</p><p>å¾®æœåŠ¡æ¡†æ¶-æœåŠ¡æ²»ç†æŠ€æœ¯æ¼”è¿›ï¼š<br/>
<!-- -->ç¬¬ä¸€é˜¶æ®µï¼šæœåŠ¡æ²»ç†èƒ½åŠ›æŠ½è±¡åˆ°ç»Ÿä¸€çš„SDKå®ç°<br/>
<!-- -->ä¼˜ç‚¹ï¼š</p><ul><li>ä»£ç é‡å¤å°‘</li><li>æ²»ç†é€»è¾‘ä»£ç ä¸ä¸šåŠ¡ä»£ç éš”ç¦»
ç¼ºç‚¹ï¼š</li><li>SDKè¯­è¨€ç»‘å®š</li><li>ä»£ç ä¾µå…¥  </li><li>åŸºäºSDKæœ‰å­¦ä¹ æˆæœ¬ </li></ul><p>ç¬¬äºŒé˜¶æ®µï¼šæœåŠ¡æ²»ç†èƒ½åŠ›å½’ä¸€åˆ°æœåŠ¡ç½‘æ ¼<br/>
<!-- -->ä¼˜ç‚¹ï¼š</p><ul><li>ç‹¬ç«‹è¿›ç¨‹ï¼Œç”¨æˆ·ä¸šåŠ¡éä¾µå…¥</li><li>è¯­è¨€æ— å…³</li><li>æ—¢æœ‰æœåŠ¡æ— éœ€æ”¹é€ ç›´æ¥ä½¿ç”¨
ç¼ºç‚¹ï¼š</li><li>æœåŠ¡æ²»ç†ä»£ç†çš„æ€§èƒ½å’Œèµ„æºå¼€é”€</li></ul><p>å¾®æœåŠ¡ï¼š
1ã€å®ç°ä¸Šï¼ŒæŠŠä¸€ä¸ªå¤§ç³»ç»Ÿï¼ŒæŒ‰ç…§ä¸šåŠ¡åŠŸèƒ½åˆ†è§£ä¸ºå¤šä¸ªèŒè´£ç›¸å¯¹å•ä¸€çš„å°ç³»ç»Ÿã€‚å¹¶åˆ©ç”¨ç®€å•çš„æ–¹æ³•ä½¿å¤šä¸ªç³»ç»Ÿä¹‹é—´ç›¸äº’åä½œï¼Œç»„æˆä¸€ä¸ªå¤§ç³»ç»Ÿã€‚<br/>
<!-- -->2ã€æœ¬è´¨ä¸Šï¼ŒæŠŠç›¸åŒé¢†åŸŸæˆ–è€…å› ç›¸åŒåŸå› è€Œå˜åŒ–çš„åŠŸèƒ½èšåˆåˆ°ä¸€èµ·ï¼ŒæŠŠä¸åŒä¸šåŠ¡é¢†åŸŸæˆ–å› ä¸åŒåŸå› è€Œå˜åŒ–çš„åŠŸèƒ½æ‹†ç¦»å¼€ï¼Œå¹¶ä½¿ç”¨è½»é‡åŒ–æœºåˆ¶ï¼ˆHTTP RESTful APIï¼‰å®ç°é€šä¿¡ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[casbinå­¦ä¹ ]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/07/10/casbinå­¦ä¹ </link>
            <guid>casbinå­¦ä¹ </guid>
            <pubDate>Sun, 10 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æ‘˜è¦åœ¨æ­¤å¤„]]></description>
            <content:encoded><![CDATA[<p>æ‘˜è¦åœ¨æ­¤å¤„</p><p>æ­£æ–‡åœ¨æ­¤å¤„</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æƒé™è®¾è®¡æ•´ç†]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/07/09/æƒé™è®¾è®¡æ•´ç†</link>
            <guid>æƒé™è®¾è®¡æ•´ç†</guid>
            <pubDate>Sat, 09 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[<!--]]></description>
            <content:encoded><![CDATA[<h2>ACL</h2><p>ACL æ˜¯ Access Control List çš„ç¼©å†™ï¼Œè¡¨ç¤º<strong>è®¿é—®æ§åˆ¶åˆ—è¡¨</strong>ã€‚</p><pre><code class="language-yaml" metastring="title=&quot;ACLé…ç½®è¡¨&quot;" title="&quot;ACLé…ç½®è¡¨&quot;">èµ„æºåˆ—è¡¨:
- æ ¸å¿ƒèµ„äº§é¡µé¢:
  - ç”¨æˆ·: å‘˜å·¥A
    æƒé™: æ— æƒé™
  - ç”¨æˆ·: å‘˜å·¥B
    æƒé™: æŸ¥è¯¢æƒé™
  - ç”¨æˆ·: å‘˜å·¥C
    æƒé™: å¢è¯ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢æƒé™
</code></pre><p>ACL çš„è®¾è®¡æ€æƒ³ä¸»è¦æ˜¯å›´ç»•<strong>èµ„æº</strong>æ¥è®¾è®¡çš„æƒé™ç®¡ç†</p><p>ä»ç»´æŠ¤è§’åº¦æ¥çœ‹ï¼Œæ¯æ–°å¢ä¸€åç”¨æˆ·æ—¶ï¼Œéœ€è¦èµ‹äºˆåˆå§‹åŒ–æƒé™ï¼Œä¼šæ¯”è¾ƒç¹çã€‚ä½†é’ˆå¯¹å‘˜å·¥çš„æƒé™ä¿®æ”¹ï¼Œä¼šæ˜¾å¾—æ¯”è¾ƒå®¹æ˜“ã€‚</p><h2>RBAC</h2><p>RBAC æ˜¯ Role Base Access Control çš„ç¼©å†™ï¼Œè¡¨ç¤º<strong>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</strong>ï¼Œ</p><pre><code class="language-yaml" metastring="title=&quot;RBAC&quot;" title="&quot;RBAC&quot;">ç”¨æˆ·è¡¨:
- ç”¨æˆ·: A
  è§’è‰²: [ç ”å‘]
- ç”¨æˆ·: B
  è§’è‰²: [æµ‹è¯•]
---
è§’è‰²è¡¨:
- è§’è‰²: ç ”å‘
  æƒé™: [ä¿®å¤BGU]
- è§’è‰²: æµ‹è¯•
  æƒé™: [åˆ›å»ºBUG]
---
æƒé™è¡¨:
- æƒé™: åˆ›å»ºBUG
  èµ„æºè¡¨:
  - èµ„æº: BUGå•
    æƒé™: [åˆ›å»ºã€ä¿®æ”¹]
- æƒé™: ä¿®å¤BGU
  èµ„æºè¡¨:
  - èµ„æº:: BUGå•
    æƒé™: [ä¿®æ”¹ã€å®Œæˆ]
</code></pre><p>RBAC çš„æ€æƒ³ï¼Œæ¥æºäºç°å®ä¸–ç•Œä¸­çš„ä¼ä¸šç»“æ„ï¼Œä¸åŒçš„è§’è‰²è®¾è®¡æœ‰ä¸åŒçš„æƒé™ï¼Œè€Œä¸ç”¨çš„ä¸»ä½“å°†æ‹¥æœ‰ä¸€ä¸ªè‡³å¤šä¸ªè§’è‰²ã€‚</p><p>ä»ç»´æŠ¤è§’åº¦æ¥çœ‹ï¼Œåœ¨ç›¸å¯¹é™æ€çš„æƒ…å†µä¸‹ï¼Œæ˜¯æ¯”è¾ƒå®¹æ˜“ç»´æŠ¤çš„ã€‚ç›¸å¯¹é™æ€çš„æ„æ€å°±æ˜¯è¯´ï¼Œæ¯ä¸ªè§’è‰²æ‹¥æœ‰çš„æƒé™æ˜¯ç›¸å¯¹å›ºå®šçš„ã€‚<br/>
<!-- -->æ¯”å¦‚ä¸€ååˆšå…¥èŒçš„å‘˜å·¥ï¼Œä»–çš„è§’è‰²å¯èƒ½å°±æ˜¯æœªè½¬æ­£å‘˜å·¥ï¼Œæ­¤æ—¶è¯¥åå‘˜å·¥æ‰€æ‹¥æœ‰çš„æƒé™å°†æ˜¯éå¸¸å°çš„ä¸€éƒ¨åˆ†ã€‚
ä½†æ˜¯ç”±äºæŸäº›ç‰¹æ®Šæƒ…å†µï¼Œè¿™åå‘˜å·¥åˆéœ€è¦ç”³è¯·æ›´é«˜æƒé™æ—¶ï¼Œå°±ä¼šæ¯”è¾ƒéš¾å¤„ç†ã€‚å› ä¸ºä¸èƒ½ç›´æ¥ä¿®æ”¹è§’è‰²çš„æƒé™ï¼Œè¿™æ ·ä¼šç ´åè¿™åè§’è‰²çš„åŸç”Ÿå±æ€§ã€‚<br/>
<!-- -->åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œä¸€èˆ¬åªèƒ½åˆ›å»ºæ–°çš„è§’è‰²å¹¶èµ‹äºˆæ­¤åå‘˜å·¥ï¼Œè¿™æ ·å°±ä¼šé™ä½ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[redis åˆ†å¸ƒå¼é”]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/06/21/redisåˆ†å¸ƒå¼é”</link>
            <guid>redis åˆ†å¸ƒå¼é”</guid>
            <pubDate>Tue, 21 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[<!--]]></description>
            <content:encoded><![CDATA[<p>å¹¶å‘åœºæ™¯ä¸‹çš„<strong>é”æœºåˆ¶</strong>ï¼Œå…¶å®å°±æ˜¯ç”¨æ¥ä¿æŠ¤ä¸åŒçº¿ç¨‹å¯¹<strong>å…±äº«èµ„æº</strong>çš„è®¿é—®ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ç¨‹åºæŒ‰é¢„è®¾çš„é€»è¾‘æ‰§è¡Œã€‚
<strong>åˆ†å¸ƒå¼é”</strong>ä¹Ÿæ˜¯ä¸€æ ·çš„åŸç†ï¼Œå®ƒæ˜¯ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿå¹¶å‘åœºæ™¯ä¸‹è®¿é—®å…±äº«èµ„æºçš„ä¸€ç§é”æœºåˆ¶ã€‚   </p><p>ä¸€æŠŠåˆæ ¼çš„åˆ†å¸ƒå¼é”ï¼Œåº”è¯¥è‡³å°‘å…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>äº’æ–¥æ€§ï¼šä»»æ„æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯æŒæœ‰ã€‚</li><li>è¶…æ—¶æœºåˆ¶ï¼šæŒæœ‰é”å¹¶è¶…æ—¶æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨é‡Šæ”¾ï¼Œé¿å…æ­»é”ã€‚</li><li>å®‰å…¨æ€§ï¼šåœ¨æœªè¶…æ—¶åœºæ™¯ä¸‹ï¼Œé”åªèƒ½è¢«æŒæœ‰è€…é‡Šæ”¾ã€‚</li></ul><h2>å•èŠ‚ç‚¹åˆ†åˆ†å¸ƒå¼é”</h2><p>SET æ˜¯ redis å…³é”®å­—æŒ‡ä»¤ï¼Œå±äºåŸå­æ“ä½œï¼Œå…¶ä½œç”¨æ˜¯ç»™æŒ‡å®š key èµ‹å€¼ valueã€‚å¹¶ä¸”æ”¯æŒ NX å’Œ PX å‚æ•°ï¼š</p><ul><li>NXï¼š<code>if not exists</code> ç¼©å†™ï¼Œå½“ key ä¸å­˜åœ¨æ—¶æ‰å…è®¸èµ‹å€¼æˆåŠŸã€‚</li><li>PXï¼šè¡¨ç¤ºè¿‡æœŸæ—¶é—´ã€‚</li></ul><pre><code class="language-shell" metastring="script title=&quot;æ ¸å¿ƒè¯­å¥&quot;" title="&quot;æ ¸å¿ƒè¯­å¥&quot;">SET key uniqueValue NX PX 1000
</code></pre><p>å…·ä½“çš„åœºæ™¯å¦‚ä¸‹ï¼š<br/>
<!-- -->1ã€ç”¨æˆ·ä¸€ï¼šåˆ›å»ºéšæœºå€¼ï¼Œä½¿ç”¨ set èµ‹å€¼ï¼Œèµ‹å€¼æˆåŠŸï¼ŒæŒæœ‰åˆ†å¸ƒå¼é”ã€‚<br/>
<!-- -->2ã€ç”¨æˆ·äºŒï¼šåˆ›å»ºéšæœºå€¼ï¼Œä½¿ç”¨ set èµ‹å€¼ï¼Œèµ‹å€¼å¤±è´¥ã€‚<br/>
<!-- -->3ã€ç”¨æˆ·ä¸€ï¼šæ‰§è¡Œä»»åŠ¡è¶…è¿‡1ç§’ï¼Œè‡ªåŠ¨é‡Šæ”¾é”ã€‚<br/>
<!-- -->4ã€ç”¨æˆ·äºŒï¼šåˆ›å»ºéšæœºå€¼ï¼Œä½¿ç”¨ set èµ‹å€¼ï¼Œèµ‹å€¼æˆåŠŸï¼ŒæŒæœ‰åˆ†å¸ƒå¼é”ã€‚<br/>
<!-- -->5ã€ç”¨æˆ·ä¸€ï¼šä»»åŠ¡ç»“æŸï¼Œè·å–é”ï¼Œå¯¹æ¯”å½“å‰é”æ˜¯å¦å±äºè‡ªå·±ï¼Œä¸å±äºåˆ™å¿½ç•¥ã€‚    </p><h2>å¤šèŠ‚ç‚¹åˆ†å¸ƒå¼é”</h2><p>å•èŠ‚ç‚¹ redis å¯ä»¥åŸºäº <code>SET key uniqueValue NX PX 1000</code> å®ç°åˆ†å¸ƒå¼é”ï¼Œä½†å­˜åœ¨å®•æœºçš„é£é™©ã€‚<br/>
<!-- -->æ‰€ä»¥ redis ä½œè€…æå‡ºäº† redlock ç®—æ³•ï¼Œç”¨äºæ”¯æŒå¤šèŠ‚ç‚¹ä¸‹çš„åˆ†å¸ƒå¼é”ã€‚</p><p>å…¶ç®—æ³•æ­¥éª¤ï¼ˆä»¥5ä¸ªèŠ‚ç‚¹ä¸ºä¾‹ï¼‰ï¼š<br/>
<!-- -->1ã€è·å–å½“å‰æ—¶é—´æˆ³ å’Œ UUIDå€¼ã€‚<br/>
<!-- -->2ã€åŸºäºè¿‡æœŸæ—¶é—´é€‰æ‹©æ¯«ç§’çº§çš„ç½‘ç»œè¿æ¥å’Œå“åº”æ—¶é—´ã€‚<br/>
<!-- -->3ã€å®¢æˆ·ç«¯é€ä¸€å»ç”³è¯·é”ï¼Œç”³è¯·æ–¹å¼å’Œå•èŠ‚ç‚¹ä¸€æ ·ï¼Œå½“ä» <code>N/2 + 1</code> ä¸ªèŠ‚ç‚¹éƒ½è·å–åˆ°é”ï¼Œä¸”ä½¿ç”¨æ—¶é—´å°äºå½“å‰é”å¤±æ•ˆæ—¶é—´ï¼Œæ‰ç®—è·å–æˆåŠŸã€‚<br/>
<!-- -->4ã€çœŸæ­£çš„æ‰§è¡Œæ—¶é—´ï¼Œæ—¶è¿‡æœŸæ—¶é—´-è·å–é”çš„æ—¶é—´-æ—¶é’Ÿåç§»æ—¶é—´ã€‚<br/>
<!-- -->5ã€é‡Šæ”¾é”æ—¶éœ€è¦æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å°è¯•é‡Šæ”¾é”ã€‚   </p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[PEP8 è§„èŒƒ]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/06/20/pep8è§„èŒƒ</link>
            <guid>PEP8 è§„èŒƒ</guid>
            <pubDate>Mon, 20 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[PEP æ˜¯ Python Enhancement Proposal çš„ç¼©å†™ï¼Œè¡¨ç¤ºPython å¢å¼ºææ¡ˆã€‚]]></description>
            <content:encoded><![CDATA[<p>PEP æ˜¯ <code>Python Enhancement Proposal</code> çš„ç¼©å†™ï¼Œè¡¨ç¤º<strong>Python å¢å¼ºææ¡ˆ</strong>ã€‚</p><p>PEP8 åˆ™è¡¨ç¤ºå…¶ä¸­ç¬¬8æ¡ææ¡ˆï¼Œè¿™æ˜¯é’ˆå¯¹ç¼–ç è§„èŒƒçš„ææ¡ˆã€‚å…¶ä¸­åŒ…æ‹¬ï¼š<strong>å‘½åè§„èŒƒã€ç¼–æ’è§„èŒƒã€æ³¨é‡Šè§„èŒƒã€ä»£ç è§„èŒƒ</strong>ç­‰ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åŸºäºdockeræ­å»ºgitlan-runner]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/06/17/åŸºäºdockeræ­å»ºgitlan-runner</link>
            <guid>åŸºäºdockeræ­å»ºgitlan-runner</guid>
            <pubDate>Fri, 17 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[gitlab-runnerå®é™…è¿è¡Œæ—¶ï¼Œä¼šè¿œç¨‹è·å–æˆ‘ä»¬çš„ä»£ç ä»“ï¼Œç„¶åæ‰§è¡Œé…ç½®çš„.gitlab-ci.yamlæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å’Œjenkinsfileä¸€ä¸ªæ€§è´¨ï¼Œé‡Œé¢å®šä¹‰äº† CICD çš„æ£€æµ‹æµç¨‹ã€‚]]></description>
            <content:encoded><![CDATA[<p><code>gitlab-runner</code>å®é™…è¿è¡Œæ—¶ï¼Œä¼šè¿œç¨‹è·å–æˆ‘ä»¬çš„ä»£ç ä»“ï¼Œç„¶åæ‰§è¡Œé…ç½®çš„<code>.gitlab-ci.yaml</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å’Œ<code>jenkinsfile</code>ä¸€ä¸ªæ€§è´¨ï¼Œé‡Œé¢å®šä¹‰äº† CICD çš„æ£€æµ‹æµç¨‹ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œ<code>gitlab-runner</code>å’Œæˆ‘ä»¬çš„ä»£ç ä»“æ˜¯å®Œå…¨è§£è€¦çš„ã€‚æ˜¯å¯ä»¥éƒ¨ç½²åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šï¼Œå¹¶ä¸”å¯ä»¥éƒ¨ç½²å¤šä¸ªçš„ã€‚</p><h2>1ã€åˆ›å»º volume</h2><p>é¦–å…ˆéœ€è¦ä¸º <code>gitlab-runner</code> åˆ›å»ºä¸€ä¸ªå…¬å…±é…ç½®å­˜åœ¨è·¯å¾„ï¼Œç›®çš„æ˜¯ä¸ºäº†å…±äº«é…ç½®ã€‚</p><p>å¯ä»¥æ˜¯å…·ä½“çš„æ–‡ä»¶è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>docker volume create</code> åˆ›å»ºä¸€ä¸ªå…¬å…±æŒ‚è½½ï¼Œåç»­å…¶ä»–çš„ runner éƒ½æŒ‚è½½æ­¤ç›®å½•ï¼Œå³å¯å®ç°å…±äº«é…ç½®ã€‚   </p><pre><code class="language-shell" metastring="script">docker volume create gitlab-runner-config
</code></pre><h2>2ã€æ³¨å†Œ runner</h2><p>é¦–å…ˆéœ€è¦è·å– gitlab åŸºç¡€ä¿¡æ¯ã€‚<br/>
<img src="./register-runner.png"/></p><p>ç„¶åæ³¨å†Œ runner   </p><pre><code class="language-shell" metastring="script">docker run --rm -v gitlab-runner-config:/etc/gitlab-runner gitlab/gitlab-runner register \
  --non-interactive \
  --url &quot;Gitlab çš„ URL å¤åˆ¶è¿‡æ¥&quot; \
  --registration-token &quot;Gitlab çš„ Token å¤åˆ¶è¿‡æ¥&quot; \
  --executor &quot;docker&quot; \
  --docker-image &quot;è¦è¿è¡Œçš„é•œåƒï¼Œeg: python:3.6.8&quot; \
  --description &quot;docker-runner-test&quot; \
  --tag-list &quot;docker,test&quot; \
  --run-untagged=&quot;true&quot; \
  --locked=&quot;false&quot; \
  --access-level=&quot;not_protected&quot; \
  --docker-pull-policy=&quot;if-not-present&quot;
</code></pre><p>æ³¨å†Œå®Œæˆåï¼Œåœ¨ gitlab ç•Œé¢ä¼šå‡ºç°ä½ æ³¨å†Œçš„ runner ä¿¡æ¯ã€‚æ²¡æœ‰å¯ä»¥åˆ·æ–°çœ‹çœ‹ï¼Œå®åœ¨æ²¡æœ‰ï¼Œåº”è¯¥æ˜¯æ³¨å†Œå¤±è´¥äº†ã€‚<br/>
<img src="./register-runner-2.png"/>   </p><h2>3ã€å¯åŠ¨ runner</h2><pre><code class="language-shell" metastring="script title=&quot;helpå¸®åŠ©æŒ‡ä»¤1&quot;" title="&quot;helpå¸®åŠ©æŒ‡ä»¤1&quot;">docker run -it --name gitlab-runner --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v gitlab-runner-config:/etc/gitlab-runner \
    gitlab/gitlab-runner:latest help
</code></pre><pre><code class="language-shell" metastring="script title=&quot;helpå¸®åŠ©æŒ‡ä»¤2&quot;" title="&quot;helpå¸®åŠ©æŒ‡ä»¤2&quot;">docker run -it --name gitlab-runner --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v gitlab-runner-config:/etc/gitlab-runner \
    gitlab/gitlab-runner:latest help unregister
</code></pre><pre><code class="language-shell" metastring="script title=&quot;list åˆ—è¡¨æŸ¥çœ‹runner&quot;" title="&quot;list">docker run -it --name gitlab-runner --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v gitlab-runner-config:/etc/gitlab-runner \
    gitlab/gitlab-runner:latest list
</code></pre><pre><code class="language-shell" metastring="script title=&quot;unregister åˆ é™¤runner&quot;" title="&quot;unregister">docker run -it --name gitlab-runner --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    -v gitlab-runner-config:/etc/gitlab-runner \
    gitlab/gitlab-runner:latest unregister -t=GIRLAB_TOKEN
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å¦‚ä½•ç†è§£ OKR & KPI]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/06/09/å¦‚ä½•ç†è§£OKRKPI</link>
            <guid>å¦‚ä½•ç†è§£ OKR &amp; KPI</guid>
            <pubDate>Thu, 09 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[ä»€ä¹ˆæ˜¯ KPI]]></description>
            <content:encoded><![CDATA[<h2>ä»€ä¹ˆæ˜¯ KPI</h2><p>KPI æŒ‡ <code>Key Performance Indicator</code>ï¼Œå³<strong>å…³é”®ç»©æ•ˆæŒ‡æ ‡</strong>ã€‚</p><p>å¯¹äºå…¬å¸æ¥è®²ï¼Œä»–å¯ä»¥å°†å…¬å¸çš„ç›®æ ‡ä»ä¸Šè‡³ä¸‹åœ°åˆ†è§£ï¼Œç„¶åé€šè¿‡ç›¸å…³çš„å…³é”®ç»©æ•ˆæŒ‡æ ‡æ¥è¡¡é‡å®é™…çš„æ‰§è¡Œæ•ˆæœã€‚</p><h2>KPI å­˜åœ¨çš„é—®é¢˜</h2><p>ç»è¿‡å¤§é‡å®è·µè¯æ˜ï¼ŒKPI åªé€‚åˆ<strong>æ ‡å‡†åŒ–çš„ã€ç›®æ ‡ç¨³å®šçš„å·¥ä½œã€‚</strong></p><p>æ¯”å¦‚æŸæ ‡å‡†çš„å·¥ä¸šæµæ°´çº¿ä¸­ï¼ŒKPI å¯ä»¥åˆ¶å®šæµæ°´çº¿ä¸­è½¬åŒ–æ•ˆç‡ã€è½¬åŒ–æ¯”ç‡ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å¯ä»¥å®šé‡çš„ã€‚<br/>
<!-- -->ä½†æ˜¯å¯¹äº<strong>åˆ›æ–°ç±»</strong>æŠ€æœ¯æ¥è¯´ï¼Œå®ƒå­˜åœ¨æ¯”è¾ƒå¤§çš„ä¸ç¡®å®šæ€§ã€‚è¿™ç§ç±»å‹å°±ä¸é€‚åˆç”¨ KPI æ¥è¡¡é‡äº†ã€‚</p><p>å…¶æ¬¡ï¼Œ<strong>KPI ä¼šç»™å›¢é˜Ÿå¸¦æ¥ä¸è‰¯é£æ°”</strong>ï¼Œæ¯”å¦‚ï¼š<br/>
<!-- -->1ã€è¿½æ±‚ä½æŒ‡æ ‡ï¼šå¦‚æœåˆ¶å®šæŒ‡æ ‡è¿‡é«˜ï¼Œå®Œä¸æˆï¼Œé‚£å°±æ˜¯æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šï¼Œæ‰€ä»¥å¤§å®¶ä¼šæ›´å€¾å‘äºåˆ¶å®šä½æŒ‡æ ‡ã€‚<br/>
<!-- -->2ã€è¿½æ±‚çŸ­è§†ï¼šä¸€äº›éœ€è¦é•¿æœŸæŠ•å…¥çš„äº‹æƒ…ä¼šè¢«äººå«Œå¼ƒï¼Œå¤§å®¶æ›´åŠ å…³æ³¨çŸ­æœŸè·ç›Šçš„KPIã€‚<br/>
<!-- -->3ã€å·¥ä½œå’Œè€ƒæ ¸æœ¬æœ«å€’ç½®ï¼šåœ¨åˆ¶å®šå’ŒæŠŠæ§ä¸¥æ ¼çš„KPIç®¡ç†ä¸Šï¼ŒæŠ•å…¥äº†å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ã€‚ç­‰çœŸæ­£åˆ°äº†å…·ä½“æ‰§è¡Œä¸Šï¼Œå´æ•·è¡äº†äº‹ã€‚è¿™ç±»ç°è±¡æ¯”æ¯”çš†æ˜¯ã€‚   </p><h2>ä»€ä¹ˆ OKR</h2><p>OKR æ˜¯ <code>Objectives and Key Results</code>ï¼Œå³<strong>ç›®æ ‡ä¸å…³é”®æˆæœ</strong>ã€‚</p><p>å®ƒçš„å®æ–½æ­¥éª¤æ˜¯ï¼š<br/>
<!-- -->1ã€é¦–å…ˆåˆ¶å®š<strong>ä¸šåŠ¡ç›®æ ‡ Objectives</strong>ã€‚æ¯”å¦‚ï¼šæå‡æŸç³»ç»Ÿç¨³å®šæ€§ã€‚<br/>
<!-- -->2ã€ç„¶åä¸ºæ¯ä¸ªç›®æ ‡è®¾å®šå…³é”®ç»“æœ Key Resultsã€‚æ¯”å¦‚ï¼šä¸ºäº†å®ç° æå‡ç³»ç»Ÿç¨³å®šæ€§ è¿™ä¸ªç›®æ ‡ï¼Œè®¡åˆ’å¼•å…¥æ•°æ®åº“ä¸»å¤‡æœºåˆ¶ã€å¼‚åœ°å¤šæ´»æ–¹æ¡ˆç­‰ã€‚</p><h2>OKR å’Œ KPI ä¹‹é—´çš„åŒºåˆ«ä¸è”ç³»</h2><p>æˆ‘ä»¬ä¼šå‘ç° OKR å’Œ KPI å¾ˆåƒï¼Œæ•´ä½“çœ‹ä¸‹æ¥ç”šè‡³éƒ½æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚å› ä¸º <strong>OKR ä¸­çš„ä¸€ä¸ª KRï¼Œä¼¼ä¹å°±æ˜¯ä¸€ä¸ª KPI æŒ‡æ ‡</strong>ã€‚</p><p>å…¶å®åŒºåˆ«å¾ˆç®€å•ï¼ŒKPI ä¸­çš„å…³é”®è¯æ˜¯ Indicatorsï¼Œè€Œ OKR ä¸­çš„å…³é”®è¯æ˜¯ Objectivesã€‚<br/>
<!-- -->æ¢å¥è¯è¯´ï¼ŒKPI å…³æ³¨çš„æ˜¯<strong>æ•°æ®æŒ‡æ ‡</strong>ï¼ŒOKR å…³æ³¨çš„æ˜¯<strong>ä¸šåŠ¡ç›®æ ‡</strong>ã€‚  </p><p>ä¸ºäº†æ›´å¥½çš„ç†è§£ï¼Œå¯ä»¥ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œä»¥æŸåœºæ¯”èµ›ä¸ºä¾‹ï¼š<br/>
<!-- -->å¦‚æœä» KPI çš„è§’åº¦çœ‹ï¼Œæˆ‘ä»¬åˆ™æ›´å…³æ³¨æ‹¿åˆ°å‡ åˆ†ã€èµ¢äº†å‡ åœºç­‰ã€‚<br/>
<!-- -->å¦‚æœä» OKR çš„è§’åº¦çœ‹ï¼Œæˆ‘ä»¬æ›´å…³æ³¨å¤ºå† ã€è¿›å››å¼ºã€ä¿çº§ç­‰ã€‚   </p><p>å…³é”®åŒºåˆ«ç‚¹å°±æ˜¯æŒ‡æ ‡å’Œç›®æ ‡è¿™ä¸¤ä¸ªè¯ï¼Œè™½ç„¶åªæ˜¯ç®€å•çš„ä¸¤ä¸ªè¯ï¼Œå´åæ˜ äº†ä¸¤ç§æˆªç„¶ä¸åŒçš„æ€ç»´æ–¹å¼ã€‚</p><p>å½“æˆ‘ä»¬ä½¿ç”¨ KPI è§„åˆ’æ³•æ—¶ï¼Œæ›´å…³æ³¨æ•°æ®æŒ‡æ ‡ï¼Œç¬¬ä¸€æ€ç»´å°±æ˜¯ï¼šæˆ‘è¦åšä»€ä¹ˆäº‹ã€‚åœ¨è¿™ç§æ€ç»´ä¸‹æˆ‘ä»¬æ›´å…³æ³¨å½“ä¸‹å·²æœ‰çš„å·¥ä½œã€‚<br/>
<!-- -->å½“æˆ‘ä»¬ä½¿ç”¨ OKR è§„åˆ’æ³•æ—¶ï¼Œæ›´å…³æ³¨ä¸šåŠ¡ç›®æ ‡ï¼Œç¬¬ä¸€æ€ç»´å°±æ˜¯ï¼šæˆ‘è¦åšæˆä»€ä¹ˆäº‹ã€‚åœ¨è¿™ç§æ€ç»´ä¸‹æˆ‘ä»¬å…¨å±€å®šä½æ–¹å‘ï¼Œå†æŒ‡å®šKRã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒOKR å’Œ KPI ä¹Ÿæœ‰å¾ˆå¼ºçš„å†…åœ¨è”ç³»ã€‚<br/>
<!-- -->OKR çš„ KR å°±æœ‰ä¸¤ç§è¡¨ç°å½¢å¼ï¼Œä¸€ç§å°±æ˜¯ KPIï¼Œä¸€ç§å°±æ˜¯é‡Œç¨‹ç¢‘ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[PostgreSQL vs MySQL]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/06/07/pgvsmysql</link>
            <guid>PostgreSQL vs MySQL</guid>
            <pubDate>Tue, 07 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[<!--]]></description>
            <content:encoded><![CDATA[<p>MySQL æ˜¯ä¸šç•Œä¸»æµçš„å…³ç³»å‹æ•°æ®åº“ï¼Œç›®å‰è¢« Oracle æ”¶è´­ï¼Œå¹¶æä¾›åŒ…æ‹¬å…è´¹ã€ä»˜è´¹ç­‰å¤šç§ç¤¾åŒºç‰ˆæœ¬ã€‚<br/>
<!-- -->PostgreSQL åˆ™æ˜¯ä¸€ä¸ªå¼€æºçš„æ•°æ®åº“ã€‚æœ‰å¥æ¯”è¾ƒç»å…¸çš„è¯ä½ å¯èƒ½å¬è¿‡ï¼Œé‚£å°±æ˜¯ï¼š&quot;PostgreSQL èƒ½ä¸ Oracle åª²ç¾ï¼Œå¹¶ä¸”æ²¡æœ‰é‚£ä¹ˆæ˜‚è´µçš„ä»·æ ¼å’Œå‚²æ…¢çš„å®¢æœã€‚&quot;    </p><p>ä¸¤ç±»æ•°æ®åº“å„æœ‰é«˜ä½ï¼Œæœ¬æ–‡ä¸»è¦å­¦ä¹ æ€»ç»“ä¸‹äºŒè€…ä¹‹é—´çš„ç‰¹ç‚¹ï¼Œä»¥åŠå„è‡ªçš„ä¼˜åŠ¿ã€‚</p><h2>PGç›¸è¾ƒäºMySQLä¼˜åŠ¿</h2><p>é¦–å…ˆ PG å®Œå…¨å¼€æºï¼Œç›¸è¾ƒäº MySQL æ¥è¯´ï¼Œæ‹¥æœ‰æ›´è¿…é€Ÿçš„åŠŸèƒ½è¿­ä»£ã€‚</p><h3>æ›´ä¸°å¯Œçš„æ•°æ®ç±»å‹</h3><p>é™¤äº†å¸¸è§„çš„æ•°æ®ç±»å‹å¤–ï¼ŒPG çš„æ•°æ®ç±»å‹æ›´åŠ ä¸°å¯Œï¼Œä¸”å®Œå–„äº†éƒ¨åˆ† MySQL æ•°æ®ç±»å‹çš„ä¸€äº›æ§½ç‚¹ã€‚</p><h4>æ”¯æŒjsonã€jsonbç±»å‹</h4><p>éšç€jsonæ ¼å¼çš„æµè¡Œï¼Œè¶Šæ¥è¶Šå¤šçš„æ•°æ®å­˜å‚¨å’Œä¼ è¾“ï¼Œé‡‡ç”¨jsonæ ¼å¼ã€‚     </p><p>ä½†å­˜å‚¨è¿™ç±»åŠç»“æ„åŒ–æ•°æ®ï¼Œå¯¹äºå…³ç³»å‹æ•°æ®åº“æ¥è¯´å¹¶ä¸å‹å¥½ã€‚å¾€å¾€åªèƒ½å…ˆå°†jsonæ•°æ®åºåˆ—åŒ–ä¸ºæˆå­—ç¬¦ä¸²ï¼Œç„¶åå­˜å‚¨å­—ç¬¦ä¸²ã€‚<br/>
<!-- -->è¿™ä¹Ÿæ˜¯ MongoDB ç­‰éå…³ç³»å‹æ•°æ®åº“é€æ¸æµè¡Œçš„åŸå› ä¹‹ä¸€ã€‚       </p><p>PG æ”¯æŒ jsonã€jsonb ä¸¤ç±»æ•°æ®ç±»å‹ï¼š   </p><ul><li>jsonï¼šå­˜å‚¨æ–‡æœ¬æ•°æ®ï¼Œæ¯æ¬¡è¯»å–éƒ½ä¼šå¯¹å…¶è¿›è¡Œjsonè§£æã€‚ä¸æ”¯æŒç´¢å¼•ã€‚  </li><li>jsonbï¼šå­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œç›¸å¯¹äºjsonç±»å‹æ¥è¯´ï¼Œé¿å…äº†é‡å¤è§£æï¼Œå¹¶ä¸”æ”¯æŒç´¢å¼•ã€‚  </li></ul><p>æ‰€ä»¥å½“æ•°æ®åº“å­—æ®µè®¾è®¡æ—¶ï¼Œä»…ä»…æœ‰éƒ¨åˆ†å­—æ®µæ•°æ®ç±»å‹æ˜¯åŠç»“æ„åŒ–çš„ï¼Œæ•°æ®åº“é€‰å‹æ—¶ PG å°†æ˜¯éå¸¸ä¼˜ç§€çš„é€‰æ‹©ã€‚</p><h4>textæ— é•¿åº¦é™åˆ¶ï¼Œæ”¯æŒå…¨æ–‡ç´¢å¼•</h4><p>ä¸€èˆ¬å…³ç³»å‹æ•°æ®åº“çš„å­—ç¬¦ä¸²æœ‰é•¿åº¦é™åˆ¶ï¼Œå¤§å°åœ¨8kå·¦å³ï¼ŒPG åˆ™æ²¡æœ‰é™åˆ¶ã€‚</p><h4>å­—ç¬¦ç¼–ç æ”¯æŒæ›´å‹å¥½</h4><p>å¯¹äº emoji çš„å­˜å‚¨ï¼ŒMySQL éœ€è¦ utf8mb4 ç¼–ç æ‰èƒ½æ­£ç¡®æ˜¾ç¤ºï¼Œåœ¨ PG ç§é‡ä¸åˆ°ã€‚</p><h3>æ›´ä¸°å¯Œçš„ç´¢å¼•ç±»å‹</h3><p>MySQL çš„ç´¢å¼•ç±»å‹å–å†³äºåº•å±‚å¼•æ“é€‰å‹ï¼Œåƒ MyISAMã€InnoDB ç­‰æ”¯æŒB+æ ‘ç´¢å¼•ç±»å‹ã€‚<br/>
<!-- -->PG åˆ™æ”¯æŒB+æ•°ç´¢å¼•ã€å“ˆå¸Œç´¢å¼•ã€Gistç´¢å¼•ç­‰ã€‚</p><h3>æ›´ä¸°å¯Œçš„é›†ç¾¤æ”¯æŒ</h3><p>MySQL çš„é›†ç¾¤é«˜å¯ç”¨ä¾èµ–äºä¸»ä»å¤åˆ¶ï¼ˆreplicationï¼‰ï¼Œå…¶åº•å±‚åŸºäº binlog å®ç°ï¼Œå¹¶ä¸”æ˜¯å¼‚æ­¥çš„ã€‚<br/>
<!-- -->è¿™ç§åŒæ­¥æ–¹æ¡ˆå¾ˆéš¾å®ç°åŒæ­¥å¤åˆ¶ï¼Œæ›´é€‚åˆå¼‚åœ°å¤åˆ¶çš„åœºæ™¯ã€‚å½“ä¸»ä»èŠ‚ç‚¹å¤„ç†èƒ½åŠ›ä¸ä¸€è‡´æ—¶ï¼Œç‰¹åˆ«æ˜¯ä¸»èŠ‚ç‚¹èƒ½åŠ›å¼±äºä»èŠ‚ç‚¹æ—¶ï¼Œå¯èƒ½ä¼šå­˜åœ¨è¾ƒå¤§çš„éº»çƒ¦ã€‚</p><p>PG çš„ä¸»å¤‡å¤åˆ¶å±äºç‰©ç†å¤åˆ¶ï¼Œç›¸è¾ƒäºbinlogçš„é€»è¾‘å¤åˆ¶ï¼Œæ•°æ®çš„ä¸€è‡´æ€§æ›´åŠ å¯é ï¼Œå¤åˆ¶æ€§èƒ½æ›´é«˜ï¼Œå¯¹ä¸»æœºçš„å½±å“ä¹Ÿæ›´å°ã€‚<br/>
<!-- -->PG é›†ç¾¤æœ‰è¾ƒå¤šçš„æ’ä»¶ï¼š   </p><ul><li>slony æ”¯æŒå­—æ®µçº§çš„åŒæ­¥é›†ç¾¤ã€‚  </li><li>standby æ”¯æŒWALæ–‡ä»¶çº§æˆ–æµå¼çš„è¯»å†™åˆ†ç¦»é›†ç¾¤ã€‚     </li></ul><h2>MySQLç›¸è¾ƒäºPGä¼˜åŠ¿</h2><h3>ä¸šç•Œä¸»æµ</h3><p>ä¸»æµå°±æ„å‘³ç€ä½ èƒ½æ‰¾åˆ°æ›´å¤šçš„ç”¨æˆ·ç»éªŒã€è§£å†³æ–¹æ¡ˆã€æ–‡æ¡£ç­‰ã€‚</p><h3>çº¿ç¨‹æ¨¡å¼æ¯”è¿›ç¨‹æ¨¡å¼æ›´å æ®ä¼˜åŠ¿</h3><p>MySQL ä½¿ç”¨äº†çº¿ç¨‹ï¼Œè€Œ PG ä½¿ç”¨çš„æ˜¯è¿›ç¨‹ã€‚</p><p>è¿›ç¨‹ä¹‹é—´çš„è°ƒåº¦å¼€é”€è¦æ¯”çº¿ç¨‹å¤§å¾ˆå¤šã€‚ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªåŸå› ï¼ŒPG é»˜è®¤æœ€å¤§è¿æ¥æ•°åªæœ‰ 100ï¼Œå¯¹äºæ•°æ®åº“æ¥è¯´ï¼Œè¿™æ˜¯éå¸¸å°çš„è¿æ¥æ•°äº†ã€‚<br/>
<!-- -->å› æ­¤ï¼ŒPG æ›´éœ€è¦ç±»ä¼¼ pgbounder çš„è¿æ¥æ± ä»£ç†æœåŠ¡æ¥ç¡®ä¿æ•°æ®åº“ç¨³å®šã€‚</p><h3>å­˜å‚¨å¼•æ“æ’ä»¶åŒ–</h3><p>MySQL çš„å­˜å‚¨å¼•æ“æ’ä»¶åŒ–æœºåˆ¶ï¼Œæ˜¯çš„å®ƒçš„åº”ç”¨åœºæ™¯æ›´åŠ å¹¿æ³›ï¼Œæ¯”å¦‚ InnoDB é€‚åˆäº‹åŠ¡åœºæ™¯ï¼ŒMyISAM åˆ™æ›´é€‚åˆé™æ€æ•°æ®çš„æŸ¥è¯¢åœºæ™¯ã€‚</p><h3>ç´¢å¼•ç»„ç»‡è¡¨</h3><p>ä»¥ InnoDB ä¸ºä¾‹ï¼ŒB+æ ‘ç´¢å¼•ä¸­ï¼Œä¸»é”®ç´¢å¼•æ ‘ä¸­å¶å­èŠ‚ç‚¹å­˜å‚¨çš„å°±æ˜¯ç‰©ç†æ•°æ®ï¼Œæ™®é€šèŠ‚ç‚¹ç‰©ç†ç´¢å¼•å­˜å‚¨çš„æ˜¯ä¸»é”®çš„ç´¢å¼•ã€‚</p><p>PG çš„ç´¢å¼•è®°å½•çš„å‡æ˜¯ç‰©ç†ä½ç½®ï¼Œéœ€è¦äºŒæ¬¡æŸ¥è¯¢ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Go Httpæ¨¡å—å‘ç‚¹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/06/05/golanghttpæ¨¡å—</link>
            <guid>Go Httpæ¨¡å—å‘ç‚¹</guid>
            <pubDate>Sun, 05 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[è®°å½•åŸç”Ÿåº“ net/http ä¸­å¯èƒ½é‡åˆ°çš„å‘ç‚¹ã€‚]]></description>
            <content:encoded><![CDATA[<p>è®°å½•åŸç”Ÿåº“ <code>net/http</code> ä¸­å¯èƒ½é‡åˆ°çš„å‘ç‚¹ã€‚</p><h2>é»˜è®¤ HttpClient æœªé…ç½®è¶…æ—¶</h2><p>é»˜è®¤çš„ <code>http.DefaultClient</code> ä¸åŒ…å«è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚åœ¨æŸäº›åœºæ™¯ä¼šé€ æˆç¨‹åºå¼‚å¸¸é˜»å¡ã€‚</p><pre><code class="language-go" metastring="title=&quot;å¢åŠ è¶…æ—¶æ—¶é—´&quot;" title="&quot;å¢åŠ è¶…æ—¶æ—¶é—´&quot;">client := &amp;http.Client{
    Timeout: 60 * time.Second,
}
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[golangé«˜IOåœºæ™¯ä¸‹çš„å‘ç‚¹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/05/31/golangé«˜IOåœºæ™¯ä¸‹çš„å‘ç‚¹</link>
            <guid>golangé«˜IOåœºæ™¯ä¸‹çš„å‘ç‚¹</guid>
            <pubDate>Tue, 31 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[è®¡ç®—æœºç¨‹åºåœºæ™¯å¯åˆ†ä¸ºè®¡ç®—å¯†é›†å‹å’ŒIOå¯†é›†å‹ã€‚è®¡ç®—å¯†é›†å‹ï¼Œå³CPUå ç”¨è¾ƒé«˜çš„ç¨‹åºï¼Œä¸€èˆ¬ç±»ä¼¼AIç®—æ³•ç­‰ã€‚IOå¯†é›†å‹åˆ™åŒ…æ‹¬ç£ç›˜IOå’Œç½‘ç»œIOç­‰ã€‚]]></description>
            <content:encoded><![CDATA[<p>è®¡ç®—æœºç¨‹åºåœºæ™¯å¯åˆ†ä¸ºè®¡ç®—å¯†é›†å‹å’ŒIOå¯†é›†å‹ã€‚è®¡ç®—å¯†é›†å‹ï¼Œå³CPUå ç”¨è¾ƒé«˜çš„ç¨‹åºï¼Œä¸€èˆ¬ç±»ä¼¼AIç®—æ³•ç­‰ã€‚IOå¯†é›†å‹åˆ™åŒ…æ‹¬ç£ç›˜IOå’Œç½‘ç»œIOç­‰ã€‚<br/>
<!-- -->Go çš„åç¨‹ï¼Œå¤©ç„¶æ”¯æŒå¹¶å‘åœºæ™¯ï¼Œå¯¹äºè®¡ç®—å¯†é›†å‹å’ŒIOå¯†é›†å‹éƒ½æ¯”è¾ƒå‹å¥½ã€‚ä½†æ˜¯é«˜ç£ç›˜IOåœºæ™¯ä¼šæœ‰ç‚¹é—®é¢˜ï¼Œä½¿ç”¨ä¸å½“è¿˜å¯èƒ½é€ æˆå‘ç‚¹ã€‚</p><p>ç½‘ç»œIOå±äº<strong>äº‹ä»¶é©±åŠ¨</strong>å‹ï¼Œå¯ä»¥é€šè¿‡æ³¨å†Œå›è°ƒå®ç°å¼‚æ­¥åŒ–ã€‚<br/>
<!-- -->ç£ç›˜IOçš„ read/write éƒ½æ˜¯åŒæ­¥IOï¼Œæ˜¯é˜»å¡äº‹ä»¶ï¼Œéœ€è¦åŒæ­¥ç­‰å¾…ã€‚</p><p>æ‰€ä»¥ï¼Œç£ç›˜IOä¼šé€ æˆGoçš„çº¿ç¨‹é˜»å¡ï¼Œè€ŒGoåŸºäºGMPæ¨¡å‹ï¼Œå½“Mé˜»å¡çš„æ—¶å€™ï¼Œä¼šé‡æ–°åˆ›å»ºæ–°çš„Mæ¥æ‰§è¡ŒGä»»åŠ¡ã€‚<br/>
<!-- -->æ‰€ä»¥å½“ç±»ä¼¼ä»»åŠ¡è¶³å¤Ÿå¤šæ—¶ï¼Œä¼šé€ æˆGoçš„Mæš´æ¶¨ï¼Œè¶…è¿‡1wä»¥åï¼Œä¼šè¢«æ€æ‰ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[go modç†è§£]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/04/07/gomodç†è§£</link>
            <guid>go modç†è§£</guid>
            <pubDate>Thu, 07 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[å¦‚æœä½ æ­å»ºè¿‡æ—©æœŸ Go é¡¹ç›®ï¼Œåº”è¯¥ä¼šæ¯”è¾ƒç†Ÿæ‚‰ GOPATHã€‚]]></description>
            <content:encoded><![CDATA[<p>å¦‚æœä½ æ­å»ºè¿‡æ—©æœŸ Go é¡¹ç›®ï¼Œåº”è¯¥ä¼šæ¯”è¾ƒç†Ÿæ‚‰ GOPATHã€‚<br/>
<!-- -->åœ¨ä»¥å‰ï¼Œé¡¹ç›®ä¾èµ–ä¸‰æ–¹åŒ…æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡<code>go get</code>å°†ä¸‰æ–¹ä¾èµ–åº“ä¸‹è½½åˆ° GOPATHã€‚è¿™å°±æ¶‰åŠåˆ°ä¸€ä¸ªç‰ˆæœ¬ç»´æŠ¤çš„é—®é¢˜ã€‚  </p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†<code>go mod</code>ã€‚</p><h2>go mod</h2><p><code>go mod</code> æ˜¯ä¸€ä¸ªåŒ…ä¾èµ–ç®¡ç†å·¥å…·ã€‚</p><h2>gitæ²¡æ³•æ‹‰ä»£ç </h2><p>go mod vendoræ‹‰å–ä»£ç æŠ¥é”™ï¼š</p><pre><code class="language-text" metastring="title=&quot;&quot;" title="&quot;&quot;">The project you were looking for could not be found
</code></pre><p>è¿™ç§å±äºgitæœªé…ç½®å¥½å¯¼è‡´çš„ï¼Œå¯ä»¥å†æ ¹ç›®å½•ä¸‹åˆ›å»ºï¼š</p><pre><code class="language-text" metastring="title=&quot;.git-credentials&quot;" title="&quot;.git-credentials&quot;">https://user:pwd@gitee.com
https://user:pwd@github.com
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[tcmallocç†è§£]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/04/05/tcmallocç†è§£</link>
            <guid>tcmallocç†è§£</guid>
            <pubDate>Tue, 05 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[tcmallocï¼ˆThread-Caching Mallocï¼‰æ˜¯ä¸€ä¸ªå†…å­˜åˆ†é…å™¨ï¼Œç”¨äºç®¡ç†å †å†…å­˜ã€‚]]></description>
            <content:encoded><![CDATA[<p>tcmallocï¼ˆThread-Caching Mallocï¼‰æ˜¯ä¸€ä¸ªå†…å­˜åˆ†é…å™¨ï¼Œç”¨äºç®¡ç†å †å†…å­˜ã€‚<br/>
<!-- -->ä¸»è¦å½±å“çš„æ˜¯mallocå’Œfreeï¼Œç”¨äºé™ä½é¢‘ç¹åˆ†é…ã€é‡Šæ”¾å†…å­˜åœºæ™¯æ‰€é€ æˆçš„æ€§èƒ½æŸè€—ï¼Œå¯ä»¥æœ‰æ•ˆçš„æ§åˆ¶å†…å­˜ç¢ç‰‡ã€‚</p><h2>ptmalloc &amp; tcmalloc</h2><p>åœ¨tcmallocä¹‹å‰ï¼Œè¿˜æœ‰ä¸€ä¸ªptmallocï¼Œtcmallocå·ç§°è¦æ¯”å®ƒå¿«ã€‚<br/>
<!-- -->ä¸€æ¬¡mallocå’Œfreeæ“ä½œï¼Œptmallocéœ€è¦300nsï¼Œè€Œtcmallocåªéœ€è¦50nsã€‚   </p><p>tcmallocå°†å†…å­˜è¯·æ±‚åˆ†ä¸ºäº†ä¸¤ç±»ï¼šå¤§å¯¹è±¡è¯·æ±‚å’Œå°å¯¹è±¡è¯·æ±‚ã€‚ï¼ˆå¤§äº32Kçš„å±äºå¤§å¯¹è±¡ï¼‰<br/>
<!-- -->å®ƒä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æœ¬åœ°ç¼“å­˜ï¼Œå°å¯¹è±¡è¯·æ±‚å¯ä»¥ç›´æ¥ä»æœ¬åœ°ç¼“å­˜è·å–ï¼Œæ‰€ä»¥å¯¹äºå°å¯¹è±¡çš„åˆ†é…åŸºæœ¬ä¸å­˜åœ¨é”ç«äº‰ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[redisæŒ‡æ ‡å°ç»“]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/04/02/redisæŒ‡æ ‡å°ç»“</link>
            <guid>redisæŒ‡æ ‡å°ç»“</guid>
            <pubDate>Sat, 02 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ¬æ–‡å­¦ä¹ æ€»ç»“ä¸‹ redis å¸¸ç”¨çš„è§‚æµ‹æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ï¼šæ€§èƒ½æŒ‡æ ‡ã€å†…å­˜æŒ‡æ ‡ç­‰ã€‚]]></description>
            <content:encoded><![CDATA[<p>æœ¬æ–‡å­¦ä¹ æ€»ç»“ä¸‹ redis å¸¸ç”¨çš„è§‚æµ‹æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ï¼šæ€§èƒ½æŒ‡æ ‡ã€å†…å­˜æŒ‡æ ‡ç­‰ã€‚</p><h2>æ€§èƒ½æŒ‡æ ‡</h2><p>redis ä½œä¸ºé«˜æ€§èƒ½ç¼“å­˜æœåŠ¡ï¼Œå…¶æ€§èƒ½æŒ‡æ ‡æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„è§‚æµ‹ç‚¹ã€‚</p><table><thead><tr><th>åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>latency</td><td>å¹³å‡å“åº”æ—¶é—´ã€‚è¯¥æ•°æ®æ— æ³•ä» info ä¸­è·å–ï¼Œéœ€è¦ä½¿ç”¨ redis-cli åŠ æŒ‡å®šå‚æ•°ã€‚egï¼š<code>redis-cli --latency</code></td></tr><tr><td>instantaneous_ops_per_sec</td><td>æ¯ç§’å¤„ç†çš„å‘½ä»¤æ€»æ•°ï¼Œå¯ä»¥åœ¨ info stats ä¸­è·å–ã€‚</td></tr><tr><td>hit rate</td><td>ç¼“å­˜å‘½ä¸­ç‡ã€‚è¯¥å€¼æ— æ³•ç›´æ¥è·å–ï¼Œéœ€è¦é€šè¿‡è®¡ç®—ï¼š<code>keyspace_hits /ï¼ˆkeyspace_hits + keyspace_missesï¼‰</code></td></tr></tbody></table><h2>å†…å­˜æŒ‡æ ‡</h2><p>redis ä½œä¸ºå¸¸è§å†…å­˜æ•°æ®åº“ï¼Œå…¶å†…å­˜æŒ‡æ ‡ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„è§‚æµ‹ç‚¹ã€‚</p><table><thead><tr><th>åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>used_memory</td><td>å†…å­˜ä½¿ç”¨é‡ï¼Œå¯ä»¥åœ¨ info memory ä¸­è·å–ã€‚</td></tr><tr><td>mem_fragmentation_ratio</td><td>æ“ä½œç³»ç»Ÿåˆ†é…çš„å†…å­˜å’Œ redis è¯·æ±‚çš„å†…å­˜çš„æ¯”ç‡ã€‚è®¡ç®—æ–¹å¼ä¸ºï¼š<code>mem_fragmentation_ratio = used_memory_rss / used_memory</code>ã€‚è¯¥æŒ‡æ ‡å¯ä»¥ç”¨äºè§‚æµ‹ redis æœåŠ¡å™¨çš„å†…å­˜ç¢ç‰‡ç‡ã€‚è¯¥å€¼å¤§äº1ï¼Œè¡¨ç¤ºå­˜åœ¨å†…å­˜ç¢ç‰‡ï¼Œæ¯”å¦‚1.5ï¼Œåˆ™è¡¨ç¤º50%æ˜¯å†…å­˜ç¢ç‰‡ã€‚è‹¥è¯¥å€¼å°äº1ï¼Œåˆ™è¡¨ç¤ºrediså†…å­˜åˆ†é…è¶…å‡ºäº†ç‰©ç†å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿæ­£åœ¨è¿›è¡Œå†…å­˜äº¤æ¢ã€‚</td></tr></tbody></table><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è®°ä¸€æ¬¡ redis æŸ¥è¯¢ å¼‚å¸¸]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/04/01/è®°ä¸€æ¬¡redisæŸ¥è¯¢å¼‚å¸¸</link>
            <guid>è®°ä¸€æ¬¡ redis æŸ¥è¯¢ å¼‚å¸¸</guid>
            <pubDate>Fri, 01 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[ä»Šå¤©é‡åˆ°ä¸€ä¸ªè¯¡å¼‚çš„äº‹æƒ…ï¼Œæœ‰ä¸€ä¸ªåŸºäº redis æä¾›é«˜æ€§èƒ½æŸ¥è¯¢çš„æœåŠ¡ï¼Œåœ¨éé«˜å³°æœŸæ—¶å±…ç„¶å¤§é‡æŠ¥é”™ã€‚]]></description>
            <content:encoded><![CDATA[<p>ä»Šå¤©é‡åˆ°ä¸€ä¸ªè¯¡å¼‚çš„äº‹æƒ…ï¼Œæœ‰ä¸€ä¸ªåŸºäº redis æä¾›é«˜æ€§èƒ½æŸ¥è¯¢çš„æœåŠ¡ï¼Œåœ¨éé«˜å³°æœŸæ—¶å±…ç„¶å¤§é‡æŠ¥é”™ã€‚<br/>
<!-- -->ä¸ºä»€ä¹ˆè¯´è¯¡å¼‚å‘¢ï¼Œå› ä¸ºæŠ¥é”™å†…å®¹ä¸ºï¼š<code>redis: connection pool timeout</code>ã€‚è€Œè¿™ä¸ªæœåŠ¡çš„æŸ¥è¯¢åœºæ™¯åŠå…¶ç®€å•ï¼Œåªæœ‰ <code>get</code> å’Œ <code>mget</code> ä¸¤ç§ï¼ŒæŠ¥è¿™ä¸ªé”™å°±æ„å‘³ç€ redis æŸ¥è¯¢æ€§èƒ½ä¸è¶³ï¼Ÿ<br/>
<!-- -->æœ¬æ–‡è®°å½•ä¸€ä¸‹æ’æŸ¥é—®é¢˜çš„è¿‡ç¨‹ã€‚<br/>
<img src="./1.1.png"/></p><h2>ç¬¬ä¸€è½®åˆ†æå®šä½</h2><p><code>redis: connection pool timeout</code> æ˜¯è¿æ¥æ± è¶…æ—¶ï¼Œè¿™ç§é—®é¢˜å‘ç”Ÿçš„åœºæ™¯ä¸€èˆ¬æ˜¯ç”±äºæŸä¸ªæ“ä½œè¿‡äºè€—æ—¶ï¼Œå¯¼è‡´ redis é˜»å¡ï¼Œä»è€Œå¯¼è‡´å…¶ä»–æŸ¥è¯¢æŠ¥é”™ã€‚<br/>
<!-- -->æ‰€ä»¥ç¬¬ä¸€æ­¥å°±æ˜¯å»çº¿ä¸ŠæŸ¥çœ‹æ…¢æ—¥å¿— <code>SLOWLOG</code>ï¼Œæˆ‘ä»¬æ…¢æ—¥å¿—é˜ˆå€¼ä¸º 1sï¼Œè€Œè¿æ¥è¶…æ—¶é…ç½®ä¸º 4sã€‚å¦‚æœæ˜¯å› ä¸ºæ…¢æ“ä½œå¯¼è‡´è¶…æ—¶ï¼Œé‚£åº”è¯¥æ˜¯ä¼šè¢«è®°å½•ä¸‹æ¥çš„ã€‚<br/>
<!-- -->ä½†å®é™…æ²¡æœ‰ï¼Œå› ä¸ºæˆ‘ä»¬ä¸šåŠ¡åœºæ™¯åªæœ‰ç®€å•çš„ <code>get</code> å’Œ å°é‡çš„ <code>mget</code>ã€‚æ‰€ä»¥è¦ä»å…¶ä»–è§’åº¦è¿›è¡Œåˆ†æã€‚</p><p>è¿™ä¸ªæœåŠ¡å½“æ—¶çš„å¹¶å‘å‹åŠ›åœ¨å‡ åƒQPSå·¦å³ï¼Œredis ä¸åº”è¯¥å­˜åœ¨æŠ—ä¸ä½çš„é—®é¢˜ã€‚ç¿»äº†ä¸‹æŠ¥é”™æ—¶é—´ç‚¹çš„ä¸Šä¸‹æ–‡æ—¥å¿—ï¼Œç¡®å®å‘ç°äº†ä¸€äº›é—®é¢˜ï¼š<br/>
<img src="1.2.png"/><br/>
<!-- -->ç®­å¤´æ—¶é—´æ®µï¼Œå³åœ¨42åˆ†åˆ°44åˆ†ä¹‹é—´ï¼Œåˆšå¥½å°±æ˜¯ redis æŸ¥è¯¢æŠ¥é”™çš„æ—¶é—´æ®µã€‚<br/>
<!-- -->è¯´æ˜å°±æ˜¯42åˆ†çš„åŒæ­¥è¡Œä¸ºï¼Œå½±å“åˆ°äº† redis çš„æŸ¥è¯¢æ€§èƒ½ã€‚   </p><p>é€šè¿‡æ’æŸ¥å‘ç°ï¼Œè¿™ä¸ªæœåŠ¡æœ‰ç‚¹ç‰¹æ®Šï¼Œæ˜¯ä»¥ daemon çš„å½¢å¼éƒ¨ç½²åœ¨ k8s ä¸Šï¼Œä¸”å• pod ç‹¬å èŠ‚ç‚¹ã€‚pod å†…åˆåŒ…å« redis å’Œ postgres ç­‰å¤šä¸ªæœåŠ¡ã€‚<br/>
<!-- -->è¿›ä¸€æ­¥æ’æŸ¥äº†è§£åˆ°ï¼Œå› ä¸ºèµ„æºæœ‰é™ï¼Œæ‰€ä»¥æ²¡åŠ èµ„æºé…é¢ï¼Œé¿å…æœåŠ¡éƒ¨ç½²ä¸ä¸Šå»ã€‚å› æ­¤ï¼Œå­˜åœ¨æŸæ—¶åˆ»çš„<strong>èµ„æºå€¾æ–œ</strong>å¯¼è‡´å…¶ä½™æœåŠ¡ä¸å¯ç”¨ã€‚</p><p>è¿™ç±»é—®é¢˜å…¶å®åœ¨ç‰©ç†æœºä¸Šç»å¸¸å‘ç”Ÿï¼Œæ²¡æƒ³åˆ°è¿™æ¬¡æ¢äº†ç§å½¢å¼å‘ç”Ÿåœ¨äº† k8s ä¸Šé¢ã€‚<br/>
<!-- -->è§£å†³æ–¹æ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼š<br/>
<!-- -->1ã€å¢åŠ æœºå™¨èµ„æºï¼Œå»ºè®® 4c å‡çº§ 8cã€‚<br/>
<!-- -->2ã€å¢åŠ èµ„æºé…é¢ã€‚ </p><p>ç”±äºé¢„ç®—ä¸è¶³ï¼Œæš‚æ—¶åªèƒ½é‡‡ç”¨ç¬¬äºŒç§æ–¹æ¡ˆï¼Œå³åŠ ä¸Šèµ„æºé…é¢ã€‚<br/>
<!-- -->ä½†æ˜¯èµ„æºå®åœ¨æœ‰é™ï¼Œæ— æ³•å…·ä½“ç²¾ç¡®åˆ°æ¯ä¸€ä¸ªå®¹å™¨ï¼Œæ•…æš‚æ—¶ä»…å¯¹ redis åŠ ä¸Šèµ„æºé…é¢ï¼š  </p><pre><code class="language-yaml">resources:
  requests:
    cpu: &#x27;1&#x27;
</code></pre><h2>ç¬¬äºŒè½®åˆ†æå®šä½</h2><p>é€šè¿‡å‡ å¤©çš„è§‚å¯Ÿï¼Œå‘ç°å¹¶æ²¡æœ‰å®é™…çš„æ•ˆæœã€‚redis ä»ç„¶å‡ºç°äº†æŸ¥è¯¢è¶…æ—¶çš„åœºæ™¯ã€‚è€Œä¸”è¿˜æ˜¯åœ¨æ›´æ–°é«˜å³°æœŸæ—¶é—´æ®µå‘ç”Ÿçš„ã€‚<br/>
<!-- -->ä½†æ˜¯æˆ‘ä»¬å·²ç»ç»™ redis å•ç‹¬ç”³è¯·äº† 1c çš„è®¡ç®—èµ„æºï¼Œä¸åº”è¯¥å‡ºç°ç±»ä¼¼é—®é¢˜ã€‚</p><p>æˆ‘ä»¬ä»”ç»†æ’æŸ¥äº†å®¹å™¨ç›‘æ§ï¼Œå‘ç°å„ä¸ªå®¹å™¨éƒ½æ²¡æœ‰å‡ºç°æ˜æ˜¾çš„é«˜è´Ÿè½½åœºæ™¯ã€‚æƒ…å†µæœ‰ç‚¹è¯¡å¼‚ï¼Œä»å†…éƒ¨çœ‹ä¸å‡ºä»€ä¹ˆæƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹äº†ä¸‹å½“å‰èŠ‚ç‚¹çš„ç›‘æ§ï¼š<br/>
<img src="./1.5.png"/><br/>
<!-- -->æœç„¶ï¼Œcpu åˆ©ç”¨ç‡æ²¡æœ‰æ»¡ï¼Œä½†æ˜¯ Load è´Ÿè½½å·²ç»æ»¡äº†ã€‚ç”šè‡³è¶…äº†å¾ˆå¤šã€‚<br/>
<!-- -->åŸºæœ¬å¯ä»¥çŸ³é”¤æ˜¯ pg åœ¨é«˜æ›´æ–°åœºæ™¯å½±å“ redis è°ƒåº¦ã€‚æš‚æ—¶åªèƒ½å¢åŠ  limits èµ„æºé™åˆ¶äº†ã€‚</p><p>:::info load average - å¹³å‡è´Ÿè½½
<code>load average</code> æ˜¯æŒ‡å•ä½æ—¶é—´å†…ï¼Œç³»ç»Ÿå¤„äº <strong>å¯è¿è¡ŒçŠ¶æ€</strong> å’Œ <strong>ä¸å¯ç»ˆç«¯çŠ¶æ€</strong> çš„å¹³å‡è¿›ç¨‹æ•°ï¼Œå®ƒå’Œ cpu ä½¿ç”¨ç‡æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚</p><p>å…¶ä¸­ï¼Œå¯è¿è¡ŒçŠ¶æ€æŒ‡æ­£åœ¨ä½¿ç”¨ cpu æˆ–è€… æ­£åœ¨ç­‰å¾… cpu çš„è¿›ç¨‹ï¼Œå³å¤„äº R çŠ¶æ€çš„è¿›ç¨‹ã€‚<br/>
<!-- -->ä¸å¯ä¸­æ–­çŠ¶æ€çš„è¿›ç¨‹ï¼Œæ˜¯æŒ‡æ­£å¤„äºå†…æ ¸æ€å…³é”®æµç¨‹ä¸­çš„è¿›ç¨‹ï¼Œå¹¶ä¸”è¿™äº›è¿›ç¨‹æ˜¯ä¸å¯æ‰“æ–­çš„ã€‚æ¯”å¦‚æœ€å¸¸è§çš„å°±æ˜¯ç­‰å¾…ç¡¬ä»¶è®¾å¤‡çš„IOå“åº”ã€‚    </p><p>æ‰€ä»¥ï¼Œ1m load average çš„æ„æ€å°±æ˜¯æŒ‡ 1min å†…æ­£åœ¨ä½¿ç”¨ cpu çš„çº¿ç¨‹ + æ­£åœ¨ç­‰å¾… cpu çš„çº¿ç¨‹ + æ­£åœ¨ç­‰å¾…IOçš„çº¿ç¨‹ã€‚åŒç† 5m å’Œ 15 m ä¹Ÿæ˜¯å¦‚æ­¤è®¡ç®—ã€‚</p><p>å¯¹äºè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œcpu ä½¿ç”¨ç‡å‡é«˜æ—¶ï¼Œå¹³å‡è´Ÿè½½åŸºæœ¬ä¹Ÿä¼šå‡é«˜ã€‚<br/>
<!-- -->å¯¹äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œcpu ä½¿ç”¨ç‡å¯èƒ½ä¸ä¼šå¾ˆé«˜ï¼Œä½†ç”±äºç­‰å¾…IOçš„çº¿ç¨‹ä¼šå¢åŠ ï¼Œæ‰€ä»¥å¹³å‡è´Ÿè½½ä¹Ÿä¼šå¢åŠ ã€‚<br/>
<!-- -->:::</p><h2>ç¬¬ä¸‰è½®åˆ†æå®šä½</h2><p>çªç„¶æƒ³èµ·å®˜ç½‘çš„ä¸€å¥è¯ï¼šå¯¹äº redis æ¥è¯´ï¼Œcpu å¾€å¾€ä¸ä¼šæ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œå†…å­˜å¤§å°å’Œç½‘ç»œå¸¦å®½æ‰å¯èƒ½æ˜¯ redis çš„ç“¶é¢ˆã€‚</p><p>ä¹‹å‰çš„åˆ†æåº”è¯¥æ˜¯è¢«å¸¦åäº†ã€‚å¯¹äºé«˜æ›´æ–°åœºæ™¯ï¼Œæ•°æ®åº“ä¼šå ç”¨å¤§é‡çš„ç£ç›˜IOï¼Œè¿™ä¸€å—å¯èƒ½ä¼šé€ æˆå½±å“ï¼Ÿ</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[golang é€‰é¡¹æ¨¡å¼]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/03/28/golangé€‰é¡¹æ¨¡å¼</link>
            <guid>golang é€‰é¡¹æ¨¡å¼</guid>
            <pubDate>Mon, 28 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[åœ¨ golang å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™ä¹ˆä¸€ç§é—®é¢˜ï¼šå‚æ•°è¿‡å¤šï¼Œå½“å¸Œæœ›å°†å‚æ•°é…ç½®æˆå¯é€‰çš„æ¨¡å¼ã€‚]]></description>
            <content:encoded><![CDATA[<p>åœ¨ golang å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™ä¹ˆä¸€ç§é—®é¢˜ï¼šå‚æ•°è¿‡å¤šï¼Œå½“å¸Œæœ›å°†å‚æ•°é…ç½®æˆå¯é€‰çš„æ¨¡å¼ã€‚    </p><p>åœ¨å…¶ä»–è¯­è¨€ä¸­æœ‰ä¸åŒçš„è§£å†³æ–¹æ³•ï¼Œæ¯”å¦‚ python å°±æ”¯æŒé»˜è®¤å‚æ•°ï¼Œå¯ä»¥å¾ˆå¥½çš„å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚<br/>
<!-- -->åœ¨ golang ä¸­ä¹Ÿæœ‰ä¸€ç§é€‰é¡¹æ¨¡å¼ï¼Œå¯ä»¥æ¯”è¾ƒå‹å¥½çš„å¤„ç†è¿™ç±»é—®é¢˜ã€‚   </p><h4>é€‰é¡¹æ¨¡å¼</h4><p>é€‰é¡¹æ¨¡å¼çš„ä¸»è¦æµç¨‹æ˜¯ï¼šåˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤å‚æ•°ï¼Œç„¶åæä¾›å¯å˜å‚æ•°ï¼Œè¿™äº›å‚æ•°å¯ä»¥é’ˆå¯¹æ€§çš„ä¿®æ”¹æ­¤é»˜è®¤å‚æ•°ï¼Œæœ€ç»ˆå¾—åˆ°ç›®æ ‡å‚æ•°ã€‚</p><pre><code class="language-go">type MyFuncOption func(options *MyFuncOptions)

func WithOptionStr1(str1 string) MyFuncOption {
    return func(options *MyFuncOptions) {
        options.optionStr1 = str1
    }
}

func WithOptionInt1(int1 int) MyFuncOption {
    return func(options *MyFuncOptions) {
        options.optionInt1 = int1
    }
}

func WithOptionStr2AndInt2(str2 string, int2 int) MyFuncOption {
    return func(options *MyFuncOptions) {
        options.optionStr2 = str2
        options.optionInt2 = int2
    }
}

func NewIns(options ...MyFuncOption) {
    defaultOptions := Options{}
    for _, f := range options {
        f(&amp;defaultOptions)
    }
}
</code></pre><h4>å¸¸è§æ–¹æ³•</h4><p>è¿™ç±»å‚æ•°çš„é€‰æ‹©èµ·å§‹æ¯”è¾ƒè‡ªç”±ï¼Œä¸€èˆ¬é€‰é¡¹æ¨¡å¼é€‚ç”¨äºå‚æ•°é‡è¾ƒå¤šçš„åœºæ™¯ï¼Œå½“å‚æ•°è¾ƒå°‘æ—¶ï¼Œä¸å¦¨ç›´æ¥åŒ¹é…é€‰é¡¹</p><pre><code class="language-go">type Opt int

const (
    OptEnv Opt = 1 &lt;&lt; iota
    OptDefault
    OptSilent // ignore err and iterate over all fields.
)

func NewIns(opts ...Opt) {
    var opt Opt = 0
    for _, o := range opts {
        opt = opt | o
    }
}
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[golang çš„ CSP&GMP æ¨¡å‹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/03/27/golang-GMPæ¨¡å‹</link>
            <guid>golang çš„ CSP&amp;GMP æ¨¡å‹</guid>
            <pubDate>Sun, 27 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[CSP]]></description>
            <content:encoded><![CDATA[<h2>CSP</h2><p>CSPï¼ˆcommunicating sequential processesï¼‰ï¼Œæ˜¯ golang æ¨å´‡çš„ä¸€ç§å¹¶å‘æ¨¡å¼ï¼Œå…¶ä¸­æœ‰ä¸€å¥æ¯”è¾ƒç»å…¸çš„è¯æ˜¯ï¼š<br/>
<strong>ä¸è¦ä»¥å…±äº«å†…å­˜çš„æ–¹å¼æ¥é€šä¿¡ï¼Œç›¸åï¼Œåº”è¯¥ä»¥é€šä¿¡çš„æ–¹å¼æ¥å…±äº«å†…å­˜ã€‚</strong></p><p>åœ¨å¸¸è§çš„å¤šçº¿ç¨‹å…±äº«å†…å­˜çš„æ¨¡å¼ä¸­ï¼Œå½“æ¶‰åŠåˆ°å¤šçº¿ç¨‹æ“ä½œå…±äº«æ•°æ®æ—¶ï¼Œä¸€èˆ¬éœ€è¦é€šè¿‡åŠ é”æ¥ä¿è¯æ•°æ®å’Œçº¿ç¨‹å®‰å…¨ã€‚<br/>
<!-- -->go åˆ™å¼•å…¥äº† chan ä¿¡é“ï¼Œå¯ä»¥ç”¨äºå¤š goroutine ä¹‹é—´çš„é€šä¿¡ã€‚</p><h2>GMP</h2><p>golang æ‰§è¡Œå¤šä»»åŠ¡æ—¶ï¼Œä¼šåˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œç„¶åæœ‰è°ƒåº¦å™¨ä¼šå°†ä»»åŠ¡å•å…ƒåˆ†é…ç»™çº¿ç¨‹æ‰§è¡Œï¼Œè¿™ç§æ–¹å¼æ˜¯ä¸€ç§å…¸å‹çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ã€‚</p><ul><li>Gï¼šgoroutineï¼Œæ­¤å¤„æŒ‡åç¨‹ã€‚å®ƒç›¸å½“äºæ“ä½œç³»ç»Ÿçš„è¿›ç¨‹æ§åˆ¶å—ï¼ŒåŒ…å«ï¼šå¯„å­˜å™¨ã€çº¿ç¨‹ä¸Šä¸‹æ–‡ã€å‡½æ•°æ‰§è¡ŒæŒ‡ä»¤ç­‰ã€‚     </li><li>Mï¼šmachineï¼Œæ­¤å¤„æŒ‡å®é™…çš„å†…æ ¸çº¿ç¨‹ï¼Œç”¨äºæ‰§è¡Œ Gã€‚    </li><li>Pï¼šprocessorï¼Œæ­¤å¤„æŒ‡è°ƒåº¦å™¨ï¼Œæ˜¯ M æ‰€éœ€è¦çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå†…éƒ¨ç»´æŠ¤æœ‰ä¸€ä¸ªæœ¬åœ°é˜Ÿåˆ—ã€‚å½“ P ä¸­æœ‰ä»»åŠ¡æ—¶ï¼Œä¼šåˆ›å»ºæˆ–è€…å”¤é†’ M å»å¤„ç†ä»»åŠ¡ã€‚   </li><li>æœ¬åœ°é˜Ÿåˆ—ï¼šP ç»´æŠ¤ä¸€ä¸ªæœ¬åœ°é˜Ÿåˆ—æ¥å­˜æ”¾ Gï¼Œæ–°åˆ›å»ºçš„ G ä¼šä¼˜å…ˆå­˜æ”¾åœ¨ P çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œå½“æœ¬åœ°é˜Ÿåˆ—æ»¡åï¼Œä¼šæ”¾å…¥åˆ°å…¨å±€é˜Ÿåˆ—ã€‚    </li><li>å…¨å±€é˜Ÿåˆ—ï¼šM æ‰§è¡Œæ—¶ä¼šå…ˆä»æœ¬åœ°é˜Ÿåˆ—è·å– Gï¼Œæœ¬åœ°æ²¡æœ‰åˆ™å»å…¨å±€é˜Ÿåˆ—è·å–ï¼Œå¦‚æœå…¨å±€é˜Ÿåˆ—ä¹Ÿæ²¡æœ‰ï¼Œåˆ™å°è¯•å»å…¶ä»– P çš„æœ¬åœ°é˜Ÿåˆ—å»å·å–ä¸€äº›ä»»åŠ¡ã€‚   </li><li>M0ï¼šç¨‹åºå¯åŠ¨åç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œè´Ÿè´£å¯åŠ¨èµ·ä¸€ä¸ª G0 å¹¶æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼ŒåŒ…å«åˆå§‹åŒ–æœ¬åœ°é˜Ÿåˆ—ã€å…¨å±€é˜Ÿåˆ—ç­‰ï¼Œå¯åŠ¨ G0 ä¹‹å M0 å°±å’Œæ™®é€š M ä¸€æ ·äº†ã€‚</li><li>G0ï¼šæ¯åˆ›å»ºä¸€ä¸ª Mï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ª G0ï¼Œè¿™é‡Œçš„ G0 ä»…ç”¨äºè´Ÿè´£è°ƒåº¦å…¶ä»–çš„ Gã€‚æ¯”å¦‚å½“ M ä» G1 åˆ‡æ¢è‡³ G2ï¼Œé¦–å…ˆåº”è¯¥åˆ‡åˆ° G0ï¼Œç„¶åç”± G0 å¹²æ‰ G1ï¼Œå†æŠŠ G2 åŠ è½½è¿›æ¥ã€‚</li></ul><p><img src="./gmp.png"/><br/>
<!-- -->1ã€go åˆ›å»º Gã€‚<br/>
<!-- -->2ã€å°† G ä¿å­˜åœ¨æœ¬åœ°é˜Ÿåˆ—ï¼Œè‹¥æœ¬åœ°é˜Ÿåˆ—æ»¡äº†ï¼Œåˆ™ä¿å­˜åˆ°å…¨å±€é˜Ÿåˆ—ã€‚<br/>
<!-- -->3ã€P ä¸ M ç»‘å®šï¼ŒM æ‰§è¡Œæœ¬åœ°é˜Ÿåˆ—ä»»åŠ¡ Gï¼Œè‹¥æœ¬åœ°é˜Ÿåˆ—ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œåˆ™ä»å…¨å±€é˜Ÿåˆ—è·å–ä»»åŠ¡ï¼Œè‹¥å…¨å±€é˜Ÿåˆ—ä¹Ÿæ²¡æœ‰ï¼Œåˆ™ä»å…¶ä»– P çš„æœ¬åœ°é˜Ÿåˆ—ä¸­å·å–ä¸€åŠä»»åŠ¡æ¥æ‰§è¡Œã€‚<br/>
<!-- -->4ã€è‹¥ M æ‰§è¡ŒæœŸé—´å‘ç”Ÿç³»ç»Ÿé˜»å¡ï¼Œæ­¤æ—¶ M ä¸ P è§£ç»‘ï¼ŒP å°†ç”³è¯·åˆ›å»ºæ–°çš„ M æˆ–è€…å”¤é†’ä¼‘çœ çš„ M é‡æ–°ç»‘å®šä¸æ‰§è¡Œã€‚<br/>
<!-- -->5ã€å½“ M æ¢å¤æ—¶ï¼Œä¼šå°è¯•è·å–ä¸€ä¸ªç©ºé—²çš„ Pï¼Œå¦‚æœæ²¡æœ‰ P ç©ºé—²ï¼ŒM åˆ™è¿›å…¥ä¼‘çœ ï¼ŒG ä¼šæ”¾å…¥åˆ°å…¨å±€é˜Ÿåˆ—ã€‚  </p><h4>go åˆå§‹åŒ–æµç¨‹</h4><p>1ã€åˆ›å»º M0<br/>
<!-- -->2ã€åˆ›å»º G0<br/>
<!-- -->3ã€ç»‘å®š M0 ä¸ G0<br/>
<!-- -->4ã€æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ<br/>
<!-- -->5ã€M0 æŠ•å…¥ä½¿ç”¨ï¼Œå°è¯•ä¸ç©ºé—² P ç»‘å®š   </p><h2>1.14 åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦</h2><p>å½“æœ‰å¤§é‡ G ä»»åŠ¡ï¼Œä¸ºäº†è®©æ¯ä¸ªä»»åŠ¡éƒ½æœ‰æ—¶é—´è¿è¡Œï¼Œ<code>runtime.main</code> ä¼šåˆ›å»ºä¸€ä¸ªé¢å¤–çš„ M æ¥è¿è¡Œ <code>sysmon</code> å‡½æ•°ï¼Œæ¥å®ç°ç›‘æ§ä¸æŠ¢å ã€‚</p><pre><code class="language-go">func main() {
    runtime.GOMAXPROCS(1)
    go func() {
        fmt.Println(&quot;pass&quot;)
    }
    for {
    }
}
</code></pre><p>åœ¨ 1.14 ä¹‹å‰ä¸Šé¢è¿™æ®µä»£ç å°†ä¸ä¼šè¾“å‡ºä»»ä½•ç»“æœï¼Œå› ä¸º main ä¼šå ç”¨å…¨éƒ¨çš„è®¡ç®—èµ„æºã€‚   </p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è®°ä¸€æ¬¡pgè¿ç§»k8sçš„å‘ç‚¹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/03/25/è®°ä¸€æ¬¡pgè¿ç§»k8sçš„å‘ç‚¹</link>
            <guid>è®°ä¸€æ¬¡pgè¿ç§»k8sçš„å‘ç‚¹</guid>
            <pubDate>Fri, 25 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[å‘ç‚¹ï¼šå­—ç¬¦é›†ä¸å…¼å®¹]]></description>
            <content:encoded><![CDATA[<h2>å‘ç‚¹ï¼šå­—ç¬¦é›†ä¸å…¼å®¹</h2><p>æœ‰å°ç‰©ç†æœºéƒ¨ç½²äº† postgres æ•°æ®åº“ï¼Œç°åœ¨è¦æŠŠè¿™ä¸ªæ•°æ®åº“è¿ç§»è‡³ k8sã€‚</p><p>ç¬¬ä¸€æ¬¡è¿ç§»ï¼Œæˆ‘ä»¬é¦–å…ˆå…³é—­äº†æ•°æ®åº“ï¼ŒæŠŠæ–‡ä»¶ç›´æ¥æŒªåˆ°äº† k8s ä¸Šï¼Œé…ä¸Šå¯¹åº”çš„ pg é•œåƒã€‚<br/>
<!-- -->æµ‹è¯•æ—¶ï¼ŒæœåŠ¡æ­£å¸¸è¿è¡Œäº†ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•æä¾›æ•°æ®æœåŠ¡ï¼Œç”šè‡³è¿æ•°æ®åº“ä¹Ÿè¿æ¥ä¸ä¸Šã€‚</p><pre><code class="language-text" metastring="title=&quot;è¿æ¥æŠ¥é”™&quot;" title="&quot;è¿æ¥æŠ¥é”™&quot;">zh_CN.UTF-8:initdb: error: locale â€œzh_CN.UTF-8â€œ requires unsupported encoding &quot;en_CN.UTF-8&quot;
</code></pre><p>æˆ‘ä»¬æ²¡æœ‰æ·±ç©¶ï¼Œå°±æ„Ÿè§‰å¯èƒ½æ˜¯æ•°æ®åº“æ–‡ä»¶ä¸å…¼å®¹ï¼Œä¸èƒ½ç›´æ¥æš´åŠ›è¿ç§»æ–‡ä»¶ã€‚</p><p>ç¬¬äºŒæ¬¡è¿ç§»ï¼Œæˆ‘ä»¬ä½¿ç”¨ pg_dumps å’Œ pg_restore å·¥å…·è¿›è¡Œè¿ç§»ã€‚æ•°æ®é‡æœ‰ç‚¹å¤§ï¼Œç­‰å¾…è¿ç§»å®Œæˆåï¼Œæˆ‘ä»¬å†æ¬¡è¿›è¡Œäº†æµ‹è¯•ã€‚</p><pre><code class="language-text" metastring="title=&quot;è¿æ¥æŠ¥é”™&quot;" title="&quot;è¿æ¥æŠ¥é”™&quot;">zh_CN.UTF-8:initdb: error: locale â€œzh_CN.UTF-8â€œ requires unsupported encoding &quot;en_CN.UTF-8&quot;
</code></pre><p>ä»ç„¶æŠ¥å­—ç¬¦é›†ä¸å…¼å®¹çš„é—®é¢˜ã€‚è¿™ç€å®æœ‰ç‚¹è®©äººè´¹è§£ã€‚</p><p>å’¨è¯¢äº†è¿ç»´å¤§ä½¬åï¼Œç»™çš„å»ºè®®æ˜¯å®‰è£…ä¸‹ä¾èµ–ï¼Œå³ï¼š</p><pre><code class="language-shell" metastring="script">yum install -y langpacks-zh_CN
</code></pre><p>è¿™ç§æ–¹å¼éœ€è¦åœ¨ç¼–è¯‘é•œåƒæ—¶å®‰è£…ï¼Œå½±å“æ¯”è¾ƒå°ã€‚</p><p>åé¢åˆæŸ¥è¯¢åˆ°ä¸€ç§æ–¹å¼ï¼Œåœ¨ç¼–è¯‘é•œåƒæ—¶ï¼Œä½¿ç”¨ <code>localedef</code> æŒ‡å®šç¼–ç å¹¶è®¾ç½®ç¯å¢ƒå˜é‡ä¸º LANG ä¸º zh_CN.utf8ï¼š</p><pre><code class="language-dockerfile">FROM postgres
RUN localedef -i zh_CN -c -f UTF-8 -A /usr/share/locale/locale.alias zh_CN.UTF-8
ENV LANG zh_CN.utf8
</code></pre><p>ä½†æ˜¯ç”¨äº†è¿™ç§æ–¹æ³•ï¼Œæ—¥å¿—ä¼¼ä¹ä¼šå˜æˆä¸­æ–‡ğŸ˜‚ğŸ˜‚ğŸ˜‚</p><p><img src="https://serverfault.com/questions/1074738/docker-postgresql-change-database-encoding-to-utf-8/1074756" alt="å‚è€ƒæ–‡æ¡£"/></p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[makeå’Œnewä¹‹é—´çš„åŒºåˆ«]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/03/24/makeå’Œnewä¹‹é—´çš„åŒºåˆ«</link>
            <guid>makeå’Œnewä¹‹é—´çš„åŒºåˆ«</guid>
            <pubDate>Thu, 24 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[make å’Œ new éƒ½æ˜¯ç”¨æ¥åˆ›å»ºå¯¹è±¡å’Œåˆå§‹åŒ–å†…å­˜çš„ã€‚åœ¨å®é™…ä½¿ç”¨åœºæ™¯ä¸­è¿˜æ˜¯æœ‰ä¸€äº›ä¸åŒçš„ã€‚]]></description>
            <content:encoded><![CDATA[<p>make å’Œ new éƒ½æ˜¯ç”¨æ¥åˆ›å»ºå¯¹è±¡å’Œåˆå§‹åŒ–å†…å­˜çš„ã€‚åœ¨å®é™…ä½¿ç”¨åœºæ™¯ä¸­è¿˜æ˜¯æœ‰ä¸€äº›ä¸åŒçš„ã€‚</p><h4>new</h4><pre><code class="language-go" metastring="title=&quot;new æºç æ³¨é‡Š&quot;" title="&quot;new">// The new built-in function allocates memory. The first argument is a type,
// not a value, and the value returned is a pointer to a newly
// allocated zero value of that type.
func new(Type) *Type
</code></pre><p>åœ¨æºç æ³¨é‡Šä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡º new çš„åŠŸèƒ½ï¼š<strong>è¾“å…¥ä¸€ä¸ªç±»å‹ï¼Œä¸èƒ½æ˜¯å€¼ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥ç±»å‹é›¶å€¼çš„æŒ‡é’ˆã€‚</strong></p><h4>make</h4><pre><code class="language-go" metastring="title=&quot;make æºç æ³¨é‡Š&quot;" title="&quot;make">// The make built-in function allocates and initializes an object of type
// slice, map, or chan (only). Like new, the first argument is a type, not a
// value. Unlike new, make&#x27;s return type is the same as the type of its
// argument, not a pointer to it. The specification of the result depends on
// the type:
//  Slice: The size specifies the length. The capacity of the slice is
//  equal to its length. A second integer argument may be provided to
//  specify a different capacity; it must be no smaller than the
//  length. For example, make([]int, 0, 10) allocates an underlying array
//  of size 10 and returns a slice of length 0 and capacity 10 that is
//  backed by this underlying array.
//  Map: An empty map is allocated with enough space to hold the
//  specified number of elements. The size may be omitted, in which case
//  a small starting size is allocated.
//  Channel: The channel&#x27;s buffer is initialized with the specified
//  buffer capacity. If zero, or the size is omitted, the channel is
//  unbuffered.
func make(t Type, size ...IntegerType) Type
</code></pre><p>åœ¨æºç æ³¨é‡Šä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡º make çš„åŠŸèƒ½ï¼š<strong>è¾“å…¥ä¸€ä¸ªç±»å‹ï¼ˆå¿…é¡»æ˜¯sliceã€mapã€chanï¼‰ï¼Œè¿”å›ä¸€ä¸ªæŒ‰æŒ‡å®šæ¡ä»¶åˆå§‹åŒ–åçš„ç±»å‹å¯¹è±¡ã€‚</strong></p><h2>ä¸»è¦åŒºåˆ«</h2><p>å…¶å®æ„Ÿè§‰æ²¡ä»€ä¹ˆå¤ªå¤§å…³ç³»ï¼Œéƒ½æ˜¯å†…ç½®çš„åˆå§‹åŒ–å‡½æ•°ï¼Œnew è¿”å›æŒ‡é’ˆï¼Œmake åªèƒ½ç”¨äºç‰¹å®šç±»å‹ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[golangæµ‹è¯•æ¢³ç†]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/03/23/golangæµ‹è¯•æ¢³ç†</link>
            <guid>golangæµ‹è¯•æ¢³ç†</guid>
            <pubDate>Wed, 23 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[å•å…ƒæµ‹è¯• flag]]></description>
            <content:encoded><![CDATA[<h2>å•å…ƒæµ‹è¯• flag</h2><h4>-bench regexp</h4><p>æ‰§è¡ŒåŸºå‡†æµ‹è¯•ï¼Œåé¢å¯ä»¥æ¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚æœéœ€è¦æ‰§è¡Œå…¨éƒ¨çš„åŸºå‡†æµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨ <code>-bench=.</code></p><pre><code class="language-go">func Benchmark(b *testing.B) {
    b.ResetTimer()
    for i := 0; i &lt; b.N; i++ {
    }
}
</code></pre><h4>-benchtime t</h4><p>åŸºå‡†æµ‹è¯•çš„æŒç»­æ—¶é—´ï¼Œé»˜è®¤æ˜¯ 1sï¼Œå¯ä»¥ä½¿ç”¨ <code>-benchtime=1h30s</code></p><h4>-count n</h4><p>åŸºå‡†æµ‹è¯•çš„æ‰§è¡Œæ¬¡æ•°ï¼Œé»˜è®¤ä»…æ‰§è¡Œä¸€æ¬¡ã€‚</p><h4>-cover</h4><p>ç”¨äºåˆ†æå¹¶è¾“å‡ºå•å…ƒæµ‹è¯•è¦†ç›–ç‡ã€‚</p><h4>-covermode set,count,atomic</h4><p>å•å…ƒæµ‹è¯•çš„è¦†ç›–ç‡åˆ†ææ¨¡å¼ã€‚é»˜è®¤åˆ†ææ¨¡å¼æ˜¯ setï¼Œå½“ä½¿ç”¨ -race æ—¶ï¼Œåˆ™åˆ†ææ¨¡å¼å˜ä¸º atomicã€‚</p><p>setï¼šå“ªä¸€è¡Œä»£ç è¢«æ‰§è¡Œäº†ã€‚<br/>
<!-- -->countï¼šå“ªè¡Œä»£ç è¢«æ‰§è¡Œäº†ï¼Œä¸”è¢«æ‰§è¡Œäº†å¤šå°‘æ¬¡ã€‚<br/>
<!-- -->atomicï¼šç±»ä¼¼ countï¼Œä½†æ˜¯ä¼šå¤šçº¿ç¨‹å¹¶å‘æ£€æµ‹ï¼Œå­˜åœ¨å¹¶å‘å†²çªæ—¶ä¼šæŠ¥é”™ã€‚  </p><h4>-cpu</h4><p>æŒ‡å®š GOMAXPROCS</p><h4>-failfast</h4><p>å½“æµ‹è¯•å¤±è´¥æ—¶ç«‹å³é€€å‡ºå½“å‰æµ‹è¯•ï¼Œè€Œä¸æ˜¯ç»§ç»­æ‰§è¡Œå‰©ä¸‹çš„æµ‹è¯•ã€‚</p><h4>-timeout</h4><p>å•ä¸ªå•å…ƒæµ‹è¯•æ‰§è¡Œçš„æœ€é•¿æ—¶é—´ï¼Œé»˜è®¤æ˜¯ 10 åˆ†é’Ÿ</p><h4>-benchmem</h4><p>è¾“å‡ºåŸºå‡†æµ‹è¯•è¿‡ç¨‹ä¸­å†…å­˜çš„åˆ†é…ä¸ç»Ÿè®¡ã€‚</p><h4>-coverprofile cover.out</h4><p>æµ‹è¯•è¿‡ç¨‹è¦†ç›–ç‡æƒ…å†µ</p><pre><code class="language-shell" metastring="script title=&quot;å¯è§†åŒ–å•å…ƒæµ‹è¯•è¦†ç›–ç‡&quot;" title="&quot;å¯è§†åŒ–å•å…ƒæµ‹è¯•è¦†ç›–ç‡&quot;">go tool cover -html=cover.out
</code></pre><h4>-cpuprofile cpu.out</h4><p>æµ‹è¯•è¿‡ç¨‹ cpu è°ƒåº¦æƒ…å†µ</p><h4>-memprofile</h4><p>æµ‹è¯•è¿‡ç¨‹å†…å­˜ä½¿ç”¨æƒ…å†µ</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è®°ä¸€æ¬¡å…³äº httpClient çš„å‘ç‚¹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/03/22/è®°ä¸€æ¬¡å…³äºhttpClientçš„å‘ç‚¹</link>
            <guid>è®°ä¸€æ¬¡å…³äº httpClient çš„å‘ç‚¹</guid>
            <pubDate>Tue, 22 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[å‘ç‚¹ï¼šDefaultClient æ— è¶…æ—¶]]></description>
            <content:encoded><![CDATA[<h2>å‘ç‚¹ï¼šDefaultClient æ— è¶…æ—¶</h2><p>go é»˜è®¤çš„ httpClient ä¸åŒ…å«è¶…æ—¶æ—¶é—´ï¼Œä¸åƒå…¶ä»–è¯­è¨€å¯èƒ½ä¼šæœ‰é»˜è®¤çš„è¶…æ—¶æ—¶é—´ã€‚<br/>
<!-- -->ä¸€èˆ¬å°½é‡å°‘ç”¨é»˜è®¤çš„ http.DefaultClientï¼Œæœªæ¯ä¸€ä¸ªè¯·æ±‚åŠ ä¸Šé»˜è®¤è¶…æ—¶æ—¶é—´ã€‚</p><pre><code class="language-golang" metastring="title=&quot;é…ç½®è¶…æ—¶æ—¶é—´&quot;" title="&quot;é…ç½®è¶…æ—¶æ—¶é—´&quot;">client := &amp;http.Client{
    Timeout: time.Second * 10,
}
</code></pre><h2>å‘ç‚¹ï¼šDefaultClient é•¿è¿æ¥å—é™</h2><pre><code class="language-go">var DefaultTransport RoundTripper = &amp;Transport{
    Proxy: ProxyFromEnvironment,
    DialContext: (&amp;net.Dialer{
        Timeout:   30 * time.Second,
        KeepAlive: 30 * time.Second,
    }).DialContext,
    ForceAttemptHTTP2:     true,
    MaxIdleConns:          100,
    IdleConnTimeout:       90 * time.Second,
    TLSHandshakeTimeout:   10 * time.Second,
    ExpectContinueTimeout: 1 * time.Second,
}

// DefaultMaxIdleConnsPerHost is the default value of Transport&#x27;s
// MaxIdleConnsPerHost.
const DefaultMaxIdleConnsPerHost = 2
</code></pre><h4>DefaultMaxIdleConnsPerHost</h4><p>DefaultMaxIdleConnsPerHost è¡¨ç¤ºå®¢æˆ·ç«¯å¯¹æ¯ä¸ªä¸»æœºæœåŠ¡ä¿ç•™çš„æœ€å¤§ç©ºé—²è¿æ¥æ•°ã€‚  </p><p>åœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œhttp.DefaultClient é…ç½®æœ‰ DefaultMaxIdleConnsPerHostï¼Œå€¼ä¸º 2ã€‚<br/>
<!-- -->è¡¨ç¤ºå®¢æˆ·ç«¯å¯¹æ¯ä¸ªä¸»æœºæœåŠ¡ä¿ç•™çš„æœ€å¤§ç©ºé—²è¿æ¥æ•°ä¸º 2ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æœ‰è¾ƒå¤šé•¿è¿æ¥åœºæ™¯æ—¶ï¼Œhttp.DefaultClient å¯èƒ½ä¼šå¹²æ‰å…¶ä»–é•¿è¿æ¥ï¼Œä»…ä¿ç•™ä¸¤ä¸ªã€‚</p><h4>KeepAlive</h4><p>KeepAlive è¡¨ç¤ºé•¿è¿æ¥å­˜æ´»æ—¶é—´ã€‚  </p><p>æ­¤å¤„é»˜è®¤ä¸º 30sï¼Œåœ¨æŸäº›å‹åŠ›æµ‹è¯•åœºæ™¯ä¸‹å¯èƒ½ä¼šå¯¼è‡´ socket è¿æ¥è¢«è€—å°½ã€‚</p><pre><code class="language-go" metastring="title=&quot;é…ç½®å­˜æ´»æ—¶é—´ 24h æ¡ˆä¾‹&quot;" title="&quot;é…ç½®å­˜æ´»æ—¶é—´">client := &amp;http.Client{
    Transport: &amp;http.Transport{
        DialContext: (&amp;net.Dialer{
            KeepAlive: time.Hour * 24,
        }).DialContext,
    },
}
</code></pre>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ•°æ®åº“å•è¡¨åäº¿é‡çº§çš„ä¼˜åŒ–ä¹‹è·¯]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/03/18/æ•°æ®åº“å•è¡¨åäº¿é‡çº§çš„ä¼˜åŒ–ä¹‹è·¯</link>
            <guid>æ•°æ®åº“å•è¡¨åäº¿é‡çº§çš„ä¼˜åŒ–ä¹‹è·¯</guid>
            <pubDate>Fri, 18 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[åœ¨å¸¸è§„æ•°æ®åº“ä¸­ï¼Œå•è¡¨æ•°æ®é‡åˆ°è¾¾ç™¾ä¸‡æ—¶ï¼ŒæŸ¥è¯¢æ–¹é¢å°±å¯èƒ½å‡ºç°æ€§èƒ½é—®é¢˜ã€‚è€Œå½“å•è¡¨æ•°æ®é‡è¾¾åˆ°åƒä¸‡é‡çº§æ—¶ï¼Œä¸ä»…æŸ¥è¯¢ï¼Œè¿ç´¢å¼•ç»´æŠ¤ä¹Ÿå¯èƒ½å‡ºç°é—®é¢˜ã€‚]]></description>
            <content:encoded><![CDATA[<p>åœ¨å¸¸è§„æ•°æ®åº“ä¸­ï¼Œå•è¡¨æ•°æ®é‡åˆ°è¾¾ç™¾ä¸‡æ—¶ï¼ŒæŸ¥è¯¢æ–¹é¢å°±å¯èƒ½å‡ºç°æ€§èƒ½é—®é¢˜ã€‚è€Œå½“å•è¡¨æ•°æ®é‡è¾¾åˆ°åƒä¸‡é‡çº§æ—¶ï¼Œä¸ä»…æŸ¥è¯¢ï¼Œè¿ç´¢å¼•ç»´æŠ¤ä¹Ÿå¯èƒ½å‡ºç°é—®é¢˜ã€‚<br/>
<!-- -->æ­¤æ¬¡æˆ‘ä»¬çš„ä¸»è§’æ˜¯&quot;å•è¡¨é‡çº§åäº¿&quot;ï¼Œæœ¬æ–‡ç« ä¸»è¦è®°å½•åœ¨ä¼˜åŒ–æœŸé—´çš„ä¸€äº›æ€è·¯ä¸å®ç°ã€‚</p><h2>èƒŒæ™¯ä»‹ç»</h2><ul><li><strong>æ•°æ®åº“</strong>ï¼špostgres  </li><li><strong>æ•°æ®åº“é…ç½®</strong>ï¼š4c8g + ssd</li><li><strong>è¡¨å</strong>ï¼šczasgï¼ˆå·²è„±æ•ï¼‰</li><li><strong>è¡¨é‡çº§</strong>ï¼š10äº¿  </li><li><strong>è¡¨å­—æ®µ</strong>ï¼šï¼ˆå·²è„±æ•ï¼‰<ul><li><strong>key</strong>ï¼šä¸»é”®ï¼Œç±»å‹ text</li><li><strong>value</strong>ï¼š ç±»å‹ text</li></ul></li><li><strong>ä¸šåŠ¡éœ€æ±‚</strong>ï¼šæ¯å¤©ä¼šæœ‰ä¸€æ‰¹æ•°æ®æºï¼Œ400w å·¦å³ï¼Œéœ€æ±‚å°±æ˜¯å†™å…¥è¿™æ‰¹æ•°æ®ï¼Œå¹¶è¾“å‡ºå®é™…æ–°å¢å’Œæ›´æ–°çš„æ•°æ®ã€‚</li></ul><p>å½“å‰çº¿ä¸Šå¤„ç†æ–¹å¼æ¯”è¾ƒå¸¸è§„ï¼Œä¸»è¦åŒ…æ‹¬ä¸‹é¢ä¸¤ä¸ªæ­¥éª¤ï¼š</p><h4>1ã€åˆ›å»ºä¸´æ—¶è¡¨ï¼Œå†™å…¥æ•°æ®</h4><p>åˆ›å»ºä¸´æ—¶è¡¨ï¼Œå­˜å‚¨ä¸šåŠ¡å¾…å¤„ç†æ•°æ®ï¼Œæ€»é‡åœ¨ 400w ä¸Šä¸‹ã€‚ï¼ˆæ•°æ®æ’å…¥è¿‡ç¨‹ç•¥ï¼‰</p><pre><code class="language-sql">CREATE TEMPORARY TABLE tmp_czasg (
    key    text,
    value  text
) ON COMMIT DROP;
</code></pre><p>åˆ›å»ºä¸´æ—¶è¡¨ï¼Œç”¨äºå­˜å‚¨æœ€ç»ˆæ›´æ–°æ•°æ®ã€‚</p><pre><code class="language-sql">CREATE TEMPORARY TABLE tmp_czasg_update (
    key        text,
    value      text,
    old_value  text
) ON COMMIT DROP;
</code></pre><h4>2ã€join è®¡ç®—ç»“æœé›†</h4><p>ä»¥ key ä¸ºè¿æ¥æ¡ä»¶ join åŸè¡¨ï¼Œå†è¿‡æ»¤å‡º value ä¸åŒæˆ–è€…åŸè¡¨ value ä¸ºç©ºçš„æ•°æ®.</p><pre><code class="language-sql">INSERT INTO tmp_czasg_update 
SELECT newkv.key, newkv.value, kv.value FROM tmp_czasg AS newkv 
LEFT JOIN czasg AS kv ON newkv.key = kv.key 
WHERE newkv.value != kv.value OR kv.value IS NULL;
</code></pre><h4>3ã€å°†ç»“æœé›†æ›´æ–°è‡³è¡¨ <code>czasg</code></h4><p><code>tmp_czasg_update</code> ä¸­ old_value ä¸ºç©ºçš„è¡¨ç¤ºæ–°å¢æ•°æ®ï¼Œæˆ‘ä»¬å°†å®ƒæ’å…¥åˆ°åŸè¡¨ä¸­ã€‚</p><pre><code class="language-sql">INSERT INTO czasg SELECT key, value FROM tmp_czasg_update 
WHERE old_value IS NULL;
</code></pre><p><code>tmp_czasg_update</code> ä¸­ old_value éç©ºçš„è¡¨ç¤ºæ›´æ–°æ•°æ®ï¼Œæˆ‘ä»¬å°†å®ƒæ›´æ–°åˆ°åŸè¡¨ä¸­ã€‚</p><pre><code class="language-sql">UPDATE czasg AS kv SET kv.value = newkv.value FROM 
(SELECT * FROM tmp_czasg_update WHERE old_value IS NOT NULL) AS newkv 
WHERE kv.key = newkv.key;
</code></pre><p>è‡³æ­¤ä¸šåŠ¡ç»“æŸã€‚æ ¹æ®å½“å‰çº¿ä¸Šæƒ…å†µï¼Œæ‰§è¡Œå®Œä¸€æ¬¡éœ€è¦ Nï¼ˆN &gt;= 2ï¼‰å°æ—¶ã€‚</p><p>ä¼˜åŒ–éœ€æ±‚ï¼šç”±äºè¯¥ä¸šåŠ¡ä¼šé•¿æ—¶é—´é˜»å¡ï¼Œå½±å“å…¶ä»–å…³è”ä¸šåŠ¡ï¼Œ<strong>å¸Œæœ›å‡å°‘æ­¤é˜¶æ®µçš„æ‰§è¡Œæ—¶é—´ã€‚</strong></p><h2>ä¼˜åŒ–ä¹‹è·¯ï¼šç—›ç‚¹åˆ†æ</h2><p>çœ‹å®Œä¸Šé¢çš„èƒŒæ™¯ä»‹ç»åï¼Œæˆ‘ä»¬åº”è¯¥å·²ç»åˆæ­¥äº†è§£ä¸šåŠ¡æµç¨‹äº†ï¼Œæ•´ç†å¦‚ä¸‹å›¾ï¼š<br/>
<img src="./data-update.png"/></p><p>å¯ä»¥çœ‹å‡ºï¼Œä¸»è¦æ¶‰åŠåˆ°çš„æ“ä½œå°±æ˜¯å¯¹æ•°æ®è¡¨æ›´æ–°å¹¶ç”Ÿæˆç‰ˆæœ¬æ›´æ–°åŒ…ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ¥æ‹†è§£å…¶ä¸­çš„æµç¨‹ï¼Œå¤§è‡´åˆ†æä¸‹è€—æ—¶çš„åŸå› ï¼š</p><p>1ã€åˆ›å»ºä¸´æ—¶è¡¨<br/>
<!-- -->2ã€æ•°æ®å†™å…¥ä¸´æ—¶è¡¨<br/>
<!-- -->3ã€<strong>å…³è”è®¡ç®—æœ€ç»ˆå¾…ä½œä¸šçš„æ•°æ®</strong><br/>
<!-- -->4ã€<strong>æ’å…¥æ–°æ•°æ®</strong><br/>
<!-- -->5ã€æ›´æ–°æ—§æ•°æ®<br/>
<!-- -->6ã€å¯¼å‡ºç»“æœé›†   </p><p>åœ¨ä¸Šè¿°æµç¨‹ä¸­ï¼Œä¸»è¦è€—æ—¶ç‚¹å°±æ˜¯æ­¥éª¤ 3 å’Œ 4ã€‚<br/>
<!-- -->æ­¥éª¤ 3 è€—æ—¶æ˜¯å› ä¸ºæ•°æ®é‡è¿‡å¤§ï¼Œå…³è”è¿‡ç¨‹æ— æ³•å…¨ç¨‹åœ¨å†…å­˜ä¸­æ“ä½œï¼Œéœ€è¦å€Ÿç”¨ç£ç›˜æ¥å®Œæˆä¸­é—´è®¡ç®—ã€‚<br/>
<!-- -->æ­¥éª¤ 4 è€—æ—¶æ˜¯å› ä¸ºå­˜åœ¨ç´¢å¼•ï¼Œå¯¹è¿™ä¸ªé‡çº§çš„ç´¢å¼•è¿›è¡Œå¢åˆ æ“ä½œéƒ½ä¼šéå¸¸è€—æ—¶ã€‚     </p><p>é¦–å…ˆï¼Œé’ˆå¯¹é‡çº§è¿‡å¤§çš„é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆæ¯”è¾ƒç»Ÿä¸€ï¼Œé‚£å°±æ˜¯è¿›è¡Œæ°´å¹³æ‹†åˆ†ï¼Œå°½å¯èƒ½å‡å°è¡¨çš„å¤§å°ã€‚<br/>
<!-- -->å…¶æ¬¡ï¼Œé’ˆå¯¹ç´¢å¼•å¯¼è‡´çš„æ’å…¥/åˆ é™¤è€—æ—¶ï¼Œè§£å†³æ–¹æ¡ˆä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æ’å…¥/åˆ é™¤å‰ï¼Œå…ˆ <code>DROP INDEX</code>ï¼Œæ‰§è¡Œå®Œæ“ä½œåï¼Œå† <code>CREATE INDEX</code>ã€‚<br/>
<!-- -->åœ¨è¿™é‡Œæˆ‘ä»¬ä¹‹æ‰€ä»¥ä¸è¿™æ ·åšï¼Œæ˜¯å› ä¸ºé‡å»ºä¸€å¼  10äº¿ é‡çº§è¡¨çš„ç´¢å¼•ï¼Œä¸è§å¾—æ¯”å½“å‰æ–¹æ¡ˆå¿«å¤šå°‘ã€‚     </p><p>æœ‰äº†å¤§è‡´æ€è·¯ï¼Œæˆ‘ä»¬å†æ¥æƒ³æƒ³å…·ä½“çš„è½åœ°æ–¹æ¡ˆã€‚</p><h2>ä¼˜åŒ–ä¹‹è·¯ï¼šè¡¨åˆ†åŒº</h2><p>é’ˆå¯¹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è®¡åˆ’é€‰æ‹©æ°´å¹³æ‹†åˆ†è¿™å¼ å¤§è¡¨ã€‚<br/>
<!-- -->æ‹†åˆ†æ—¶è¦è€ƒè™‘åˆ°å•è¡¨çš„å¤§å°ï¼Œæœ€å¥½èƒ½æ§åˆ¶åœ¨ç™¾ä¸‡çº§ã€‚<br/>
<!-- -->æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€‰æ‹©å°†è¿™å¼  10äº¿ å¤§è¡¨æ‹†åˆ†æˆ 256 å¼ å°è¡¨ï¼Œè¿™æ ·å¹³å‡åˆ°æ¯å¼ è¡¨çš„å¤§å°å°±æ˜¯ 400w å·¦å³äº†ã€‚</p><p>ä¸€èˆ¬æ‹†åˆ†çš„æ–¹å¼å°±æ˜¯åˆ›å»ºå¤šå¼ ç‰©ç†è¡¨ï¼Œç„¶åå°†æ•°æ®æŒ‰ç…§æŸç§è§„åˆ™å‡åŒ€çš„æ’å…¥åˆ°è¿™äº›è¡¨ä¸­ï¼Œä»è€Œå‡å°å•è¡¨çš„å¤§å°ã€‚<br/>
<!-- -->ä½†æˆ‘ä»¬ä¸šåŠ¡åœºæ™¯å¹¶æ²¡æœ‰ç‰¹åˆ«å¤æ‚ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©äº†<strong>è¡¨åˆ†åŒº</strong>ã€‚</p><p>è‡ªç„¶è€Œç„¶ï¼Œ<code>key</code> å­—æ®µä¹Ÿå°±æˆäº†æˆ‘ä»¬é¦–é€‰çš„åˆ†åŒºæ¡ä»¶ã€‚<br/>
<!-- -->ç”±äºè¯¥å­—æ®µæ˜¯éšæœºå­—ä¸²ï¼Œæ²¡æœ‰è§„å¾‹ï¼Œåªèƒ½é‡‡ç”¨å“ˆå¸Œçš„æ–¹å¼æ•£å°„åˆ°å„ä¸ªåˆ†åŒºã€‚<br/>
<!-- -->ç„¶åæˆ‘åœ¨åˆ†åŒºå†…åˆ›å»º <code>key_btree_index_key</code> ç´¢å¼•ï¼Œæ­¤æ—¶æ¯ä¸ªåˆ†åŒºçš„ç´¢å¼•å¤§å°å°±å¯ä»¥æ§åˆ¶åœ¨è¾ƒå°çš„èŒƒå›´å†…äº†ã€‚  </p><p>åˆ°è¿™é‡Œï¼Œåˆæ­¥ä¼˜åŒ–æ–¹æ¡ˆå·²ç»å½¢æˆã€‚ä½†è€ƒè™‘åˆ°éšæœºå­—ä¸²ç”Ÿæˆçš„ç´¢å¼•ï¼Œæ— è®ºåœ¨ç©ºé—´è¿˜æ˜¯æ€§èƒ½ä¸Šéƒ½æœ‰æ‰€æ¬ ç¼ºï¼Œ
æ‰€ä»¥æœ¬ç€ä¸€æ­¥ä¼˜åŒ–åˆ°ä½çš„æƒ³æ³•ï¼Œæˆ‘ä»¬å†³å®šé‡æ–°è®¾è®¡å­—æ®µç´¢å¼•ï¼š<br/>
<!-- -->1ã€æ–°å¢ä¸€ä¸ªå­—æ®µ <code>key_crc32</code>ï¼Œç”¨äºå­˜å‚¨ <code>key</code> å€¼è®¡ç®—å‡ºçš„å“ˆå¸Œæ•°ï¼Œæ­¤æ•°ä½äº <code>1 ~ 2^32</code> ä¹‹é—´ã€‚<br/>
<!-- -->2ã€å°†åˆ†åŒºæ¡ä»¶è®¾å®šä¸º <code>key_crc32</code><br/>
<!-- -->3ã€åˆ›å»ºåˆ†åŒºç´¢å¼• <code>key_crc32_btree_index_key</code>     </p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„è¡¨åˆ†åŒºæ–¹æ¡ˆåˆæ­¥è½åœ°ã€‚ç´¢å¼•è¿™ä¸€å—å±äºè¿‡åº¦è®¾è®¡ï¼Œå› ä¸ºå¼•å…¥äº†æ–°å­—æ®µï¼Œæ‰€ä»¥æ˜¯å¦å±äºæ­£å‘ä¼˜åŒ–ï¼Œæœ‰å¾…è€ƒé‡ã€‚</p><p>:::tip è¡¨ç»§æ‰¿
åœ¨ postgres ä¸­ï¼Œç»§æ‰¿å¯ä»¥å¿«é€Ÿçš„<strong>å…³è”ã€åŒºåˆ†</strong>å¤šå¼ è¡¨ï¼Œè®©æ•°æ®ç»´æŠ¤æ›´åŠ é«˜æ•ˆã€‚  </p><p>ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œè‡³å°‘éœ€è¦æœ‰ä¸€å¼ æºè¡¨ï¼Œç„¶åé€šè¿‡æŒ‡å®šæºè¡¨æ¥åˆ›å»ºç»§æ‰¿è¡¨ã€‚<br/>
<!-- -->å¯¹äºç»§æ‰¿è¡¨æ¥è¯´ï¼Œæ­¤æ—¶çš„ç»§æ‰¿è¡¨å°†<strong>æ‹¥æœ‰æºè¡¨çš„å…¨éƒ¨åˆ—</strong>ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰é¢å¤–çš„åˆ—å±æ€§ã€‚<br/>
<!-- -->å¯¹äºæºè¡¨æ¥è¯´ï¼Œæ­¤æ—¶çš„æºè¡¨å°†å¯ä»¥æ£€ç´¢<strong>è‡ªèº«ä»¥åŠç»§æ‰¿è¡¨çš„å…¨éƒ¨æ•°æ®</strong>ã€‚   </p><p>åœ¨è¿™é‡Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æœ‰ä¸€å¼ è¡¨ <code>cities</code>ï¼Œé‡Œé¢å­˜æ”¾äº†å›½å†…å¤–æ‰€æœ‰çš„åŸå¸‚ã€‚</p><pre><code class="language-sql">CREATE TABLE cities (
    name      text,   -- åŸå¸‚å
    altitude  int     -- åŸå¸‚æµ·æ‹”é«˜åº¦
);
</code></pre><p>å¯æ˜¯æ¯ä¸ªå›½å®¶åªæœ‰ä¸€ä¸ªé¦–éƒ½åŸå¸‚ï¼Œç°åœ¨æœ‰ä¸šåŠ¡éœ€æ±‚è¦å¿«é€Ÿç­›åˆ†é¦–éƒ½åŸå¸‚ã€‚<br/>
<!-- -->ä¸ºäº†å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç»™è¿™å¼ è¡¨åŠ ä¸€ä¸ªå­—æ®µï¼Œæˆ–è€…é‡æ–°åˆ›å»ºä¸€å¼ é¦–éƒ½åŸå¸‚çš„è¡¨ï¼Œè¿™äº›éƒ½æ˜¯ä¸é”™çš„å®ç°æ–¹æ¡ˆã€‚<br/>
<!-- -->ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ç»§æ‰¿æ¥å®ç°è¿™ä¸ªéœ€æ±‚ï¼š</p><pre><code class="language-sql">CREATE TABLE capitals (
    country  text     -- æ‰€å±å›½
) INHERITS (cities);
</code></pre><p>åœ¨è¿™é‡Œæˆ‘ä»¬åˆ›å»ºç»§æ‰¿è¡¨ <code>capitals</code>ï¼Œç»§æ‰¿è‡ª <code>cities</code>ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥è¿™æ ·å­˜å‚¨æ•°æ®ï¼š<br/>
<!-- -->1ã€å°†é¦–éƒ½åŸå¸‚å­˜æ”¾è‡³ <code>capitals</code>ï¼Œå¹¶æŒ‡å®šæ‰€å±å›½ã€‚<br/>
<!-- -->2ã€å°†å…¶ä½™åŸå¸‚å­˜æ”¾è‡³ <code>cities</code>ã€‚   </p><pre><code class="language-sql" metastring="title=&quot;æŸ¥è¯¢æ‰€æœ‰åŸå¸‚ä¸­ï¼Œæµ·æ‹”é«˜äº500çš„åŸå¸‚&quot;" title="&quot;æŸ¥è¯¢æ‰€æœ‰åŸå¸‚ä¸­ï¼Œæµ·æ‹”é«˜äº500çš„åŸå¸‚&quot;">SELECT * FROM cities WHERE altitude &gt; 500;
</code></pre><pre><code class="language-sql" metastring="title=&quot;æŸ¥è¯¢éé¦–éƒ½åŸå¸‚ä¸­ï¼Œæµ·æ‹”é«˜äº500çš„åŸå¸‚&quot;" title="&quot;æŸ¥è¯¢éé¦–éƒ½åŸå¸‚ä¸­ï¼Œæµ·æ‹”é«˜äº500çš„åŸå¸‚&quot;">SELECT * FROM ONLY cities WHERE altitude &gt; 500; -- é€šè¿‡ ONLY é™åˆ¶ä»…æŸ¥ cities è¡¨
</code></pre><pre><code class="language-sql" metastring="title=&quot;æŸ¥è¯¢æ‰€æœ‰é¦–éƒ½åŸå¸‚ä¸­ï¼Œæµ·æ‹”é«˜äº500çš„åŸå¸‚&quot;" title="&quot;æŸ¥è¯¢æ‰€æœ‰é¦–éƒ½åŸå¸‚ä¸­ï¼Œæµ·æ‹”é«˜äº500çš„åŸå¸‚&quot;">SELECT * FROM capitals WHERE altitude &gt; 500;
</code></pre><p>:::</p><p>:::tip è¡¨åˆ†åŒº
åœ¨ postgres ä¸­ï¼Œè¡¨åˆ†åŒºæ˜¯å°†ä¸€å¼ å¤§è¡¨ï¼Œåˆ’åˆ†æˆä¸€äº›å°çš„ç‰©ç†ä¸Šçš„ç‰‡ã€‚è¿™æ ·åˆ’åˆ†çš„å¥½å¤„æœ‰å¾ˆå¤šï¼š  </p><ul><li>æŸäº›åœºæ™¯ä¸‹è¯»å†™æ€§èƒ½æå‡ã€‚<strong>å‡å°å•è¡¨æ•°æ®é‡ã€ç´¢å¼•å¤§å°</strong>ã€‚      </li><li>æŸäº›åœºæ™¯ä¸‹ï¼Œ<strong>æ‰¹é‡æ“ä½œ</strong>æ€§èƒ½å°†å¾—åˆ°æå¤§æå‡ã€‚     </li><li>å¯ä»¥æŒ‰å®é™…éœ€æ±‚ï¼Œå°†ä»·å€¼ä½çš„æ•°æ®å—è¿ç§»è‡³ä¾¿å®œä¸”è¾ƒæ…¢çš„å­˜å‚¨ä»‹è´¨ä¸Šã€‚   </li></ul><p>åˆ›å»ºè¡¨åˆ†åŒºçš„æ–¹å¼æœ‰ä¸¤ç§ï¼š<br/>
<!-- -->ç¬¬ä¸€ç§ï¼Œåˆå§‹åŒ–æ—¶é€šè¿‡ <code>PARTITION BY</code> å£°æ˜è¯¥è¡¨ä¸ºåˆ†åŒºè¡¨ï¼Œä¸”éœ€è¦æŒ‡å®šåˆ†åŒºé”®ï¼Œç„¶åå°±å¯ä»¥åˆ›å»ºåˆ†åŒºäº†ã€‚</p><pre><code class="language-sql" metastring="title=&quot;å£°æ˜åˆ†åŒºè¡¨&quot;" title="&quot;å£°æ˜åˆ†åŒºè¡¨&quot;">CREATE TABLE measurement (
    city_id    int not null,
    logdate    date not null,
    peaktemp   int,
    unitsales  int
) PARTITION BY RANGE (logdate); -- åˆ†åŒºæ”¯æŒèŒƒå›´åˆ’åˆ†ã€åˆ—è¡¨åˆ’åˆ†ã€å“ˆå¸Œåˆ’åˆ†
</code></pre><pre><code class="language-sql" metastring="title=&quot;åˆ›å»ºåˆ†åŒº&quot;" title="&quot;åˆ›å»ºåˆ†åŒº&quot;">CREATE TABLE measurement_y2006m02 PARTITION OF measurement
    FOR VALUES FROM (&#x27;2006-02-01&#x27;) TO (&#x27;2006-03-01&#x27;);
CREATE TABLE measurement_y2006m03 PARTITION OF measurement
    FOR VALUES FROM (&#x27;2006-03-01&#x27;) TO (&#x27;2006-04-01&#x27;);
</code></pre><p>åˆ›å»ºåˆ†åŒºä¹‹åï¼Œä½ å¯¹ <code>measurement</code> çš„æ“ä½œéƒ½ä¼šè¢«é‡å®šå‘åˆ°æŸä¸ªåˆ†åŒºï¼Œæ¯”å¦‚ï¼š<br/>
<!-- -->1ã€æ’å…¥ä¸€æ¡æ•°æ®åˆ° <code>measurement</code> ä¸­ï¼Œå½“è¿™æ¡æ•°æ®è¢«<strong>æ˜ å°„åˆ° <code>measurement_y2006m02</code> æ—¶</strong>ï¼Œ
è¿™æ¡æ•°æ®å°†è¢«<strong>é‡å®šå‘</strong>åˆ° <code>measurement_y2006m02</code> åˆ†åŒºã€‚<br/>
<!-- -->2ã€è¯»å–ä¸€æ¡æ•°æ®ï¼Œå½“è¿™æ¡æ•°æ®è¢«æ˜ å°„åˆ° <code>measurement_y2006m02</code> æ—¶ï¼ŒæŸ¥è¯¢ä¹Ÿä¼šé‡å®šå‘ã€‚</p><p>ç¬¬äºŒç§ï¼Œé€šè¿‡ç»§æ‰¿å®ç°è¡¨åˆ†åŒºã€‚</p><pre><code class="language-sql" metastring="title=&quot;åˆ›å»ºç»§æ‰¿è¡¨&quot;" title="&quot;åˆ›å»ºç»§æ‰¿è¡¨&quot;">CREATE TABLE measurement_y2006m02 () INHERITS (measurement);
</code></pre><p>ä¸ºäº†å®ç°ç±»ä¼¼åˆ†åŒºè¡¨çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¼•å…¥è§¦å‘å™¨ï¼š</p><pre><code class="language-sql" metastring="title=&quot;åˆ›å»ºè§¦å‘å™¨ä¸å‡½æ•°&quot;" title="&quot;åˆ›å»ºè§¦å‘å™¨ä¸å‡½æ•°&quot;">CREATE OR REPLACE FUNCTION measurement_insert_trigger()
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO measurement_y2008m01 VALUES (NEW.*);
    RETURN NULL;
END;
$$
LANGUAGE plpgsql;

CREATE TRIGGER insert_measurement_trigger
    BEFORE INSERT ON measurement
    FOR EACH ROW EXECUTE FUNCTION measurement_insert_trigger();
</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é€šè¿‡ç»§æ‰¿ä¸è§¦å‘å™¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥é—´æ¥å®ç°åˆ†åŒºè¡¨çš„èƒ½åŠ›ï¼Œä»–ç›¸æ¯”äºå£°æ˜å¼åˆ†åŒºè¡¨ï¼Œä¼˜åŠ¿å°±æ˜¯é™åˆ¶ä¼šå®½æ¾ä¸€äº›ï¼Œ
æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸€ä¸ªåˆ†åŒºåˆ›å»ºä¸åŒçš„å­—æ®µçš„ä¸åŒç´¢å¼•ï¼Œä½†ä»£ä»·å°±æ˜¯æ›´å¤æ‚ç»´æŠ¤é€»è¾‘ã€‚
:::</p><h2>ä¼˜åŒ–ä¹‹è·¯ï¼šç»§æ‰¿å¼åˆ†åŒºè¡¨å¡«å‘</h2><p>æŒ‰ç…§é¢„æœŸæ–¹æ¡ˆå®ç°åï¼Œæˆ‘æ‹·è´äº†ä¸€ä»½æ­£å¼ç¯å¢ƒæ•°æ®æ‰§è¡Œæµ‹è¯•ï¼Œç»“æœä»¤äººéœ‡æƒŠï¼Œè€—æ—¶ 3å°æ—¶ ğŸ˜±ğŸ˜±ğŸ˜±<br/>
<!-- -->å°±ç¦»äº†ä¸ªå¤§è°±ï¼Œå¦¥å¦¥çš„åå‘ä¼˜åŒ–ã€‚ ğŸ˜­ğŸ˜­ğŸ˜­  </p><p>ç†è®ºå’Œå®é™…å·®è·è¿‡å¤§ï¼Œä¸å¾—ä¸è®©æˆ‘å¼€å§‹åæ€åˆ°åº•æ˜¯å“ªé‡Œå‡ºç°äº†å¼‚å¸¸ã€‚<br/>
<!-- -->é€šè¿‡æ—¥å¿—å‘ç°åœ¨å…³è”è®¡ç®—ã€æ’å…¥æ–°æ•°æ®ã€æ›´æ–°æ•°æ®è¿™äº›æµç¨‹éƒ½éå¸¸è€—æ—¶ã€‚<br/>
<!-- -->ä½†æ˜¯æˆ‘ä»¬å·²ç»è®¾è®¡äº†åˆ†åŒºï¼Œå‡å°äº†æ¯å¼ è¡¨çš„æ•°é‡å’Œç´¢å¼•å¤§å°ã€‚æ‰€ä»¥ç†è®ºä¸Šæ“ä½œä¸å¯èƒ½ä¼šæ›´è€—æ—¶ã€‚  </p><p>é€šè¿‡è¿›ä¸€æ­¥æ‰“æ–­ç‚¹è¾“å‡ºæ—¥å¿—ï¼Œæˆ‘å‘ç°äº†ç»§æ‰¿å¼åˆ†åŒºè¡¨çš„è§¦å‘å™¨ï¼Œåœ¨æ‰§è¡Œæ“ä½œæ—¶æ€§èƒ½éå¸¸æ‹‰è·¨ã€‚</p><pre><code class="language-sql" metastring="title=&quot;åˆå§‹åŒ–è¡¨åˆ†åŒº&quot;" title="&quot;åˆå§‹åŒ–è¡¨åˆ†åŒº&quot;">CREATE TABLE IF NOT EXISTS origin_0 (CHECK (origin_id = 0)) INHERITS (cloud_search_kvs);
CREATE TABLE IF NOT EXISTS origin_0_0 (CHECK (0 &lt; k_crc32 AND k_crc32 &lt;= 858993459)) INHERITS (origin_0);
CREATE TABLE IF NOT EXISTS origin_0_1 (CHECK (858993459 &lt; k_crc32 AND k_crc32 &lt;= 1717986918)) INHERITS (origin_0);
CREATE TABLE IF NOT EXISTS origin_0_2 (CHECK (1717986918 &lt; k_crc32 AND k_crc32 &lt;= 2576980377)) INHERITS (origin_0);
CREATE TABLE IF NOT EXISTS origin_0_3 (CHECK (2576980377 &lt; k_crc32 AND k_crc32 &lt;= 3435973836)) INHERITS (origin_0);
CREATE TABLE IF NOT EXISTS origin_0_4 (CHECK (3435973836 &lt; k_crc32 AND k_crc32 &lt;= 4294967295)) INHERITS (origin_0);
</code></pre><pre><code class="language-sql" metastring="title=&quot;åˆå§‹åŒ–è§¦å‘å™¨&quot;" title="&quot;åˆå§‹åŒ–è§¦å‘å™¨&quot;">CREATE OR REPLACE FUNCTION origin_0_insert_trigger() RETURNS TRIGGER AS $$
BEGIN
 IF (0 &lt; NEW.k_crc32 AND NEW.k_crc32 &lt;= 858993459) THEN INSERT INTO origin_0_0 VALUES (NEW.*);
 ELSIF (858993459 &lt; NEW.k_crc32 AND NEW.k_crc32 &lt;= 1717986918) THEN INSERT INTO origin_0_1 VALUES (NEW.*);
 ELSIF (1717986918 &lt; NEW.k_crc32 AND NEW.k_crc32 &lt;= 2576980377) THEN INSERT INTO origin_0_2 VALUES (NEW.*);
 ELSIF (2576980377 &lt; NEW.k_crc32 AND NEW.k_crc32 &lt;= 3435973836) THEN INSERT INTO origin_0_3 VALUES (NEW.*);
 ELSIF (3435973836 &lt; NEW.k_crc32 AND NEW.k_crc32 &lt;= 4294967295) THEN INSERT INTO origin_0_4 VALUES (NEW.*);
 END IF;
 RETURN NULL;
END;
$$ LANGUAGE plpgsql;
</code></pre><p>è§¦å‘å™¨çš„åŸç†å°±æ˜¯é€šè¿‡æŸ¥è¯¢æ¡ä»¶ï¼Œå°†æ•°æ®é‡å®šå‘åˆ°æŒ‡å®šåˆ†åŒºã€‚<br/>
<!-- -->ä¸Šé¢çš„åˆå§‹åŒ–è¯­å¥éƒ½æ˜¯ç®€åŒ–åçš„ï¼Œå®é™…ä¸Šæœ‰ 256 ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œè€Œä¸”è§¦å‘å™¨æ¯æ¬¡ä¼¼ä¹åªèƒ½æ‰§è¡Œå•æ¡è¯­å¥ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æ•´ä½“æ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚<br/>
<!-- -->æˆ‘ä»¬æ–¹æ¡ˆè®¾è®¡ä¸Šæ²¡æœ‰å¤ªå¤§çš„é—®é¢˜ï¼Œä½†æ˜¯æ‰§è¡Œæ–¹å¼æœ‰é—®é¢˜ï¼Œè§¦å‘å™¨çš„é‡å®šå‘ä¸é€‚åˆè¿™ç§åœºæ™¯ï¼Œæ‰€ä»¥æˆ‘åªèƒ½å°è¯•è‡ªå·±ç»´æŠ¤ã€‚</p><p>é‡æ–°ä¼˜åŒ–æ€è·¯ï¼Œè·å–æ¯ä¸ªåˆ†åŒºçš„æ•°æ®ï¼Œç›´æ¥å’Œç›®æ ‡åˆ†åŒºä½œå…³è”è¿ç®—ï¼Œç»•å¼€è§¦å‘å™¨ã€‚  </p><pre><code class="language-sql">CREATE TEMPORARY TABLE temp_diff_%[2]d (
    k text,
    v text,
    k_crc32 bigint,
    old_v text
) ON COMMIT DROP;
WITH temp_diff_w AS (SELECT * FROM temp_add WHERE (%[3]d &lt; k_crc32 AND k_crc32 &lt;= %[4]d))
INSERT INTO temp_diff_%[2]d SELECT tadd.k, tadd.v, tadd.k_crc32, tadd.origin_id, kv.v FROM temp_diff_w AS tadd LEFT JOIN origin AS kv ON tadd.k = kv.k AND tadd.k_crc32 = kv.k_crc32 WHERE tadd.v != kv.v OR kv.v IS NULL;
INSERT INTO temp_diff (SELECT * FROM temp_diff;
UPDATE origin AS o SET v = row.v FROM (SELECT * FROM temp_diff_%[2]d WHERE old_v IS NOT NULL) as row WHERE o.k_crc32 = row.k_crc32 AND o.k = row.k;
DROP INDEX IF EXISTS origin_btree_index_key;
INSERT INTO origin (k, v, k_crc32, origin_id) (SELECT k, v, k_crc32, origin_id FROM temp_diff_%[2]d WHERE old_v IS NULL);
CREATE INDEX IF NOT EXISTS origin_btree_index_key ON origin USING btree (k_crc32);
DROP TABLE IF EXISTS temp_diff_%[2]d;
</code></pre><p>ä»¥ä¸Šæ˜¯éƒ¨åˆ†æ‰§è¡Œè¯­å¥ï¼ˆå·²è„±æ•ï¼‰ï¼Œå¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€æ­¥å°±å–å‡ºäº†åˆ†åŒºæ•°æ®ï¼Œç„¶åæ‰§è¡Œå…³è”è¿ç®—è·å–æœ€ç»ˆç»“æœé›†ï¼Œå†å°†ç»“æœé›†æ•°æ®å†™å…¥æºè¡¨å³å¯ã€‚  </p><p>å†æ¬¡æµ‹è¯•ï¼Œæ‰§è¡Œä¸€æ¬¡å¤§æ¦‚åœ¨ åŠå°æ—¶ å·¦å³ï¼Œå®Œç¾ ğŸ¤ ğŸ¤ ğŸ¤ </p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ•°æ®åº“æ˜¯å¦é€‚åˆå®¹å™¨åŒ–éƒ¨ç½²]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/02/22/æ•°æ®åº“æ˜¯å¦é€‚åˆå®¹å™¨åŒ–éƒ¨ç½²</link>
            <guid>æ•°æ®åº“æ˜¯å¦é€‚åˆå®¹å™¨åŒ–éƒ¨ç½²</guid>
            <pubDate>Tue, 22 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[éšç€ Kubernetes çš„æµè¡Œï¼Œè¶Šæ¥è¶Šæ¥çš„åº”ç”¨è¢«æ‰“åŒ…æˆé•œåƒï¼Œä½œä¸ºå®¹å™¨éƒ¨ç½²åœ¨ k8s ä¸Šã€‚]]></description>
            <content:encoded><![CDATA[<p>éšç€ Kubernetes çš„æµè¡Œï¼Œè¶Šæ¥è¶Šæ¥çš„åº”ç”¨è¢«æ‰“åŒ…æˆé•œåƒï¼Œä½œä¸ºå®¹å™¨éƒ¨ç½²åœ¨ k8s ä¸Šã€‚</p><p>åœ¨ k8s ä¸­ï¼Œpod æ˜¯æœ€å°çš„éƒ¨ç½²å•ä½ï¼Œå†…éƒ¨å¯ä»¥åŒ…å«å¤šä¸ªå®¹å™¨é•œåƒï¼Œæ¯ä¸€ä¸ª pod éƒ½å…·æœ‰æœ‰é™çš„ç”Ÿå‘½å‘¨æœŸã€‚<br/>
<!-- -->å¯¹äºæ— çŠ¶æ€æœåŠ¡æ¥è¯´ï¼Œç‰¹åˆ«é€‚åˆåœ¨ k8s ä¸Šè¿è¡Œï¼Œå› ä¸ºæ— çŠ¶æ€æœåŠ¡ï¼Œæ˜¯å…·æœ‰å¼¹æ€§çš„ï¼Œå¯ä»¥æ›´å¥½çš„åº”å¯¹ pod æ‰©ç¼©å®¹ã€é‡å¯ç­‰ç‰¹æ€§ã€‚<br/>
<!-- -->ç›¸åï¼Œå¯¹äºæœ‰çŠ¶æ€æœåŠ¡ï¼ˆç±»ä¼¼æ•°æ®åº“ç­‰ï¼‰ï¼Œåˆ™å­˜åœ¨ä¸€å®šçš„ç“¶é¢ˆé™åˆ¶ã€‚</p><p>å…ˆæ¥çœ‹ä¸‹ k8s å¦‚ä½•éƒ¨ç½²æœ‰çŠ¶æ€æœåŠ¡ï¼Œç„¶åè®¨è®ºä¸‹å…¶ä¼˜ç¼ºç‚¹ã€‚</p><h2>DaemonSet &amp; StatefulSet</h2><p><strong>DaemonSet</strong> æ˜¯ k8s çš„æ§åˆ¶å™¨èµ„æºå¯¹è±¡ä¹‹ä¸€ï¼Œå…¶ç‰¹ç‚¹æ˜¯ï¼š   </p><blockquote><p>1ã€ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹ä»…å¯åŠ¨ä¸€ä¸ª pod å‰¯æœ¬ï¼Œå½“æœ‰æ–°èŠ‚ç‚¹åŠ å…¥é›†ç¾¤æ—¶ï¼Œè‡ªåŠ¨ä¸ºå…¶å¢åŠ ä¸€ä¸ª podã€‚</p></blockquote><p>æ¯”è¾ƒå…¸å‹çš„æ˜¯æ—¥å¿—æ”¶é›†æœåŠ¡ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬éœ€è¦ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹ä¸Šèµ·ä¸€ä¸ª <code>logstash</code>ï¼Œä»¥ä¾¿å›æ”¶èŠ‚ç‚¹ä¸Šçš„æœåŠ¡æ—¥å¿—ã€‚  </p><p>æ•°æ®åº“æœåŠ¡å¯ä»¥åœ¨ç±»ä¼¼åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œæ¯”å¦‚ç»™æŸä¸ªèŠ‚ç‚¹æ‰“ä¸Šæ ‡ç­¾ï¼Œç¡®ä¿æŸä¸ªæ•°æ®åº“åœ¨å¯¹åº”èŠ‚ç‚¹ä¸Šä»¥ DaemonSet ç±»å‹å¯åŠ¨ï¼Œè¿™æ ·å°±å¯ä»¥ç¡®ä¿è¯¥èŠ‚ç‚¹ä»…æœ‰ä¸€ä¸ª pod å‰¯æœ¬ã€‚
æœ€åé€šè¿‡ <code>nodeport</code> çš„æ–¹å¼å¯¹å¤–æä¾›æœåŠ¡ã€‚
æ­¤æ—¶æˆ‘ä»¬çš„æ•°æ®åº“å°±æ‹¥æœ‰äº†ç¨³å®šçš„èŠ‚ç‚¹ ip å’Œæœ¬åœ°å­˜å‚¨ã€‚  </p><p>ä½†æ˜¯è¿™ç§æ–¹å¼ï¼Œå’Œç›´æ¥åœ¨ç‰©ç†æœºä¸Šéƒ¨ç½²çš„æ–¹å¼å·®åˆ«ä¸å¤§ï¼Œä¸»è¦æ˜¯å¤ç”¨äº† k8s çš„ç®¡ç†èƒ½åŠ›ã€‚</p><br/><p><strong>StatefulSet</strong> æ˜¯ k8s ä¸“ä¸ºæœ‰çŠ¶æ€æœåŠ¡è®¾è®¡çš„èµ„æºç±»å‹ï¼Œå®ƒæ‹¥æœ‰ï¼š  </p><blockquote><p>1ã€ç¨³å®šçš„ç½‘ç»œæ ‡è¯†ï¼šå½“æœåŠ¡é‡å¯ï¼Œpod ç»‘å®šçš„ ip ä¸ä¼šå˜åŒ–ï¼Œä½†æ˜¯æ‰‹åŠ¨åˆ é™¤æˆ–è€…é‡å»ºå‰¯æœ¬æ—¶ï¼Œä¼šé‡æ–°åˆ†é… ipã€‚
åˆ›å»º headless service æ—¶å¯ä»¥é€šè¿‡ <code>${serviceName-number}.${service}.${namespace}</code> è®¿é—®æŒ‡å®š podã€‚<br/>
<!-- -->2ã€ç¨³å®šçš„æŒä¹…å­˜å‚¨ï¼šåŸºäº pvc å®ç°ï¼Œæ¯ä¸ª pod ä¼šç»‘å®šä¸“æœ‰çš„ pvc å­˜å‚¨ã€‚<br/>
<!-- -->3ã€æœ‰åºçš„æ‰©ç¼©å®¹ï¼šä¼šå®‰è£…é¡ºåºä» 0 é€ä¸€å¯åŠ¨æˆ–è€…é‡å»ºï¼Œæ­¤æ—¶ç±»ä¼¼æ»šåŠ¨æ›´æ–°çš„æ‰©å®¹ç­–ç•¥ä¸åœ¨é€‚ç”¨ã€‚      </p></blockquote><p>å½“æˆ‘ä»¬çš„æ•°æ®åº“æœåŠ¡éƒ¨ç½² k8s ä¸Šæ—¶ï¼Œå¯ä»¥é€‰æ‹© StatefulSet èµ„æºç±»å‹ã€‚<br/>
<!-- -->å®ƒçš„åŸºæœ¬èƒ½åŠ›ï¼Œè¶³å¤Ÿæ”¯æŒä¸€ä¸ªæœ‰çŠ¶æ€æœåŠ¡çš„æ­£å¸¸è¿è½¬ã€‚</p><h2>æ€§èƒ½ç“¶é¢ˆ</h2><p>æ•°æ®åº“ä¸»è¦æ˜¯å’Œå­˜å‚¨æ‰“äº¤é“ï¼Œå…¶æ€§èƒ½ç“¶é¢ˆé€šå¸¸åœ¨ç£ç›˜IOã€‚<br/>
<!-- -->é‚£ä¹ˆå¿«é€Ÿçš„ç£ç›˜IOï¼Œå°†æœ‰åŠ©äºæå‡æ•°æ®åº“çš„æ€§èƒ½å’Œååé‡ã€‚<br/>
<!-- -->æ¯”å¦‚ï¼šåˆ†åˆ«éƒ¨ç½²åœ¨ HDD å’Œ SSD ä¸Šçš„ä¸¤ä¸ªæ•°æ®åº“ï¼Œåœ¨ç›¸åŒå…¶ä»–æ¡ä»¶ä¸‹ï¼ŒSSD ä¸Šçš„æ•°æ®åº“è‚¯å®šæ‹¥æœ‰æ›´é«˜çš„æ€§èƒ½ã€‚ </p><p>å½“æˆ‘ä»¬çš„æ•°æ®åº“éƒ¨ç½²åœ¨ k8s ä¸Šæ—¶ï¼Œå¯ä»¥é€šè¿‡æŒ‚è½½å· volumeï¼ˆnfsã€cephï¼‰æŒä¹…åŒ–æ•°æ®ï¼Œä½†æ˜¯è¿™æ ·å°±ä¸å¯é¿å…çš„å¼•å…¥äº†ç½‘ç»œIOï¼Œåœ¨æœ¬èº«çš„ç“¶é¢ˆä¸Šåˆè¡¥ä¸€åˆ€ã€‚<br/>
<!-- -->æ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨ k8s éƒ¨ç½²æ•°æ®åº“æ—¶ï¼Œå¯èƒ½éœ€è¦é‡ç‚¹è€ƒè™‘ä¸‹æ€§èƒ½é—®é¢˜ã€‚</p><p>é™¤äº† nfsã€ceph ä¹‹å¤–ï¼Œè¿˜æœ‰ hostpath è¿™ç±»æœ¬åœ°å­˜å‚¨ï¼Œå¯ä»¥å¿½ç•¥ç½‘ç»œå½±å“ã€‚
ä½†æ˜¯è¿™éœ€è¦æˆ‘ä»¬çš„å‰¯æœ¬ç»‘å®šåˆ°å›ºå®šçš„èŠ‚ç‚¹ä¸Šï¼Œæ­¤æ—¶å°±èµ°çš„ç±»ä¼¼ DaemonSet çš„éƒ¨ç½²è·¯çº¿äº†ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è®°ä¸€æ¬¡ golang å‡çº§å¯¼è‡´çš„ goland ä¸å¯ç”¨]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/02/17/golangå‡çº§å¯¼è‡´golandä¸å¯ç”¨</link>
            <guid>è®°ä¸€æ¬¡ golang å‡çº§å¯¼è‡´çš„ goland ä¸å¯ç”¨</guid>
            <pubDate>Thu, 17 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[go1.14.1 å‡çº§è‡³ go1.17.7ï¼Œå¯¼è‡´ goland æ‰“å¼€åæ˜¾ç¤ºæ— æ³•æ‰¾åˆ° GOROOTã€‚]]></description>
            <content:encoded><![CDATA[<p>go1.14.1 å‡çº§è‡³ go1.17.7ï¼Œå¯¼è‡´ goland æ‰“å¼€åæ˜¾ç¤ºæ— æ³•æ‰¾åˆ° GOROOTã€‚</p><p>é”™è¯¯æ˜¾ç¤ºï¼š</p><pre><code class="language-text">The selected directory is not a valid home for Go SDK
</code></pre><p>é€šè¿‡ go env æŸ¥çœ‹åå‘ç°ç›¸å…³é…ç½®æ— é—®é¢˜ï¼Œç¯å¢ƒå˜é‡ä¹Ÿæ— é—®é¢˜ã€‚</p><p>æœ€åæ‰¾çš„è§£å†³æ–¹æ¡ˆï¼š<br/>
<strong>1ã€</strong>go version æŸ¥çœ‹è‡ªå·±å½“å‰ç‰ˆæœ¬<br/>
<strong>2ã€</strong>ç¼–è¾‘ {GOROOT}/src/runtime/internal/sys/zversion.go æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å˜é‡</p><pre><code class="language-go">const TheVersion = `go1.17.4`
</code></pre><p><strong>3ã€</strong>é‡å¯ golandï¼Œç„¶åç‚¹å‡» setroot å³å¯ã€‚  </p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JmeteråŠæ€§èƒ½æµ‹è¯•]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/02/02/jmeteråŠæ€§èƒ½æµ‹è¯•</link>
            <guid>JmeteråŠæ€§èƒ½æµ‹è¯•</guid>
            <pubDate>Wed, 02 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[è®°å½• jmeter å·¥å…·çš„ä½¿ç”¨ï¼Œä»¥åŠåœ¨æ€§èƒ½æµ‹è¯•è¿‡ç¨‹ä¸­å­¦ä¹ åˆ°çš„ä¸€äº›çŸ¥è¯†ç‚¹ã€‚]]></description>
            <content:encoded><![CDATA[<p>è®°å½• jmeter å·¥å…·çš„ä½¿ç”¨ï¼Œä»¥åŠåœ¨æ€§èƒ½æµ‹è¯•è¿‡ç¨‹ä¸­å­¦ä¹ åˆ°çš„ä¸€äº›çŸ¥è¯†ç‚¹ã€‚</p><h2>æ€§èƒ½æŒ‡æ ‡</h2><ul><li>TPSï¼ˆTransactions Per Secondï¼‰ï¼šæ¯ç§’äº‹åŠ¡æ•°ï¼Œååç‡</li><li>QPSï¼ˆQueries Per Secondï¼‰ï¼šæ¯ç§’æŸ¥è¯¢æ•°</li><li>RTï¼ˆResponse Timeï¼‰ï¼šå“åº”æ—¶é—´ï¼ŒæœåŠ¡å»¶è¿Ÿ</li></ul><p>æ€§èƒ½é—®é¢˜ï¼Œå½’æ ¹ç»“åº•è¿˜æ˜¯èµ„æºé—®é¢˜ã€‚å¸¸è§çš„ç“¶é¢ˆç‚¹ï¼š<br/>
<!-- -->1ã€ç½‘ç»œIO<br/>
<!-- -->2ã€å­˜å‚¨IO<br/>
<!-- -->3ã€CPUã€å†…å­˜<br/>
<!-- -->4ã€åº”ç”¨  </p><h2>jmeter ç»“æœè§£è¯»</h2><p>å¹¶å‘çº¿ç¨‹ã€å“åº”æ—¶é—´ã€TPSä¹‹é—´çš„å…³è”ï¼š</p><pre><code class="language-text">TPS = (1s/å“åº”æ—¶é—´) * å¹¶å‘çº¿ç¨‹
</code></pre><p>:::note
å‡è®¾æœ‰4ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ¯ç§’å‘èµ·4ä¸ªè¯·æ±‚å¹¶å“åº”ï¼Œæ­¤æ—¶å¹¶å‘æ˜¯16è€Œé4
:::</p><pre><code class="language-text" metastring="title=&quot;1ä¸ªçº¿ç¨‹&quot;" title="&quot;1ä¸ªçº¿ç¨‹&quot;">summary +   5922 in 00:00:30 =  197.4/s Avg:     4 Min:     0 Max:    26 Err:     0 (0.00%) Active: 1 Started: 1 Finished: 0
summary =  35463 in 00:03:05 =  192.0/s Avg:     5 Min:     0 Max:   147 Err:     0 (0.00%)
summary +   5922 in 00:00:30 =  197.5/s Avg:     4 Min:     0 Max:    24 Err:     0 (0.00%) Active: 1 Started: 1 Finished: 0
summary =  41385 in 00:03:35 =  192.8/s Avg:     5 Min:     0 Max:   147 Err:     0 (0.00%)
summary +   5808 in 00:00:30 =  193.6/s Avg:     5 Min:     0 Max:    25 Err:     0 (0.00%) Active: 1 Started: 1 Finished: 0
summary =  47193 in 00:04:05 =  192.9/s Avg:     5 Min:     0 Max:   147 Err:     0 (0.00%)
</code></pre><p>(1000ms/5ms)*1=200TPS</p><pre><code class="language-text" metastring="title=&quot;10ä¸ªçº¿ç¨‹&quot;" title="&quot;10ä¸ªçº¿ç¨‹&quot;">summary +  11742 in 00:00:30 =  391.3/s Avg:    25 Min:     0 Max:   335 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0
summary =  55761 in 00:02:24 =  386.6/s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)
summary +  11924 in 00:00:30 =  397.5/s Avg:    25 Min:     0 Max:    80 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0
summary =  67685 in 00:02:54 =  388.5/s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)
summary +  11884 in 00:00:30 =  396.2/s Avg:    25 Min:     0 Max:   240 Err:     0 (0.00%) Active: 10 Started: 10 Finished: 0
summary =  79569 in 00:03:24 =  389.6/s Avg:    25 Min:     0 Max:   346 Err:     0 (0.00%)
</code></pre><p>(1000ms/25ms)*10=400TPS</p><h2>åˆ†å¸ƒå¼å‹åŠ›æµ‹è¯•</h2><pre><code class="language-shell" metastring="script title=&quot;å¯åŠ¨æŒ‡ä»¤&quot;" title="&quot;å¯åŠ¨æŒ‡ä»¤&quot;">/jemeter/bin/jmeter -n -t ./script.jmx -r -l ./script.jtl -e -o ./script
</code></pre><pre><code class="language-shell" metastring="script title=&quot;åˆ†å¸ƒå¼ jmeter å¯åŠ¨æŒ‡ä»¤&quot;" title="&quot;åˆ†å¸ƒå¼">/jmeter/bin/jmeter -n -t tmpl.jmx -R 1.1.1.1:8000,1.1.1.2:8000
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å¸¸è§ sql æ‰¹é‡æ“ä½œ]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/01/20/å¸¸ç”¨sqlæ“ä½œ</link>
            <guid>å¸¸è§ sql æ‰¹é‡æ“ä½œ</guid>
            <pubDate>Thu, 20 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æ•´ç†ä¸‹ sql å¸¸è§çš„æ‰¹é‡æ“ä½œå†™æ³•ã€‚]]></description>
            <content:encoded><![CDATA[<p>æ•´ç†ä¸‹ sql å¸¸è§çš„æ‰¹é‡æ“ä½œå†™æ³•ã€‚</p><h2>æ’å…¥</h2><pre><code class="language-sql" metastring="title=&quot;æ‰¹é‡æ’å…¥&quot;" title="&quot;æ‰¹é‡æ’å…¥&quot;">INSERT INTO my_table (k, v) VALUES (&#x27;k&#x27;, &#x27;v&#x27;); -- æ’å…¥å•æ¡
INSERT INTO my_table (SELECT * FROM same_table); -- ç›¸åŒç»“æ„è¡¨ä¹‹é—´çš„æ‰¹é‡æ’å…¥
INSERT INTO my_table (k, v) (SELECT k, v FROM other_table); -- ä¸åŒç»“æ„è¡¨ä¹‹é—´çš„æ‰¹é‡æ’å…¥
</code></pre><h2>æ›´æ–°</h2><pre><code class="language-sql" metastring="title=&quot;æ‰¹é‡æ›´æ–°&quot;" title="&quot;æ‰¹é‡æ›´æ–°&quot;">UPDATE my_table SET v = &#x27;new_v&#x27; WHERE k = &#x27;new_k&#x27;; -- æ›´æ–°ä¸€æ¬¡
UPDATE my_table AS o SET v = new_table.v FROM (SELECT * FROM other_table) as new_table WHERE o.k = new_table.k; -- æ‰¹é‡æ›´æ–°
</code></pre><h2>åˆ é™¤</h2><pre><code class="language-sql" metastring="title=&quot;æ‰¹é‡åˆ é™¤&quot;" title="&quot;æ‰¹é‡åˆ é™¤&quot;">DELETE FROM new_table AS kv USING other_table AS row WHERE kv.k = row.k;
</code></pre><pre><code class="language-sql" metastring="title=&quot;è”çº§åˆ é™¤ CASCADE&quot;" title="&quot;è”çº§åˆ é™¤">DROP TABLE IF EXISTS my_table CASCADE;
</code></pre>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[nginx é…ç½®è¯´æ˜]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2022/01/12/nginxé…ç½®è¯´æ˜</link>
            <guid>nginx é…ç½®è¯´æ˜</guid>
            <pubDate>Wed, 12 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[è®°å½•ä¸€ä¸‹ nginx å¸¸è§é…ç½®è¯´æ˜å’Œéƒ¨ç½²æ¨¡æ¿ï¼ˆdockerã€k8sï¼‰ã€‚]]></description>
            <content:encoded><![CDATA[<p>è®°å½•ä¸€ä¸‹ nginx å¸¸è§é…ç½®è¯´æ˜å’Œéƒ¨ç½²æ¨¡æ¿ï¼ˆdockerã€k8sï¼‰ã€‚</p><p>nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ web æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿèƒ½æä¾›è´Ÿè½½å‡è¡¡å’Œåå‘ä»£ç†æœåŠ¡ã€‚</p><h2>nginx å¸¸ç”¨æŒ‡ä»¤</h2><ul><li>-cï¼šç”¨äºæŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶</li><li>-tï¼šç”¨äºæµ‹è¯•é…ç½®æ˜¯å¦å¯ç”¨</li><li>-sï¼šç”¨äºå‘é€ä¿¡å·ï¼ŒåŒ…æ‹¬ï¼šstop, quit, reopen, reloadã€‚egï¼š<code>nginx -s reload</code></li></ul><pre><code class="language-shell" metastring="script title=&quot;æŒ‡å®šå¹¶æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®&quot;" title="&quot;æŒ‡å®šå¹¶æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®&quot;">nginx -t -c ./nginx.conf
</code></pre><h2>nginx æ ¸å¿ƒæ¨¡å—</h2><p>nginx çš„æ ¸å¿ƒæ¨¡å—ä¸»è¦æœ‰ä¸‰ä¸ªï¼š</p><ul><li>ä¸»æ¨¡å—ï¼šç®¡ç† nginx åŸºæœ¬åŠŸèƒ½çš„æ¨¡å—</li><li>äº‹ä»¶æ¨¡å—ï¼šç®¡ç† nginx å¤„ç†è¿æ¥è¯·æ±‚çš„æ¨¡å—</li><li>HTTP æ¨¡å—ï¼šç®¡ç† nginx å¤„ç† http è¯·æ±‚çš„æ¨¡å—</li></ul><h3>ä¸»æ¨¡å—</h3><pre><code class="language-text">user  nginx;  # ç”¨æˆ·
pid  /var/run/nginx.pid;  # è¿›ç¨‹ID
worker_processes  auto;  # å·¥ä½œè¿›ç¨‹ï¼Œå¯ä»¥æŒ‡å®šå…·ä½“æ•°å­—
error_log  /var/log/nginx/error.log notice;  # æŒ‡å®šæ—¥å¿—å’Œé”™è¯¯çº§åˆ«ï¼ŒåŒ…å«ï¼šdebugã€infoã€noticeã€warnã€errorã€crit

worker_cpu_affinity  none;  # ç”¨äºç»‘å®š worker è¿›ç¨‹ä¸ cpu
</code></pre><h3>äº‹ä»¶æ¨¡å—</h3><pre><code class="language-text">events {
    worker_connections  1024;  # æ¯ä¸ªå·¥ä½œè¿›ç¨‹æœ€å¤§é“¾æ¥æ•°ã€‚ä¹˜ä»¥ worker_processes å°±æ˜¯è¯¥ nginx æœåŠ¡çš„æœ€å¤§è¿æ¥æ•°
}
</code></pre><h3>HTTP æ¨¡å—</h3><h4>location è·¯ç”±åŒ¹é…è§„åˆ™åŠé¡ºåº</h4><ul><li><code>=</code>: ç²¾ç¡®åŒ¹é…</li><li><code>^~</code>: ä¼˜å…ˆå‰ç¼€åŒ¹é…</li><li><code>~</code>: æ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™</li><li><code>~*</code>: æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™</li><li><code>!~</code>: æ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™</li><li><code>!~*</code>: æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™</li><li><code>/route</code>: æ™®é€šå‰ç¼€åŒ¹é…</li><li><code>/</code>: é€šç”¨åŒ¹é…</li></ul><blockquote><p>ç²¾ç¡®åŒ¹é… &gt; ä¼˜å…ˆå‰ç¼€åŒ¹é… &gt; æ­£åˆ™åŒ¹é… &gt; æ™®é€šå‰ç¼€åŒ¹é… &gt; é€šç”¨åŒ¹é…</p></blockquote><pre><code class="language-text">http {
    server {
        # ä¼˜å…ˆåŒ¹é…ä¾æ¬¡å¾€ä¸‹
        location = /route { return 200; }
        location ^~ /route { return 201; }
        location ~ ^/route { return 202; }
        location /route { return 203; }
        location / { return 204; }
    }
}
</code></pre><h4>upstream è´Ÿè½½å‡è¡¡ç­–ç•¥</h4><ul><li>è½®è¯¢ï¼šåœ¨æ¯ä¸ªæœåŠ¡ä¹‹é—´è½®è¯¢è¯·æ±‚</li><li>weightï¼šæŒ‰æŒ‡å®šæƒé‡æ¯”ä¾‹åœ¨æœåŠ¡ä¹‹é—´è¯·æ±‚ï¼Œé»˜è®¤ weight ä¸º 1</li><li>ip_hashï¼šæŒ‰ç…§è¯·æ±‚ IP è®¡ç®— Hashï¼Œä¿è¯æ¯æ¬¡è¯·æ±‚éƒ½è®¿é—®åŒä¸€ä¸ªæœåŠ¡</li><li>fairï¼šæŒ‰ç…§åç«¯çš„å“åº”æ—¶é—´æ¥åˆ†é…ï¼ˆä¸‰æ–¹æ’ä»¶å®ç°ï¼‰</li></ul><pre><code class="language-text">http {
    # è´Ÿè½½å‡è¡¡
    upstream serverName {
        # ip_hash;  # æŒ‡å®š ip_hash è´Ÿè½½å‡è¡¡ç­–ç•¥
        server 10.251.10.10:8080 weight=2;  # æŒ‡å®šæƒé‡æ¯”ä¾‹
        server 10.251.10.10:8081 down;  # down è¡¨ç¤ºæœåŠ¡ä¸‹çº¿
        server 10.251.10.10:8082;
        server 10.251.10.10:8083 backup;  # backup è¡¨ç¤ºå¤‡ç”¨ï¼Œå½“å…¶ä»–æœºå™¨ down æˆ–è€…å‹åŠ›æ¯”è¾ƒå¤§æ—¶ï¼Œæµé‡ä¼šèµ°åˆ°æ­¤æœåŠ¡
        # fair;  # æŒ‡å®š fair è´Ÿè½½å‡è¡¡ç­–ç•¥
    }

    server {
        listen  80;  # ç›‘å¬ç«¯å£
        server_name  _;  # ä¸å¯ç”¨åŸŸåæ£€æµ‹

        location / {
            proxy_pass  http://serverName;  # æŒ‡å®š upstream åå­—å³å¯
        }
    }
}
</code></pre><h4>http å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å‚æ•°é…ç½®</h4><pre><code class="language-text">http {
    server {
        client_body_timeout  60s;  # å®šä¹‰è¯»å–å®¢æˆ·ç«¯è¯·æ±‚ä½“çš„è¶…æ—¶
        client_body_buffer_size  8k;  # è®¾ç½®è¯»å–å®¢æˆ·ç«¯è¯·æ±‚ä½“çš„ç¼“å†²åŒºå¤§å°ï¼ˆè¶…è¿‡åˆ™å­˜å‚¨åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­ï¼‰
        client_header_timeout  60s;  # å®šä¹‰è¯»å–å®¢æˆ·ç«¯è¯·æ±‚å¤´çš„è¶…æ—¶
        client_header_buffer_size  1k;  # è®¾ç½®è¯»å–å®¢æˆ·ç«¯è¯·æ±‚å¤´çš„ç¼“å†²åŒºå¤§å°
        client_max_body_size  0;  # æ•°æ®æœ€å¤§ä¼ è¾“é™åˆ¶
        proxy_request_buffering  off;  # é»˜è®¤å¼€å¯ï¼Œä½œç”¨æ˜¯ç¼“å†²è¯·æ±‚ã€‚å…³é—­åè¯·æ±‚ä¼šç«‹å³è½¬å‘åˆ°åç«¯æœåŠ¡
        proxy_buffering  off;  # å¯¹ä»£ç†æœåŠ¡å™¨çš„å“åº”å†…å®¹ç¼“å†²
        proxy_buffer_size  4k;  # ä»ä»£ç†æœåŠ¡å™¨è·å–éƒ¨åˆ†å“åº”åè¿›è¡Œç¼“å†²
        proxy_buffers  8 4k;  # ä»è¢«ä»£ç†çš„åç«¯æœåŠ¡å™¨å–å¾—çš„å“åº”å†…å®¹ï¼Œä¼šç¼“å†²åˆ°è¿™é‡Œ
        proxy_connect_timeout  60s;  # ä¸åç«¯æœåŠ¡å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´
        proxy_send_timeout  60s;  # å‘åç«¯ä¼ è¾“è¯·æ±‚çš„è¶…æ—¶æ—¶é—´
        proxy_read_timeout  60s;  # ä»åç«¯è¯»å–å“åº”çš„è¶…æ—¶æ—¶é—´
        proxy_set_header  Host $proxy_host;

        proxy_set_header  Host $proxy_host;

        location / {
            proxy_set_header  Auth &quot;auth-key&quot;;
            proxy_pass  http://serverName;
        }
    }
}
</code></pre><pre><code class="language-text">http {
    server {
        location /index {
            index  index.html;  # é¦–é¡µï¼Œå³æœªæŒ‡å®šåç»­è·¯å¾„æ—¶ï¼ŒåŒ¹é…é¦–é¡µ
        }
        location /try_files {
            root  /static
            try_files  $uri index.html;  # ä¾æ¬¡å°è¯•ã€‚/try_files/file -&gt; /try_files/static/file
        }
        location /alias/ {
            alias  /a/new/route/;  # è¯·æ±‚è·¯å¾„ /alias/files ç­‰æ•ˆäº /a/new/route/filesï¼Œä¼šæ›¿æ¢æ‰åŒ¹é…è·¯ç”±
        }
        location /root {
            root  /a/new/route/;  # è¯·æ±‚è·¯å¾„ /root/files ç­‰æ•ˆäº /a/new/route/root/filesï¼Œä¼šä¿ç•™åŒ¹é…è·¯ç”±
            # proxy_pass  http://serverName/;  # /root/index.html -&gt; http://serverName/index.html
            # proxy_pass  http://serverName;  # /root/index.html -&gt; http://serverName/root/index.html
        }
        location /rewrite {
            rewrite  ^/rewrite/permanent/(.*) http://serverName/$1 permanent;  # 301 æ°¸ä¹…é‡å®šå‘
            rewrite  ^/rewrite/redirect/(.*) http://serverName/$1 redirect;  # 302 ä¸´æ—¶é‡å®šå‘
            rewrite  ^/rewrite/last/(.*) http://serverName/$1 last;  # å®ç°é‡å®šå‘
            rewrite  ^/rewrite/break/(.*) http://serverName/$1 break;  # å®ç°é‡å®šå‘
        }
    }
}
</code></pre><h4>mirror</h4><pre><code class="language-text">http {
    server {
        location /mirror {
            mirror  /internal;  # mirror å®ç°æµé‡æ‹·è´
            proxy_pass  http://serverName;
        }

        location /internal {
            internal;  # è¡¨ç¤ºä»…è¢«å†…éƒ¨è¯·æ±‚å‘ç°
            proxy_pass  http://serverName;  # æŒ‡å®š upstream åå­—å³å¯
        }
    }
}
</code></pre><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[golangå†…å­˜ç®¡ç†]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/27/golangå†…å­˜ç®¡ç†</link>
            <guid>golangå†…å­˜ç®¡ç†</guid>
            <pubDate>Mon, 27 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[golang çš„ GC ä¸€ç›´æ˜¯å¤§å®¶è¯Ÿç—…æœ€å¤šçš„è¯é¢˜ä¹‹ä¸€ã€‚ä¸‹é¢æ˜¯ golang ä¸åŒç‰ˆæœ¬ä¹‹ä¸­æœ‰ä¸€äº›é‡è¦æ”¹è¿›ï¼š]]></description>
            <content:encoded><![CDATA[<p>golang çš„ GC ä¸€ç›´æ˜¯å¤§å®¶è¯Ÿç—…æœ€å¤šçš„è¯é¢˜ä¹‹ä¸€ã€‚ä¸‹é¢æ˜¯ golang ä¸åŒç‰ˆæœ¬ä¹‹ä¸­æœ‰ä¸€äº›é‡è¦æ”¹è¿›ï¼š  </p><ul><li>v1.1 STW</li><li>v1.3 Mark STWï¼ŒSweep å¹¶è¡Œ</li><li>v1.5 ä¸‰è‰²æ ‡è®°æ³•</li><li>v1.8 hybrid write barrier</li></ul><h2>ä¸‰è‰²æ ‡è®°æ³•</h2><p>ä¸‰è‰²æ ‡è®°æ³•ï¼Œå°±æ˜¯å°†å¯¹è±¡æŒ‰çŠ¶æ€åˆ†ä¸ºä¸‰ç±»ï¼Œå¹¶åˆ†ä¸ºèµ‹äºˆä¸‰ç§é¢œè‰²ï¼š<br/>
<!-- -->1ã€<strong>ç™½è‰²å¯¹è±¡</strong>ï¼ˆå¯èƒ½æ­»äº¡ï¼‰ï¼šæœªè¢«å›æ”¶å™¨è®¿é—®åˆ°çš„å¯¹è±¡ã€‚æ‰€æœ‰å¯¹è±¡åœ¨èµ·å§‹é˜¶æ®µå‡ä¸ºç™½è‰²ï¼Œåœ¨å›æ”¶ç»“æŸåç™½è‰²å¯¹è±¡è¢«å›æ”¶ã€‚<br/>
<!-- -->2ã€<strong>ç°è‰²å¯¹è±¡</strong>ï¼ˆä¸­é—´æ€ï¼‰ï¼šå·²è¢«å›æ”¶å™¨è®¿é—®åˆ°çš„å¯¹è±¡ã€‚ä½†å¯èƒ½å­˜åœ¨æŒ‡å‘å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ã€‚<br/>
<!-- -->3ã€<strong>é»‘è‰²å¯¹è±¡</strong>ï¼ˆç¡®å®šå­˜æ´»ï¼‰ï¼šå·²è¢«å›æ”¶å™¨è®¿é—®åˆ°çš„å¯¹è±¡ï¼Œä¸”ä¸å­˜åœ¨æŒ‡å‘å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ã€‚    </p><p>é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ v1.8 ç‰ˆæœ¬é‡è¿˜å¼•å…¥<strong>å†™å±éšœ</strong>çš„æ¦‚å¿µï¼šåœ¨ GC æ‰§è¡ŒæœŸé—´ï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡ä¼šè¢«é»˜è®¤èµ‹äºˆç°è‰²å¯¹è±¡ï¼Œä»¥ä¾¿åƒåœ¾å›æ”¶çš„æ­£å¸¸æ‰§è¡Œã€‚</p><h4>æ ‡è®°èµ·å§‹é˜¶æ®µ</h4><p>1ã€STW<br/>
<!-- -->2ã€ç¡®å®š GC ROOTï¼Œå¹¶å°†å…¶ç½®ä¸ºç°è‰²<br/>
<!-- -->3ã€å¼•å…¥å†™å±éšœ  </p><h4>æ ‡è®°é˜¶æ®µ</h4><p>1ã€æ ‡è®°ä¸ä¸šåŠ¡å¹¶è¡Œ</p><h4>æ ‡è®°ç»ˆæ­¢é˜¶æ®µ</h4><p>1ã€STW<br/>
<!-- -->2ã€ç§»é™¤å†™å±éšœ</p><h4>æ¸…é™¤é˜¶æ®µ</h4><p>1ã€å›æ”¶ç™½è‰²å¯¹è±¡</p><p>ä¸‰è‰²æ ‡è®°æ³•ï¼Œå¤§å¤§å‡å°‘äº† GC çš„ STW æ—¶é—´ï¼Œä½¿å¾—æ ‡è®°é˜¶æ®µä¸ä¸šåŠ¡å¹¶è¡Œã€‚<br/>
<!-- -->å¼•å…¥å†™å±éšœï¼Œä½¿å¾—ç¨‹åºåœ¨ GC æœŸé—´ä¼šæœ‰é¢å¤–çš„æ€§èƒ½æ¶ˆè€—ã€‚  </p><p>:::note é€ƒé€¸åˆ†æ
ç”¨æ¥åœ¨ç¼–è¯‘é˜¶æ®µç¡®è®¤å¯¹è±¡çš„å†…å­˜æ˜¯åˆ†é…åˆ°å †ä¸­è¿˜æ˜¯åˆ†é…åˆ°æ ˆä¸­ã€‚
:::</p><h2>è°ƒä¼˜ï¼šé¿å…åœ¨GCæœŸé—´å¼•å…¥è€—æ—¶æ“ä½œ</h2><p>èƒŒæ™¯ï¼šå¸Œæœ›æ”¶é›†çº¿ä¸Š GC æ—¥å¿—ï¼Œä»¥ä¾¿ç”¨äºåç»­åˆ†æã€‚<br/>
<!-- -->å®ç°ï¼šå¼€å¯ GODEBUG=gctrace=1ï¼Œå¹¶å°†è¾“å‡ºæµæŒ‡å‘æŸæ–‡ä»¶ã€‚<br/>
<!-- -->å¯¼è‡´ï¼šç›‘æ§æ˜¾ç¤ºï¼Œçº¿ä¸Šä¸šåŠ¡å¿…å®šé—´éš”æ€§æŠ–åŠ¨ã€‚<br/>
<!-- -->åŸå› ï¼šGC æ—¥å¿—è¾“å‡ºå±äº STW æœŸé—´ï¼ŒåŸæœ¬ STW åŸºäºå†…å­˜å®Œæˆï¼Œä½†ç°åœ¨å¼ºè¡Œå¼•å…¥ç£ç›˜ IOï¼Œå¯¼è‡´å †ç¨‹åºé€ æˆæ€§èƒ½å½±å“ã€‚   </p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[pythonå†…å­˜ç®¡ç†]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/26/pythonå†…å­˜ç®¡ç†</link>
            <guid>pythonå†…å­˜ç®¡ç†</guid>
            <pubDate>Sun, 26 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[python åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦åƒ C/C++ é‚£æ ·éœ€è¦æ‰‹åŠ¨ç”³è¯·å¹¶å›æ”¶å†…å­˜ã€‚]]></description>
            <content:encoded><![CDATA[<p>python åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦åƒ C/C++ é‚£æ ·éœ€è¦æ‰‹åŠ¨ç”³è¯·å¹¶å›æ”¶å†…å­˜ã€‚<br/>
<!-- -->è¿™å¾—ç›Šäºé«˜çº§è¯­è¨€çš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚æ‰€æœ‰çš„ python å¯¹è±¡å’Œæ•°æ®ç»“æ„éƒ½å­˜å‚¨åœ¨ç§æœ‰å †ä¸­ï¼Œç”±å†…å­˜ç®¡ç†å™¨è¿›è¡Œç®¡ç†ã€‚   </p><h2>åƒåœ¾å›æ”¶</h2><p>python çš„åƒåœ¾å›æ”¶ä¸»è¦æœ‰ä¸‰ç§æœºåˆ¶ï¼š<strong>å¼•ç”¨è®¡æ•°</strong>ã€<strong>æ ‡è®°æ¸…é™¤</strong>ã€<strong>åˆ†ä»£å›æ”¶</strong>   </p><p>é¦–å…ˆé€šè¿‡&quot;å¼•ç”¨è®¡æ•°&quot;ï¼Œæ¥ä¿æŒè¿½è¸ªå†…å­˜ä¸­çš„å¯¹è±¡ï¼Œä»¥ä¾¿åˆ›å»ºå’Œå›æ”¶ã€‚<br/>
<!-- -->ç„¶åé€šè¿‡&quot;æ ‡è®°-æ¸…é™¤&quot;è§£å†³å¯¹è±¡ä¹‹é—´å¯èƒ½äº§ç”Ÿçš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚<br/>
<!-- -->æœ€åé€šè¿‡&quot;åˆ†ä»£å›æ”¶&quot;ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´çš„æ–¹æ³•æé«˜åƒåœ¾å›æ”¶æ•ˆç‡ã€‚   </p><h4>å¼•ç”¨è®¡æ•°</h4><p>é¦–å…ˆæ˜¯ å¼•ç”¨è®¡æ•°ï¼Œè¿™æ˜¯æœ€ç®€å•çš„ä¸€ç§å›æ”¶æœºåˆ¶ï¼š<br/>
<!-- -->ä¸ºæ¯ä¸€ä¸ªå¯¹è±¡ç»´æŠ¤ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œæœ‰å˜é‡æˆ–è€…å®¹å™¨ç»“æ„å¼•ç”¨æ—¶ï¼Œè¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°åŠ ä¸€ï¼Œåä¹‹å‡ä¸€ã€‚<br/>
<!-- -->å½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å€¼ä¸º 0 æ—¶ï¼Œåˆ™å¯ä»¥è¿›è¡Œå›æ”¶ã€‚</p><p>ä½†æ˜¯å¼•ç”¨è®¡æ•°æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ï¼Œå°±æ˜¯å¾ªç¯å¼•ç”¨ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹å¯¹è±¡é—´çš„å¼•ç”¨è®¡æ•°æ— æ³•æ¸…é›¶ï¼Œä¼šé€ æˆèµ„æºæ³„éœ²ã€‚</p><h4>æ ‡è®°æ¸…é™¤</h4><p>æ ‡è®°æ¸…é™¤ç®—æ³•åˆ†ä¸ºæ ‡è®°é˜¶æ®µå’Œæ¸…é™¤é˜¶æ®µï¼š<br/>
<!-- -->æ ‡è®°é˜¶æ®µï¼šä»æ ¹å¯¹è±¡å¼€å§‹éå†ï¼Œå°†å¯ä»¥è®¿é—®åˆ°çš„å¯¹è±¡æ ‡è®°ä¸ºå¯è¾¾å¯¹è±¡ã€‚<br/>
<!-- -->æ¸…é™¤é˜¶æ®µï¼šå°†ä¸å¯è¾¾å¯¹è±¡æ¸…é™¤ã€‚</p><p>è™½ç„¶ æ ‡è®°-æ¸…é™¤ å¯ä»¥å¾ˆå¥½çš„è§£å†³å¼•ç”¨è®¡æ•°ä¸­å¾ªç¯ä¾èµ–é€ æˆçš„èµ„æºæ³„éœ²é—®é¢˜ï¼Œä½†æ˜¯æ ‡è®°æ¸…é™¤å®ƒæœ¬èº«æ˜¯ä¸€ä¸ªå¾ˆç¬¨é‡çš„è¡Œä¸ºï¼Œ
éœ€è¦STWï¼ˆstop the worldï¼‰ä¸”éå†å…¨éƒ¨å¯¹è±¡ã€‚</p><h4>åˆ†ä»£å›æ”¶</h4><p>åˆ†ä»£å›æ”¶åŸºäºä¸€ä¸ªç»Ÿè®¡ç†è®ºï¼Œå³å­˜æ´»è¶Šä¹…çš„å¯¹è±¡ï¼Œè¢«æ¸…é™¤çš„å¯èƒ½æ€§å°±è¶Šå°ã€‚æ‰€ä»¥ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¼•å…¥äº†åˆ†ä»£å›æ”¶ç®—æ³•ã€‚<br/>
<!-- -->å°†å¯¹è±¡åˆ†ä¸ºä¸‰ä»£ï¼š0ã€1ã€2ä»£ï¼Œæ´»è¿‡ä¸€æ¬¡ gcï¼Œåˆ™åˆ†é…åˆ°ä¸‹ä¸€ä»£ã€‚</p><p>é»˜è®¤é˜ˆå€¼ä¸ºï¼š700ã€10ã€10<br/>
<!-- -->700ï¼šè¡¨ç¤ºæ–°åˆ›å»ºå¯¹è±¡å‡å»ä»æ–°å¯¹è±¡ä¸­å›æ”¶çš„å¯¹è±¡çš„å€¼ï¼Œå¤§äº 700 åˆ™è¿›è¡Œä¸€æ¬¡ 0 ä»£å›æ”¶ã€‚<br/>
<!-- -->10ï¼š10 æ¬¡ 0 ä»£å›æ”¶è§¦å‘ä¸€æ¬¡ 1 ä»£å›æ”¶ã€‚<br/>
<!-- -->10ï¼š10 æ¬¡ 1 ä»£å›æ”¶è§¦å‘ä¸€æ¬¡ 2 ä»£å›æ”¶ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[RAID ç‹¬ç«‹ç£ç›˜å†—ä½™é˜µåˆ—]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/24/raidåˆè¯†</link>
            <guid>RAID ç‹¬ç«‹ç£ç›˜å†—ä½™é˜µåˆ—</guid>
            <pubDate>Fri, 24 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[ç‹¬ç«‹ç£ç›˜å†—ä½™é˜µåˆ— RAIDï¼ˆredundant array of independent disksï¼‰æŠ€æœ¯]]></description>
            <content:encoded><![CDATA[<p>ç‹¬ç«‹ç£ç›˜å†—ä½™é˜µåˆ— RAIDï¼ˆredundant array of independent disksï¼‰æŠ€æœ¯<br/>
<!-- -->æ˜¯å°†å¤šå—ç£ç›˜é€šè¿‡æŸç§åè®®ç®¡ç†èµ·æ¥ï¼Œä½¿å…¶å…±åŒå¯¹å¤–æä¾›æœåŠ¡ï¼Œä»è€Œæå‡æ€§èƒ½ã€‚</p><p>å¸¸è§ RAID æœ‰äº”ç§ï¼šRAID 0ã€RAID 1ã€RAID 10ã€RAID 5ã€RAID 6ã€‚</p><h2>RAID 0</h2><p>RAID 0 æ˜¯å°†ä¸€ä¸ªæ–‡ä»¶çš„æ•°æ®åˆ†æˆ N ç‰‡ï¼ŒåŒæ—¶å‘ N ä¸ªç£ç›˜å†™å…¥ï¼Œè¿™æ ·å•ä¸ªæ–‡ä»¶å°±å¯ä»¥å­˜å‚¨åœ¨ N ä¸ªç£ç›˜ä¸Šã€‚<br/>
<!-- -->ç†è®ºä¸Šé€šè¿‡ RAID 0ï¼Œå•æ–‡ä»¶å®¹é‡å¯ä»¥æå‡ N å€ï¼Œè¯»å†™é€Ÿåº¦ä¹Ÿå¯ä»¥æå‡ N å€ã€‚<br/>
<!-- -->ä½†æ˜¯ RAID 0 å¯èƒ½æå‡æ–‡ä»¶æŸåçš„é£é™©ï¼Œå› ä¸ºä»»ä½•ä¸€ä¸ªç£ç›˜æŸåï¼Œéƒ½å°†å¯¼è‡´æ•°æ®ä¸å®Œæ•´ã€‚<br/>
<img src="./raid-0.png"/></p><h2>RAID 1</h2><p>RAID 1 æ˜¯åŒæ—¶å¾€ä¸¤å—ç£ç›˜ä¸Šå†™æ•°æ®ï¼Œå…¶ä¸­ä¸€å—ç”¨æˆ·æ•°æ®å¤‡ä»½ã€‚è¿™æ ·åªè¦ä¸æ˜¯ç£ç›˜å…¨éƒ¨æŸåï¼Œé‚£ä¹ˆæ–‡ä»¶æ•°æ®å°±ä¸ä¼šä¸¢å¤±ï¼Œæ–‡ä»¶çš„å¯ç”¨æ€§å¤§å¤§æå‡ã€‚<br/>
<!-- -->ä½†æ˜¯å¯ç”¨çš„å­˜å‚¨ç©ºé—´å°±é™ä½ä¸€åŠäº†ã€‚è€Œä¸”ç”±äºå¤šå†™äº†ä¸€ä»½æ•°æ®ï¼Œå†™å…¥æ€§èƒ½ä¹Ÿå˜ç›¸çš„é™ä½äº†ã€‚<br/>
<img src="./raid-1.png"/></p><h2>RAID 10</h2><p>RAID 10 æ˜¯ç»“åˆäº† RAID 1 å’Œ RAID 0ï¼Œå°†å¤šå—ç¡¬ç›˜è¿›è¡Œä¸¤ä¸¤åˆ†ç»„ã€‚æ–‡ä»¶æ•°æ®è¢«åˆ†æˆäº† N ä»½ï¼Œæ¯ä¸ªç»„å†™å…¥ä¸€ä»½ï¼Œå¹¶ä¸”æ¯ä¸ªåˆ†ç»„çš„æ•°æ®éƒ½æœ‰ä¸€ä»½å¤‡ä»½ã€‚<br/>
<!-- -->è¿™æ ·ä¸ä»…æå‡äº†æ–‡ä»¶å­˜å‚¨çš„å®¹é‡å’Œæ€§èƒ½ï¼Œä¹Ÿæé«˜äº†æ–‡ä»¶çš„å¯ç”¨æ€§ã€‚<br/>
<!-- -->ä½†ä¸å¯é¿å…çš„å’Œ RAID 1 ä¸€æ ·ï¼Œç£ç›˜æ•´ä½“å­˜å‚¨åˆ©ç”¨åªæœ‰ 50% äº†ã€‚<br/>
<img src="./raid-10.png"/></p><h2>RAID 5</h2><p>RAID 5 é’ˆå¯¹ RAID 1 å’Œ RAID 10 ä¸­ç£ç›˜æµªè´¹çš„æƒ…å†µè¿›è¡Œäº†ä¼˜åŒ–ã€‚<br/>
<!-- -->å°†æ•°æ®åˆ†æˆ N - 1 ä»½ï¼Œå†åˆ©ç”¨è¿™ N - 1 ä»½æ•°æ®è¿›è¡Œä½è¿ç®—ï¼Œè®¡ç®—ä¸€ç‰‡æ ¡éªŒæ•°æ®ï¼Œç„¶åå°†è¿™ N ç‰‡æ•°æ®å†™å…¥ N ä¸ªç£ç›˜ä¸­ã€‚<br/>
<!-- -->è¿™æ ·ä»»ä½•ä¸€ä¸ªç£ç›˜æŸåï¼Œéƒ½å¯ä»¥åˆ©ç”¨æ ¡éªŒæ•°æ®è¿›è¡Œæ¢å¤ï¼Œç£ç›˜åˆ©ç”¨ç‡ä¹Ÿæé«˜åˆ° (N-1)/N  </p><p>è™½ç„¶ RAID 5 å¯ä»¥è§£å†³ä¸€å—ç£ç›˜æŸååä¿®å¤çš„åœºæ™¯ï¼Œä½†æ˜¯ä¸¤å—ç£ç›˜æŸåï¼Œå°±ä»ç„¶ä¼šå‡ºç°æ•°æ®ä¸¢å¤±çš„æƒ…å†µã€‚   </p><p>å®è·µè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨æœ€å¤šçš„è¿˜æ˜¯ RAID 5.</p><h2>RAID 6</h2><p>é’ˆå¯¹ RAID 5 ä¸­å¯èƒ½å‡ºç°çš„ä¸¤å—ç£ç›˜æŸåçš„åœºæ™¯ï¼Œå¼•å…¥äº†ä¸¤ç§ä½è¿ç®—è®¡ç®—å’Œå­˜å‚¨æ•°æ®ï¼Œè¿™æ ·å³ä½¿ä¸¤å—ç£ç›˜æŸåï¼Œä»ç„¶æ˜¯å¯ä»¥å¾—åˆ°ä¿®å¤çš„ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åˆæ­¥äº†è§£ k8s èµ„æºé…é¢]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/23/k8sèµ„æºé…é¢</link>
            <guid>åˆæ­¥äº†è§£ k8s èµ„æºé…é¢</guid>
            <pubDate>Thu, 23 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[<!--]]></description>
            <content:encoded><![CDATA[<p>ç”¨ä¸€å°æœåŠ¡å™¨åŒæ—¶è·‘å¤šä¸ªä»»åŠ¡æ—¶ï¼Œæœ€å¸¸å‘ç”Ÿçš„äº‹æ•…å°±æ˜¯èµ„æºæŠ¢å é—®é¢˜ã€‚æ¯”å¦‚ç«¯å£ã€cpuã€å†…å­˜ã€å­˜å‚¨ç­‰éƒ½å¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚<br/>
<!-- -->è€Œ k8s ä½œä¸ºå®¹å™¨ç¼–æ’å·¥å…·ï¼Œåˆ™æä¾›äº†èµ„æºé…é¢æ¥é¿å…è¿™ç±»é—®é¢˜ã€‚</p><h2>èµ„æºé…é¢ ResourceQuota</h2><p>èµ„æºé…é¢ç”¨äºå£°æ˜å‘½åç©ºé—´ä¸­æ‰€æœ‰ pod çš„æœ€ç»ˆèµ„æºæƒ…å†µï¼Œä¸€æ—¦å‘½åç©ºé—´ä¸­å¯ç”¨äº† ResourceQuotaï¼Œåˆ™éƒ¨ç½² pod æ—¶å¿…é¡»è®¾å®šè¯·æ±‚å€¼ï¼ˆrequestï¼‰å’Œçº¦æŸå€¼ï¼ˆlimitï¼‰ï¼Œå¦åˆ™é…é¢ç³»ç»Ÿå°†æ‹’ç» pod çš„åˆ›å»ºã€‚<br/>
<!-- -->èµ„æºé…é¢åœ¨ k8s é›†ç¾¤ä¸­é»˜è®¤æ˜¯æ”¯æŒçš„ï¼Œå½“ä¸€ä¸ªå‘½åç©ºé—´ä¸­å­˜åœ¨ä¸€ä¸ª ResourceQuota å¯¹è±¡æ—¶ï¼Œè¯¥å‘½åç©ºé—´çš„èµ„æºé…é¢å°±æ˜¯å¼€å¯çš„ã€‚   </p><pre><code class="language-yaml" metastring="title=&quot;èµ„æºé…é¢ï¼šResourceQuota.yaml&quot;" title="&quot;èµ„æºé…é¢ï¼šResourceQuota.yaml&quot;">apiVersion: v1
kind: ResourceQuota
metadata:
  name: demo
spec:
  hard:
    requests.cpu: &quot;1&quot;
    requests.memory: 1Gi
    limits.cpu: &quot;2&quot;
    limits.memory: 2Gi
</code></pre><p>æ­¤é…ç½®è¡¨ç¤ºï¼š </p><ul><li>æ¯ä¸ªå®¹å™¨å¿…é¡»æœ‰ memoryã€cpu çš„è¯·æ±‚å’Œé™åˆ¶ã€‚</li><li>æ‰€æœ‰å®¹å™¨çš„ memory è¯·æ±‚æ€»å’Œä¸èƒ½è¶…è¿‡ 1 GiBã€‚</li><li>æ‰€æœ‰å®¹å™¨çš„ memory é™åˆ¶æ€»å’Œä¸èƒ½è¶…è¿‡ 2 GiBã€‚</li><li>æ‰€æœ‰å®¹å™¨çš„ cpu è¯·æ±‚æ€»å’Œä¸èƒ½è¶…è¿‡ 1 cpuã€‚</li><li>æ‰€æœ‰å®¹å™¨çš„ cpu é™åˆ¶æ€»å’Œä¸èƒ½è¶…è¿‡ 2 cpuã€‚</li></ul><pre><code class="language-yaml" metastring="title=&quot;éƒ¨ç½²ç¤ºä¾‹ï¼špod.yaml&quot;" title="&quot;éƒ¨ç½²ç¤ºä¾‹ï¼špod.yaml&quot;">apiVersion: v1
kind: Pod
metadata:
  name: demo
spec:
  containers:
  - name: nginx
    image: nginx
    resources:
      limits:
        cpu: &quot;200m&quot;
        memory: &quot;400Mi&quot;
      requests:
        cpu: &quot;100m&quot;
        memory: &quot;200Mi&quot;
</code></pre><h2>requests/limits</h2><p>requests è¡¨ç¤ºè¯·æ±‚å€¼ï¼Œè€Œ limits åˆ™è¡¨ç¤ºçº¦æŸå€¼ã€‚<br/>
<!-- -->ä¸€èˆ¬æƒ…å†µä¸‹ requests æ˜¯å°äº limits çš„ï¼Œè¿™é‡Œæ¶‰åŠåˆ°æœåŠ¡è´¨é‡ç­‰çº§æ¦‚å¿µï¼š</p><table><thead><tr><th>æœåŠ¡è´¨é‡ç­‰çº§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Guaranteedï¼ˆå®Œå…¨å¯é çš„ï¼‰</td><td>pod ä¸­å…¨éƒ¨å®¹å™¨é…ç½®äº†èµ„æºé…é¢ï¼Œä¸” requests == limitsï¼Œæˆ–è€…åªè®¾ç½®äº† limitsï¼Œæ­¤æ—¶é»˜è®¤ requests ç­‰äº limitsã€‚</td></tr><tr><td>Burstableï¼ˆå¼¹æ€§æ³¢åŠ¨ã€è¾ƒå¯é çš„ï¼‰</td><td>pod ä¸­éƒ¨åˆ†å®¹å™¨é…ç½®äº† requests å’Œ limitsã€‚</td></tr><tr><td>BestEffortï¼ˆå°½åŠ›è€Œä¸ºã€ä¸å¤ªå¯é çš„ï¼‰</td><td>pod ä¸­å®¹å™¨æœªé…ç½® requests å’Œ limitsã€‚</td></tr></tbody></table><p>å½“æˆ‘ä»¬é…ç½®äº† requests è¯·æ±‚å€¼ï¼Œé‚£ä¹ˆéƒ¨ç½²æ—¶ï¼Œç›®æ ‡èŠ‚ç‚¹éœ€è¦æ‹¥æœ‰å¤šä½™è¯¥è¯·æ±‚å€¼çš„ç©ºé—²èµ„æºï¼Œæ‰å¯ä»¥éƒ¨ç½²æ­¤æœåŠ¡ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯¥æœåŠ¡å°†æ— æ³•éƒ¨ç½²ã€‚<br/>
<!-- -->å½“æˆ‘ä»¬æœªé…ç½® limits çº¦æŸå€¼æ—¶ï¼Œlimits é»˜è®¤å°±æ˜¯å½“å‰èŠ‚ç‚¹çš„èµ„æºä¸Šé™ã€‚   </p><h2>å¸¸ä½¿ç”¨çš„é…é¢ç±»å‹</h2><p>èµ„æºé…é¢çš„ç§ç±»æœ‰å¾ˆå¤šï¼Œæœ€å¸¸ä½¿ç”¨çš„é…é¢ä¸»è¦æœ‰ä¸‰ç±»ï¼š</p><ul><li>cpuï¼šä¸­å¤®å¤„ç†å™¨</li><li>memoryï¼šå†…å­˜</li><li>ephemeral-storageï¼šå­˜å‚¨</li></ul><p>å¤§éƒ¨åˆ†èµ„æºç±»å‹éƒ½å¯ä»¥é€šè¿‡æ ‡å‡†çš„æ¨¡æ¿è¿›è¡Œé…é¢è®¾ç½®ï¼Œå¦‚ï¼š  </p><ul><li><code>count/&lt;resource&gt;.&lt;group&gt;</code>ï¼šç”¨äºéæ ¸å¿ƒ core ç»„çš„èµ„æº</li><li><code>count/&lt;resource&gt;</code>ï¼šç”¨äºæ ¸å¿ƒç»„çš„èµ„æº</li></ul><table><thead><tr><th>é…é¢</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>count/pods</td><td>åœ¨è¯¥å‘½åç©ºé—´ä¸­å…è®¸å­˜åœ¨çš„éç»ˆæ­¢çŠ¶æ€çš„ pod æ€»æ•°ä¸Šé™ã€‚</td></tr><tr><td>count/services</td><td>åœ¨è¯¥å‘½åç©ºé—´ä¸­å…è®¸å­˜åœ¨çš„ service æ€»æ•°ä¸Šé™ã€‚</td></tr><tr><td>count/configmaps</td><td>åœ¨è¯¥å‘½åç©ºé—´ä¸­å…è®¸å­˜åœ¨çš„ configmaps æ€»æ•°ä¸Šé™ã€‚</td></tr></tbody></table><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è®°ä¸€æ¬¡ golang cmd æ¨¡å—å¯¼è‡´çš„è¿›ç¨‹æ³„æ¼]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/22/golang-cmdæ¨¡å—å¯¼è‡´çš„è¿›ç¨‹æ³„æ¼</link>
            <guid>è®°ä¸€æ¬¡ golang cmd æ¨¡å—å¯¼è‡´çš„è¿›ç¨‹æ³„æ¼</guid>
            <pubDate>Wed, 22 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[ä¸€ä¸ªç¨³å®šè·‘äº†ä¸€å¹´å¤šçš„é¡¹ç›®ï¼Œè¿‘æœŸçªç„¶è¢«è¿ç»´å‘ŠçŸ¥å­˜åœ¨è¿›ç¨‹æ³„æ¼ï¼Œå¸¦ç€æ‡µé€¼çš„å¿ƒæƒ…å¼€å§‹äº†æ’æŸ¥...]]></description>
            <content:encoded><![CDATA[<p>ä¸€ä¸ªç¨³å®šè·‘äº†ä¸€å¹´å¤šçš„é¡¹ç›®ï¼Œè¿‘æœŸçªç„¶è¢«è¿ç»´å‘ŠçŸ¥å­˜åœ¨è¿›ç¨‹æ³„æ¼ï¼Œå¸¦ç€æ‡µé€¼çš„å¿ƒæƒ…å¼€å§‹äº†æ’æŸ¥...</p><h2>åƒµå°¸è¿›ç¨‹æ‹–å®æœåŠ¡å™¨</h2><p>é¦–å…ˆæ¥çœ‹ä¸‹è¿ç»´æä¾›çš„æˆªå›¾ï¼ˆå±è”½äº†éƒ¨åˆ†æ•æ„Ÿä¿¡æ¯ï¼‰ï¼š<br/>
<strong>1ã€å¤§é¢ç§¯åƒµå°¸è¿›ç¨‹ï¼ˆè¿›ç¨‹çŠ¶æ€ Zï¼‰</strong><br/>
<img src="./%E8%BF%9B%E7%A8%8B%E6%B3%84%E6%BC%8F1.png"/>  </p><p><strong>2ã€ç»Ÿè®¡è¿›ç¨‹æ•°è¿‘30w</strong><br/>
<img src="./%E8%BF%9B%E7%A8%8B%E6%B3%84%E6%BC%8F2.png"/>  </p><p>å¹¶ä¸”åƒµå°¸è¿›ç¨‹æŒç»­å¢é•¿ï¼Œæœ€ç»ˆæ‹–å®æœåŠ¡å™¨ã€‚</p><p>:::note åƒµå°¸è¿›ç¨‹
ä¸€ä¸ªè¿›ç¨‹çš„é€€å‡ºï¼Œéœ€è¦è¢«å®ƒçš„çˆ¶è¿›ç¨‹æˆ–è€…ç›¸å…³è”çš„è¿›ç¨‹æ¥æ”¶ï¼Œå¦åˆ™ä¼šä¸€ç›´é˜»å¡ï¼Œæˆä¸ºåƒµå°¸è¿›ç¨‹ã€‚</p><p>å¸¸è§çš„åƒµå°¸è¿›ç¨‹äº§ç”Ÿåœºæ™¯æœ‰ï¼š<br/>
<!-- -->1ã€çˆ¶è¿›ç¨‹è¿˜åœ¨æ‰§è¡Œï¼Œå­è¿›ç¨‹é€€å‡ºäº†ï¼Œæ­¤æ—¶å­è¿›ç¨‹çš„é€€å‡ºæ²¡æœ‰è¢«çˆ¶è¿›ç¨‹æ¥æ”¶åˆ°ï¼Œå¯¼è‡´å½“å‰è¿›ç¨‹æˆä¸ºåƒµå°¸è¿›ç¨‹ã€‚<br/>
<!-- -->2ã€å­è¿›ç¨‹è¿˜åœ¨æ‰§è¡Œï¼Œçˆ¶è¿›ç¨‹é€€å‡ºäº†ï¼Œæ­¤æ—¶å­è¿›ç¨‹çš„é€€å‡ºæ— æ³•è¢«å…¶ä»–è¿›ç¨‹æ¥æ”¶ï¼Œå¯¼è‡´æˆä¸ºå­¤å„¿è¿›ç¨‹ï¼Œä¹Ÿæ˜¯åƒµå°¸è¿›ç¨‹çš„ä¸€ç§ã€‚     </p><p>åƒµå°¸è¿›ç¨‹çŠ¶æ€ä¸ºï¼šZ<br/>
<!-- -->ä»¥ <code>&lt;defunct&gt;</code> æ ‡è®°æŒ‡æ˜<br/>
<!-- -->:::</p><h2>ä»£ç åˆ†æ</h2><pre><code class="language-golang" metastring="title=&quot;è°ƒç”¨ cmd æ¨¡å—&quot;" title="&quot;è°ƒç”¨">ctxTimeout, cancel := context.WithDeadline(ctx, cfg.ExpiredAt)
defer cancel()
cmd := exec.CommandContext(ctxTimeout, &quot;/third_party/aria2c&quot;, args...)
</code></pre><p>åœ¨ä¸Šè¿°ä»£ç èƒ½å¤Ÿçœ‹åˆ°ï¼Œè°ƒç”¨ <code>cmd</code> æ—¶ä¼ å…¥äº† <code>ctxTimeout</code>ï¼Œå¹¶ä¸”å‡½æ•°æ ˆé€€å‡ºæ—¶è°ƒç”¨äº† <code>cancel</code>ã€‚<br/>
<!-- -->çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´ç¡®è®¤ï¼Œ<code>cmd</code> æœ€ç»ˆè‚¯å®šæ˜¯å¯ä»¥é€€å‡ºçš„ã€‚ä½†æ˜¯å°±æ˜¯è¿™ä¹ˆä¸€æ®µç®€å•çš„ä»£ç ï¼Œä»ç„¶å‘ç”Ÿäº†è¿›ç¨‹æ³„æ¼ã€‚</p><p>æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œcmd æ˜¯ golang çš„åŸºç¡€åŒ…ï¼Œå…¶å¯åŠ¨æ–¹å¼æœ‰ä¸¤ç§ï¼Œå¦‚ä¸‹ï¼š</p><pre><code class="language-golang" metastring="title=&quot;cmd å¯åŠ¨æ–¹æ³•&quot;" title="&quot;cmd">{
    cmd.Start()
    cmd.Wait()
}
{
    cmd.Run()  // ç­‰ä»·äº start + wait
}
</code></pre><p>ç»§ç»­å¾€ä¸‹æ’æŸ¥ï¼š</p><pre><code class="language-golang">ctxTimeout, cancel := context.WithDeadline(ctx, cfg.ExpiredAt)
defer cancel()
cmd := exec.CommandContext(ctxTimeout, &quot;/third_party/aria2c&quot;, args...)

path, err := consumeOutput(cmd, ctxTimeout, cfg)
if err != nil {
    retrun err
}
</code></pre><p><code>consumeOutput</code> å‡½æ•°ä¸­æ¶‰åŠåˆ°ä¸€äº›æ—¥å¿—è¾“å‡ºçš„è¯»å–ä¸åˆ†æï¼Œè¿™é‡Œå°±ä¸å…·ä½“å±•ç¤ºäº†ï¼Œä½†è¿™ä¸ªå‡½æ•°çš„<strong>æœ€åä¸€è¡Œè°ƒç”¨äº†</strong> <code>cmd.Wait()</code>ã€‚<br/>
<!-- -->çœ‹åˆ°è¿™é‡Œï¼Œé—®é¢˜çš„èµ·å› å°±å¤§è‡´æœ‰ç‚¹çœ‰ç›®äº†ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹ <code>cmd.Wait()</code> çš„æ–‡æ¡£ï¼Œæœ€åä¸€è¡Œå†™ç€ï¼š</p><pre><code class="language-text">Wait releases any resources associated with the Cmd.
</code></pre><p>æ‰€ä»¥å¯ä»¥åˆæ­¥åˆ¤å®šï¼Œå°±æ˜¯å› ä¸ºè¯¥å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œæ²¡æœ‰æ‰§è¡Œ <code>cmd.Wait()</code> å‡½æ•°å°±ç›´æ¥é€€å‡ºï¼Œå¯¼è‡´ cmd ç›¸å…³çš„å­è¿›ç¨‹èµ„æºæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œä»è€Œé€ æˆçº¿ä¸Šå¤§é‡åƒµå°¸è¿›ç¨‹ã€‚</p><h2>è§£å†³æ–¹æ³•</h2><p>è€é¡¹ç›®ï¼Œæ€ä¹ˆç®€å•æ€æ¥ã€‚<br/>
<!-- -->è¿™ä¸ªé—®é¢˜è¯´åˆ°åº•ï¼Œè¿˜æ˜¯ <code>cmd</code> æ¨¡å—çš„ä½¿ç”¨æ–¹æ³•ä¸æ­£ç¡®å¯¼è‡´çš„ï¼Œé¡¹ç›®èƒ½ç¨³å®šè¿è¡Œä¸€å¹´å¤šï¼Œä¹Ÿåªèƒ½å½’ç»“äºè¿æ°”å¥½...</p><p>ç›´æ¥åœ¨ <code>consumeOutput</code> å‡½æ•°è°ƒç”¨åä¸»åŠ¨åŠ ä¸Š <code>cmd.Wait()</code> å°±è¡Œäº†ï¼Œè™½ç„¶ä¸ä¼˜é›…ï¼Œä½†èƒ½è§£å†³é—®é¢˜ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[cpu è°ƒåº¦]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/21/cpuè°ƒåº¦</link>
            <guid>cpu è°ƒåº¦</guid>
            <pubDate>Tue, 21 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[<!--]]></description>
            <content:encoded><![CDATA[<p>è¯´åˆ° cpu è°ƒåº¦ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„å¯èƒ½æ˜¯æ—¶é—´ç‰‡ã€åˆ†æ—¶è°ƒåº¦ç­‰å…³é”®è¯ã€‚
è¦è¯´æ›´å…·ä½“çš„å†…å®¹ï¼Œå¯èƒ½å°±æ¯”è¾ƒæ¨¡ç³Šäº†ï¼Œå› ä¸ºæ¶‰åŠåˆ°äº†æ“ä½œç³»ç»Ÿçš„åº•å±‚çŸ¥è¯†ï¼Œå¹³å¸¸å·¥ä½œä¸­æ¥è§¦çš„æ¯”è¾ƒå°‘ã€‚</p><p>è¿™ç¯‡æ–‡ç« ä¹Ÿä»…ä»…åšä¸ªç®€å•çš„äº†è§£ã€‚</p><h2>åŸºç¡€æ¦‚å¿µ</h2><h4><strong>cpuï¼šä¸Šä¸‹æ–‡åˆ‡æ¢</strong></h4><p>æ¯ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨ï¼Œéƒ½éœ€è¦æœ‰ä¸€ä¸ªæ‰§è¡ŒæŒ‡ä»¤å…¥å£ï¼Œå³ä½¿è¯¥è¿›ç¨‹è¢«æš‚åœè°ƒåº¦ï¼Œä¹Ÿä¼šæœ‰ä¸€ä¸ªå³å°†è¢«æ‰§è¡Œçš„æŒ‡ä»¤å…¥å£ã€‚
å¯¹äºè¿™äº›å³å°†è¢«æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°†ä»–ä»¬çš„åœ°å€ä¿¡æ¯ä¿å­˜åœ¨ cpu çš„å¯„å­˜å™¨ä¸­ã€‚<br/>
<!-- -->æ­¤æ—¶ï¼Œè¿™äº›å¯„å­˜å™¨ä¸­çš„ä¿¡æ¯ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ cpu ä¸Šä¸‹æ–‡ã€‚</p><p>æ‰€ä»¥ç®€å•ç‚¹ç†è§£å°±æ˜¯ï¼Œå°†å½“å‰ä»»åŠ¡çš„ä¸Šä¸‹æ–‡ä¿å­˜ï¼Œå¹¶å°†ä¸‹ä¸€ä¸ªæ‰§è¡Œä»»åŠ¡çš„ä¸Šä¸‹æ–‡åŠ è½½åˆ°å¯„å­˜å™¨ä¸­çš„è¿‡ç¨‹ï¼Œç§°ä¹‹ä¸º cpu çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚
å½“ç„¶ï¼Œå®é™…è¿‡ç¨‹æ›´ä¸ºå¤æ‚ã€‚</p><p>:::note ç”¨æˆ·çº§å’Œç³»ç»Ÿçº§çš„ä¸Šä¸‹æ–‡
æˆ‘ä»¬å¸¸è¯´çš„ä¸Šä¸‹æ–‡æ›´å¤šçš„æ˜¯ç”¨æˆ·çº§åˆ«çš„ï¼Œä»–å’Œç³»ç»Ÿçº§ä¸Šä¸‹æ–‡ä¿å­˜å†…å®¹æœ‰æ‰€ä¸åŒï¼š  </p><ul><li>ç”¨æˆ·çº§ä¸Šä¸‹æ–‡ï¼šç¨‹åºè¿è¡Œæ—¶å †æ ˆä¿¡æ¯ã€æ•°æ®å—ã€ä»£ç å—ç­‰ã€‚  </li><li>ç³»ç»Ÿçº§ä¸Šä¸‹æ–‡ï¼šè¿›ç¨‹æ ‡è¯†ä¿¡æ¯ã€æ§åˆ¶ä¿¡æ¯ç­‰ã€‚
:::</li></ul><h4><strong>cpuï¼šä¸Šä¸‹æ–‡ä¿å­˜çš„æ–¹å¼</strong></h4><p>æ“ä½œç³»ç»Ÿç»™è¿›ç¨‹åˆ†é…èµ„æºæ—¶ï¼Œä¼šåˆ†é…ä¸€ä¸ªå†…æ ¸ç©ºé—´ï¼Œè¿™éƒ¨åˆ†ç©ºé—´åªèƒ½å¤Ÿç”±å†…æ ¸ä»£ç è®¿é—®ã€‚<br/>
<!-- -->æ‰§è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶ï¼Œä¼šå°†ä¸Šä¸‹æ–‡ä¿¡æ¯ä¿å­˜åœ¨å†…æ ¸ç©ºé—´ä¸­ï¼Œç­‰å¾…ä¸‹æ¬¡è°ƒåº¦æ—¶ï¼Œå†é‡æ–°åŠ è½½åˆ° cpu ä¸­ã€‚</p><h4><strong>cpuï¼šä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ–¹å¼</strong></h4><p>æ‰§è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œéœ€è¦ç”± cpu æ¥æ‰§è¡Œã€‚ä½†ç”±äºå½“å‰ cpu å·²ç»è¢«è¿›ç¨‹å ç”¨äº†ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§ç­–ç•¥ï¼Œæ¥è·å– cpu çš„æ‰§è¡Œæƒé™ã€‚è·å–çš„æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼š</p><p>1ã€åä½œå¼ç­–ç•¥<br/>
<!-- -->ç”±è¿›ç¨‹ä¸»åŠ¨è®©å‡º cpu</p><p>2ã€æŠ¢å å¼ç­–ç•¥<br/>
<!-- -->ä¾èµ–ç¡¬ä»¶çš„å®šæ—¶ä¸­æ–­æœºåˆ¶ï¼Œæ“ä½œç³»ç»Ÿåˆå§‹åŒ–æ—¶å‘ç¡¬ä»¶æ³¨å†Œä¸­æ–­å›è°ƒï¼Œä»¥ä¾¿å½“ç¡¬ä»¶å‘ç”Ÿä¸­æ–­æ—¶ï¼Œç¡¬ä»¶ä¼šå°† cpu çš„å¤„ç†æƒäº¤è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚<br/>
<!-- -->è¿™æ ·ï¼Œæ“ä½œç³»ç»Ÿå°±å¯ä»¥é€šè¿‡ä¸­æ–­å›è°ƒçš„æ–¹å¼æ¥è·å– cpu çš„è°ƒåº¦æƒã€‚</p><h2>æœ€ç®€å•çš„è°ƒåº¦ï¼šFIFO</h2><p>è¯´åˆ°æœ€ç®€å•çš„è°ƒåº¦ç­–ç•¥ï¼Œé‚£è‚¯å®šæ˜¯å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ç­–ç•¥äº†ã€‚<br/>
<!-- -->FIFO çš„æ„æ€å°±æ˜¯å…ˆæ¥çš„ä»»åŠ¡å…ˆå¤„ç†ï¼Œç­‰å½“å‰ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</p><p>ä»–çš„ä¼˜ç‚¹å°±æ˜¯ç®€å•æ˜äº†ï¼Œç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯æ­£åœ¨æ‰§è¡Œä¸­çš„ä»»åŠ¡ä¼šé˜»å¡åé¢çš„ä»»åŠ¡ã€‚<br/>
<!-- -->ç‰¹åˆ«å½“æœ‰å¤šä¸ªä»»åŠ¡æ—¶ï¼š</p><ul><li>æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„ä»»åŠ¡å¯èƒ½ä¼šé˜»å¡æ‰§è¡Œæ—¶é—´è¾ƒçŸ­çš„ä»»åŠ¡</li><li>ä¼˜å…ˆçº§ä½çš„ä»»åŠ¡å¯èƒ½ä¼šé˜»å¡ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡</li></ul><h2>æœ€çŸ­ä»»åŠ¡ä¼˜å…ˆï¼šSJF</h2><p>SJF å…¨ç§° Short Job Firstï¼Œå°±æ˜¯æ‰§è¡Œæ—¶é—´çŸ­çš„ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œã€‚</p><p>ä»–ç›¸è¾ƒäº FIFO æ¥è¯´ï¼Œå¼¥è¡¥äº†ä¸€éƒ¨åˆ†è°ƒåº¦ç­–ç•¥çš„ç¼ºé™·ã€‚<br/>
<!-- -->å½“ä¸€æ‰¹ä»»åŠ¡åˆ°æ¥æ—¶ï¼Œå¯ä»¥ä¼˜å…ˆå¤„ç†æ‰§è¡Œæ—¶é—´è¾ƒçŸ­çš„ä»»åŠ¡ã€‚<br/>
<!-- -->ä½†æ˜¯å½“æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„ä»»åŠ¡æ­£åœ¨è¢«å¤„ç†ï¼Œæ­¤æ—¶å†æŠ•æ”¾æ‰§è¡Œæ—¶é—´è¾ƒçŸ­çš„ä»»åŠ¡ï¼Œè¿™äº›çŸ­ä»»åŠ¡ä»ç„¶ä¼šè¢«é˜»å¡ã€‚</p><h2>æœ€çŸ­æ—¶é—´ä¼˜å…ˆå®Œæˆï¼šSTCF</h2><p>STCF å…¨ç§° Shortest Time-to-Completion Firstï¼Œå°±æ˜¯å½“è¿è¡Œæ—¶é—´è¾ƒçŸ­çš„ä»»åŠ¡è¾¾åˆ°æ—¶ï¼Œä¼šä¸­æ–­å½“å‰ä»»åŠ¡ï¼Œè½¬è€Œæ‰§è¡Œè¿™æ‰¹çŸ­æ—¶é—´ä»»åŠ¡ã€‚<br/>
<!-- -->å¾ˆæ˜¾ç„¶ï¼Œè¿™æ˜¯ SJF çš„ä¸€ç§ä¼˜åŒ–ã€‚</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬å…¶å®å¯ä»¥çœ‹åˆ°ï¼Œä¸ç®¡æ˜¯ FIFOã€SJF è¿˜æ˜¯ STCFï¼Œè¿™äº›è°ƒåº¦ç­–ç•¥çš„æœ¬è´¨éƒ½æ˜¯å…ˆæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚    </p><p>å½“å®Œæˆä¸€ä¸ªçŸ­ä»»åŠ¡æ‰€éœ€è¦çš„æ—¶é—´ä¹Ÿå¾ˆé•¿æ—¶ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¯¹äºæ¯ä¸€ä¸ªä»»åŠ¡ï¼Œè°ƒåº¦æ‰§è¡Œçš„æ—¶é—´å°†ä¸å¯é¿å…çš„è¢«å»¶é•¿ã€‚   </p><h2>åŸºäºæ—¶é—´ç‰‡çš„è½®è¯¢</h2><p>æ—¢ç„¶ï¼Œè¿™ç§å®Œæˆä¸€ä¸ªä»»åŠ¡å†å®Œæˆä¸‹ä¸€ä¸ªä»»åŠ¡çš„è°ƒåº¦ç­–ç•¥è¿™ä¹ˆä¸å‹å¥½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®©è¿™äº›ä»»åŠ¡ä¸€èµ·æ‰§è¡Œã€‚</p><p>åŸç†ä¹Ÿæ¯”è¾ƒç®€å•ï¼š<br/>
<!-- -->1ã€ç»™æ¯ä¸ªä»»åŠ¡åˆ†é…ä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œæ—¶é—´ç‰‡è¡¨ç¤ºè¯¥ä»»åŠ¡è¢« cpu è°ƒåº¦æ‰§è¡Œçš„æ—¶é—´ã€‚<br/>
<!-- -->2ã€å½“æ—¶é—´ç‰‡çš„è°ƒåº¦æ—¶é—´ç»“æŸåï¼Œcpu ä¼šä¸­æ–­è¯¥ä»»åŠ¡ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚<br/>
<!-- -->3ã€é€šè¿‡ round robin è½®è¯¢çš„ç­–ç•¥ï¼Œå¯¹æ¯ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œè°ƒåº¦ã€‚    </p><h2>å¤šçº§åé¦ˆé˜Ÿåˆ—ï¼šMLFQ</h2><p>MLFQ å…¨ç§° Multi-Level Feedback Queue</p><p>è¯¥ç­–ç•¥ç»¼åˆè€ƒè™‘äº†ä¼˜å…ˆçº§å’Œè½®è¯¢çš„ç‰¹ç‚¹ï¼Œæ­¤æ—¶è°ƒåº¦ç­–ç•¥ç±»ä¼¼ï¼š<br/>
<!-- -->1ã€ä»»åŠ¡ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡å…ˆæ‰§è¡Œ<br/>
<!-- -->2ã€ä¼˜å…ˆçº§ç›¸åŒçš„ä»»åŠ¡è½®è¯¢è°ƒåº¦æ‰§è¡Œ  </p><h2>linuxå®Œå…¨å…¬å¹³è°ƒåº¦ï¼šCFS</h2><p>CFS å…¨ç§° Completely Fair Scheduler</p><p>CFS å¸Œæœ›å°† cpu å…¬å¹³çš„å¹³å‡åˆ†åˆ°æ¯ä¸ªä»»åŠ¡ã€‚ä¸ºäº†å®ç°å¹³å‡èƒ½åŠ›ï¼Œ CFS å¼•å…¥äº†è®¡æ•°çš„æ¦‚å¿µã€‚
æ¯ä¸ªä»»åŠ¡éƒ½ç»´æŠ¤æœ‰ä¸€ä¸ª <code>vruntime</code> çš„å€¼ï¼Œç”¨æ¥è¡¨ç¤ºè°ƒåº¦æ‰§è¡Œçš„æ—¶é—´ï¼Œæ¯æ¬¡è°ƒåº¦æ‰§è¡Œåï¼Œè¯¥å€¼éƒ½ä¼šåŠ ä¸Šæ­¤æ¬¡è°ƒåº¦æ—¶é—´çš„å€¼ã€‚
æ¯ä¸€æ¬¡è°ƒåº¦ï¼Œæ“ä½œç³»ç»Ÿä¼šé€‰æ‹© <code>vruntime</code> å€¼æœ€å°çš„ä¼˜å…ˆè°ƒåº¦ã€‚</p><p>åœ¨ CFS ç§ï¼Œè°ƒåº¦æ‰§è¡Œæ—¶é—´ç‰‡ä¸æ˜¯å›ºå®šçš„ï¼Œlinux æä¾›äº†å¯é…å‚æ•° <code>sched_latency</code>ï¼Œè°ƒåº¦æ—¶é—´ç‰‡å°±æ˜¯ï¼š<code>time_slice = sched_latency / n</code>ï¼Œ
è¿™é‡Œçš„ n å°±æ˜¯ä»»åŠ¡æ•°ï¼Œå³ä»»åŠ¡æ•°è¶Šå¤šï¼Œæ—¶é—´ç‰‡è¶Šå°ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œlinux ä¹Ÿæä¾›äº†æƒé‡æ¥æ ‡è®°ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡å°†åˆ†é…æœ‰æ›´å¤šçš„æ‰§è¡Œæ—¶é—´ç‰‡ã€‚</p><p>:::note æƒé‡æœºåˆ¶
linux æä¾›äº†æƒé‡æœºåˆ¶ï¼Œç”¨äºæ ‡è®°ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚<br/>
<!-- -->ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡ï¼Œå°†è¢«åˆ†é…æ›´å¤šçš„æ‰§è¡Œæ—¶é—´ç‰‡ã€‚<br/>
<!-- -->åœ¨æƒé‡æœºåˆ¶ä¸‹ï¼Œä¹Ÿä¸å†æ˜¯å– <code>vruntime</code> å€¼æœ€å°çš„ä¼˜å…ˆè°ƒåº¦äº†ï¼Œä¼šæœ‰æ–°çš„ç®—æ³•å¼•å…¥æƒé‡å€¼ã€‚
:::</p><p>:::note CFS å­˜å‚¨ç»“æ„ï¼šçº¢é»‘æ ‘
åœ¨æ–‡ä¸­å·²ç»è¯´æ˜ï¼ŒCFS è°ƒåº¦æ—¶ä¼šé€‰æ‹© <code>vruntime</code> æœ€å°çš„å€¼ï¼Œæ­¤æ—¶ä¸ºäº†æ€§èƒ½ï¼Œé‡‡ç”¨çš„æ˜¯çº¢é»‘æ ‘æ¥å­˜å‚¨ <code>vruntime</code> æ•°æ®ã€‚<br/>
<!-- -->çº¢é»‘æ ‘åœ¨æ’å…¥å’Œåˆ é™¤æ—¶ï¼Œæ“ä½œå¤æ‚åº¦ä¸º log(n)<br/>
<!-- -->è€Œæœ‰åºé“¾è¡¨çš„æ“ä½œå¤æ‚åº¦ä¸º O(n)
:::</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å­—ç¬¦ç¼–ç ]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/15/å­—ç¬¦ç¼–ç </link>
            <guid>å­—ç¬¦ç¼–ç </guid>
            <pubDate>Wed, 15 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å­—ç¬¦ä¸²æ˜¯ä½¿ç”¨çš„æœ€å¤šçš„æ•°æ®ç±»å‹ä¹‹ä¸€ã€‚]]></description>
            <content:encoded><![CDATA[<p>å­—ç¬¦ä¸²æ˜¯ä½¿ç”¨çš„æœ€å¤šçš„æ•°æ®ç±»å‹ä¹‹ä¸€ã€‚<br/>
<!-- -->å¦‚æœè¯´åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œé‚£å¯ä»¥è¯´ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ç¼–ç æ–¹é¢çš„é—®é¢˜äº†ã€‚</p><h2>ascii ç¼–ç </h2><blockquote><p>å­—ç¬¦ç¼–ç çš„æœ¬è´¨ï¼Œæ˜¯æ•°å­—åˆ°å­—ç¬¦ä¸²çš„æ˜ å°„</p></blockquote><p>æœ€æ—©çš„ç¼–ç æ˜¯ ascii ç¼–ç ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å« 128 ä¸ªå­—ç¬¦çš„å­—ç¬¦é›†ï¼Œå¯ä»¥ç¼–ç å­—æ¯å’Œç‰¹æ®Šå­—ç¬¦ã€‚</p><p>:::note æ¯”ç‰¹ä¸å­—èŠ‚
ç”±äºè®¡ç®—æœºåº•å±‚åªèƒ½å¤Ÿå¤„ç†æ•°å­—ï¼Œå¦‚æœè¦å¤„ç†ç±»ä¼¼æ–‡æœ¬å›¾ç‰‡ç­‰æ•°æ®ï¼Œå°±éœ€è¦å…ˆå°†è¿™äº›æ•°æ®è½¬åŒ–ä¸ºæ•°å­—æ‰èƒ½å¤Ÿç»§ç»­å¤„ç†ã€‚<br/>
<!-- -->æœ€æ—©è®¡ç®—æœºåœ¨è®¾è®¡æ—¶é‡‡ç”¨ 8 ä¸ªæ¯”ç‰¹ï¼ˆbitï¼‰ä½œä¸ºä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰ï¼Œæ‰€ä»¥ä¸€ä¸ªå­—èŠ‚èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°å­—å°±æ˜¯ 255ï¼ŒäºŒè¿›åˆ¶è¡¨ç¤º <code>1111 1111</code></p><p>å¦‚æœéœ€è¦è¡¨ç¤ºæ›´å¤§çš„æ•°ï¼Œå°±éœ€è¦æ›´å¤šçš„å­—èŠ‚
:::</p><h2>unicode ç¼–ç </h2><p>éšç€è®¡ç®—æœºçš„å‘å±•ï¼Œå•ä¸€çš„ ascii ç¼–ç å·²ç»æ— æ³•æ»¡è¶³å¤šå…ƒçš„æ–‡åŒ–éœ€æ±‚ã€‚<br/>
<!-- -->è®¡ç®—æœºéœ€è¦æ”¯æŒæ›´å¤šçš„ç¼–ç é›†ï¼Œä¾‹å¦‚ï¼šä¸­å›½åˆ¶å®šæœ‰ gb2312ï¼Œå…¶ä»–å›½å®¶ä¹Ÿæœ‰ç±»ä¼¼çš„ç¼–ç é›†ã€‚</p><p>è™½ç„¶æ¯ä¸ªå›½å®¶éƒ½å®ç°äº†ç‰¹å®šçš„ç¼–ç ï¼Œä½†æ˜¯å½“ä¸€ä¸ªæ–‡æœ¬ä¸­æ··åˆäº†å¤šä¸ªå›½å®¶çš„è¯­è¨€æ—¶ï¼Œå°±ä¸å¯é¿å…çš„å‡ºç°å±€éƒ¨ä¹±ç ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸šç•Œå†³å®šä½¿ç”¨ç»Ÿä¸€çš„ unicode ç¼–ç ã€‚<br/>
<!-- -->å³å°†æ‰€æœ‰å›½å®¶çš„ç¼–ç æ”¶å½•åˆ°ä¸€ä¸ªå­—ç¬¦é›†ä¸­ã€‚</p><h2>utf-8 ç¼–ç </h2><p>è™½ç„¶ unicode å¯ä»¥è§£å†³ä¹±ç é—®é¢˜ï¼Œä½†å¹¶ä¸ä¼˜é›…ã€‚å› ä¸ºå®ƒå­˜åœ¨ä¸€ä¸ªè¿™æ ·çš„é—®é¢˜ï¼š<br/>
<!-- -->ä¸­è‹±æ··åˆæ—¶ï¼Œä¸€ä¸ªä¸­æ–‡å¯èƒ½éœ€è¦å æ®ä¸¤ä¸ªå­—èŠ‚ï¼Œè¿™ä¸ªæ—¶å€™ä¸ºäº†æ­£ç¡®ç¼–ç ï¼ŒåŸæœ¬åªéœ€è¦å æ®ä¸€ä¸ªå­—èŠ‚çš„è‹±æ–‡ï¼Œä¸å¾—ä¸å æ®ä¸¤ä¸ªå­—èŠ‚ã€‚<br/>
<!-- -->ä»è€Œé€ æˆäº†èµ„æºæµªè´¹ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªç¼ºé™·ï¼ŒåŸºäº unicode ç¼–ç åˆæ¨å‡ºäº†å¯å˜é•¿ç¼–ç  utf-8</p><p>å³ utf-8 ä¼šæ ¹æ®å®é™…ç±»å‹é€‰æ‹©æœ€ä½³çš„å­—èŠ‚å ä½ï¼Œä»è€ŒèŠ‚çœç©ºé—´ã€‚</p><h2>è®¡ç®—æœºé€šç”¨ç¼–ç æ–¹å¼</h2><p>ææ¸…æ¥šäº† asciiã€unicodeã€utf-8 ç¼–ç ï¼Œæˆ‘ä»¬æ¢³ç†ä¸‹è®¡ç®—æœºé€šç”¨çš„ç¼–ç æ–¹å¼ï¼š<br/>
<!-- -->1ã€åœ¨è®¡ç®—æœºå†…å­˜ä¸­ï¼Œç»Ÿä¸€ä½¿ç”¨ unicode ç¼–ç <br/>
<!-- -->2ã€å½“éœ€è¦ä¿å­˜åˆ°ç¡¬ç›˜æˆ–è€…ä¼ è¾“çš„æ—¶å€™ï¼Œè½¬åŒ–ä¸º utf-8 ç¼–ç    </p><p>ä»¥æˆ‘ä»¬çš„ txt æ–‡æœ¬ä¸ºä¾‹ï¼š<br/>
<!-- -->1ã€æ‰“å¼€æ–‡æœ¬ï¼šæ•°æ®ä»¥ unicode ç¼–ç ï¼Œä»¥ä¾¿å±•ç¤ºå†…å®¹ã€‚<br/>
<!-- -->2ã€ä¿å­˜æ–‡æœ¬ï¼šæ•°æ®ä»¥ utf-8 ç¼–ç ï¼Œä»¥ä¾¿èŠ‚çº¦ç©ºé—´ã€‚</p><p>:::note å¸¸ç”¨å­—ç¬¦ ascii ç 
0-9ï¼š48 ~ 57<br/>
<!-- -->A-Zï¼š65 ~ 90<br/>
<!-- -->a-zï¼š97 ~ 122<br/>
<!-- -->:::</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[gRPC è´Ÿè½½å‡è¡¡]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/13/gRPCè´Ÿè½½å‡è¡¡</link>
            <guid>gRPC è´Ÿè½½å‡è¡¡</guid>
            <pubDate>Mon, 13 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ¬æ–‡ä¸»è¦ä»‹ç»åœ¨ k8s ç¯å¢ƒä¸‹ gRPC æœåŠ¡åœ¨å®ç°è´Ÿè½½å‡è¡¡æ—¶é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ€è·¯ã€‚]]></description>
            <content:encoded><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»åœ¨ k8s ç¯å¢ƒä¸‹ gRPC æœåŠ¡åœ¨å®ç°è´Ÿè½½å‡è¡¡æ—¶é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ€è·¯ã€‚</p><h2>æ¦‚è¿°</h2><p>æˆ‘ä»¬çš„ gRPC åº”ç”¨æœ€åˆä½¿ç”¨ <code>DaemonSet</code> ç±»å‹çš„èµ„æºå¯¹è±¡éƒ¨ç½²åœ¨ k8s ä¸Šã€‚é€šè¿‡æ ‡ç­¾é…ç½®ï¼Œä½¿å¾—å•å° Node èŠ‚ç‚¹ä»…éƒ¨ç½²ä¸€ä¸ª pod åº”ç”¨ã€‚
è€Œ gRPC åº”ç”¨åˆ™é€šè¿‡ <code>NodePort Service</code> çš„æ–¹å¼å¯¹å¤–æš´éœ²æœåŠ¡ã€‚</p><p>åœ¨è¿™ç§åœºæ™¯ä¸‹ç›´æ¥å¯¹å¤–æš´éœ²å›ºå®š IP æä¾›æœåŠ¡ï¼Œä¸šåŠ¡æµé‡å…¨éƒ¨æ‰“åˆ°å•å°å®¿ä¸»æœºä¸Šï¼Œæ‰€ä»¥ä¹Ÿä¸å­˜åœ¨è´Ÿè½½å‡è¡¡çš„è¯´æ³•ã€‚</p><p>éšç€ä¸šåŠ¡å‹åŠ›é€æ¸å¢å¤§ï¼Œå•ç‚¹æä¾›çš„èƒ½åŠ›å·²é€æ¸è¾¾åˆ°æé™ï¼Œæˆ‘ä»¬é‡‡ç”¨æ°´å¹³æ‹“å±•çš„æ–¹å¼ï¼Œéƒ¨ç½²äº†å¤šå°å•èŠ‚ç‚¹æœåŠ¡ã€‚ä¹Ÿç®—æš‚æ—¶æŠ—ä½äº†å‹åŠ›ã€‚ä½†éšåçš„æš´éœ²çš„é—®é¢˜ï¼Œä¹Ÿè®©æˆ‘ä»¬è¢«è¿«é€‰æ‹©äº†é‡æ„ã€‚</p><p>:::note ä¸ºä»€ä¹ˆé€‰æ‹©é‡æ„
ä¸šåŠ¡æŒç»­æ‹“å±•ï¼Œå¼•å…¥å¤šèŠ‚ç‚¹çš„é—®é¢˜ä¹Ÿé€æ¸æš´éœ²å‡ºæ¥ï¼Œå½“å‰æœåŠ¡æ¶æ„ä¸‹ï¼Œå¤šèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§å®Œå…¨ä¸èƒ½ä¿è¯ï¼Œäººå·¥è¿ç»´ç®€ç›´ä¸è¦å¤ªæ¶å¿ƒï¼Œæ— å¥ˆåªèƒ½é‡æ„ã€‚è¿™é‡Œæˆ‘ä»¬ä¸é’ˆå¯¹æ­¤å±•å¼€ã€‚<br/>
<!-- -->:::</p><p>æœåŠ¡æ”¹é€ å‡çº§å®Œæ¯•åï¼Œå®Œå…¨å…¼å®¹å†å² gRPC æ¥å£ï¼Œåœ¨ k8s çš„é…ç½®ä¸Šä¹Ÿæœ‰éƒ¨åˆ†æ”¹åŠ¨ï¼Œä»¥å‰çš„ <code>DaemontSet</code> èµ„æºå˜æ›´ä¸º <code>Deployment</code> èµ„æºï¼Œè€Œ <code>NodePort Service</code> èµ„æºåˆ™å˜æ›´ä¸º <code>ClusterIP Service</code> èµ„æºã€‚<br/>
<!-- -->é¡¹ç›®æ­£å¼è¿›å…¥åˆ°äº†ææµ‹é˜¶æ®µã€‚</p><p>åŠŸèƒ½ä¸ŠåŸºæœ¬æ²¡æœ‰å¤ªå¤§çš„é—®é¢˜ï¼Œæ¯•ç«Ÿå¼•ç”¨äº†ç›¸åŒçš„ gRPC æ¥å£æ–‡ä»¶ã€‚</p><p>é—®é¢˜ä¸»è¦å‡ºç°åœ¨äº†è´Ÿè½½å‡è¡¡ä¸Šï¼Œåœ¨å¤šå‰¯æœ¬çš„åœºæ™¯ä¸‹ï¼Œå‘ç”Ÿäº†ä¸¥é‡çš„æµé‡å€¾æ–œï¼Œå…·ä½“è¡¨ç°å°±æ˜¯æŸä¸ªå‰¯æœ¬çš„å‹åŠ›éå¸¸é«˜ï¼Œè€Œå…¶ä»–å‰¯æœ¬çš„å‹åŠ›å¾ˆå°ï¼Œè¿›è€Œå¯¼è‡´æœåŠ¡æ•´ä½“å¼‚å¸¸ã€‚</p><p>:::tip ç®€å•åˆ†æ
gRPC æ˜¯åŸºäº HTTP2.0 å®ç°çš„é•¿è¿æ¥ï¼Œä¸”é»˜è®¤æ²¡æœ‰è¶…æ—¶ï¼Œè¿™ç§é•¿è¿æ¥èƒ½å¤Ÿå¤§é‡å‡å°‘ TCP è¿æ¥ç®¡ç†æ‰€å¸¦æ¥çš„å¼€é”€ï¼Œä½†ä¹Ÿç ´åäº†æ ‡å‡†çš„è¿æ¥çº§çš„è´Ÿè½½å‡è¡¡ã€‚å› ä¸ºè¿æ¥å·²ç»å»ºç«‹ä¸”ä¸æ–­å¼€ï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•å†è¿›ä¸€æ­¥è´Ÿè½½å‡è¡¡äº†ã€‚  </p><p>é‚£ä¹ˆå†å›åˆ°ä¸Šè¿°åœºæ™¯ï¼Œæ˜¾ç„¶å°±æ˜¯å®¢æˆ·ç«¯ä¸æŸä¸ªå…·ä½“çš„æœåŠ¡å»ºç«‹äº†é•¿è¿æ¥ï¼Œè€Œè¿æ¥åˆä¸ä¼šæ–­å¼€ï¼Œä»è€Œå¯¼è‡´äº†æŒç»­çš„æµé‡å€¾æ–œé—®é¢˜ã€‚
:::</p><p>é€‰æ‹©æœ‰æ•ˆçš„ gRPC è´Ÿè½½å‡è¡¡æ–¹æ¡ˆï¼Œæ˜¯è§£å†³æˆ‘ä»¬å½“å‰é—®é¢˜çš„æ ¸å¿ƒã€‚</p><p>å…·ä½“è§£å†³çš„æ–¹æ³•æœ‰å¤šç§ï¼Œæˆ‘ä»¬ä¸»è¦å°†å…¶åˆ†ä¸ºï¼š  </p><ul><li>ç”¨æˆ·ä¾§çš„è´Ÿè½½å‡è¡¡</li><li>æœåŠ¡ä¾§çš„è´Ÿè½½å‡è¡¡</li></ul><h2>gRPC è´Ÿè½½å‡è¡¡ - ç”¨æˆ·ä¾§</h2><p>ç”¨æˆ·ä¾§çš„ gRPC è´Ÿè½½å‡è¡¡ï¼Œæ˜¯é€šè¿‡ DNSï¼Œä½¿ç”¨æˆ·è§£æå‡ºå…¨éƒ¨çš„ gRPC æœåŠ¡åœ°å€ï¼Œç„¶åç”¨æˆ·è‡ªå·±å®ç°è´Ÿè½½ç­–ç•¥ã€‚
æœ€ç®€å•çš„ç­–ç•¥å°±æ˜¯ä¸æ¯ä¸ªæœåŠ¡å»ºç«‹ gRPC è¿æ¥ï¼Œç„¶åè½®è¯¢è®¿é—®ï¼Œå®ç° rr è´Ÿè½½ã€‚</p><p><img src="client-load-balancer.png"/></p><p>è¯¥æ–¹æ¡ˆå®æ–½èµ·æ¥æ¯”è¾ƒå®¹æ˜“ï¼Œä½†å¯¹äºç”¨æˆ·ä¾§æœ‰ä¸€å®šçš„è¦æ±‚ã€‚å¦‚ï¼š</p><ul><li>å®‰å…¨æ–¹é¢ï¼Œè¦è€ƒè™‘ç”¨æˆ·çš„å¯é æ€§ã€‚</li><li>æ›´æ–°ç­–ç•¥ï¼Œè§£æ DNS è™½æœ‰ç°æˆçš„æ–¹æ¡ˆï¼Œä½†æ˜¯å¸¸è§„æ–¹æ¡ˆä¸€èˆ¬æ— æ³•æ¢çŸ¥åˆ°åç»­æ–°åˆ›å»ºçš„æœåŠ¡ï¼Œæ‰€ä»¥éœ€è¦è®¾è®¡æ›´æ–°ç­–ç•¥ã€‚</li></ul><h2>gRPC è´Ÿè½½å‡è¡¡ - æœåŠ¡ä¾§</h2><p>æœåŠ¡ä¾§çš„ gRPC è´Ÿè½½å‡è¡¡ï¼Œéœ€è¦å¼•å…¥ä¸€ä¸ªè´Ÿè½½å‡è¡¡ä»£ç†ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <code>Load Balancer</code>ï¼Œ
ç”¨æˆ·å‘ LB å‘èµ· RPC è¯·æ±‚ï¼Œç„¶åç”±è¯¥ LB å°† RPC åˆ†é…åˆ°ä¸€ä¸ªå¯ç”¨çš„åç«¯æœåŠ¡å™¨ä¸Šï¼Œ
ç”±è¯¥æœåŠ¡å™¨æä¾› gRPC æœåŠ¡ï¼Œå¹¶å°†è´Ÿè½½æƒ…å†µæŠ¥å‘Šç»™ LBï¼Œè¿›ä¸€æ­¥è¡¥å…¨ LB çš„è´Ÿè½½ä¿¡æ¯ã€‚
<img src="server-load-balancer.png"/></p><p>åœ¨è¯¥æ–¹æ¡ˆä¸­ï¼Œè´Ÿè½½å‡è¡¡ç”± LB ç»Ÿä¸€ç®¡ç†ï¼Œæœ‰ä¸€å®šçš„å®æ–½éš¾åº¦ã€‚<br/>
<!-- -->é™¤éèƒ½æ‰¾åˆ°é«˜ star çš„å¼€æºé¡¹ç›®ï¼Œä¸ç„¶å¼€å‘ä¸è¿ç»´å°±æ˜¯ä¸€ç¬”ä¸å°çš„æŠ•å…¥ã€‚</p><h2>æ–¹æ¡ˆé€‰æ‹©</h2><p>è€ƒè™‘åˆ°å®æ–½éš¾åº¦ï¼Œæˆ‘ä»¬é€‰æ‹©äº†ç”¨æˆ·ä¾§çš„è´Ÿè½½å‡è¡¡æ–¹å¼ã€‚</p><p><strong>é¦–å…ˆè¦è§£å†³ DNS çš„è§£æä¸è´Ÿè½½</strong>ï¼Œè¿™ä¸€å—ï¼Œå®˜æ–¹å·²ç»å°è£…äº† gRPC SDKï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç®€å•å‡çº§ SDK å³å¯å®ç°è¯¥åŠŸèƒ½ã€‚</p><p><strong>å…¶æ¬¡å°±æ˜¯æœåŠ¡å‘ç°è¿™ä¸€å—äº†</strong>ã€‚è§£å†³çš„æ–¹æ¡ˆä¹Ÿæœ‰ä¸¤ç§ï¼š<br/>
<!-- -->1ã€æœåŠ¡ç«¯å®ç°ï¼šMaxConnectionAgeã€‚å®šæœŸæ–­å¼€è¿æ¥ï¼Œä»è€Œè§¦å‘å®¢æˆ·ç«¯é‡è§£æã€‚<br/>
<!-- -->2ã€å®¢æˆ·ç«¯å®ç°ï¼šKubeResolverã€‚å®¢æˆ·ç«¯æ¥å…¥ k8s api ä»è€Œå®ç°æœåŠ¡å‘ç°ã€‚   </p><p>:::note MaxConnectionAge
MaxConnectionAge æ˜¯ gRPC æœåŠ¡ç«¯çš„å‚æ•°ï¼Œç”¨äºæŒ‡å®šé•¿è¿æ¥æœ€å¤§ä¿æŒæ—¶é—´ã€‚<br/>
<!-- -->é…ç½®è¯¥å‚æ•°ä¼šä½¿å¾—é•¿è¿æ¥å˜æˆâ€œçŸ­â€è¿æ¥ï¼Œæ•…æ€§èƒ½ä¼šæœ‰ä¸€å®šçš„é™ä½ã€‚</p><p>è¯¥æ–¹æ¡ˆçš„åŸç†æ˜¯ï¼Œé€šè¿‡å®šæœŸé‡Šæ”¾è¿æ¥ï¼Œä½¿å¾—å®¢æˆ·ç«¯é‡æ–°è§£æ DNS è·å–æœ€æ–°çš„æœåŠ¡åœ°å€ã€‚
:::</p><p>:::note KubeResolver
è¯¥æ–¹æ¡ˆçš„åŸç†æ˜¯é€šè¿‡ç›‘å¬ k8s çš„ api èµ„æºçŠ¶æ€ï¼Œå®æ—¶è·å– gRPC æœåŠ¡èµ„æºä¿¡æ¯ï¼Œä»è€Œå®ç°æ£€æµ‹æ›´æ–°ã€‚
:::</p><p>ç»¼åˆè€ƒè™‘åï¼Œæœ€ç»ˆé€‰æ‹©äº† MaxConnectionAge æ–¹æ¡ˆï¼Œå› ä¸ºæ­¤æ–¹æ¡ˆä»…ä»…é€šè¿‡é€‚é…å‚æ•°å°±å¯ä»¥å®Œæˆé¢„æœŸåŠŸèƒ½ï¼Œè™½ç„¶ç•¥æ˜¾åƒµç¡¬ï¼Œä½†å®é™…ä¸Šæ•ˆæœè¿˜ä¸é”™ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[gRPC åŸç†åŠä½¿ç”¨]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/12/gRPCåŸç†</link>
            <guid>gRPC åŸç†åŠä½¿ç”¨</guid>
            <pubDate>Sun, 12 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[<!--]]></description>
            <content:encoded><![CDATA[<p>RPC æ˜¯ <code>Remote Procedure Call</code> çš„ç¼©å†™ï¼Œå³<strong>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨</strong>ã€‚<br/>
<!-- -->ä¸€èˆ¬ RPC æ¡†æ¶ä¼šå±è”½åº•å±‚çš„åºåˆ—åŒ–æ–¹å¼å’Œä¼ è¾“æ–¹å¼ï¼Œè®©æœåŠ¡è°ƒç”¨è€…å¯ä»¥åƒè°ƒç”¨æœ¬åœ°æ¥å£ä¸€æ ·è°ƒç”¨è¿œç¨‹çš„æœåŠ¡ã€‚</p><p>ä¸šç•Œä¸»æµçš„ RPC æ¡†æ¶ä¸»è¦æœ‰ï¼š<br/>
<!-- -->1ã€Google çš„ gRPCï¼ŒåŸºäº HTTP2 å®ç°ï¼Œæ˜¯æ”¯æŒå¤šè¯­è¨€çš„ RPC æ¡†æ¶ã€‚<br/>
<!-- -->2ã€é˜¿é‡Œçš„ Dubboï¼Œåº•å±‚ç”± RPC å®ç°ï¼Œæ˜¯å¯ä»¥ç”¨äºå®ç°å¾®æœåŠ¡æ²»ç†çš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ã€‚   </p><p>æœ¬æ–‡ä¸»è¦å­¦ä¹  gRPC çš„ç›¸å…³åŸç†åŠå…¶ä½¿ç”¨ã€‚  </p><h2>gRPC æ­ç§˜</h2><p>è¯´åˆ° gRPCï¼Œæˆ‘ä»¬è„‘æµ·ä¸­ç¬¬ä¸€ååº”å¯èƒ½å°±æ˜¯ï¼šGoogle å‡ºå“ï¼Œå¿…å±ç²¾å“~ğŸ˜ƒ<br/>
<!-- -->é™¤æ­¤ä¹‹å¤–ï¼Œå¯èƒ½è¿˜æœ‰ä¸€äº›ä¾‹å¦‚ HTTP2ã€<code>protocol buffers</code> ç­‰ç±»ä¼¼çš„å…³é”®è¯ã€‚</p><p>è™½ç„¶è¯´è„‘æµ·ä¸­æœ‰å¾ˆå¤šå…³äº gRPC çš„æè¿°ä¸ç‰¹ç‚¹ï¼Œä½†æ€»<strong>æ„Ÿè§‰è¯´ä¸æ¸… gRPC åˆ°åº•æ˜¯ä»€ä¹ˆ</strong>ã€‚</p><p>å…¶å®ï¼Œå’Œå…¶ä»– RPC æ¡†æ¶ä¸€æ ·ï¼ŒgRPC ä¹Ÿæœ‰ä¸€ä¸ªç†å¿µï¼š<br/>
<!-- -->å®šä¹‰ä¸€ä¸ªæœåŠ¡ï¼ŒæŒ‡å®šå…¶èƒ½å¤Ÿè¢«è¿œç¨‹è°ƒç”¨çš„æ–¹æ³•ã€å‚æ•°ã€å“åº”ç­‰ã€‚
åœ¨æœåŠ¡ç«¯å®ç°è¿™ä¸ªæ¥å£ï¼Œå¹¶è¿è¡Œä¸€ä¸ª gRPC æœåŠ¡å™¨æ¥å¤„ç†å®¢æˆ·ç«¯çš„è°ƒç”¨ã€‚
ä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿåƒæœ¬åœ°ä¸€æ ·è°ƒç”¨è¿œç¨‹æœåŠ¡ç«¯çš„æ–¹æ³•ã€‚</p><p>æ•´ä½“æ¥çœ‹ï¼ŒgRPC å°±æ˜¯ä¸€ä¸ª RPC æ¡†æ¶ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ª<strong>åŸºäºHTTP2ã€æ”¯æŒ<code>protocol buffers</code>åºåˆ—åŒ–æœºåˆ¶ã€æ”¯æŒå¤šè¯­è¨€çš„ã€é«˜æ€§èƒ½çš„ã€é¢å‘æœåŠ¡ç«¯å’Œç§»åŠ¨ç«¯</strong>çš„é«˜çº§RPCæ¡†æ¶ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ° gRPC çš„æ ‡ç­¾éå¸¸å¤šã€‚é‚£å®ƒåŒºåˆ«äºå¸¸è§„ RPC æ¡†æ¶çš„äº®ç‚¹æ˜¯ä»€ä¹ˆ?</p><p>å¦‚æœä½ ç”¨è¿‡ gRPCï¼Œé‚£ä½ ä¸€å®šæ¥è§¦è¿‡ <code>.proto</code> æ–‡ä»¶ï¼Œè¿™æ˜¯ gRPC çš„äº®ç‚¹ä¹‹ä¸€ï¼Œå³ <code>protocol buffers</code> æœºåˆ¶ã€‚    </p><p><img src="./landing-2.svg"/></p><h2>protocol buffers</h2><p><code>protocol buffers</code> æ˜¯ä¸€ç§åºåˆ—åŒ–æœºåˆ¶ï¼Œç±»ä¼¼ JSONï¼Œåªæ˜¯å®ƒæ›´å°æ›´å¿«ï¼Œå¹¶ä¸”ä¸ç”Ÿæˆçš„æœ¬åœ°ä»£ç ç»‘å®šã€‚</p><p>åœ¨å­¦ä¹  <code>protocol buffers</code> ä¹‹å‰ï¼Œå¿…é¡»è¦å…ˆå­¦ä¹ å¹¶äº†è§£ proto çš„ç›¸å…³è§„èŒƒã€‚</p><h3>å®šä¹‰ message</h3><p>æ‰€è°“æ¶ˆæ¯ç±»å‹ï¼Œå³ message ç±»å‹ã€‚</p><pre><code class="language-proto">syntax = &quot;proto3&quot;;

message ConstantRequest {
  string one = 1;
  int32 two = 2;
  float three = 3;
}
</code></pre><p>åœ¨ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼š</p><ul><li>æ–‡ä»¶ç¬¬ä¸€è¡ŒæŒ‡å®š <code>proto3</code> è¯­æ³•ï¼Œæ²¡æœ‰åˆ™é»˜è®¤ä½¿ç”¨ <code>proto2</code>è¯­æ³•ã€‚</li><li>æ–‡ä»¶åé¢å®šä¹‰äº†ä¸€ä¸ª <code>ConstantRequest</code> çš„æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯æŒ‡å®šäº†ä¸‰ä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µåŒ…æ‹¬ï¼šç±»å‹ã€åç§°ã€å€¼ï¼Œè¿™ä¸‰ä¸ªå­—æ®µéƒ½æ˜¯<strong>æ ‡é‡å­—æ®µ</strong>ï¼ˆintã€floatã€boolç­‰ï¼‰ã€‚</li></ul><p>åœ¨å®šä¹‰å­—æ®µæ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›å¾ˆç‰¹æ®Šçš„åœ°æ–¹ï¼Œå°±æ˜¯è¿™äº›æ•°å­—ç¼–å·ï¼ˆ1ã€2ã€3ï¼‰ã€‚<br/>
<!-- -->åœ¨ proto çš„ä¸€ä¸ªæ¶ˆæ¯ä¸­ï¼Œæ¯ä¸€ä¸ªå­—æ®µéƒ½åº”è¯¥è¢«<strong>åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ç¼–å·</strong>ï¼Œè¿™äº›ç¼–å·ï¼Œç”¨äºåœ¨äºŒè¿›åˆ¶æ¶ˆæ¯ä¸­æ ‡è¯†å¹¶åŒºåˆ†å¯¹åº”å­—æ®µï¼Œå¯ä»¥ç†è§£ä¸ºç¼–ç å…³é”®å­—ã€‚
è€…å¯¹äºé‚£äº›æœ‰ç€å¾ˆé•¿å­—æ®µçš„æ¶ˆæ¯æ¥è¯´ï¼Œæ˜¯å‡å°ä½“ç§¯çš„ä¸€ç§æ–¹å¼ã€‚</p><p>æ‰€ä»¥å­—æ®µç¼–å·åœ¨protoä¸­å¾ˆé‡è¦ï¼Œ1-15 ç¼–ç å æ®ä¸€ä¸ªå­—èŠ‚ï¼Œè¿™15ä¸ªå­—æ®µåº”è¯¥å°½å¯èƒ½çš„åˆ†é…ç»™å‡ºç°è¾ƒé¢‘ç¹çš„æ¶ˆæ¯å…ƒç´ ã€‚<br/>
<!-- -->é™¤æ­¤ä¹‹å¤–ï¼Œä¸€æ—¦æ¶‰åŠåˆ°å­—æ®µç¼–ç çš„å˜æ›´ï¼Œéœ€è¦å°¤å…¶å°å¿ƒï¼Œä¸ç„¶ä¼šå¼•èµ·æ„æƒ³ä¸åˆ°çš„å‘ï¼ŒåŒ…æ‹¬æ•°æ®æŸåã€éšç§é”™è¯¯ç­‰ã€‚   </p><p>ä¸€èˆ¬å°½å¯èƒ½çš„é¿å…å˜æ›´å­—æ®µç¼–ç ï¼Œå¦‚æœçœŸçš„éœ€è¦å˜æ›´ï¼Œå¯ä»¥é‡‡ç”¨ <code>reserved</code> å…³é”®å­—æ¥å¤„ç†ã€‚</p><pre><code class="language-go">message Foo {
  reserved 2, 15, 9 to 11;
  reserved &quot;foo&quot;, &quot;bar&quot;;
}
</code></pre><h3>å®šä¹‰ service</h3><pre><code class="language-go">syntax = &quot;proto3&quot;;

service HelloService {
  rpc SayHello (HelloRequest) returns (HelloResponse);
}

message HelloRequest {
  required string greeting = 1;
}

message HelloResponse {
  required string reply = 1;
}
</code></pre><p>æœåŠ¡ç±»å‹å³ <code>service</code> ç±»å‹ã€‚åŒæ—¶ï¼ŒgRPC å…è®¸ä½ å®šä¹‰å››ç±»æœåŠ¡æ–¹æ³•ï¼š</p><pre><code class="language-go" metastring="title=&quot;å•æ¬¡å“åº”&quot;" title="&quot;å•æ¬¡å“åº”&quot;">rpc SayHello(HelloRequest) returns (HelloResponse){
}
</code></pre><pre><code class="language-go" metastring="title=&quot;æœåŠ¡ç«¯æµå¼ RPC&quot;" title="&quot;æœåŠ¡ç«¯æµå¼">rpc LotsOfReplies(HelloRequest) returns (stream HelloResponse){
}
</code></pre><pre><code class="language-go" metastring="title=&quot;å®¢æˆ·ç«¯æµå¼ RPC&quot;" title="&quot;å®¢æˆ·ç«¯æµå¼">rpc LotsOfGreetings(stream HelloRequest) returns (HelloResponse) {
}
</code></pre><pre><code class="language-go" metastring="title=&quot;åŒå‘æµå¼ RPC&quot;" title="&quot;åŒå‘æµå¼">rpc BidiHello(stream HelloRequest) returns (stream HelloResponse){
}
</code></pre><h3>å®šä¹‰ enum</h3><p>åœ¨å®šä¹‰æ¶ˆæ¯æ—¶ï¼Œæœ‰æ—¶å¸Œæœ›æŸå­—æ®µï¼Œæ˜¯å±äºé¢„å®šä¹‰å€¼ä¹‹ä¸€ã€‚è¿™æ—¶æšä¸¾å­—æ®µå¯ä»¥èµ·åˆ°å¾ˆå¥½çš„ä½œç”¨ã€‚</p><pre><code class="language-go" metastring="{2,6}">message SearchRequest {
  enum Corpus {
    UNIVERSAL = 0;
    WEB = 1;
    LOCAL = 2;
  }
  Corpus corpus = 1;
}
</code></pre><h3>å®šä¹‰åµŒå¥—ç±»å‹</h3><p>å­—æ®µç±»å‹å¯ä»¥æ˜¯å…¶ä»–æ¶ˆæ¯ç±»å‹ã€‚</p><pre><code class="language-go" metastring="{2}">message SearchResponse {
  repeated Result results = 1;
}

message Result {
  string url = 1;
  string title = 2;
  repeated string snippets = 3;
}
</code></pre><h3>å®šä¹‰ repeated</h3><p>åœ¨æ­¤å¤„ <code>repeated</code> å­—æ®µè¡¨ç¤ºæ­¤å¤„æ¥æ”¶ä¸€ä¸ªæ•°ç»„ç±»å‹ã€‚</p><pre><code class="language-go" metastring="{2}">message SearchResponse {
  repeated Result results = 1;
}

message Result {
  string url = 1;
  string title = 2;
  repeated string snippets = 3;
}
</code></pre><h3>å®šä¹‰ any</h3><p>ä»»æ„ç±»å‹æ¯”è¾ƒç‰¹æ®Šï¼Œéœ€è¦å¯¼å…¥å…¶ä»–åŒ…ï¼š<code>google/protobuf/any.proto</code>ã€‚</p><pre><code class="language-go" metastring="{1ï¼Œ5}">import &quot;google/protobuf/any.proto&quot;;

message ErrorStatus {
  string message = 1;
  repeated google.protobuf.Any details = 2;
}
</code></pre><h3>å®šä¹‰ oneof</h3><p>å½“å­˜åœ¨åŒ…å«å¤šä¸ªå­—æ®µçš„æ¶ˆæ¯ï¼Œå¹¶ä¸”æœ€å¤šåŒæ—¶è®¾ç½®å…¶ä¸­æŸä¸€ä¸ªå­—æ®µæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ oneof èŠ‚çœå†…å­˜ã€‚</p><pre><code class="language-go" metastring="{2}">message SampleMessage {
  oneof test_oneof {
    string name = 4;
    string sub_message = 9;
  }
}
</code></pre><h3>å®šä¹‰ map</h3><pre><code class="language-go" metastring="{2}">message SampleMessage {
  map&lt;string, Project&gt; projects = 3;
}

message Project {
  string message = 1;
}
</code></pre><h3>å®šä¹‰ package</h3><pre><code class="language-go">option go_package = &quot;pb&quot;;
</code></pre><h2>ç”Ÿæˆä»£ç </h2><pre><code class="language-shell" metastring="script">protoc --proto_path=IMPORT_PATH --python_out=DST_DIR --go_out=DST_DIR file.proto
</code></pre><ul><li>IMPORT_PATHæŒ‡å®š.protoè§£æimportæŒ‡ä»¤æ—¶åœ¨å…¶ä¸­æŸ¥æ‰¾æ–‡ä»¶çš„ç›®å½•ã€‚å¦‚æœçœç•¥ï¼Œåˆ™ä½¿ç”¨å½“å‰ç›®å½•ã€‚</li><li>--proto_pathï¼šå¤šæ¬¡ä¼ é€’è¯¥é€‰é¡¹å¯ä»¥æŒ‡å®šå¤šä¸ªå¯¼å…¥ç›®å½•ã€‚ä»–ä»¬å°†è¢«æŒ‰é¡ºåºæœç´¢ã€‚<ul><li><code>-I=IMPORT_PATH</code> æ˜¯ <code>--proto_path</code> çš„ç®€å†™å½¢å¼ã€‚</li><li>IMPORT_PATH æ˜¯æŒ‡å®š.protoè§£æimportæŒ‡ä»¤æ—¶åœ¨å…¶ä¸­æŸ¥æ‰¾æ–‡ä»¶çš„ç›®å½•ã€‚</li></ul></li><li>--go_outï¼šç”Ÿæˆ Go ä»£ç DST_DIRã€‚</li><li>--python_outï¼šç”Ÿæˆ Python ä»£ç DST_DIRã€‚</li><li>file.protoï¼šå¿…é¡»æä¾›ä¸€ä¸ªæˆ–å¤šä¸ª.protoæ–‡ä»¶ä½œä¸ºè¾“å…¥ã€‚.protoå¯ä»¥ä¸€æ¬¡æŒ‡å®šå¤šä¸ªæ–‡ä»¶ã€‚å°½ç®¡æ–‡ä»¶æ˜¯ç›¸å¯¹äºå½“å‰ç›®å½•å‘½åçš„ï¼Œä½†æ¯ä¸ªæ–‡ä»¶å¿…é¡»ä½äºå…¶ä¸­ä¸€ä¸ªIMPORT_PATHs ä¸­ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨å¯ä»¥ç¡®å®šå…¶è§„èŒƒåç§°ã€‚</li></ul><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å…³äºå‰¯ä¸šçš„ä¸€äº›æ€è€ƒ]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/10/å…³äºå‰¯ä¸šçš„ä¸€äº›æ€è€ƒ</link>
            <guid>å…³äºå‰¯ä¸šçš„ä¸€äº›æ€è€ƒ</guid>
            <pubDate>Fri, 10 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[æ‰€è°“å‰¯ä¸šï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æ‰“å¤šä»½å·¥...]]></description>
            <content:encoded><![CDATA[<p>æ‰€è°“å‰¯ä¸šï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æ‰“å¤šä»½å·¥...</p><p>ä¸€å®šè¦å’Œæ‰“å·¥åŒºåˆ«å¼€æ¥çš„è¯ï¼Œå¯èƒ½å°±æ˜¯æˆ‘ä»¬å¦‚ä»Šæ‰€è¯´çš„å‰¯ä¸šï¼Œæ›´å¤šçš„å¸¦ä¸Šäº†å¯¹äººç”Ÿè§„åˆ’çš„ä¸€äº›æ€è€ƒã€‚</p><h2>çŸ¥é“æƒ³åšä»€ä¹ˆ</h2><p>çŸ¥é“è‡ªå·±æƒ³åšä»€ä¹ˆï¼Œæ°¸è¿œæ˜¯ç¬¬ä¸€æ­¥ã€‚</p><p>æˆ‘ä»¬å¸¸å¸¸å¬åˆ°åˆ«äººé«˜è°ˆè‡ªå·±çš„&quot;è§„åˆ’&quot;ï¼Œå…¶å®&quot;è§„åˆ’&quot;å¹¶ä¸ç¥ç§˜ã€‚<br/>
<!-- -->ä½ å¯ä»¥æŠŠä»–ç†è§£ä¸ºä¸€äº›ç®€å•çš„æƒ³æ³•ï¼Œæˆ–è€…è¯´æ˜¯å¯¹æœªæ¥çš„ä¸€äº›æƒ³æ³•ï¼Œä»–ä»¬å¯ä»¥æ˜¯æƒ³åšçš„äº‹ï¼Œä¹Ÿå¯ä»¥æ˜¯æƒ³å»çš„åœ°æ–¹...   </p><p>ä½†äº‹å®æ˜¯å¾ˆå¤šäººä¸çŸ¥é“æƒ³åšä»€ä¹ˆã€‚<br/>
<!-- -->æˆ‘ä»¬çš„ç¬¬ä¸€ä»½å·¥ä½œï¼Œå¾€å¾€å’Œæˆ‘ä»¬ç¬¬ä¸€å­¦å†ä¸“ä¸šæŒ‚é’©ã€‚<br/>
<!-- -->è€Œå¤§å­¦æ¯•ä¸šåï¼Œæ¯•ä¸šç”ŸçœŸæ­£çŸ¥é“è‡ªå·±åº”è¯¥å¹²ä»€ä¹ˆçš„ï¼Œå…¶å®å¯¥å¯¥æ— å‡ ã€‚ç”šè‡³å¯èƒ½å·¥ä½œä¸¤ä¸‰å¹´åæ‰çªç„¶é†’æ‚Ÿåº”è¯¥è½¬æŠ•å…¶ä»–è¡Œä¸šã€‚</p><p>æ¯”å¦‚æˆ‘æœ¬äººæ˜¯å·¥ç¨‹ç®¡ç†å­¦ä¸“ä¸šï¼Œä½†æˆ‘æ¯•ä¸šåå°±æŠ•å…¥åˆ°äº†äº’è”ç½‘è¡Œä¸šï¼Œå› ä¸ºæˆ‘çŸ¥é“æˆ‘ä¸å–œæ¬¢è¿›å·¥å‚ï¼Œç›¸åæˆ‘å¾ˆå–œæ¬¢è®¡ç®—æœºç¼–ç¨‹ã€‚<br/>
<!-- -->è€Œæˆ‘çš„å¤§éƒ¨åˆ†åŒå­¦ï¼Œæ¯•ä¸šä¸¤ä¸‰å¹´åä¹Ÿé™†é™†ç»­ç»­çš„è½¬è¡Œ...</p><p>æ‰€ä»¥ï¼Œæˆ‘è§‰å¾—å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯è¦æƒ³æ¸…æ¥šè‡ªå·±ç°é˜¶æ®µåˆ°åº•éœ€è¦åšä»€ä¹ˆã€‚<br/>
<!-- -->ä½ éœ€è¦å»å°è¯•åšä¸€ä¸ªå†³å®šï¼Œè¿™ä¹Ÿè®¸è¿™ä¸æ˜¯ä¸€ä¸ªé•¿æœŸçš„å†³å®šï¼Œä½†æ˜¯å®ƒåº”è¯¥æ˜¯ç°é˜¶æ®µä½ èƒ½å¤Ÿç¨³å®šæŠ•å…¥ç²¾åŠ›çš„ä¸€ä¸ªå†³å®šã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œä¹Ÿä¸éœ€è¦è€ƒè™‘ä»€ä¹ˆä¸»ä¸šå‰¯ä¸šï¼Œèƒ½åšå¥½ä¸€ä»¶å°±å·²ç»å¾ˆäº†ä¸èµ·äº†ã€‚</p><h2>ä¸ºä»€ä¹ˆéœ€è¦å‰¯ä¸š</h2><p>é‚£ä¸ºä»€ä¹ˆç°åœ¨åˆæœ‰è¿™ä¹ˆå¤šäººé€‰æ‹©å‰¯ä¸šå‘¢ï¼Ÿ</p><p>ä»¥æˆ‘è‡ªå·±çš„æƒ…å†µæ¥è¯´ï¼Œæ¯«æ— ç–‘é—®ï¼Œæ˜¯å…¸å‹çš„å±äºéœ€è¦ä¾é æ‰“å·¥æ¥ç»´æŒç”Ÿè®¡çš„ç¾¤ä½“ã€‚ä¸ªäººç¡åæ”¶å…¥çº¯é é“¶è¡Œåˆ©æ¯ï¼Œå·¥ä½œçš„æœ¬è´¨æ˜¯ä¸ºäº†æ··å£é¥­åƒã€‚<br/>
<!-- -->å½“ç„¶æˆ‘æ²¡æœ‰å‰¯ä¸šï¼Œå› ä¸ºäº’è”ç½‘å¹¶ä¸ç®—ç‰¹åˆ«è½»æ¾ï¼Œæˆ‘ä¸ªäººæ—¶é—´ä¹Ÿå¹¶ä¸æ˜¯å¾ˆå……è£•ï¼Œå¾ˆéš¾èŠ±æ—¶é—´å»æ‰“ç¬¬äºŒä»½å·¥ã€‚
å†µä¸”äº’è”ç½‘æ”¶å…¥ç›¸å¯¹æ¥è¯´æ˜¯å¯ä»¥çš„ã€‚   </p><p>ç„¶è€Œï¼Œè¿™ä¸€åˆ‡åœ¨æˆ‘ä¹°æˆ¿ä¹‹åå°±æ”¹å˜äº†...<br/>
<!-- -->è¯•æƒ³ï¼Œå½“ä½ çš„ä¸€åŠç”šè‡³ä¸€å¤§åŠæ”¶å…¥ï¼Œå…¨éƒ¨ç”¨äºè¿˜è´·äº†ï¼Œè¿˜å¾—è¿˜ä¸‰åå¹´ï¼Œä¸€è‚¡æœ‰å½¢çš„å‹åŠ›ç¬é—´å‹å¾—äººå–˜ä¸è¿‡æ°”æ¥ã€‚  </p><p>æ‰€ä»¥å¹¶ä¸æ˜¯æˆ‘å¾ˆé—²ï¼Œé—²çš„è¦å»æ‰¾ä¸€ä»½å‰¯ä¸šæ¥å……å®è‡ªå·±ï¼Œè€Œæ˜¯æˆ‘å¾ˆéœ€è¦ç¬¬äºŒä»½æ”¶å…¥æ¥å……å®è‡ªå·±...<br/>
<!-- -->ç°åœ¨ç¤¾ä¼šå¤§ç¯å¢ƒåˆä¸å¥½ï¼Œå·¥èµ„è¿‡ä¸‡ï¼Œä½ å¯ä»¥æ‰“è´¥å…¨å›½ä¸€åŠä»¥ä¸Šçš„æ‰“å·¥ç¾¤ä½“ï¼Œä½†åœ¨ä¸€äºŒçº¿åŸå¸‚çš„æˆ¿ä»·ç‰©ä»·é¢å‰ï¼Œå°±æ˜¯ä¸ªå±ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘æƒ³åˆ°çš„èƒ½åšæŒå‘å±•å‰¯ä¸šçš„äººç¾¤ï¼š<br/>
<strong>1ã€</strong>å…¥ä¸æ•·å‡ºã€‚<br/>
<strong>2ã€</strong>é—²ä¸ä¸‹æ¥ã€‚<br/>
<strong>3ã€</strong>ä¸ªäººçˆ±å¥½ã€‚    </p><p>å¤§éƒ¨åˆ†äººåº”è¯¥æ˜¯å±äºç¬¬ä¸€ç±»å§... ä½†æ•´ä½“æ¥çœ‹ï¼Œæˆ‘è§‰å¾—æ—¶é—´å’Œç²¾åŠ›æ‰æ˜¯æœ€ç»ˆè½åœ°æ‰§è¡Œçš„å†³å®šå› ç´ ã€‚<br/>
<!-- -->å› ä¸ºè¿‡äºé€æ”¯è‡ªå·±çš„ç”Ÿå‘½æ¢æ¥çš„è´¢å¯Œï¼Œå°†æ˜¯ä¸€ç¬”æ— æ³•å¿è¿˜çš„é«˜åˆ©è´·ã€‚  </p><h2>è®¤çŸ¥è‡ªå·±çš„å·¥ä½œé˜¶æ®µ</h2><p>å½“ä½ æœ‰å‘å±•å‰¯ä¸šçš„æƒ³æ³•æ—¶ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®å…ˆæ¢³ç†ä¸‹ä½ è‡ªå·±å½“å‰çš„å·¥ä½œæƒ…å†µï¼Œå¯¹äºä¸€ä»½ç¨³å®šçš„å·¥ä½œï¼Œåº”è¯¥å¤§è‡´æœç€è¿™ä¸ªé˜¶æ®µæ–¹å‘å‘å±•ï¼š  </p><ul><li><strong>ç§¯ç´¯é˜¶æ®µ</strong></li></ul><p>ä¸€èˆ¬æŒ‡ä¸€äº›åˆšå…¥è¡Œçš„åŒå­¦ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µä»–ä»¬éœ€è¦å»ç§¯ç´¯ä¸€äº›å·¥ä½œç»éªŒã€‚</p><p>å¤„äºè¿™ä¸ªé˜¶æ®µæ—¶ï¼Œä¼šæœ‰ä¸€äº›æ¯”è¾ƒæ˜æ˜¾çš„ç‰¹ç‚¹ã€‚<br/>
<!-- -->æ¯”å¦‚ä½ çš„ç®€å†ä¸Šé¢ï¼Œå¯èƒ½éœ€è¦ç¼–é€ å¤§é‡æŠ€èƒ½å’Œé¡¹ç›®ç»éªŒï¼Œä»¥ä¾¿é€šè¿‡ HR çš„ç­›é€‰ã€‚
ä¸€æ—¦é¢è¯•è¢«äººè¿½ç€é—®ç»†èŠ‚æ—¶ï¼Œå°±ä¼šæš´éœ²ã€‚</p><ul><li><strong>ç“¶é¢ˆé˜¶æ®µ</strong></li></ul><p>ä¸€èˆ¬æŒ‡åœ¨æŸä¸ªé¢†åŸŸæœ‰è¶³å¤Ÿçš„ç»éªŒã€‚</p><p>å¤„äºè¿™ä¸ªé˜¶æ®µï¼Œä½ å¯èƒ½ä¸åœ¨éœ€è¦æŠ•é€’ç®€å†å°±èƒ½å¾ˆè½»æ¾çš„æ‰¾åˆ°ä¸€ä»½å·¥ä½œã€‚
å¦‚æœå·¥ä½œä¸å¼€å¿ƒï¼Œä½ ä¹Ÿå¾ˆè‡ªä¿¡å¯ä»¥å¾ˆå¿«æ‰¾åˆ°å¦ä¸€ä»½å·¥ä½œï¼Œè™½ç„¶æ‰¾çš„ä¸ä¸€å®šæ›´å¥½ï¼Œä½†ä¸ç”¨æ‹…å¿ƒå¤±ä¸šé—®é¢˜ã€‚</p><ul><li><strong>æº¢å‡ºé˜¶æ®µ</strong></li></ul><p>ä¸€èˆ¬æŒ‡åœ¨æŸä¸ªé¢†åŸŸæœ‰è¶³å¤Ÿç»éªŒï¼Œåœ¨å…¬å¸ä¹Ÿå¤„äºä¸­é«˜å±‚ã€‚</p><p>ä½ å¯ä»¥å¾ˆè½»æ¾çš„è·å–å·¥ä½œä¹‹å¤–çš„æŠ¥é…¬ï¼Œæ¯”å¦‚å…¬å¸åˆ†çº¢ç­‰ã€‚</p><p>ä¸æ˜¯æ‰€æœ‰çš„å·¥ä½œéƒ½ç¬¦åˆè¿™ä¸‰ä¸ªé˜¶æ®µï¼Œä½†ä¹Ÿå¯ä»¥å¤§è‡´æ¯”ç…§ç€çœ‹çœ‹è‡ªå·±åº”è¯¥å¤„äºä»€ä¹ˆé˜¶æ®µï¼Œå¯¹äºå¤„äºç¬¬ä¸€é˜¶æ®µçš„åŒå­¦ï¼Œæˆ‘å»ºè®®è¿˜æ˜¯å…ˆæŠ•å…¥ç²¾åŠ›å¤„ç†å¥½è‡ªå·±çš„å·¥ä½œï¼Œåœ¨è€ƒè™‘å‘å±•å…¶ä»–å‰¯ä¸šã€‚</p><h2>å…³äºå‰¯ä¸šçš„æ€è€ƒ - ç»™è‡ªå·±</h2><blockquote><p>ä¸èƒ½ç›²ç›®è·Ÿé£ï¼</p></blockquote><p>ä¸ç®¡è¿™å¥è¯é€‚ä¸é€‚ç”¨äºæ‰€æœ‰é¢†åŸŸï¼Œä½†å®ƒä¸€ç›´éƒ½æ˜¯æˆ‘é•¿æœŸä»¥æ¥åšä¿¡çš„ã€‚è™½ç„¶æˆ‘å¾ˆçœ¼çƒ­èƒ½å‘å±•å‰¯ä¸šçš„åŒå­¦ä»¬ï¼Œä½†æ¯”èµ·ç›²ç›®å‘å±•å‰¯ä¸šï¼Œæˆ‘è§‰å¾—æˆ‘åº”è¯¥å…ˆè®¤æ¸…è‡ªå·±çš„æƒ…å†µã€‚</p><p>é¦–å…ˆæœ‰å¾ˆå¤šå‘å±•å‰¯ä¸šçš„äººéƒ½æ˜¯äº‹ä¸šç¼–åˆ¶ï¼Œä»–ä»¬ç›¸å¯¹æ¥è¯´ä¸ªäººæ—¶é—´æ¯”è¾ƒå……è£•ã€‚<br/>
<!-- -->è€Œäº’è”ç½‘ï¼Œæ˜¯ä¸€ä¸ªæ–°å…´æŠ€æœ¯é¢‘ç¹æ›´æ›¿çš„è¡Œä¸šï¼Œä¹Ÿæ˜¯åŠ ç­ä¸¥é‡çš„è¡Œä¸šä¹‹ä¸€ï¼Œæˆ‘æ—¶å¸¸ä¹Ÿæ„Ÿè§‰è‡ªå·±ä¸ªäººæ—¶é—´ä¸æ˜¯å¾ˆå……è£•ã€‚</p><p>å…¶æ¬¡ï¼Œæœ‰éƒ¨åˆ†ç‰›äººè¾¾åˆ°äº†å·¥ä½œçš„ <strong>ç“¶é¢ˆé˜¶æ®µ</strong> ç”šè‡³æ˜¯ <strong>æº¢å‡ºé˜¶æ®µ</strong>ï¼Œä»–ä»¬æœ‰èƒ½åŠ›ã€æœ‰èµ„æºå»æ‰§è¡Œå‰¯ä¸šè®¡åˆ’ã€‚<br/>
<!-- -->è€Œæˆ‘ï¼Œèœé¸Ÿä¸€ä¸ªï¼ŒçŸ­æ—¶é—´å†…æ˜¯å¾ˆéš¾é›„èµ·äº†...</p><p>è¿™æ ·ä¸€çœ‹ï¼Œæˆ‘æ˜¯å®Œå…¨ä¸é€‚åˆå‘å±•å‰¯ä¸šçš„äº†...</p><p>åŸºäºè¿™ç§èƒŒæ™¯ï¼Œç»™è‡ªå·±ä¸€äº›å»ºè®®ï¼š<br/>
<!-- -->1ã€<strong>å¤šæ•´ç†å¹¶æ€»ç»“è‡ªå·±çš„ç¬”è®°ã€‚</strong><br/>
<!-- -->2ã€<strong>æ•´ç†æ–‡æ¡£æ—¶ï¼Œä¼˜åŒ–ä¸‹è‡ªå·±çš„æ–‡ç¬”ï¼Œä¸è¦ä¹±ç³Ÿç³Ÿäº†äº‹ï¼Œè€Œåº”è¯¥å°è¯•ç»™åˆ«äººè®²è¿°æ¸…æ¥šã€‚</strong>      </p><p>è¯´åˆ°åº•ï¼ŒçŸ­æœŸè¿˜æ˜¯åªèƒ½æå‡è½¯å®åŠ›äº†ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Github æ­å»º Docusaurus ç«™ç‚¹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/12/03/Githubæ­å»ºDocusaurusç«™ç‚¹</link>
            <guid>Github æ­å»º Docusaurus ç«™ç‚¹</guid>
            <pubDate>Fri, 03 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ¬æ–‡ç« è®°å½•åŸºäº Docusaurus æ­å»ºé™æ€ç«™ç‚¹ï¼Œå¹¶é€šè¿‡ Github-Actions å®ç°è‡ªåŠ¨éƒ¨ç½²ã€‚]]></description>
            <content:encoded><![CDATA[<p>æœ¬æ–‡ç« è®°å½•åŸºäº Docusaurus æ­å»ºé™æ€ç«™ç‚¹ï¼Œå¹¶é€šè¿‡ Github-Actions å®ç°è‡ªåŠ¨éƒ¨ç½²ã€‚</p><h2>1ã€æ–°å»º Github ä»“åº“</h2><p>é¦–å…ˆï¼Œç™»å½•<a href="https://github.com/new">Githubä»“åº“åˆ›å»ºé¡µé¢</a>ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç©ºç™½ä»“åº“ï¼Œé¡¹ç›®åå‘½åä¸º <code>testDocusaurus</code>ã€‚</p><p>ç„¶åé€šè¿‡ <code>git</code> å°†ä»“åº“æ‹‰å–åˆ°æœ¬åœ°ï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªå…¨æ–°çš„ç©ºç™½ä»“åº“ <code>testDocusaurus</code>ã€‚  </p><p><img src="gitindex.png"/></p><h2>2ã€åˆå§‹åŒ– Docusaurus é¡¹ç›®</h2><blockquote><p><a href="https://docusaurus.io/zh-CN/docs/installation">Docusaurusé¡¹ç›®åˆå§‹åŒ–ç»†èŠ‚è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></p></blockquote><p>è¿›å…¥åˆ°ä»“åº“ <code>testDocusaurus</code> æ‰€åœ¨çš„ç©ºç™½ç›®å½•ï¼Œå¹¶åœ¨æ­¤ç›®å½•æ‰“å¼€ç»ˆç«¯ç•Œé¢ã€‚</p><p>ä¸ºäº†æ›´å¥½çš„å®Œæˆæ¥ä¸‹æ¥çš„æ­¥éª¤ï¼Œä½ å¯èƒ½éœ€è¦é¢„å…ˆå®‰è£…<strong>nodejs</strong>ã€‚åœ¨æ­¤ï¼Œå‡è®¾ä½ å·²ç»å‡†å¤‡å®Œæ¯•ã€‚<br/>
<!-- -->é‚£æˆ‘ä»¬æ¥ä¸‹æ¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤åˆå§‹åŒ–ä¸€ä¸ª <code>Docusaurus</code> é¡¹ç›®ã€‚</p><pre><code class="language-shell" metastring="script">&gt;&gt;&gt; npx create-docusaurus@latest website classic
...
...
Successfully created &quot;website&quot;.
Inside that directory, you can run several commands:

  npm start
    Starts the development server.

  npm run build
    Bundles your website into static files for production.

  npm run serve
    Serves the built website locally.

  npm deploy
    Publishes the website to GitHub pages.

We recommend that you begin by typing:

  cd website
  npm start

Happy building awesome websites!
</code></pre><p>è¯¥æŒ‡ä»¤è¿è¡Œå®Œåï¼Œä¼šè¾“å‡ºä¸€äº›ç®€å•çš„è¿è¡ŒæŒ‡ä»¤ï¼Œè€Œä¸”æˆ‘ä»¬åº”è¯¥å¯ä»¥çœ‹åˆ°ä¸€ä¸ª <code>website</code> çš„ç›®å½•ï¼Œæˆ‘ä»¬å…ˆå°†é‡Œé¢çš„å†…å®¹å‰ªè´´å‡ºæ¥ï¼Œæ”¾åˆ°æˆ‘ä»¬ç©ºç™½ä»“åº“ç›®å½•ä¸‹é¢ã€‚</p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬æŒ‰ç…§æç¤ºï¼Œè¿è¡Œ <code>npm start</code> æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡Œæ­¤é¡¹ç›®ã€‚</p><p>é€šå¸¸å¯åŠ¨ç«¯å£ä¸º3000ï¼Œåˆ™é»˜è®¤è·¯å¾„ä¸ºï¼šhttp://localhost:3000/  </p><p><img src="websiteindex.png"/></p><h2>3ã€æ­å»º Github Actions</h2><blockquote><p>Github Actionséƒ¨ç½²ç»†èŠ‚å‚è€ƒ<a href="https://docusaurus.io/zh-CN/docs/deployment#deploying-to-github-pages">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><p>æ¥å…¥ <code>Github Actions</code> éœ€è¦åˆ›å»ºä¸€å¯¹æ–°çš„ <strong>SSH Key</strong>ï¼Œå¹¶å°†å…¬é’¥å’Œå¯†é’¥å‡é…ç½®åˆ° Githubï¼Œæˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸‹æ“ä½œã€‚</p><p>é¦–å…ˆåˆ›å»ºå¯†é’¥ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œç„¶åå¾—åˆ°å…¬é’¥ï¼ˆid_rsa.pubï¼‰å’Œç§é’¥ï¼ˆid_rsaï¼‰</p><pre><code class="language-shell" metastring="script">&gt;&gt;&gt; ssh-keygen -t rsa -C &quot;email&quot;
...
...
The key&#x27;s randomart image is:
+---[RSA 3072]----+
| .=oo*=o=o.      |
| o+.=o==.o       |
|  .O.O=+o        |
|  ..=o@.oo       |
| . o +.+S+..     |
|  . + . E.o      |
|   o . .         |
|  .              |
|                 |
+----[SHA256]-----+
</code></pre><p>æˆ‘ä»¬æ‰“å¼€ä»“åº“çš„ <code>deploy keys</code>ï¼Œé€‰æ‹©æ–°å¢ï¼Œå°† <code>id_rsa.pub</code> ä¸­çš„å†…å®¹å¤åˆ¶è¿›å»ï¼Œå¹¶é€‰ä¸­ <code>Allow write access</code> æ¡†ï¼Œè¡¨ç¤ºèµ‹äºˆéƒ¨ç½²å†™æƒé™ã€‚
<img src="deploykey.png"/></p><p>æ­¤æ—¶éƒ¨ç½²å…¬é’¥å·²ç»å®Œæˆï¼Œæˆ‘ä»¬å†å°†ç§é’¥ä¹Ÿé…ç½®ä¸Šã€‚æ‰“å¼€åŒçº§é…ç½®ä¸‹çš„ Secretï¼Œé€‰æ‹©æ–°å¢å¯†é’¥ï¼Œ
æˆ‘ä»¬å°†ç§é’¥å†…å®¹å¤åˆ¶åˆ° <code>Value</code> ä¸­ï¼Œè€Œ <code>Name</code> å¡«å†™ <code>GH_PAGES_DEPLOY</code> å³å¯ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬åˆ›å»º <code>Github Actions</code>ï¼Œå°†æ¨¡æ¿å¤åˆ¶è¿›å»ï¼Œåˆ™æ•´ä¸ªæµæ°´çº¿å°±å·²ç»é…ç½®å¥½äº†ã€‚å¤åˆ¶æ—¶ï¼Œå°†å¯¹åº”çš„åŸºç¡€é…ç½®æ”¹ä¸‹å³å¯ï¼Œå¦‚ä¸‹ï¼š</p><pre><code class="language-shell" metastring="script">git config --global user.email &quot;email&quot;
git config --global user.name &quot;name&quot;
</code></pre><p>è¿™é‡Œçš„ <code>email</code> éœ€è¦æ˜¯ github é…ç½®çš„ emailï¼Œè€Œ <code>name</code> åˆ™æ˜¯ github ç”¨æˆ·åã€‚</p><h2>4ã€æ›´æ–°ä»“åº“ï¼Œå°è¯•è‡ªåŠ¨éƒ¨ç½²</h2><p>ç¡®ä¿ Github Pages å·²ç»åˆå§‹åŒ–å¥½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾€ä»“åº“æ¨é€ä¿®æ”¹æ—¶ï¼Œå°±å¯ä»¥è§¦å‘è‡ªåŠ¨éƒ¨ç½²äº†ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å…³äºåç¨‹çš„ä¸€äº›ç†è§£]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/11/27/å…³äºåç¨‹çš„ä¸€äº›ç†è§£</link>
            <guid>å…³äºåç¨‹çš„ä¸€äº›ç†è§£</guid>
            <pubDate>Sat, 27 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[ä»¥ä¸‹åœºæ™¯å‡ä»¥å•æ ¸ cpu ä¸ºä¾‹ã€‚]]></description>
            <content:encoded><![CDATA[<p>ä»¥ä¸‹åœºæ™¯å‡ä»¥å•æ ¸ cpu ä¸ºä¾‹ã€‚</p><h4>å¹¶å‘</h4><p>é€»è¾‘ä¸ŠåŒæ—¶å¤„ç†ä»»åŠ¡çš„èƒ½åŠ›ã€‚</p><p>cpu åœ¨çŸ­æ—¶é—´å†…æ¥å›æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œä½¿å¾—è¿™äº›ä»»åŠ¡çœ‹ä¸Šå»æ˜¯åŒä¸€æ—¶é—´è¿›è¡Œçš„ã€‚<br/>
<!-- -->è¿™ç§å®è§‚æ„ä¹‰ä¸Šæ˜¯åŒæ—¶æ‰§è¡Œï¼Œå¾®è§‚ä¸Šä»ç„¶æ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå¹¶å‘ã€‚</p><h4>å¹¶è¡Œ</h4><p>ç‰©ç†ä¸ŠåŒä¸€æ—¶åˆ»å¤„ç†ä¸åŒä»»åŠ¡ã€‚</p><p>å½“ç³»ç»Ÿå­˜åœ¨å¤šæ ¸ cpuï¼Œä½¿å¾—ä»»åŠ¡å¯ä»¥åŒä¸€æ—¶åˆ»æ‰§è¡Œï¼Œç§°ä¹‹ä¸ºå¹¶è¡Œã€‚</p><h4>è¿›ç¨‹</h4><p>è¿›ç¨‹æ˜¯è®¡ç®—æœºèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚  </p><p>å› ä¸º cpu åœ¨å¤šä»»åŠ¡ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œå¦‚æœä¸æ­£ç¡®ä¿å­˜ä¸Šä¸€ä¸ªä»»åŠ¡çš„ä¸Šä¸‹æ–‡çŠ¶æ€ï¼Œé‚£ä¹ˆä¸‹æ¬¡æ‰§è¡Œæ—¶å°±ä¼šä¸¢å¤±è¿™ä¸ªä»»åŠ¡çš„æ‰§è¡Œä¿¡æ¯ã€‚<br/>
<!-- -->è¿›ç¨‹å°±æ˜¯ç”¨æ¥å®šä¹‰ä»»åŠ¡åŠå…¶èµ„æºè¾¹ç•Œã€‚</p><h4>çº¿ç¨‹</h4><p>çº¿ç¨‹æ˜¯ cpu è°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚</p><h4>åç¨‹</h4><p>åç¨‹æ˜¯ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ã€‚</p><p>åç¨‹æ‹¥æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š<br/>
<!-- -->1ã€è°ƒåº¦ç”±ç”¨æˆ·æ§åˆ¶ã€‚å³åœ¨ç”¨æˆ·æ€è€Œéå†…æ ¸æ€å®Œæˆåç¨‹é—´çš„è°ƒåº¦ã€‚
2ã€æ›´è½»é‡ã€‚åˆ›å»ºä¸€ä¸ªåç¨‹ä»…éœ€è¦å¾ˆå°çš„ç©ºé—´ã€‚<br/>
<!-- -->3ã€åç¨‹æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆç©ºé—´ã€‚   </p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€
:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[golang interface å‘ç‚¹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/11/20/golang-interfaceå‘ç‚¹</link>
            <guid>golang interface å‘ç‚¹</guid>
            <pubDate>Sat, 20 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‘ç‚¹ï¼šinterface == nil]]></description>
            <content:encoded><![CDATA[<h2>å‘ç‚¹ï¼šinterface == nil</h2><pre><code class="language-go">var v interface{}
fmt.Println(v == nil)
v = (*int)(nil)
fmt.Println(v == nil)
</code></pre><p>è¿™æ˜¯ä¸€æ®µç®€å•çš„ä»£ç ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒçš„è¾“å‡ºç»“æœï¼š  </p><pre><code class="language-text">true
false
</code></pre><p>è¿™æ˜¯ä¸€ä¸ªå‘ç‚¹ï¼Œåœ¨ code è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸è®¤ä¸º interface è¢«èµ‹å€¼äº†ä¸€ä¸ªç©ºå€¼ nilï¼Œå†åšåˆ¤æ–­æ—¶ï¼Œå¯ä»¥ç›´æ¥å’Œ nil åšå¯¹æ¯”ã€‚<br/>
<!-- -->æ˜¾ç„¶è¿™æ˜¯é”™è¯¯çš„ï¼Œè¿™æ ·ä¼šå¾—åˆ°ä¸æˆ‘ä»¬é¢„æœŸä¸ç¬¦çš„ç»“æœã€‚ </p><p>è¿™æ˜¯å› ä¸º interface å¹¶ä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç»“æ„ä½“ï¼Œå†…éƒ¨åŒ…å«äº†ä¸¤ç±»æ•°æ®ç»“æ„ï¼š<strong>ç±»å‹</strong> å’Œ <strong>å€¼</strong>ã€‚<br/>
<!-- -->æ‰€ä»¥åœ¨ä¸Šé¢çš„åˆ¤æ–­ä¸­ï¼Œéœ€è¦ç±»å‹å’Œå€¼éƒ½ä¸º nil çš„æ˜¯å¦æ‰ä¼šåˆ¤æ–­æ­£ç¡®ã€‚<br/>
<!-- -->ä¸€æ—¦å¯¹ interface èµ‹äºˆäº†æŸä¸ªç±»å‹æˆ–è€…å€¼ï¼Œå³ä¾¿æ˜¯ç©ºå€¼ï¼Œå½“å†æ¬¡è¿›è¡Œåˆ¤æ–­æ—¶ï¼Œä¹Ÿä¼šå‡ºç°ä»¤äººå›°æƒ‘çš„åœºæ™¯ã€‚   </p><p>é’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œä¸€èˆ¬æ­£ç¡®çš„æ–¹å¼æ˜¯è°ƒç”¨ reflect åå°„åŒ…è¿›è¡Œåˆ¤æ–­ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[golang åˆ‡ç‰‡å‘ç‚¹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/11/19/golangåˆ‡ç‰‡å‘ç‚¹</link>
            <guid>golang åˆ‡ç‰‡å‘ç‚¹</guid>
            <pubDate>Fri, 19 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[åˆ‡ç‰‡æ˜¯ golang ä¸­çš„ä¸€ç§ç‰¹æ®Šç»“æ„ï¼Œç”±æŒ‡å‘æ•°ç»„é¦–ä½çš„æŒ‡é’ˆã€é•¿åº¦ã€å®¹é‡ç»„æˆã€‚]]></description>
            <content:encoded><![CDATA[<p>åˆ‡ç‰‡æ˜¯ golang ä¸­çš„ä¸€ç§ç‰¹æ®Šç»“æ„ï¼Œç”±æŒ‡å‘æ•°ç»„é¦–ä½çš„æŒ‡é’ˆã€é•¿åº¦ã€å®¹é‡ç»„æˆã€‚</p><h2>å‘ç‚¹ï¼šåˆ‡ç‰‡ä¹‹é—´å¯ä»¥ç›¸äº’å½±å“</h2><p>åˆ‡ç‰‡åº•å±‚ä½¿ç”¨äº†æ•°ç»„ç»“æ„ï¼Œå†æ²¡æœ‰è§¦å‘æ‰©å®¹æœºåˆ¶å‰ï¼Œå¤šåˆ‡ç‰‡ä¹‹é—´æ˜¯å¯èƒ½ç›¸äº’å½±å“çš„ã€‚</p><pre><code class="language-go">package main

import &quot;fmt&quot;

func main() {
    base := []int{1, 2, 3, 4, 5}
    base01 := base[0:1]
    base02 := base[0:2]
    fmt.Println(base01, base02)
    base01[0] = 11
    fmt.Println(base01, base02)
}
</code></pre><p>æ­¤æ—¶ä¿®æ”¹ base01 çš„å€¼ï¼Œä¼šç›´æ¥å½±å“ base02 çš„å€¼ã€‚  </p><pre><code class="language-text" metastring="title=&quot;è¾“å‡ºç»“æœ&quot;" title="&quot;è¾“å‡ºç»“æœ&quot;">[11]
[11 2]
</code></pre><p>è¿™æ˜¯å› ä¸ºä»–ä»¬æ­¤æ—¶å…¬ç”¨çš„åº•å±‚æ•°ç»„ã€‚</p><p>:::note æ‰©å®¹æœºåˆ¶</p><pre><code class="language-goalng" metastring="title=&quot;src/runtime/slice.go&quot;" title="&quot;src/runtime/slice.go&quot;">func growslice(et *_type, old slice, cap int) slice {
    ...
    newcap := old.cap
    doublecap := newcap + newcap
    if cap &gt; doublecap {
        newcap = cap
    } else {
        if old.len &lt; 1024 {
            newcap = doublecap
        } else {
            // Check 0 &lt; newcap to detect overflow
            // and prevent an infinite loop.
            for 0 &lt; newcap &amp;&amp; newcap &lt; cap {
                newcap += newcap / 4
            }
            // Set newcap to the requested cap when
            // the newcap calculation overflowed.
            if newcap &lt;= 0 {
                newcap = cap
            }
        }
    }
    ...
}
</code></pre><p>çœ‹æºç å¯ä»¥çœ‹åˆ°ï¼Œå½“åˆ‡ç‰‡é•¿åº¦å°äº 1024 æ—¶ï¼Œæ‰©å®¹æ—¶ç›´æ¥ doubleï¼Œå½“åˆ‡ç‰‡é•¿åº¦å¤§äº 1024 åï¼Œæ¯æ¬¡æ‰©å®¹ä¸ºä¹‹å‰çš„ 1/4ã€‚
:::</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[golang å…³äºç»§æ‰¿çš„å‘ç‚¹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/11/18/golangç»§æ‰¿çš„å‘ç‚¹</link>
            <guid>golang å…³äºç»§æ‰¿çš„å‘ç‚¹</guid>
            <pubDate>Thu, 18 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‡†ç¡®æ¥è¯´ï¼Œgolang æ²¡æœ‰ç»§æ‰¿ï¼Œè€Œæ˜¯ç»„åˆã€‚]]></description>
            <content:encoded><![CDATA[<p>å‡†ç¡®æ¥è¯´ï¼Œgolang æ²¡æœ‰ç»§æ‰¿ï¼Œè€Œæ˜¯ç»„åˆã€‚</p><pre><code class="language-go">package main

import &quot;fmt&quot;

type People struct{}

func (p People) Hello() {
    fmt.Println(&quot;hello&quot;)
    p.CallName()
}

func (p People) CallName() {
    fmt.Println(&quot;my name is people&quot;)
}

type Man struct {
    People
}

func (m Man) CallName() {
    fmt.Println(&quot;my name is man&quot;)
}

func main() {
    (Man{}).Hello()
}
</code></pre><p>è¯¥ä»£ç æœ€ç»ˆè¾“å‡ºçš„éƒ½æ˜¯ç»“æ„ä½“ <code>People</code> å®šä¹‰çš„æ–¹æ³•:</p><pre><code class="language-text" metastring="title=&quot;è¾“å‡ºç»“æœ&quot;" title="&quot;è¾“å‡ºç»“æœ&quot;">hello
my name is people
</code></pre><p>è¿™æ˜¯å› ä¸º <code>p.CallName()</code> æ–¹æ³•åªä¼šè°ƒç”¨è‡ªå·±æˆ–è€…ç»„åˆè¿‡æ¥çš„æ–¹æ³•ã€‚<br/>
<!-- -->é€šè¿‡è¿™ç§åŒ¿åç»„åˆçš„æ–¹å¼ï¼Œè¢«ç»„åˆçš„ç±»å‹ <code>People</code> æ‰€åŒ…å«çš„æ–¹æ³•ï¼Œè™½ç„¶å‡çº§æˆäº†å¤–éƒ¨ç±»å‹ <code>Teacher</code> è¿™ä¸ªç»„åˆç±»å‹çš„æ–¹æ³•ï¼Œä½†æ¥å—è°ƒç”¨çš„æ—¶å€™å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[python ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨ç†è§£]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/11/04/pythonç”Ÿæˆå™¨ä¸è¿­ä»£å™¨ç†è§£</link>
            <guid>python ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨ç†è§£</guid>
            <pubDate>Thu, 04 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[ç”Ÿæˆå™¨]]></description>
            <content:encoded><![CDATA[<h2>ç”Ÿæˆå™¨</h2><p>ç”Ÿæˆå™¨æ˜¯ python ä¸­çš„ä¸€ç§ç‰¹æ®Šå¯¹è±¡ï¼Œå®ƒå¯ä»¥è¿è¡Œæ—¶è¿”å›è®¡ç®—å€¼ï¼Œè€Œä¸ç”¨ä¸€æ¬¡å°†æ‰€æœ‰é€»è¾‘æ‰§è¡Œå®Œã€‚<br/>
<!-- -->ç”Ÿæˆå™¨å®šä¹‰çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š  </p><pre><code class="language-python" metastring="title=&quot;åˆ—è¡¨ç”Ÿæˆå¼ä¸­ [] æ”¹ ()&quot;" title="&quot;åˆ—è¡¨ç”Ÿæˆå¼ä¸­">(x * x for x in range(10))
</code></pre><pre><code class="language-python" metastring="title=&quot;åœ¨å‡½æ•°ä¸­åµŒå…¥ yield&quot;" title="&quot;åœ¨å‡½æ•°ä¸­åµŒå…¥">def fib(max):
    n, a, b = 0, 0, 1
    while n &lt; max:
        yield b
        a, b = b, a + b
        n = n + 1
    return &#x27;done&#x27;
</code></pre><h2>è¿­ä»£å™¨</h2><p>åœ¨ python ä¸­ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰å¯ä»¥ç›´æ¥ç”¨äº for å¾ªç¯çš„å¯¹è±¡ï¼Œç»Ÿç§°ä¸º<strong>å¯è¿­ä»£å¯¹è±¡</strong>ï¼š<code>Iterable</code></p><p>è€Œç”Ÿæˆå™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ï¼Œä¸ä»…å¯ä»¥ç›´æ¥ä½œç”¨äº for å¾ªç¯ï¼Œè¿˜å¯ä»¥è¢« next å‡½æ•°ä¸æ–­è°ƒç”¨è¿”å›ä¸‹ä¸€ä¸ªå€¼ï¼Œç›´è‡³æœ€åæŠ›å‡º StopIteration é”™è¯¯ï¼Œ
è¡¨ç¤ºå·²è·å–åˆ°æœ€åä¸€ä¸ªå€¼ã€‚<br/>
<!-- -->æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†å¯ä»¥è¢« next å‡½æ•°è°ƒç”¨å¹¶ä¸æ–­è¿”å›å€¼çš„å¯¹è±¡ç§°ä¹‹ä¸º <strong>è¿­ä»£å™¨</strong>ï¼š<code>Iterator</code></p><p><code>Iterator</code> å’Œå¸¸è§çš„ listã€map æ¦‚å¿µä¸åŒï¼š<code>Iterator</code> è¡¨ç¤ºçš„æ˜¯æ•°æ®æµï¼Œè€Œä»–ä»¬åˆ™è¡¨ç¤ºä¸€ä¸ªæ•°æ®é›†åˆã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[python åŸºç¡€æ•°æ®ç±»å‹ä¸­éšè—çš„çŸ¥è¯†ç‚¹]]></title>
            <link>https://czasg.github.io/docusaurus/blog/2021/11/03/pythonåŸºç¡€æ•°æ®ç±»å‹</link>
            <guid>python åŸºç¡€æ•°æ®ç±»å‹ä¸­éšè—çš„çŸ¥è¯†ç‚¹</guid>
            <pubDate>Wed, 03 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[æ•´æ•°]]></description>
            <content:encoded><![CDATA[<h2>æ•´æ•°</h2><h4>ä¸ºäº†æ›´å¥½çš„åŒºåˆ†ä½æ•°ï¼Œpython æ”¯æŒä»¥ä¸‹åˆ’çº¿åˆ†å‰²æ•´æ•°ã€‚</h4><pre><code class="language-python">1_000_000_000 == 1000000000
</code></pre><h2>å­—ç¬¦ä¸²</h2><h4>æ ¼å¼åŒ–å­—ç¬¦</h4><ul><li><code>%d</code> è¡¨ç¤ºè¾“å‡ºåè¿›åˆ¶ã€‚</li><li><code>%.2d</code> è¡¨ç¤ºè¾“å‡ºæœ€ä½ä¸¤ä½æœ‰æ•ˆæ•°å­—</li><li><code>%2d</code> è¡¨ç¤ºå®½åº¦ä¸º 2ï¼Œä»¥å³å¯¹é½æ–¹å¼è¾“å‡ºï¼Œå·¦è¾¹ä¸è¶³åˆ™è¡¥ç©ºæ ¼</li><li><code>%02d</code> è¡¨ç¤ºå®½åº¦ä¸º 2ï¼Œä¸è¶³è¡¥ 0</li><li><code>%06.2d</code> è¡¨ç¤ºå®½åº¦ä¸º 6ï¼Œä¿ç•™æœ€ä½ä¸¤ä½æœ‰æ•ˆæ•°å­—ï¼Œä»¥å³å¯¹é½æ–¹å¼è¾“å‡ºï¼Œå·¦è¾¹ä¸è¶³è¡¥ 0</li></ul><h2>å˜é‡</h2><blockquote><p>å˜é‡ï¼ŒæŒ‡å€¼å¯ä»¥å˜çš„é‡ã€‚åœ¨æ•°å­¦ä¸­ï¼Œå˜é‡ä»¥éæ•°å­—çš„ç¬¦å·æ¥è¡¨è¾¾ï¼Œä¸€èˆ¬ç”¨æ‹‰ä¸å­—æ¯ã€‚å˜é‡çš„ç”¨å¤„åœ¨äºèƒ½æŠ½è±¡åŒ–æè¿°ã€‚</p></blockquote><p>åœ¨å¼±ç±»å‹è¯­è¨€ä¸­ï¼Œå˜é‡æœ¬èº«çš„ç±»å‹æ˜¯ä¸å›ºå®šçš„ï¼Œå¯ä»¥æŒ‡å‘ä»»æ„å¯¹è±¡ã€‚<br/>
<!-- -->åœ¨å¼ºç±»å‹è¯­è¨€ä¸­ï¼Œç”³æ˜å˜é‡æ—¶å¿…é¡»è¦æŒ‡å®šå˜é‡ç±»å‹ã€‚</p><br/><p>:::info ğŸ‘‡ğŸ‘‡ğŸ‘‡
<strong>æœ¬æ–‡ä½œè€…:</strong> Czasg<br/>
<strong>ç‰ˆæƒå£°æ˜:</strong> è½¬è½½è¯·æ³¨æ˜å‡ºå¤„å“¦~ğŸ‘®â€<br/>
<!-- -->:::</p>]]></content:encoded>
        </item>
    </channel>
</rss>