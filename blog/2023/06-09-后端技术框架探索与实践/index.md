---
title: 后端技术框架探索与实践
authors: [czasg]
tags: [后端, 分享]
---

在现代web开发中，技术框架扮演着至关重要的角色。

因此，学习框架在开发过程中的作用，了解框架的演进，是每位后端开发者都应该具备的重要知识。

通过本章你可以学习并了解以下内容：
- 后端技术框架的重要性和作用
- 当前后端技术框架的发展趋势
- 常见后端技术框架
- 技术框架选择与评估
- 架构设计与技术框架结合
- 框架实践：Pywss

<!--truncate-->


### 后端技术框架的重要性和作用
后端技术框架提供一个结构化的框架，帮助开发人员构建高效、可靠和可扩展的后端应用程序。这些框架简化了开发过程，提高了效率，促进了代码的组织和可维护性。

在后端技术框架中，最常见的核心模块之一，就是对HTTP请求处理的封装。一次完整的HTTP请求过程包括：

- 接收请求
- 请求报文解析
- 业务处理
- 响应报文构建
- 发送响应

:::note HTTP报文

>GET / HTTP/1.1  
>Content-Type: text/html  
>Content-Length: 5  
>  
>hello  

>HTTP/1.1 200 OK  
>Content-Type: text/html  
>Content-Length: 5  
>  
>hello

响应报文

:::

除了对HTTP请求的支撑之外，技术框架还可以提供对开发流程的规范约束和最佳实践。

也就是说，框架能够简化技术人员对底层细节的处理，并提供开发过程中所需的工具、库和组件，以达到加速应用程序的开发的目的。

当前现代后端技术在

- 加速开发
- 提高效率
- 抽象底层细节
- 标准化架构设计和模式

### 当前后端技术框架的发展趋势

目前后端技术框架大致呈现以下发展趋势

- 单体架构
- 分布式架构
- 微服务架构
- 云原生架构
- 无服务器架构
- 跨平台/语言

其中最常见的就是单体架构，它适用于大部分场景，也是最简单的一种架构场景。

当然单体架构也是存在缺陷的，一旦依赖资源存在异常时，单体服务可能直接无法提供服务。可用性存在局限。

在此基础上衍生了分布式架构和多服务部署。用于避免单点问题。

随着业务的复杂度提高，像一些用户、登录、支付等服务都高度独立。于是从业务层面拆分出了微服务架构。

实现基础能力高度复用。

随着容器化的热潮，也彻底带火了云原生架构，为了避免自建机房的维护，现在基本核心业务都迁移到云服务中了。

包括后面的无服务架构，跨平台支撑等，都是一些比较前沿技术。


### 常见后端技术框架

这里主要介绍我接触过成的框架，包括有：

- Python：Flask、Django、Tornado、Fastapi
- Go：Gin、Iris、Kratos

这里主要介绍Flask、Django、Kratos

Flask基本是Python后端开发的入门框架，轻量易用。但是其知识点还是很多的，想要进阶，需要学会蓝图、线程本地数据等基础知识支撑。

他是一种Web应用，其底层时基于wsgi协议搭建的web应用。也就是说Flask应用并没有实现Http报文的解析，相反，他不负责处理请求，
它只负责处理业务逻辑。

这是Python中很特殊的设计，主要是因为Python中GIL全局解释器锁的存在，导致Python性能不足，正常情况下最多只能适用单核计算资源。
所以这种底层解析的能力，一般会有专业的服务提供，如：uswgi、unicon等

Django基本是Python后端开发的第一选择。因为它提供了大多数开箱即用的功能，并有成熟的社区。和Flask相比，它约束程度更高，
不像Flask想怎么开发就怎么开发。

在Django项目中基本都可以看到相似的目录结构和代码组织方式。这就是框架的魅力，显然Django的代码组织可能相对于Flask来说，
会更具风格。

最后在介绍下Kratos，这时B站开源的微服务框架，它基于ProtoBuffer支持Http和Grpc服务。其最出名的不是性能或者功能，
相反，在这些点上Kratos都不是很优秀，它给人的亮点其实是对DDD领域驱动设计的一种实践方式。还有就是依赖注入的设计方式，给人眼前一亮。

但是仅仅只有学习意义，通常来说，Kratos可能不是我们技术框架选型的最优解。


### 技术框架选择与评估

如何评估和选择一个技术框架呢，正常来讲，我会推荐团队使用什么，你就跟着用什么，以吧不需要引入新的技术框架。

除非在对应的技术领域有一定的深耕。

为什么这么说呢，因为对于个成熟团队来讲，突兀的引入新技术框架会带来一定的学习成本，包括新旧技术框架之间的兼容可能也会是一个问题。

如果确实需要重新选择技术框架，那么优先从业务角度考虑。

对于对外发布的重点项目，更推荐使用成熟的技术框架，如JavaSpring全家桶，在国内基本无敌。
一些高性能的云端项目，可以考虑使用Go，他在性能和内存占用方面，确实非常优秀。
对于一些生命周期非常短的需求，比如临时搭建一个服务，这种一般就比较随意了。
特别是对于有成熟脚手架的团队来说，基本无所谓，按照团队的技术栈来无脑使用即可。

### 架构设计与技术框架结合
其实技术框架并不能阻止垃圾代码，也无法避免屎山代码。

理论上这和开发者的个人习惯和代码水平直接挂钩。

唯一的建议就是多阅读优秀的代码。看看设计模式在代码中的应用场景，会有很深的收获。


以"依赖注入为例"

```python
class Repo:
    def get():
        pass

class Service:
    def get():
        repo = Repo()
        return repo.get()

class Interface:
    def get():
        service = Service()
        return service.get()
```

```python
class Repo:
    def get():
        pass

class Service:
    def __init__(self, repo: Repo):
        self.repo = repo

    def get():
        return self.repo.get()

class Interface:
    def __init__(self, service: Service):
        self.service = service

    def get():
        return self.service.get()
```

在上面代码中，第一个案例的代码简单易懂。在第二个案例中，初始化时将依赖引入，整理看上去会显得繁琐。
但是这会有一个好处，就是这个类型变得更加纯粹了，不在直接依赖非自身之外的模块。

这样有一个麻烦的点就是需要在类外部做很多初始化的功能。



### 框架实践
这里主要介绍自己的开源项目 Pywss

其特点：

1、支持依赖注入，无需手动初始化。

2、next设计




<br/>

:::info 👇👇👇
**本文作者:** Czasg
**版权声明:** 转载请注明出处哦~👮‍
:::
