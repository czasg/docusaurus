<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-office docs-doc-id-interview-guide/mysql题库">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">MySQL 题库 | Czasg</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://czasg.github.io/docusaurus/docs/office/interview-guide/mysql"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-office-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-office-current"><meta data-rh="true" property="og:title" content="MySQL 题库 | Czasg"><meta data-rh="true" name="description" content="收录MySQL常见面试题库"><meta data-rh="true" property="og:description" content="收录MySQL常见面试题库"><link data-rh="true" rel="icon" href="/docusaurus/img/dd.ico"><link data-rh="true" rel="canonical" href="https://czasg.github.io/docusaurus/docs/office/interview-guide/mysql"><link data-rh="true" rel="alternate" href="https://czasg.github.io/docusaurus/docs/office/interview-guide/mysql" hreflang="en"><link data-rh="true" rel="alternate" href="https://czasg.github.io/docusaurus/docs/office/interview-guide/mysql" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/docusaurus/blog/rss.xml" title="Czasg RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docusaurus/blog/atom.xml" title="Czasg Atom Feed"><link rel="stylesheet" href="/docusaurus/assets/css/styles.7702a43a.css">
<link rel="preload" href="/docusaurus/assets/js/runtime~main.a254cf84.js" as="script">
<link rel="preload" href="/docusaurus/assets/js/main.f08aa566.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docusaurus/"><div class="navbar__logo"><img src="/docusaurus/img/dd.ico" alt="Czasg" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docusaurus/img/dd.ico" alt="Czasg" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Czasg</b></a><a class="navbar__item navbar__link" href="/docusaurus/blog">博客</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">文档</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docusaurus/docs/develop">技术类</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docusaurus/docs/office">职场类</a></li><li><a class="dropdown__link" href="/docusaurus/docs/daily-life">生活类</a></li><li><a class="dropdown__link" href="/docusaurus/docs/book">书籍类</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">工具</a><ul class="dropdown__menu"><li><a href="https://chat.openai.com/chat" target="_blank" rel="noopener noreferrer" class="dropdown__link">ChatGPT<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://mholt.github.io/json-to-go" target="_blank" rel="noopener noreferrer" class="dropdown__link">Json2Go<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://crop-circle.imageonline.co/cn/" target="_blank" rel="noopener noreferrer" class="dropdown__link">圆图剪切<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.dute.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">在线工具<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/docusaurus/emoji">emoji</a></li></ul></div><a class="navbar__item navbar__link" href="/docusaurus/about-me">关于我</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/docusaurus/"><img src="/docusaurus/img/dd.ico" alt="Czasg" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docusaurus/img/dd.ico" alt="Czasg" class="themedImage_ToTc themedImage--dark_i4oU"><b>Czasg</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docusaurus/docs/office/">文档介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docusaurus/docs/office/interview-guide/">面试题库</a><button aria-label="Toggle the collapsible sidebar category &#x27;面试题库&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/docs/office/interview-guide/base-computer">基础题库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/docs/office/interview-guide/golang">Go 题库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/docs/office/interview-guide/python">Python 题库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docusaurus/docs/office/interview-guide/mysql">MySQL 题库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/docs/office/interview-guide/redis">Redis 题库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/docs/office/interview-guide/rabbitmq">RabbitMQ 题库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/docs/office/interview-guide/kafka">Kafka 题库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/docs/office/interview-guide/docker">Docker 题库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/docs/office/interview-guide/k8s">K8S 题库</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/docs/office/recruit-guide/">招聘指南</a><button aria-label="Toggle the collapsible sidebar category &#x27;招聘指南&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docusaurus/docs/office/interview-guide/"><span itemprop="name">面试题库</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MySQL 题库</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>MySQL 题库</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1mysql基础">1.MySQL基础<a href="#1mysql基础" class="hash-link" aria-label="Direct link to 1.MySQL基础" title="Direct link to 1.MySQL基础">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据库设计三大范式">数据库设计三大范式<a href="#数据库设计三大范式" class="hash-link" aria-label="Direct link to 数据库设计三大范式" title="Direct link to 数据库设计三大范式">​</a></h3><p>数据库设计的三大范式是一组设计原则。</p><ul><li>第一范式（1NF）：要求原子性<ul><li>举例：除了主键之外，其他字段数据一样，这种就不满足第一范式</li></ul></li><li>第二范式（2NF）：要求非主键字段与主键之间不允许部分依赖<ul><li>举例：主要针对联合主键场景，非主键字段仅依赖联合主键其中一个字段，这种就不满足第二范式</li></ul></li><li>第三范式（3NF）：要求非主键字段与主键之间不允许传递依赖<ul><li>举例：假设存在书籍和发版社两张表。因为书籍和发版社是存在关联的，现在把他们放在一张表里，那么就会存在传递依赖的关系。</li></ul></li></ul><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_Ktv7">不满足范式一，1和3不符合原子性</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> BookID </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Title                  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Author                </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> PublicationDate </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Publisher           </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token comment" style="color:rgb(106, 153, 85)">--------|------------------------|-----------------------|-----------------|---------------------|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;The Great Gatsby&quot;</span><span class="token plain">     </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;F. Scott Fitzgerald&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1925</span><span class="token plain">            </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Scribner&quot;</span><span class="token plain">          </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Pride and Prejudice&quot;</span><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Jane Austen&quot;</span><span class="token plain">         </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1813</span><span class="token plain">            </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Penguin Classics&quot;</span><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;The Great Gatsby&quot;</span><span class="token plain">     </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;F. Scott Fitzgerald&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1925</span><span class="token plain">            </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Scribner&quot;</span><span class="token plain">          </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_Ktv7">不满足范式二，一般存在于联合主键场景，导致部分依赖</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> StudentID </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> CourseID </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> CourseName         </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Teacher          </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token comment" style="color:rgb(106, 153, 85)">----------|----------|--------------------|-------------------|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">        </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">101</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Mathematics 101&quot;</span><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Mr. Smith&quot;</span><span class="token plain">       </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">        </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">102</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Physics 101&quot;</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Ms. Johnson&quot;</span><span class="token plain">     </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">        </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">101</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Mathematics 101&quot;</span><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Mr. Smith&quot;</span><span class="token plain">       </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">        </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">103</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Chemistry 101&quot;</span><span class="token plain">    </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Dr. Brown&quot;</span><span class="token plain">       </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_Ktv7">不满足范式三，存在传递依赖，应该拆表</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> BookID </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Title                  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Author                </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> PublicationDate </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Publisher           </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token comment" style="color:rgb(106, 153, 85)">--------|------------------------|-----------------------|-----------------|---------------------|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;The Great Gatsby&quot;</span><span class="token plain">     </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;F. Scott Fitzgerald&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1925</span><span class="token plain">            </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Scribner&quot;</span><span class="token plain">          </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Pride and Prejudice&quot;</span><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Jane Austen&quot;</span><span class="token plain">         </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1813</span><span class="token plain">            </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Penguin Classics&quot;</span><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain">      </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;The Great Gatsby&quot;</span><span class="token plain">     </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;F. Scott Fitzgerald&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1925</span><span class="token plain">            </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Scribner&quot;</span><span class="token plain">          </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dmlddl">DML、DDL<a href="#dmlddl" class="hash-link" aria-label="Direct link to DML、DDL" title="Direct link to DML、DDL">​</a></h3><p>DML是数据库操作语言。常指对数据的管理操作，常见有增删改查操作，比如：SELECT、INSERT、UPDATE、DELETE<br>
<!-- -->DDL是数据库定义语言。常指数据库结构的操作。比如：ALERT、TRUNCATE</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="服务层组成">服务层组成<a href="#服务层组成" class="hash-link" aria-label="Direct link to 服务层组成" title="Direct link to 服务层组成">​</a></h3><ul><li>连接器：负责建立用户连接，初始化权限，管理连接</li><li>查询缓存</li><li>分析器：词法解析</li><li>优化器：基于索引所化查询</li><li>执行器：调用引擎层接口操作数据</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="一条sql的执行过程">一条SQL的执行过程<a href="#一条sql的执行过程" class="hash-link" aria-label="Direct link to 一条SQL的执行过程" title="Direct link to 一条SQL的执行过程">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="查询语句执行过程">查询语句执行过程：<a href="#查询语句执行过程" class="hash-link" aria-label="Direct link to 查询语句执行过程：" title="Direct link to 查询语句执行过程：">​</a></h4><ul><li>建立连接：MySQL 连接器负责建立用户连接，包括初始化用户权限等基础信息。</li><li>查询缓存：对于已经存在缓存的查询语句，MySQL 会直接返回缓存结果。</li><li>语法分析：MySQL 会对 SQL 进行解析并检查是否存在语法错误。</li><li>查询优化：一条 SQL 的执行策略是多样的，比如可以走全表扫描，或者走某个索引等。
此处的查询优化就是根据表的大小、索引等信息，再结合 SQL 的查询条件，综合选择最优查询方案。</li><li>执行语句：MySQL 的数据操作是基于存储引擎实现的。此处的执行是调用存储引擎接口实现。</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="更新语句执行过程">更新语句执行过程：<a href="#更新语句执行过程" class="hash-link" aria-label="Direct link to 更新语句执行过程：" title="Direct link to 更新语句执行过程：">​</a></h4><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2mysql存储引擎">2.MySQL存储引擎<a href="#2mysql存储引擎" class="hash-link" aria-label="Direct link to 2.MySQL存储引擎" title="Direct link to 2.MySQL存储引擎">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="介绍下常见的存储引擎">介绍下常见的存储引擎<a href="#介绍下常见的存储引擎" class="hash-link" aria-label="Direct link to 介绍下常见的存储引擎" title="Direct link to 介绍下常见的存储引擎">​</a></h3><p>MySQL 是一个开源关系型数据库管理系统，支持多种不同的存储引擎。</p><p>存储引擎是 MySQL 用于管理数据的基础组件，它们负责处理 SQL 语句，包括读取和写入数据等操作。
常见的存储引擎有：</p><ul><li>InnoDB：InnoDB 是 MySQL 默认的存储引擎，它支持事务、外键和行级锁等特性。</li><li>MyISAM：MyISAM 是 MySQL 最古老的存储引擎之一，不支持事务和行级锁，这也是它被 InnoDB 取代的很大一部分原因之一。
但它非常适合用于处理大量的读取操作，例如数据仓库和日志文件等。</li><li>Memory：Memory 存储引擎将内存存储引擎，优点是速度非常快，缺点就是数据是非持久的。</li></ul><hr><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="介绍下innodb与myisam区别">介绍下InnoDB与MyISAM区别<a href="#介绍下innodb与myisam区别" class="hash-link" aria-label="Direct link to 介绍下InnoDB与MyISAM区别" title="Direct link to 介绍下InnoDB与MyISAM区别">​</a></h3><p>InnoDB和MyISAM是两个常用的存储引擎，用于MySQL数据库管理系统，它们在功能、性能和适用场景上有一些重要的区别。以下是它们之间的主要区别：</p><ol><li><p><strong>事务支持：</strong>InnoDB支持事务（ACID属性），MyISAM不支持事务</p></li><li><p><strong>锁机制：</strong>InnoDB使用行级锁（row-level locking），MyISAM使用表级锁（table-level locking）</p></li><li><p><strong>外键支持：</strong></p><ul><li>InnoDB支持外键完整性约束，可以定义外键关系，确保数据的完整性。</li><li>MyISAM不支持外键，不能定义外键关系。</li></ul></li><li><p><strong>崩溃恢复：</strong></p><ul><li>InnoDB支持崩溃恢复，具有事务日志和事务回滚功能，可以更好地处理数据库崩溃时的数据完整性。</li><li>MyISAM不具备崩溃恢复功能，容易在崩溃时丢失数据。</li></ul></li><li><p><strong>空间和性能：</strong></p><ul><li>InnoDB通常需要更多的磁盘空间来存储数据，因为它维护额外的事务日志和索引结构。</li><li>MyISAM在一些情况下可能在性能上表现更好，特别是在只读操作较多的情况下。</li></ul></li></ol><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3mysql事务">3.MySQL事务<a href="#3mysql事务" class="hash-link" aria-label="Direct link to 3.MySQL事务" title="Direct link to 3.MySQL事务">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="什么是事务">什么是事务<a href="#什么是事务" class="hash-link" aria-label="Direct link to 什么是事务" title="Direct link to 什么是事务">​</a></h3><p>事务是一组数据库操作的逻辑单元。这些操作要么全部成功，要么全部失败。因此它具有ACID属性：</p><ol><li><p><strong>原子性（Atomicity）</strong>：事务是原子的，意味着它要么完全执行，要么不执行。如果事务的任何部分失败，整个事务将被回滚，数据库将恢复到事务开始之前的状态，以确保数据的一致性。</p></li><li><p><strong>一致性（Consistency）</strong>：事务的执行将数据库从一个一致状态转移到另一个一致状态。这意味着事务的执行不会破坏数据库的完整性约束或数据关系。</p></li><li><p><strong>隔离性（Isolation）</strong>：每个事务应该在不受其他事务干扰的情况下执行，即使多个事务同时运行也不会相互干扰。这意味着事务之间应该是相互隔离的，以防止数据冲突。</p></li><li><p><strong>持久性（Durability）</strong>：一旦事务成功提交，其结果应该是永久性的，并且在系统故障或重启后仍然保持。这要求数据库将事务的变更持久地保存在存储设备上，以确保数据的持久性。</p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="事务隔离级别">事务隔离级别<a href="#事务隔离级别" class="hash-link" aria-label="Direct link to 事务隔离级别" title="Direct link to 事务隔离级别">​</a></h3><p>MySQL 是一个关系型数据库管理系统，它支持多个事务之间的并发执行。因此需要保障事务之间的隔离性和数据一致性。</p><p>MySQL 提供了四个事务隔离级别，它们分别是：</p><ul><li>READ UNCOMMITTED（读未提交）：最低级别的隔离级别。事务可以读取另一个事务尚未提交的数据。在此隔离级别下，<strong>会存在脏读、不可重复读和幻读</strong>等问题。</li><li>READ COMMITTED（读已提交）：默认的隔离级别。事务只能读取另一个已提交的事务的数据。在此隔离级别下，解决了脏读的问题，<strong>但仍然存在不可重复读、幻读</strong>的问题。</li><li>REPEATABLE READ（可重复读）：事务开始时读取的数据集合将保持不变，即使其他事务对这些数据进行了修改或插入操作，也不会影响该事务。这种隔离级别解决了不可重复读的问题，<strong>但是仍然存在幻读</strong>问题。</li><li>SERIALIZABLE（序列化）：最高级别的隔离级别，多个事务之间顺序执行。在此隔离级别下，事务之间不会存在冲突，但会牺牲性能。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="什么是脏读">什么是脏读<a href="#什么是脏读" class="hash-link" aria-label="Direct link to 什么是脏读" title="Direct link to 什么是脏读">​</a></h3><p>当一个事务可以读取另一个事务尚未提交的数据，而另一个事务随后被回滚，那么当前事务读取到的数据就是无效的。</p><p>这类现象被称之为<strong>脏读（Dirty read）</strong>，因为它读到了脏数据。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="什么是不可重复读">什么是不可重复读<a href="#什么是不可重复读" class="hash-link" aria-label="Direct link to 什么是不可重复读" title="Direct link to 什么是不可重复读">​</a></h3><p><strong>不可重复读</strong>是指，当一个事务，在某个时间段内，多次读取同一行数据，出现的数据不一致的场景。</p><p>不可重复读是数据库隔离级别中的一种问题，常在读未提交、读已提交隔离级别中发生。</p><p>不可重复读与幻读的区别在于，不可重复读关注的是同一行数据在一个事务内的两次读取之间是否一致，
而幻读关注的是两次查询的结果集的行数是否一致。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="什么是幻读">什么是幻读<a href="#什么是幻读" class="hash-link" aria-label="Direct link to 什么是幻读" title="Direct link to 什么是幻读">​</a></h3><p><strong>幻读</strong>是指，当一个事务中，在某个时间段内，多次执行同一个范围查询结果集时，出现的数据不一致的场景。</p><p>幻读是数据库隔离级别中的一种问题，常发生于范围查询场景。在可重复读隔离级别下是比较常见的。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="如何避免幻读">如何避免幻读<a href="#如何避免幻读" class="hash-link" aria-label="Direct link to 如何避免幻读" title="Direct link to 如何避免幻读">​</a></h4><ol><li>使用更严格的序列化事务隔离级别。但会带来较大的性能损耗。</li><li>使用行锁和间隙锁。通过在SQL语句中使用 <code>FOR UPDATE</code> 实现。<ul><li><code>FOR UPDATE NOWAIT</code>：如果无法获得锁，立即返回而不是等待</li><li><code>FOR UPDATE SKIP LOCKED</code>：如果无法获得锁，跳过而不是等待</li></ul></li><li>在应用层实现乐观锁，每次执行语句时去检查一遍。</li></ol><hr><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mvcc">MVCC<a href="#mvcc" class="hash-link" aria-label="Direct link to MVCC" title="Direct link to MVCC">​</a></h3><p>多版本并发控制（MVCC）是一种数据库事务并发控制的机制，其实现原理主要涉及<strong>版本号的管理</strong>，
以及对数据的<strong>读取和写入时的一致性处理</strong>（基于ReadView决定事务可以看到那些数据版本）。</p><p>以下是MySQL的MVCC实现原理的主要步骤：</p><ol><li><p><strong>版本号分配：</strong> 每个事务都被分配一个唯一的事务标识（Transaction ID）。对于每个被修改的数据行，都会为其分配一个版本号，通常是事务的ID。这个版本号会标记数据行的状态，指示数据行的修改历史。</p></li><li><p><strong>Read View：</strong> 在启动事务时，会生成一个Read View，包含当前事务的事务ID。Read View决定了事务能够看到哪些数据版本。Read View的生成可能包括一些额外的信息，例如事务启动时的系统版本号。</p></li><li><p><strong>Read操作：</strong> 当一个事务执行读操作时，系统会使用Read View来判断当前事务能够看到哪些数据版本。只有那些版本号早于或等于Read View的数据版本才能被当前事务读取。这确保了事务读取的数据是一致的，不受其他并发事务修改的影响。</p></li><li><p><strong>Write操作：</strong> 当一个事务执行写操作时，会在数据行上创建一个新的版本。新版本的版本号是事务的ID。原始数据行的版本号被更新为新版本的版本号。这样，新版本的数据行对于新的读操作是可见的，而对于旧的Read View是不可见的。</p></li><li><p><strong>回滚和垃圾回收：</strong> 当一个事务被回滚时，相关的修改可以被丢弃，不会影响其他事务。定期执行垃圾回收操作来删除不再需要的旧版本数据，以释放存储空间。</p></li></ol><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mysql索引">MySQL索引<a href="#mysql索引" class="hash-link" aria-label="Direct link to MySQL索引" title="Direct link to MySQL索引">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="什么是索引">什么是索引<a href="#什么是索引" class="hash-link" aria-label="Direct link to 什么是索引" title="Direct link to 什么是索引">​</a></h3><p>索引是一种用于提高数据库查询效率的数据结构。类似于书籍的目录一样，索引可以让你不用扫描全表，而是通过索引字段，快速定位到特定的数据行。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="索引的优缺点">索引的优缺点<a href="#索引的优缺点" class="hash-link" aria-label="Direct link to 索引的优缺点" title="Direct link to 索引的优缺点">​</a></h3><p><strong>优点</strong></p><ul><li>提高数据检索效率</li><li>提高排序效率</li></ul><p><strong>缺点</strong></p><ul><li>占用存储空间</li><li>降低插入、更新、删除的速度</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="那些场景试合使用索引">那些场景试合使用索引<a href="#那些场景试合使用索引" class="hash-link" aria-label="Direct link to 那些场景试合使用索引" title="Direct link to 那些场景试合使用索引">​</a></h3><p>以下场景试合使用索引：</p><ul><li>查询频率高</li><li>唯一性好</li><li>更新频率低</li></ul><p>相反，如果查询频率低，唯一性不好、更新频率高，那么就不适用使用索引。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="索引的类型">索引的类型<a href="#索引的类型" class="hash-link" aria-label="Direct link to 索引的类型" title="Direct link to 索引的类型">​</a></h3><p>MySQL支持多种类型的索引，以提高查询性能和加速数据检索。以下是一些常见的MySQL索引类型：</p><ol><li><strong>B-树索引（B-Tree Index）：</strong> B-树索引是最常见的索引类型，在大多数情况下都可以满足需求。它适用于<strong>精确匹配、范围查询、排序操作等</strong>。</li><li><strong>哈希索引（Hash Index）：</strong> 哈希索引将索引键的值经过哈希函数计算后存储在索引中，用于加速等值查询。它对于<strong>等值查询</strong>非常高效，但<strong>不支持范围查询或排序操作</strong>。</li><li><strong>复合索引（Composite Index）：</strong> 复合索引是包含多个列的索引。它可以用于<strong>加速多列查询、减少索引数量</strong>，但要遵循最左前缀原则。</li><li><strong>前缀索引（Prefix Index）：</strong> 前缀索引是对列值的前缀进行索引，而不是整个值。它可以<strong>用于节省索引存储空间和加速检索</strong>。前缀索引适用于较长的字符串列。</li><li><strong>外键索引（Foreign Key Index）：</strong> 外键索引用于连接不同表格之间的关系。它通常与外键约束一起使用，以<strong>确保数据完整性</strong>。</li><li><strong>唯一索引（Unique Index）：</strong> 唯一索引要求索引列的值在表中是唯一的，用于<strong>强制数据的唯一性</strong>。它适用于任何数据类型。</li><li><strong>主键索引（Primary Key Index）：</strong> 主键索引是唯一索引的一种，<strong>通常用于标识表中的每一行</strong>。它确保每行都<strong>具有唯一</strong>的主键值。</li><li><strong>全文索引（Full-Text Index）：</strong> 全文索引用于对文本数据进行全文搜索。它允许模糊匹配、词干搜索和布尔搜索。全文索引适用于TEXT和VARCHAR列。</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="二叉树b-tree和btree区别">二叉树、B-Tree和B+Tree区别<a href="#二叉树b-tree和btree区别" class="hash-link" aria-label="Direct link to 二叉树、B-Tree和B+Tree区别" title="Direct link to 二叉树、B-Tree和B+Tree区别">​</a></h3><p>二叉树是每个节点最多有两个子节点的树结构。</p><p>其中，二叉查找树，是在树结构的基础上。定义了左子树节点小于父树节点小于右子树节点。</p><p>B-Tree和B+Tree都可以看作一种特殊的多叉查找树。其中B-Tree也叫平衡树、而B+Tree则是B-Tree的一种变种。</p><p>B-Tree和B+Tree在节点<strong>存储方式</strong>和<strong>连接方式</strong>上有一定的区别：</p><p><strong>存储方式：</strong></p><ul><li>B-Tree：非叶子节点和叶子节点既存储键值，也存储实际的数据</li><li>B+Tree：非叶子节点存储键值，叶子节点上存储实际数据</li></ul><p><strong>连接方式：</strong></p><ul><li>B-Tree：各节点通过指针进行连接</li><li>B+Tree：各节点通过指针进行连接，此外，叶子节点是一个有序链表。因此，B+Tree在范围查询和排序方面有更强的优势</li></ul><p>B-Tree更适合随机访问的场景，B+Tree更适合范围查询、顺序遍历、排序等场景。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="聚簇索引和非聚簇索引">聚簇索引和非聚簇索引<a href="#聚簇索引和非聚簇索引" class="hash-link" aria-label="Direct link to 聚簇索引和非聚簇索引" title="Direct link to 聚簇索引和非聚簇索引">​</a></h3><p>聚簇索引，其叶子节点存储的是真实数据行。非聚簇索引，其叶子节点存储的是指向真实数据行的地址。</p><p>它们是更大的概念，在MySQL中，主键索引通常是聚簇索引，普通的索引通常是非聚簇索引。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="为什么推荐使用自增主键作为索引">为什么推荐使用自增主键作为索引<a href="#为什么推荐使用自增主键作为索引" class="hash-link" aria-label="Direct link to 为什么推荐使用自增主键作为索引" title="Direct link to 为什么推荐使用自增主键作为索引">​</a></h3><p>使用自增主键作为索引是一种常见的索引所化。它使得存储更加有序，这可以减少索引碎片，提高空间利用率，从而提高查询效率。
此外，有序的数据也会提高插入效率。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="为什么-mysql-的自增主键不连续">为什么 MySQL 的自增主键不连续<a href="#为什么-mysql-的自增主键不连续" class="hash-link" aria-label="Direct link to 为什么 MySQL 的自增主键不连续" title="Direct link to 为什么 MySQL 的自增主键不连续">​</a></h3><p>正常情况下自增主键是严格递增的。但是在一些场景下可能表现出不连续：</p><ul><li>事务回滚</li><li>数据删除</li></ul><p>以上场景下，自增主键计数器并不会减少</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="如何理解块索引">如何理解块索引<a href="#如何理解块索引" class="hash-link" aria-label="Direct link to 如何理解块索引" title="Direct link to 如何理解块索引">​</a></h3><p>通常来说，块索引（Block Index）不是一个独立的索引类型，而是一个较低级别的概念，
用于描述数据库引擎内部索引结构的存储方式。</p><p>但在PostgreSQL中，块索引是一个高级特性。
它通常用于特定类型的应用场景，特别是那些需要处理大量块级别数据的场景，例如时间序列数据库或列式数据库。
它支持以下特性：</p><ol><li><p><strong>范围查询（Range Queries）</strong>：块索引可用于支持范围查询，例如查找某个范围内的数据块。这对于处理时间序列数据等应用非常有用。</p></li><li><p><strong>块级别的检索</strong>：块索引直接在数据块级别存储索引信息，从而可以加速块级别的检索，而不是单个行级别的检索。</p></li><li><p><strong>块合并和块分割</strong>：块索引对于块合并（Block Merging）和块分割（Block Splitting）等操作非常高效，这些操作通常用于数据块的管理。</p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="索引覆盖索引下推">索引覆盖、索引下推<a href="#索引覆盖索引下推" class="hash-link" aria-label="Direct link to 索引覆盖、索引下推" title="Direct link to 索引覆盖、索引下推">​</a></h3><ul><li><strong>索引覆盖</strong>：就是查询的值已经存在于索引中了，那么就可以直接返回，不需要再回表查询一次。</li><li><strong>索引下推</strong>：就是过滤的字段存在于索引中，那么就可以通过索引字段直接过滤，从而减少回表次数。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="主键和外键的区别">主键和外键的区别<a href="#主键和外键的区别" class="hash-link" aria-label="Direct link to 主键和外键的区别" title="Direct link to 主键和外键的区别">​</a></h3><p>主键可以作为每一行数据的唯一性标识。
外键则是用于维护数据完整性和建立表格之间关系的一种强约束。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="最左前缀原则">最左前缀原则<a href="#最左前缀原则" class="hash-link" aria-label="Direct link to 最左前缀原则" title="Direct link to 最左前缀原则">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="无法命中索引的情况">无法命中索引的情况<a href="#无法命中索引的情况" class="hash-link" aria-label="Direct link to 无法命中索引的情况" title="Direct link to 无法命中索引的情况">​</a></h3><ol><li>查询条件没有使用索引字段</li><li>使用了函数，破坏了索引的有序性</li><li>发生了隐式类型转化、隐式编码转化，类似于套上了一个转化函数</li><li>查询优化器判定不使用索引<ul><li>对非索引字段使用了 <code>ORDER BY</code> 导致优化器判定走全表扫描</li><li>数据表高频增删改，数据库统计信息更新不及时，导致优化器判定异常</li></ul></li></ol><p>对于这种索引失效的场景，可以多使用 <code>EXPLAIN</code> 分析下。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="读写分离和分库分表">读写分离和分库分表<a href="#读写分离和分库分表" class="hash-link" aria-label="Direct link to 读写分离和分库分表" title="Direct link to 读写分离和分库分表">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="char和varchar区别">char和varchar区别<a href="#char和varchar区别" class="hash-link" aria-label="Direct link to char和varchar区别" title="Direct link to char和varchar区别">​</a></h3><ul><li>CHAR 是一种固定长度的字符数据类型</li><li>VARCHAR 是一种可变长度的字符数据类型</li></ul><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="日志">日志<a href="#日志" class="hash-link" aria-label="Direct link to 日志" title="Direct link to 日志">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="什么是-wal">什么是 WAL<a href="#什么是-wal" class="hash-link" aria-label="Direct link to 什么是 WAL" title="Direct link to 什么是 WAL">​</a></h3><p>WAL 是 Write-Ahead Logging 的简写。是一种预写日志技术。它主要有两个作用：</p><ul><li>crash safe（崩溃恢复）：它记录在数据库引擎层面发生的事务修改，当数据库发生故障时，可以通过重新 redo log 来将数据库恢复到一致的状态。</li><li>将随机写转化为顺序写：</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redo-log">redo log<a href="#redo-log" class="hash-link" aria-label="Direct link to redo log" title="Direct link to redo log">​</a></h3><p>Redo Log 是一种崩溃恢复的机制，它记录在数据库引擎层面发生的事务修改，当数据库发生故障时，可以通过重新 redo log 来将数据库恢复到一致的状态。</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_Ktv7">redo log 记录数据页的物理修改</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Transaction ID: 123</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">LSN: 456</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Page ID: employees_page_102</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Modification Type: UPDATE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Modified Data: </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  - Employee ID: 102</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  - New Salary: 20000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此外，redo log 将随机写转化为顺序写，具体过程如下：</p><ol><li>用户或应用程序发起一个事务。</li><li>在事务执行过程中，相关的数据修改操作首先被写入数据库表中，修改了内存中的数据。</li><li>同时，相应的 Redo Log 记录会被生成并写入 Redo Log 文件。这些记录包含了已经对数据表进行的物理修改。</li><li>当事务顺利完成，用户或应用程序执行提交操作。</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redo-log数据结构">redo log数据结构<a href="#redo-log数据结构" class="hash-link" aria-label="Direct link to redo log数据结构" title="Direct link to redo log数据结构">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redo-log刷盘机制">redo log刷盘机制<a href="#redo-log刷盘机制" class="hash-link" aria-label="Direct link to redo log刷盘机制" title="Direct link to redo log刷盘机制">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="binlog">binlog<a href="#binlog" class="hash-link" aria-label="Direct link to binlog" title="Direct link to binlog">​</a></h3><p>binlog 全称 Binary Log（二进制日志），是 MySQL 用于记录数据库更改的一种日志文件。
它包含了对数据库进行修改的所有信息，例如插入、更新、删除等操作。常用于<strong>主从复制</strong>和<strong>数据恢复</strong>。</p><ol><li><p><strong>记录格式：</strong></p><ul><li><strong>Statement</strong>：记录原生的SQL语句</li><li><strong>Row</strong>：记录具体修改的数据</li><li><strong>Mixed</strong>：基于Statement和Row，对于可能造成数据不一致的场景选择Row，否则选择Statement</li></ul></li><li><p><strong>作用：</strong></p><ul><li><strong>主从复制：</strong> Binlog是MySQL主从复制的核心。主数据库记录所有的变更，而从数据库通过读取binlog实现与主数据库的同步。</li><li><strong>数据恢复：</strong> Binlog可以用于恢复数据库到之前的状态，从而避免数据丢失。</li><li><strong>数据库备份：</strong> Binlog可以与数据库快照结合，用于创建一致性的备份。</li></ul></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="binlog日志格式">binlog日志格式<a href="#binlog日志格式" class="hash-link" aria-label="Direct link to binlog日志格式" title="Direct link to binlog日志格式">​</a></h3><p>binlog 主要有三种：</p><ol><li><p><strong>Statement-Based Replication (SBR):</strong></p><ul><li><strong>工作原理：</strong> 这种格式记录的是SQL语句，即在主服务器上执行的SQL语句。当在主服务器上执行一个SQL语句时，这个语句会被记录到binlog中，而从服务器会读取这个binlog，并在从服务器上执行相同的SQL语句。</li><li><strong>优点：</strong> 相对较小的日志文件大小，因为只需记录SQL语句。</li><li><strong>缺点：</strong> 由于是基于语句的，可能会出现在主从服务器上执行相同SQL语句时导致的不一致性问题。例如，由于数据不同步或随机因素导致的不同结果。</li></ul></li><li><p><strong>Row-Based Replication (RBR):</strong></p><ul><li><strong>工作原理：</strong> 这种格式记录的是对表中行的实际更改。当在主服务器上进行数据更改时，binlog会记录哪些行受到了影响，以及发生了什么变化。而从服务器会根据这些变化来修改对应的数据行。</li><li><strong>优点：</strong> 更加精确，可以确保主从服务器的数据一致性。</li><li><strong>缺点：</strong> 相对较大的日志文件大小，因为需要记录更详细的信息。</li></ul></li><li><p><strong>Mixed Format:</strong></p><ul><li><strong>工作原理：</strong> 这是SBR和RBR的混合格式。MySQL会根据执行的具体操作选择使用SBR还是RBR。</li><li><strong>优点：</strong> 兼顾了SBR和RBR的优点，既可以减小日志文件大小，又可以保持数据的一致性。</li><li><strong>缺点：</strong> 需要更多的判断和逻辑来确定使用哪种格式，可能会增加一些复杂性。</li></ul></li></ol><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockTitle_Ktv7">statement 和 row 对比</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)">-- SQL语句</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">UPDATE</span><span class="token plain"> employees </span><span class="token keyword" style="color:rgb(86, 156, 214)">SET</span><span class="token plain"> salary </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> salary </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1.1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">WHERE</span><span class="token plain"> department_id </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">-- 对应的binlog记录（SBR）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">### UPDATE `employees` SET `salary` = `salary` * 1.1 WHERE `department_id` = 2;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">-- 对应的binlog记录（RBR）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">### UPDATE `employees` SET `salary` = 22000 WHERE `employee_id` = 101;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">### UPDATE `employees` SET `salary` = 19800 WHERE `employee_id` = 102;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">### UPDATE `employees` SET `salary` = 24200 WHERE `employee_id` = 103;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redolog和binlog的区别是什么">redolog和binlog的区别是什么<a href="#redolog和binlog的区别是什么" class="hash-link" aria-label="Direct link to redolog和binlog的区别是什么" title="Direct link to redolog和binlog的区别是什么">​</a></h3><p>在生效机制上：redolog 是 Innodb 独有的日志，而 binlog 是 server 层的，所有的存储引擎都有使用到；</p><p>存储结构上：binlog 大小达到上限或者 flush log 会生成一个新的文件，而 redolog 有固定大小只能循环利用；</p><p>数据内容上：redolog 记录了具体的数值，对某个页做了什么修改，binlog 记录的操作内容；</p><p>在功能机制上：binlog 日志没有 crash-safe 的能力，只能用于归档，而 redo log 有 crash-safe 能力；</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="undo-log">undo log<a href="#undo-log" class="hash-link" aria-label="Direct link to undo log" title="Direct link to undo log">​</a></h3><p>Undo Log（回滚日志）是数据库引擎实现事务及多版本并发控制的核心模块，它主要用于记录事务执行过程中对数据的修改，其主要作用包括：</p><ol><li><p><strong>事务回滚：</strong> Undo Log 记录了事务执行过程中数据修改（包括插入、更新、删除等操作）的前后状态。当事务需要回滚时，系统可以根据 Undo Log 的信息将数据恢复到事务开始之前的状态。</p></li><li><p><strong>多版本并发控制（MVCC）：</strong> MySQL使用 Undo Log 来实现多版本并发控制。当一个事务开始时，它可能会读取某些数据，而其他事务可能在此之后修改了这些数据。Undo Log 记录了事务开始时数据的版本，从而支持读取一致性的查询。</p></li><li><p><strong>事务的隔离级别：</strong> Undo Log 也用于支持事务的隔离级别，例如可重复读隔离级别。通过保存事务开始时的数据版本，可以确保在整个事务执行期间看到一致的数据视图。</p></li><li><p><strong>崩溃恢复：</strong> Undo Log 在数据库崩溃后，用于回滚未提交的事务，并确保数据库在崩溃后可以恢复到一致的状态。</p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="relay-log">relay log<a href="#relay-log" class="hash-link" aria-label="Direct link to relay log" title="Direct link to relay log">​</a></h3><p>Relay Log 也叫中转日志。在主从复制过程中，从库接收的binlog会被写入中转日志，然后从库会读取并执行中转日志。</p><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="缓存">缓存<a href="#缓存" class="hash-link" aria-label="Direct link to 缓存" title="Direct link to 缓存">​</a></h2><p>在MySQL中，有两个关键的缓存机制，它们分别是Buffer Pool（缓冲池）和Change Buffer（变更缓冲区）。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="buffer-pool">buffer pool<a href="#buffer-pool" class="hash-link" aria-label="Direct link to buffer pool" title="Direct link to buffer pool">​</a></h3><p><strong>Buffer Pool（缓冲池）：</strong></p><ul><li><strong>作用：</strong> 缓存数据页中的数据，<strong>提高读性能</strong>。</li><li><strong>工作原理：</strong> 当查询需要读取表或索引的数据时，MySQL首先检查缓冲池中是否存在相应的数据页。如果存在，就直接使用内存中的数据。如果不存在，就从磁盘读取，并在缓冲池中缓存起来，以便之后的访问。</li><li><strong>优势：</strong> 缓冲池提高了数据库的读取性能，减少了对磁盘的访问，特别是对于经常被查询的数据。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="change-buffer">change buffer<a href="#change-buffer" class="hash-link" aria-label="Direct link to change buffer" title="Direct link to change buffer">​</a></h3><p><strong>Change Buffer（变更缓冲区）：</strong></p><ul><li><strong>作用：</strong>记录对数据页的修改，<strong>减少随机读的性能消耗</strong>。</li><li><strong>工作原理：</strong>Change Buffer 主要用于在内存中没有找到数据页的情况下，将对表的修改缓冲下来。但如果数据页已经在缓冲池中，更新可能会直接应用于内存中的数据页，而不需要通过 Change Buffer。</li><li><strong>优势：</strong> 变更缓冲区的使用可以减少对表的直接修改，从而降低了写入时的磁盘I/O操作。这对于高写入负载的场景下特别有益。</li></ul><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="join">join<a href="#join" class="hash-link" aria-label="Direct link to join" title="Direct link to join">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="关联算法">关联算法<a href="#关联算法" class="hash-link" aria-label="Direct link to 关联算法" title="Direct link to 关联算法">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-嵌套循环连接nested-loop-join">1. 嵌套循环连接（Nested Loop Join）：<a href="#1-嵌套循环连接nested-loop-join" class="hash-link" aria-label="Direct link to 1. 嵌套循环连接（Nested Loop Join）：" title="Direct link to 1. 嵌套循环连接（Nested Loop Join）：">​</a></h4><p>嵌套循环连接是一种基本的JOIN算法，它使用嵌套循环遍历第一个表的每一行，并查找与之匹配的第二个表的行。这是一种简单但可能效率较低的算法，尤其是当其中一个表很大时。</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> table1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">JOIN</span><span class="token plain"> table2 </span><span class="token keyword" style="color:rgb(86, 156, 214)">ON</span><span class="token plain"> table1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> table2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-排序合并连接merge-join">2. 排序合并连接（Merge Join）：<a href="#2-排序合并连接merge-join" class="hash-link" aria-label="Direct link to 2. 排序合并连接（Merge Join）：" title="Direct link to 2. 排序合并连接（Merge Join）：">​</a></h4><p>排序合并连接算法首先对两个表按照连接列进行排序，然后通过类似归并排序的方式合并两个有序的表。这种算法对于连接列有索引的情况效果较好。</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> table1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">JOIN</span><span class="token plain"> table2 </span><span class="token keyword" style="color:rgb(86, 156, 214)">ON</span><span class="token plain"> table1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> table2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> table1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> table2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-哈希连接hash-join">3. 哈希连接（Hash Join）：<a href="#3-哈希连接hash-join" class="hash-link" aria-label="Direct link to 3. 哈希连接（Hash Join）：" title="Direct link to 3. 哈希连接（Hash Join）：">​</a></h4><p>哈希连接算法使用哈希表来存储一个表的连接列，并将另一个表的连接列与之进行匹配。这种算法适用于没有排序索引但内存足够容纳哈希表的情况。</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> table1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">JOIN</span><span class="token plain"> table2 </span><span class="token keyword" style="color:rgb(86, 156, 214)">ON</span><span class="token plain"> table1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> table2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-索引连接index-join">4. 索引连接（Index Join）：<a href="#4-索引连接index-join" class="hash-link" aria-label="Direct link to 4. 索引连接（Index Join）：" title="Direct link to 4. 索引连接（Index Join）：">​</a></h4><p>索引连接是一种特殊情况，其中一个表的连接列上有索引，而另一个表没有索引。在这种情况下，查询优化器可能选择使用索引连接，将带有索引的表的行映射到另一个表的行。</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> table1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">JOIN</span><span class="token plain"> table2 </span><span class="token keyword" style="color:rgb(86, 156, 214)">USE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">INDEX</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">index_name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">ON</span><span class="token plain"> table1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> table2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-自适应连接算法adaptive-join">5. 自适应连接算法（Adaptive Join）：<a href="#5-自适应连接算法adaptive-join" class="hash-link" aria-label="Direct link to 5. 自适应连接算法（Adaptive Join）：" title="Direct link to 5. 自适应连接算法（Adaptive Join）：">​</a></h4><p>MySQL 8.0引入了自适应连接算法，它允许优化器在查询执行过程中动态选择JOIN算法，根据实际情况选择最优的连接策略。这有助于在不同情况下获得更好的性能。</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> table1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">JOIN</span><span class="token plain"> table2 </span><span class="token keyword" style="color:rgb(86, 156, 214)">ON</span><span class="token plain"> table1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> table2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">column</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="优化场景">优化场景<a href="#优化场景" class="hash-link" aria-label="Direct link to 优化场景" title="Direct link to 优化场景">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="索引优化">索引优化<a href="#索引优化" class="hash-link" aria-label="Direct link to 索引优化" title="Direct link to 索引优化">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="为什么不使用长事务">为什么不使用长事务<a href="#为什么不使用长事务" class="hash-link" aria-label="Direct link to 为什么不使用长事务" title="Direct link to 为什么不使用长事务">​</a></h3><p>在用户层面，连接池容易爆。<br>
<!-- -->在数据库方面，尝长事务会长时间占据资源，容易导致死锁，回滚日志版本过长，影响其他事务执行效率。<br>
<!-- -->在主从同步方面，长事务会导致主从同步延迟增高。  </p><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="运维场景">运维场景<a href="#运维场景" class="hash-link" aria-label="Direct link to 运维场景" title="Direct link to 运维场景">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="选错索引">选错索引<a href="#选错索引" class="hash-link" aria-label="Direct link to 选错索引" title="Direct link to 选错索引">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="无法命中索引">无法命中索引<a href="#无法命中索引" class="hash-link" aria-label="Direct link to 无法命中索引" title="Direct link to 无法命中索引">​</a></h3><ul><li>索引字段使用了函数：因为函数会破坏索引的有序性，从而导致全表扫描。</li><li>隐式类型转化：比如查询字段为字符串，但实际查询条件使用的数字，这会导致在实际查询过程中的执行类型转化。</li><li>隐式编码转化：当两张表使用了不同类型的编码时，实际查询过程中会执行编码类型转化。</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="单次查询很慢">单次查询很慢<a href="#单次查询很慢" class="hash-link" aria-label="Direct link to 单次查询很慢" title="Direct link to 单次查询很慢">​</a></h3><ul><li>无索引：走全表扫描</li><li>有索引：<ul><li>没有正确命中索引</li><li>索引体积过大</li></ul></li><li>存在脏页，数据库需要先刷脏页</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="性能定期抖动">性能定期抖动<a href="#性能定期抖动" class="hash-link" aria-label="Direct link to 性能定期抖动" title="Direct link to 性能定期抖动">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="count会扫描全表">count(*)会扫描全表<a href="#count会扫描全表" class="hash-link" aria-label="Direct link to count(*)会扫描全表" title="Direct link to count(*)会扫描全表">​</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="删除表后空间不变">删除表后空间不变<a href="#删除表后空间不变" class="hash-link" aria-label="Direct link to 删除表后空间不变" title="Direct link to 删除表后空间不变">​</a></h3><p>以 InnoDB 为例，数据库引擎在删除数据并不会立即释放磁盘空间，而是将删除的数据标记为已删除。以便后续可以复用。</p><p>如果需要释放这些删除数据，需要执行 <code>OPTIMIZE TABLE</code> 重建表。其原理就是新建一张临时表实现替换。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="死锁">死锁<a href="#死锁" class="hash-link" aria-label="Direct link to 死锁" title="Direct link to 死锁">​</a></h3><p>在并发系统中，出现循环的资源依赖就会导致死锁。在数据库中，就是多个事务相互等待对方释放资源而导致死锁。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="如何避免死锁">如何避免死锁<a href="#如何避免死锁" class="hash-link" aria-label="Direct link to 如何避免死锁" title="Direct link to 如何避免死锁">​</a></h3><ol><li>设置事务超时<ul><li><code>SET SESSION innodb_lock_wait_timeout = 10;</code>：这个设置是会话级别的，只对当前会话有效</li><li><code>SET GLOBAL innodb_lock_wait_timeout = 10;</code>：这个设置是全局的</li></ul></li><li>使用死锁检测机制，他会引入一定性能消耗，当发生死锁时，会主动回滚其中一个事务。</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="主备延迟过大">主备延迟过大<a href="#主备延迟过大" class="hash-link" aria-label="Direct link to 主备延迟过大" title="Direct link to 主备延迟过大">​</a></h3><p>造成主备延迟过大的可能原因：</p><ol><li>备库服务器配置比主库低</li><li>备库读压力过大</li><li>存在大事务，导致延迟增大</li></ol><p>解决方案：</p><ol><li>升级备库服务器配置</li><li>一般备库是单线程回放binlog，当主库业务压力较大时，备库延迟不可避免会上升。这时备库也已启用并行复制。</li></ol><ul><li>按库并行</li><li>按表并行</li><li>按行并行</li></ul><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="名词解释">名词解释<a href="#名词解释" class="hash-link" aria-label="Direct link to 名词解释" title="Direct link to 名词解释">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="脏页">脏页<a href="#脏页" class="hash-link" aria-label="Direct link to 脏页" title="Direct link to 脏页">​</a></h3><p>脏页（Dirty Page）是指缓冲池中的页（Page）被修改过但尚未写回到磁盘的状态。
缓冲池是用于暂时存储数据库中的数据页的区域，以提高数据读取和写入的性能。
该页被称为“脏页”，因为它在内存中的内容与磁盘上的对应数据不同。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="主备延迟">主备延迟<a href="#主备延迟" class="hash-link" aria-label="Direct link to 主备延迟" title="Direct link to 主备延迟">​</a></h3><br><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="开放话题">开放话题<a href="#开放话题" class="hash-link" aria-label="Direct link to 开放话题" title="Direct link to 开放话题">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="列举一些你的数据库优化经验">列举一些你的数据库优化经验<a href="#列举一些你的数据库优化经验" class="hash-link" aria-label="Direct link to 列举一些你的数据库优化经验" title="Direct link to 列举一些你的数据库优化经验">​</a></h3><p>优化数据库，需要先知道数据库瓶颈在哪里。其实很多问题都可以通过升级数据库配置解决。</p><p>比如硬件方面可以升级SSD、升级服务器配置，软件方面可以调大整缓冲区、连接池等。在大多数普通场景中，这往往是最简单有效的方式。</p><p>在一些特殊场景，比如高并发、高查询、高写入等场景，这些特殊场景往往都需要从架构层面去解决根本问题。</p><p>数据库层的优化肯定是很重要的，但可能不是核心。</p><p>数据库优化的点其实很多：</p><p>第一个优化点就是SQL本身。我遇到过直接用SQL写业务的项目，洋洋洒洒仅100行的SQL，各种子查询，各种关联查询。正常情况下我肯是不会去碰它的，但让速度太慢，严重影响业务了。
我当时的做法就是拉通业务方，重新梳理清楚了需求，把业务逻辑放在代码里，尽量精简SQL。</p><p>第二个优化点就是索引。这种一般是按业务场景，去选择更合适的索引。<br>
<!-- -->对于一些范围查询、排序场景，可以考虑使用B+树索引。<br>
<!-- -->对于一些纯等值查询的场景，可以考虑使用哈希索引。<br>
<!-- -->对于一些高频的多列查询，可以考虑使用复合索引，通过索引覆盖减少回表次数从而提高查询性能，同时也可以减少索引数量和体积。<br>
<!-- -->对于一些长字符串的场景，可以适当考虑前缀索引。  </p><p>第三个优化其实就是我们常说的读写分离、分库分表。<br>
<!-- -->以分表来说，我遇到过一个url运营场景。运营数据具有延迟性。一天的数据量都是千万级。每天按时间建一张表，这张表是没有索引的。因为索引影响写入性能。
然后凌晨跑一个定时任务，把昨天的表建一个索引。</p><p>还有一个场景，也是我上一位领导留下来的。对MD5的优化。字符串长度是32，大小就是32字节。
但是，你把他转化16进制，它大小就只有16字节。而且完美解决了大小问题。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/czasg/docusaurus/edit/main/docs/office/interview-guide/7.mysql题库.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docusaurus/docs/office/interview-guide/python"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Python 题库</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docusaurus/docs/office/interview-guide/redis"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Redis 题库</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1mysql基础" class="table-of-contents__link toc-highlight">1.MySQL基础</a><ul><li><a href="#数据库设计三大范式" class="table-of-contents__link toc-highlight">数据库设计三大范式</a></li><li><a href="#dmlddl" class="table-of-contents__link toc-highlight">DML、DDL</a></li><li><a href="#服务层组成" class="table-of-contents__link toc-highlight">服务层组成</a></li><li><a href="#一条sql的执行过程" class="table-of-contents__link toc-highlight">一条SQL的执行过程</a></li></ul></li><li><a href="#2mysql存储引擎" class="table-of-contents__link toc-highlight">2.MySQL存储引擎</a><ul><li><a href="#介绍下常见的存储引擎" class="table-of-contents__link toc-highlight">介绍下常见的存储引擎</a></li><li><a href="#介绍下innodb与myisam区别" class="table-of-contents__link toc-highlight">介绍下InnoDB与MyISAM区别</a></li></ul></li><li><a href="#3mysql事务" class="table-of-contents__link toc-highlight">3.MySQL事务</a><ul><li><a href="#什么是事务" class="table-of-contents__link toc-highlight">什么是事务</a></li><li><a href="#事务隔离级别" class="table-of-contents__link toc-highlight">事务隔离级别</a></li><li><a href="#什么是脏读" class="table-of-contents__link toc-highlight">什么是脏读</a></li><li><a href="#什么是不可重复读" class="table-of-contents__link toc-highlight">什么是不可重复读</a></li><li><a href="#什么是幻读" class="table-of-contents__link toc-highlight">什么是幻读</a></li><li><a href="#mvcc" class="table-of-contents__link toc-highlight">MVCC</a></li></ul></li><li><a href="#mysql索引" class="table-of-contents__link toc-highlight">MySQL索引</a><ul><li><a href="#什么是索引" class="table-of-contents__link toc-highlight">什么是索引</a></li><li><a href="#索引的优缺点" class="table-of-contents__link toc-highlight">索引的优缺点</a></li><li><a href="#那些场景试合使用索引" class="table-of-contents__link toc-highlight">那些场景试合使用索引</a></li><li><a href="#索引的类型" class="table-of-contents__link toc-highlight">索引的类型</a></li><li><a href="#二叉树b-tree和btree区别" class="table-of-contents__link toc-highlight">二叉树、B-Tree和B+Tree区别</a></li><li><a href="#聚簇索引和非聚簇索引" class="table-of-contents__link toc-highlight">聚簇索引和非聚簇索引</a></li><li><a href="#为什么推荐使用自增主键作为索引" class="table-of-contents__link toc-highlight">为什么推荐使用自增主键作为索引</a></li><li><a href="#为什么-mysql-的自增主键不连续" class="table-of-contents__link toc-highlight">为什么 MySQL 的自增主键不连续</a></li><li><a href="#如何理解块索引" class="table-of-contents__link toc-highlight">如何理解块索引</a></li><li><a href="#索引覆盖索引下推" class="table-of-contents__link toc-highlight">索引覆盖、索引下推</a></li><li><a href="#主键和外键的区别" class="table-of-contents__link toc-highlight">主键和外键的区别</a></li><li><a href="#最左前缀原则" class="table-of-contents__link toc-highlight">最左前缀原则</a></li><li><a href="#无法命中索引的情况" class="table-of-contents__link toc-highlight">无法命中索引的情况</a></li><li><a href="#读写分离和分库分表" class="table-of-contents__link toc-highlight">读写分离和分库分表</a></li><li><a href="#char和varchar区别" class="table-of-contents__link toc-highlight">char和varchar区别</a></li></ul></li><li><a href="#日志" class="table-of-contents__link toc-highlight">日志</a><ul><li><a href="#什么是-wal" class="table-of-contents__link toc-highlight">什么是 WAL</a></li><li><a href="#redo-log" class="table-of-contents__link toc-highlight">redo log</a></li><li><a href="#redo-log数据结构" class="table-of-contents__link toc-highlight">redo log数据结构</a></li><li><a href="#redo-log刷盘机制" class="table-of-contents__link toc-highlight">redo log刷盘机制</a></li><li><a href="#binlog" class="table-of-contents__link toc-highlight">binlog</a></li><li><a href="#binlog日志格式" class="table-of-contents__link toc-highlight">binlog日志格式</a></li><li><a href="#redolog和binlog的区别是什么" class="table-of-contents__link toc-highlight">redolog和binlog的区别是什么</a></li><li><a href="#undo-log" class="table-of-contents__link toc-highlight">undo log</a></li><li><a href="#relay-log" class="table-of-contents__link toc-highlight">relay log</a></li></ul></li><li><a href="#缓存" class="table-of-contents__link toc-highlight">缓存</a><ul><li><a href="#buffer-pool" class="table-of-contents__link toc-highlight">buffer pool</a></li><li><a href="#change-buffer" class="table-of-contents__link toc-highlight">change buffer</a></li></ul></li><li><a href="#join" class="table-of-contents__link toc-highlight">join</a><ul><li><a href="#关联算法" class="table-of-contents__link toc-highlight">关联算法</a></li></ul></li><li><a href="#优化场景" class="table-of-contents__link toc-highlight">优化场景</a><ul><li><a href="#索引优化" class="table-of-contents__link toc-highlight">索引优化</a></li><li><a href="#为什么不使用长事务" class="table-of-contents__link toc-highlight">为什么不使用长事务</a></li></ul></li><li><a href="#运维场景" class="table-of-contents__link toc-highlight">运维场景</a><ul><li><a href="#选错索引" class="table-of-contents__link toc-highlight">选错索引</a></li><li><a href="#无法命中索引" class="table-of-contents__link toc-highlight">无法命中索引</a></li><li><a href="#单次查询很慢" class="table-of-contents__link toc-highlight">单次查询很慢</a></li><li><a href="#性能定期抖动" class="table-of-contents__link toc-highlight">性能定期抖动</a></li><li><a href="#count会扫描全表" class="table-of-contents__link toc-highlight">count(*)会扫描全表</a></li><li><a href="#删除表后空间不变" class="table-of-contents__link toc-highlight">删除表后空间不变</a></li><li><a href="#死锁" class="table-of-contents__link toc-highlight">死锁</a></li><li><a href="#如何避免死锁" class="table-of-contents__link toc-highlight">如何避免死锁</a></li><li><a href="#主备延迟过大" class="table-of-contents__link toc-highlight">主备延迟过大</a></li></ul></li><li><a href="#名词解释" class="table-of-contents__link toc-highlight">名词解释</a><ul><li><a href="#脏页" class="table-of-contents__link toc-highlight">脏页</a></li><li><a href="#主备延迟" class="table-of-contents__link toc-highlight">主备延迟</a></li></ul></li><li><a href="#开放话题" class="table-of-contents__link toc-highlight">开放话题</a><ul><li><a href="#列举一些你的数据库优化经验" class="table-of-contents__link toc-highlight">列举一些你的数据库优化经验</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Py开源项目</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/czasg/pywss" target="_blank" rel="noopener noreferrer" class="footer__link-item">Pywss<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/czasg/loggus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Loggus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Go开源项目</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/czasg/go-queue" target="_blank" rel="noopener noreferrer" class="footer__link-item">Go Queue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/czasg/go-env" target="_blank" rel="noopener noreferrer" class="footer__link-item">Go Env<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/czasg/go-set" target="_blank" rel="noopener noreferrer" class="footer__link-item">Go Set<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/czasg/gonal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gonal<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/czasg/snow" target="_blank" rel="noopener noreferrer" class="footer__link-item">Snow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">活跃社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/czasg" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.v2ex.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">V2EX<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">官方文档</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.python.org/zh-cn/3/library/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Py标准库<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Czasg's Site.</div></div></div></footer></div>
<script src="/docusaurus/assets/js/runtime~main.a254cf84.js"></script>
<script src="/docusaurus/assets/js/main.f08aa566.js"></script>
</body>
</html>