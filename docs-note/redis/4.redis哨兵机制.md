---
title: redis 哨兵机制
sidebar_label: redis哨兵机制
---

任何单点服务都存在风险，不可能做到绝对安全。
所以保证服务尽可能的不中断，是我们追求高可用的目标之一。

redis 支持主备多副本模式，用于解决单点故障问题。当主库发生故障时，从库可以转正，继续提供服务。   
这是 redis 高可用的一种方案，本文主要介绍 redis 基于哨兵机制，实现高可用。

## 哨兵机制
哨兵本质是一个运行在特殊模式下的 redis 进程。它的主要作用就是：**监控、选主、通知。**

一个完整的 redis 高可用集群，包含主库、备库、哨兵三类实例。    
当主库异常宕机后，哨兵会及时监控并发现异常，然后将备库升级为主库，从而继续提供服务。

![](./static/4.1.png)

#### 哨兵机制 - 监控
监控是指哨兵周期性的对所有主从实例发送 PING 指令，检测他们是否存活。   
如果从库没有在指定时间内响应请求，哨兵则将其标记未下线状态。

#### 哨兵机制 - 选主


#### 哨兵机制 - 通知



## 哨兵集群



