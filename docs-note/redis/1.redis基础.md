# redis 基础知识

##  redis 单线程理解
在 6.0 版本之前，redis 内部的网络IO和键值对的读写是在同一个线程中完成的。  
但类似数据持久化、主从同步等，都是多线程完成的。所以本质上，redis 并不是一个绝对的单线程服务。
而官方之所以这样描述，也只是因为他的核心逻辑都是单线程实现的，然后还能提供这么高的并发，整体听上去就很牛了。

在 6.0 版本之后，redis 在网络IO部分引入了多线程，而键值对的读写则还是由单线程完成。  

#### 为什么使用单线程？
多线程与单线程各有优势，要分不同的场景来看。一般常说的场景有两种：  
1、IO密集型。在此场景下，多线程将拥有更大的吞吐率。   
2、计算密集型。在此场景下，多线程存在一定的系统调度开销。   

但实际业务场景更复杂，特别是高并发场景下。

redis 采用单线程最主要的原因是**并发访问控制**问题。   
即在高并发场景下，多线程操作共享内存，需要引入锁机制来保证数据和内存安全，而单线程则不需要考虑这个。  
所以 redis 采用单线程可以很好的避免这个问题。

#### 为什么单线程也这么快？
在上面中我们也理解了，单线程避免了在高并发场景下引入锁机制的。这仅是算法方面。

redis 快还依赖于优秀的 数据结构 和 IO多路复用。

#### 这么快的redis也存在慢操作？
redis 的特点就是快，但是如果操作不当，也有可能影响一些慢操作。

## 常见数据类型与底层数据结构
常见的五种数据类型：
* string
* hash
* list
* set
* zset

其底层数据结构有简单动态字符串、双向链表、压缩列表、哈希表、跳表和整数数组。

还有其余类型：
* bitmap
* hyperloglog
* geo

